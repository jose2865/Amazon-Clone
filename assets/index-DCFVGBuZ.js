function OL(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function mE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var dv={exports:{}},vd={},hv={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MS;function NL(){if(MS)return je;MS=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function _(q){return q===null||typeof q!="object"?null:(q=g&&q[g]||q["@@iterator"],typeof q=="function"?q:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,R={};function A(q,ie,Te){this.props=q,this.context=ie,this.refs=R,this.updater=Te||T}A.prototype.isReactComponent={},A.prototype.setState=function(q,ie){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,ie,"setState")},A.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function V(){}V.prototype=A.prototype;function M(q,ie,Te){this.props=q,this.context=ie,this.refs=R,this.updater=Te||T}var L=M.prototype=new V;L.constructor=M,I(L,A.prototype),L.isPureReactComponent=!0;var B=Array.isArray,$=Object.prototype.hasOwnProperty,W={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function b(q,ie,Te){var ke,Ve={},$e=null,Qe=null;if(ie!=null)for(ke in ie.ref!==void 0&&(Qe=ie.ref),ie.key!==void 0&&($e=""+ie.key),ie)$.call(ie,ke)&&!D.hasOwnProperty(ke)&&(Ve[ke]=ie[ke]);var qe=arguments.length-2;if(qe===1)Ve.children=Te;else if(1<qe){for(var rt=Array(qe),vt=0;vt<qe;vt++)rt[vt]=arguments[vt+2];Ve.children=rt}if(q&&q.defaultProps)for(ke in qe=q.defaultProps,qe)Ve[ke]===void 0&&(Ve[ke]=qe[ke]);return{$$typeof:n,type:q,key:$e,ref:Qe,props:Ve,_owner:W.current}}function C(q,ie){return{$$typeof:n,type:q.type,key:ie,ref:q.ref,props:q.props,_owner:q._owner}}function E(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function x(q){var ie={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(Te){return ie[Te]})}var k=/\/+/g;function O(q,ie){return typeof q=="object"&&q!==null&&q.key!=null?x(""+q.key):ie.toString(36)}function X(q,ie,Te,ke,Ve){var $e=typeof q;($e==="undefined"||$e==="boolean")&&(q=null);var Qe=!1;if(q===null)Qe=!0;else switch($e){case"string":case"number":Qe=!0;break;case"object":switch(q.$$typeof){case n:case e:Qe=!0}}if(Qe)return Qe=q,Ve=Ve(Qe),q=ke===""?"."+O(Qe,0):ke,B(Ve)?(Te="",q!=null&&(Te=q.replace(k,"$&/")+"/"),X(Ve,ie,Te,"",function(vt){return vt})):Ve!=null&&(E(Ve)&&(Ve=C(Ve,Te+(!Ve.key||Qe&&Qe.key===Ve.key?"":(""+Ve.key).replace(k,"$&/")+"/")+q)),ie.push(Ve)),1;if(Qe=0,ke=ke===""?".":ke+":",B(q))for(var qe=0;qe<q.length;qe++){$e=q[qe];var rt=ke+O($e,qe);Qe+=X($e,ie,Te,rt,Ve)}else if(rt=_(q),typeof rt=="function")for(q=rt.call(q),qe=0;!($e=q.next()).done;)$e=$e.value,rt=ke+O($e,qe++),Qe+=X($e,ie,Te,rt,Ve);else if($e==="object")throw ie=String(q),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.");return Qe}function F(q,ie,Te){if(q==null)return q;var ke=[],Ve=0;return X(q,ke,"","",function($e){return ie.call(Te,$e,Ve++)}),ke}function me(q){if(q._status===-1){var ie=q._result;ie=ie(),ie.then(function(Te){(q._status===0||q._status===-1)&&(q._status=1,q._result=Te)},function(Te){(q._status===0||q._status===-1)&&(q._status=2,q._result=Te)}),q._status===-1&&(q._status=0,q._result=ie)}if(q._status===1)return q._result.default;throw q._result}var oe={current:null},Z={transition:null},pe={ReactCurrentDispatcher:oe,ReactCurrentBatchConfig:Z,ReactCurrentOwner:W};function he(){throw Error("act(...) is not supported in production builds of React.")}return je.Children={map:F,forEach:function(q,ie,Te){F(q,function(){ie.apply(this,arguments)},Te)},count:function(q){var ie=0;return F(q,function(){ie++}),ie},toArray:function(q){return F(q,function(ie){return ie})||[]},only:function(q){if(!E(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},je.Component=A,je.Fragment=t,je.Profiler=i,je.PureComponent=M,je.StrictMode=r,je.Suspense=d,je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,je.act=he,je.cloneElement=function(q,ie,Te){if(q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+q+".");var ke=I({},q.props),Ve=q.key,$e=q.ref,Qe=q._owner;if(ie!=null){if(ie.ref!==void 0&&($e=ie.ref,Qe=W.current),ie.key!==void 0&&(Ve=""+ie.key),q.type&&q.type.defaultProps)var qe=q.type.defaultProps;for(rt in ie)$.call(ie,rt)&&!D.hasOwnProperty(rt)&&(ke[rt]=ie[rt]===void 0&&qe!==void 0?qe[rt]:ie[rt])}var rt=arguments.length-2;if(rt===1)ke.children=Te;else if(1<rt){qe=Array(rt);for(var vt=0;vt<rt;vt++)qe[vt]=arguments[vt+2];ke.children=qe}return{$$typeof:n,type:q.type,key:Ve,ref:$e,props:ke,_owner:Qe}},je.createContext=function(q){return q={$$typeof:l,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},q.Provider={$$typeof:s,_context:q},q.Consumer=q},je.createElement=b,je.createFactory=function(q){var ie=b.bind(null,q);return ie.type=q,ie},je.createRef=function(){return{current:null}},je.forwardRef=function(q){return{$$typeof:u,render:q}},je.isValidElement=E,je.lazy=function(q){return{$$typeof:m,_payload:{_status:-1,_result:q},_init:me}},je.memo=function(q,ie){return{$$typeof:h,type:q,compare:ie===void 0?null:ie}},je.startTransition=function(q){var ie=Z.transition;Z.transition={};try{q()}finally{Z.transition=ie}},je.unstable_act=he,je.useCallback=function(q,ie){return oe.current.useCallback(q,ie)},je.useContext=function(q){return oe.current.useContext(q)},je.useDebugValue=function(){},je.useDeferredValue=function(q){return oe.current.useDeferredValue(q)},je.useEffect=function(q,ie){return oe.current.useEffect(q,ie)},je.useId=function(){return oe.current.useId()},je.useImperativeHandle=function(q,ie,Te){return oe.current.useImperativeHandle(q,ie,Te)},je.useInsertionEffect=function(q,ie){return oe.current.useInsertionEffect(q,ie)},je.useLayoutEffect=function(q,ie){return oe.current.useLayoutEffect(q,ie)},je.useMemo=function(q,ie){return oe.current.useMemo(q,ie)},je.useReducer=function(q,ie,Te){return oe.current.useReducer(q,ie,Te)},je.useRef=function(q){return oe.current.useRef(q)},je.useState=function(q){return oe.current.useState(q)},je.useSyncExternalStore=function(q,ie,Te){return oe.current.useSyncExternalStore(q,ie,Te)},je.useTransition=function(){return oe.current.useTransition()},je.version="18.3.1",je}var FS;function Ko(){return FS||(FS=1,hv.exports=NL()),hv.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var US;function DL(){if(US)return vd;US=1;var n=Ko(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,h){var m,g={},_=null,T=null;h!==void 0&&(_=""+h),d.key!==void 0&&(_=""+d.key),d.ref!==void 0&&(T=d.ref);for(m in d)r.call(d,m)&&!s.hasOwnProperty(m)&&(g[m]=d[m]);if(u&&u.defaultProps)for(m in d=u.defaultProps,d)g[m]===void 0&&(g[m]=d[m]);return{$$typeof:e,type:u,key:_,ref:T,props:g,_owner:i.current}}return vd.Fragment=t,vd.jsx=l,vd.jsxs=l,vd}var $S;function LL(){return $S||($S=1,dv.exports=DL()),dv.exports}var j=LL(),K=Ko();const Ke=mE(K),ew=OL({__proto__:null,default:Ke},[K]);var jp={},fv={exports:{}},er={},pv={exports:{}},mv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jS;function VL(){return jS||(jS=1,function(n){function e(Z,pe){var he=Z.length;Z.push(pe);e:for(;0<he;){var q=he-1>>>1,ie=Z[q];if(0<i(ie,pe))Z[q]=pe,Z[he]=ie,he=q;else break e}}function t(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var pe=Z[0],he=Z.pop();if(he!==pe){Z[0]=he;e:for(var q=0,ie=Z.length,Te=ie>>>1;q<Te;){var ke=2*(q+1)-1,Ve=Z[ke],$e=ke+1,Qe=Z[$e];if(0>i(Ve,he))$e<ie&&0>i(Qe,Ve)?(Z[q]=Qe,Z[$e]=he,q=$e):(Z[q]=Ve,Z[ke]=he,q=ke);else if($e<ie&&0>i(Qe,he))Z[q]=Qe,Z[$e]=he,q=$e;else break e}}return pe}function i(Z,pe){var he=Z.sortIndex-pe.sortIndex;return he!==0?he:Z.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var d=[],h=[],m=1,g=null,_=3,T=!1,I=!1,R=!1,A=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(Z){for(var pe=t(h);pe!==null;){if(pe.callback===null)r(h);else if(pe.startTime<=Z)r(h),pe.sortIndex=pe.expirationTime,e(d,pe);else break;pe=t(h)}}function B(Z){if(R=!1,L(Z),!I)if(t(d)!==null)I=!0,me($);else{var pe=t(h);pe!==null&&oe(B,pe.startTime-Z)}}function $(Z,pe){I=!1,R&&(R=!1,V(b),b=-1),T=!0;var he=_;try{for(L(pe),g=t(d);g!==null&&(!(g.expirationTime>pe)||Z&&!x());){var q=g.callback;if(typeof q=="function"){g.callback=null,_=g.priorityLevel;var ie=q(g.expirationTime<=pe);pe=n.unstable_now(),typeof ie=="function"?g.callback=ie:g===t(d)&&r(d),L(pe)}else r(d);g=t(d)}if(g!==null)var Te=!0;else{var ke=t(h);ke!==null&&oe(B,ke.startTime-pe),Te=!1}return Te}finally{g=null,_=he,T=!1}}var W=!1,D=null,b=-1,C=5,E=-1;function x(){return!(n.unstable_now()-E<C)}function k(){if(D!==null){var Z=n.unstable_now();E=Z;var pe=!0;try{pe=D(!0,Z)}finally{pe?O():(W=!1,D=null)}}else W=!1}var O;if(typeof M=="function")O=function(){M(k)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,F=X.port2;X.port1.onmessage=k,O=function(){F.postMessage(null)}}else O=function(){A(k,0)};function me(Z){D=Z,W||(W=!0,O())}function oe(Z,pe){b=A(function(){Z(n.unstable_now())},pe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_continueExecution=function(){I||T||(I=!0,me($))},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(Z){switch(_){case 1:case 2:case 3:var pe=3;break;default:pe=_}var he=_;_=pe;try{return Z()}finally{_=he}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Z,pe){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var he=_;_=Z;try{return pe()}finally{_=he}},n.unstable_scheduleCallback=function(Z,pe,he){var q=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?q+he:q):he=q,Z){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=he+ie,Z={id:m++,callback:pe,priorityLevel:Z,startTime:he,expirationTime:ie,sortIndex:-1},he>q?(Z.sortIndex=he,e(h,Z),t(d)===null&&Z===t(h)&&(R?(V(b),b=-1):R=!0,oe(B,he-q))):(Z.sortIndex=ie,e(d,Z),I||T||(I=!0,me($))),Z},n.unstable_shouldYield=x,n.unstable_wrapCallback=function(Z){var pe=_;return function(){var he=_;_=pe;try{return Z.apply(this,arguments)}finally{_=he}}}}(mv)),mv}var BS;function ML(){return BS||(BS=1,pv.exports=VL()),pv.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zS;function FL(){if(zS)return er;zS=1;var n=Ko(),e=ML();function t(o){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+o,c=1;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+o+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(o,a){l(o,a),l(o+"Capture",a)}function l(o,a){for(i[o]=a,o=0;o<a.length;o++)r.add(a[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},g={};function _(o){return d.call(g,o)?!0:d.call(m,o)?!1:h.test(o)?g[o]=!0:(m[o]=!0,!1)}function T(o,a,c,p){if(c!==null&&c.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return p?!1:c!==null?!c.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function I(o,a,c,p){if(a===null||typeof a>"u"||T(o,a,c,p))return!0;if(p)return!1;if(c!==null)switch(c.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function R(o,a,c,p,y,w,P){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=p,this.attributeNamespace=y,this.mustUseProperty=c,this.propertyName=o,this.type=a,this.sanitizeURL=w,this.removeEmptyString=P}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){A[o]=new R(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var a=o[0];A[a]=new R(a,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){A[o]=new R(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){A[o]=new R(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){A[o]=new R(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){A[o]=new R(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){A[o]=new R(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){A[o]=new R(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){A[o]=new R(o,5,!1,o.toLowerCase(),null,!1,!1)});var V=/[\-:]([a-z])/g;function M(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var a=o.replace(V,M);A[a]=new R(a,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var a=o.replace(V,M);A[a]=new R(a,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var a=o.replace(V,M);A[a]=new R(a,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){A[o]=new R(o,1,!1,o.toLowerCase(),null,!1,!1)}),A.xlinkHref=new R("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){A[o]=new R(o,1,!1,o.toLowerCase(),null,!0,!0)});function L(o,a,c,p){var y=A.hasOwnProperty(a)?A[a]:null;(y!==null?y.type!==0:p||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(I(a,c,y,p)&&(c=null),p||y===null?_(a)&&(c===null?o.removeAttribute(a):o.setAttribute(a,""+c)):y.mustUseProperty?o[y.propertyName]=c===null?y.type===3?!1:"":c:(a=y.attributeName,p=y.attributeNamespace,c===null?o.removeAttribute(a):(y=y.type,c=y===3||y===4&&c===!0?"":""+c,p?o.setAttributeNS(p,a,c):o.setAttribute(a,c))))}var B=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$=Symbol.for("react.element"),W=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),x=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),me=Symbol.for("react.lazy"),oe=Symbol.for("react.offscreen"),Z=Symbol.iterator;function pe(o){return o===null||typeof o!="object"?null:(o=Z&&o[Z]||o["@@iterator"],typeof o=="function"?o:null)}var he=Object.assign,q;function ie(o){if(q===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);q=a&&a[1]||""}return`
`+q+o}var Te=!1;function ke(o,a){if(!o||Te)return"";Te=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(ee){var p=ee}Reflect.construct(o,[],a)}else{try{a.call()}catch(ee){p=ee}o.call(a.prototype)}else{try{throw Error()}catch(ee){p=ee}o()}}catch(ee){if(ee&&p&&typeof ee.stack=="string"){for(var y=ee.stack.split(`
`),w=p.stack.split(`
`),P=y.length-1,U=w.length-1;1<=P&&0<=U&&y[P]!==w[U];)U--;for(;1<=P&&0<=U;P--,U--)if(y[P]!==w[U]){if(P!==1||U!==1)do if(P--,U--,0>U||y[P]!==w[U]){var z=`
`+y[P].replace(" at new "," at ");return o.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",o.displayName)),z}while(1<=P&&0<=U);break}}}finally{Te=!1,Error.prepareStackTrace=c}return(o=o?o.displayName||o.name:"")?ie(o):""}function Ve(o){switch(o.tag){case 5:return ie(o.type);case 16:return ie("Lazy");case 13:return ie("Suspense");case 19:return ie("SuspenseList");case 0:case 2:case 15:return o=ke(o.type,!1),o;case 11:return o=ke(o.type.render,!1),o;case 1:return o=ke(o.type,!0),o;default:return""}}function $e(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case D:return"Fragment";case W:return"Portal";case C:return"Profiler";case b:return"StrictMode";case O:return"Suspense";case X:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case x:return(o.displayName||"Context")+".Consumer";case E:return(o._context.displayName||"Context")+".Provider";case k:var a=o.render;return o=o.displayName,o||(o=a.displayName||a.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case F:return a=o.displayName||null,a!==null?a:$e(o.type)||"Memo";case me:a=o._payload,o=o._init;try{return $e(o(a))}catch{}}return null}function Qe(o){var a=o.type;switch(o.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=a.render,o=o.displayName||o.name||"",a.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $e(a);case 8:return a===b?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function qe(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function rt(o){var a=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function vt(o){var a=rt(o)?"checked":"value",c=Object.getOwnPropertyDescriptor(o.constructor.prototype,a),p=""+o[a];if(!o.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,w=c.set;return Object.defineProperty(o,a,{configurable:!0,get:function(){return y.call(this)},set:function(P){p=""+P,w.call(this,P)}}),Object.defineProperty(o,a,{enumerable:c.enumerable}),{getValue:function(){return p},setValue:function(P){p=""+P},stopTracking:function(){o._valueTracker=null,delete o[a]}}}}function un(o){o._valueTracker||(o._valueTracker=vt(o))}function it(o){if(!o)return!1;var a=o._valueTracker;if(!a)return!0;var c=a.getValue(),p="";return o&&(p=rt(o)?o.checked?"true":"false":o.value),o=p,o!==c?(a.setValue(o),!0):!1}function mt(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function en(o,a){var c=a.checked;return he({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??o._wrapperState.initialChecked})}function Hr(o,a){var c=a.defaultValue==null?"":a.defaultValue,p=a.checked!=null?a.checked:a.defaultChecked;c=qe(a.value!=null?a.value:c),o._wrapperState={initialChecked:p,initialValue:c,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function br(o,a){a=a.checked,a!=null&&L(o,"checked",a,!1)}function Pr(o,a){br(o,a);var c=qe(a.value),p=a.type;if(c!=null)p==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+c):o.value!==""+c&&(o.value=""+c);else if(p==="submit"||p==="reset"){o.removeAttribute("value");return}a.hasOwnProperty("value")?Hn(o,a.type,c):a.hasOwnProperty("defaultValue")&&Hn(o,a.type,qe(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(o.defaultChecked=!!a.defaultChecked)}function qn(o,a,c){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var p=a.type;if(!(p!=="submit"&&p!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+o._wrapperState.initialValue,c||a===o.value||(o.value=a),o.defaultValue=a}c=o.name,c!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,c!==""&&(o.name=c)}function Hn(o,a,c){(a!=="number"||mt(o.ownerDocument)!==o)&&(c==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+c&&(o.defaultValue=""+c))}var ar=Array.isArray;function rs(o,a,c,p){if(o=o.options,a){a={};for(var y=0;y<c.length;y++)a["$"+c[y]]=!0;for(c=0;c<o.length;c++)y=a.hasOwnProperty("$"+o[c].value),o[c].selected!==y&&(o[c].selected=y),y&&p&&(o[c].defaultSelected=!0)}else{for(c=""+qe(c),a=null,y=0;y<o.length;y++){if(o[y].value===c){o[y].selected=!0,p&&(o[y].defaultSelected=!0);return}a!==null||o[y].disabled||(a=o[y])}a!==null&&(a.selected=!0)}}function bc(o,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return he({},a,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function ml(o,a){var c=a.value;if(c==null){if(c=a.children,a=a.defaultValue,c!=null){if(a!=null)throw Error(t(92));if(ar(c)){if(1<c.length)throw Error(t(93));c=c[0]}a=c}a==null&&(a=""),c=a}o._wrapperState={initialValue:qe(c)}}function gl(o,a){var c=qe(a.value),p=qe(a.defaultValue);c!=null&&(c=""+c,c!==o.value&&(o.value=c),a.defaultValue==null&&o.defaultValue!==c&&(o.defaultValue=c)),p!=null&&(o.defaultValue=""+p)}function Pc(o){var a=o.textContent;a===o._wrapperState.initialValue&&a!==""&&a!==null&&(o.value=a)}function tn(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nn(o,a){return o==null||o==="http://www.w3.org/1999/xhtml"?tn(a):o==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var is,Cc=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,c,p,y){MSApp.execUnsafeLocalFunction(function(){return o(a,c,p,y)})}:o}(function(o,a){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=a;else{for(is=is||document.createElement("div"),is.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=is.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;a.firstChild;)o.appendChild(a.firstChild)}});function Hs(o,a){if(a){var c=o.firstChild;if(c&&c===o.lastChild&&c.nodeType===3){c.nodeValue=a;return}}o.textContent=a}var ra={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ia=["Webkit","ms","Moz","O"];Object.keys(ra).forEach(function(o){ia.forEach(function(a){a=a+o.charAt(0).toUpperCase()+o.substring(1),ra[a]=ra[o]})});function kc(o,a,c){return a==null||typeof a=="boolean"||a===""?"":c||typeof a!="number"||a===0||ra.hasOwnProperty(o)&&ra[o]?(""+a).trim():a+"px"}function xc(o,a){o=o.style;for(var c in a)if(a.hasOwnProperty(c)){var p=c.indexOf("--")===0,y=kc(c,a[c],p);c==="float"&&(c="cssFloat"),p?o.setProperty(c,y):o[c]=y}}var Oc=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nc(o,a){if(a){if(Oc[o]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function Dc(o,a){if(o.indexOf("-")===-1)return typeof a.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sa=null;function yl(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var _l=null,Cr=null,yi=null;function vl(o){if(o=id(o)){if(typeof _l!="function")throw Error(t(280));var a=o.stateNode;a&&(a=np(a),_l(o.stateNode,o.type,a))}}function _i(o){Cr?yi?yi.push(o):yi=[o]:Cr=o}function Lc(){if(Cr){var o=Cr,a=yi;if(yi=Cr=null,vl(o),a)for(o=0;o<a.length;o++)vl(a[o])}}function oa(o,a){return o(a)}function Vc(){}var ss=!1;function Mc(o,a,c){if(ss)return o(a,c);ss=!0;try{return oa(o,a,c)}finally{ss=!1,(Cr!==null||yi!==null)&&(Vc(),Lc())}}function $t(o,a){var c=o.stateNode;if(c===null)return null;var p=np(c);if(p===null)return null;c=p[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(o=o.type,p=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!p;break e;default:o=!1}if(o)return null;if(c&&typeof c!="function")throw Error(t(231,a,typeof c));return c}var wl=!1;if(u)try{var Kr={};Object.defineProperty(Kr,"passive",{get:function(){wl=!0}}),window.addEventListener("test",Kr,Kr),window.removeEventListener("test",Kr,Kr)}catch{wl=!1}function aa(o,a,c,p,y,w,P,U,z){var ee=Array.prototype.slice.call(arguments,3);try{a.apply(c,ee)}catch(ce){this.onError(ce)}}var la=!1,El=null,Gr=!1,Fc=null,Uy={onError:function(o){la=!0,El=o}};function Il(o,a,c,p,y,w,P,U,z){la=!1,El=null,aa.apply(Uy,arguments)}function bf(o,a,c,p,y,w,P,U,z){if(Il.apply(this,arguments),la){if(la){var ee=El;la=!1,El=null}else throw Error(t(198));Gr||(Gr=!0,Fc=ee)}}function Qr(o){var a=o,c=o;if(o.alternate)for(;a.return;)a=a.return;else{o=a;do a=o,a.flags&4098&&(c=a.return),o=a.return;while(o)}return a.tag===3?c:null}function ua(o){if(o.tag===13){var a=o.memoizedState;if(a===null&&(o=o.alternate,o!==null&&(a=o.memoizedState)),a!==null)return a.dehydrated}return null}function Yr(o){if(Qr(o)!==o)throw Error(t(188))}function Pf(o){var a=o.alternate;if(!a){if(a=Qr(o),a===null)throw Error(t(188));return a!==o?null:o}for(var c=o,p=a;;){var y=c.return;if(y===null)break;var w=y.alternate;if(w===null){if(p=y.return,p!==null){c=p;continue}break}if(y.child===w.child){for(w=y.child;w;){if(w===c)return Yr(y),o;if(w===p)return Yr(y),a;w=w.sibling}throw Error(t(188))}if(c.return!==p.return)c=y,p=w;else{for(var P=!1,U=y.child;U;){if(U===c){P=!0,c=y,p=w;break}if(U===p){P=!0,p=y,c=w;break}U=U.sibling}if(!P){for(U=w.child;U;){if(U===c){P=!0,c=w,p=y;break}if(U===p){P=!0,p=w,c=y;break}U=U.sibling}if(!P)throw Error(t(189))}}if(c.alternate!==p)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?o:a}function Uc(o){return o=Pf(o),o!==null?Tl(o):null}function Tl(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var a=Tl(o);if(a!==null)return a;o=o.sibling}return null}var Sl=e.unstable_scheduleCallback,$c=e.unstable_cancelCallback,Cf=e.unstable_shouldYield,$y=e.unstable_requestPaint,ht=e.unstable_now,kf=e.unstable_getCurrentPriorityLevel,ca=e.unstable_ImmediatePriority,Ks=e.unstable_UserBlockingPriority,kr=e.unstable_NormalPriority,jc=e.unstable_LowPriority,xf=e.unstable_IdlePriority,da=null,lr=null;function Of(o){if(lr&&typeof lr.onCommitFiberRoot=="function")try{lr.onCommitFiberRoot(da,o,void 0,(o.current.flags&128)===128)}catch{}}var Mn=Math.clz32?Math.clz32:Df,Bc=Math.log,Nf=Math.LN2;function Df(o){return o>>>=0,o===0?32:31-(Bc(o)/Nf|0)|0}var Rl=64,Al=4194304;function Gs(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function ha(o,a){var c=o.pendingLanes;if(c===0)return 0;var p=0,y=o.suspendedLanes,w=o.pingedLanes,P=c&268435455;if(P!==0){var U=P&~y;U!==0?p=Gs(U):(w&=P,w!==0&&(p=Gs(w)))}else P=c&~y,P!==0?p=Gs(P):w!==0&&(p=Gs(w));if(p===0)return 0;if(a!==0&&a!==p&&!(a&y)&&(y=p&-p,w=a&-a,y>=w||y===16&&(w&4194240)!==0))return a;if(p&4&&(p|=c&16),a=o.entangledLanes,a!==0)for(o=o.entanglements,a&=p;0<a;)c=31-Mn(a),y=1<<c,p|=o[c],a&=~y;return p}function jy(o,a){switch(o){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function os(o,a){for(var c=o.suspendedLanes,p=o.pingedLanes,y=o.expirationTimes,w=o.pendingLanes;0<w;){var P=31-Mn(w),U=1<<P,z=y[P];z===-1?(!(U&c)||U&p)&&(y[P]=jy(U,a)):z<=a&&(o.expiredLanes|=U),w&=~U}}function ur(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function fa(){var o=Rl;return Rl<<=1,!(Rl&4194240)&&(Rl=64),o}function Qs(o){for(var a=[],c=0;31>c;c++)a.push(o);return a}function Ys(o,a,c){o.pendingLanes|=a,a!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,a=31-Mn(a),o[a]=c}function ut(o,a){var c=o.pendingLanes&~a;o.pendingLanes=a,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=a,o.mutableReadLanes&=a,o.entangledLanes&=a,a=o.entanglements;var p=o.eventTimes;for(o=o.expirationTimes;0<c;){var y=31-Mn(c),w=1<<y;a[y]=0,p[y]=-1,o[y]=-1,c&=~w}}function Js(o,a){var c=o.entangledLanes|=a;for(o=o.entanglements;c;){var p=31-Mn(c),y=1<<p;y&a|o[p]&a&&(o[p]|=a),c&=~y}}var He=0;function Xs(o){return o&=-o,1<o?4<o?o&268435455?16:536870912:4:1}var Lf,bl,Vf,Mf,Ff,zc=!1,vi=[],_n=null,Jr=null,Xr=null,Zs=new Map,xr=new Map,wi=[],By="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Uf(o,a){switch(o){case"focusin":case"focusout":_n=null;break;case"dragenter":case"dragleave":Jr=null;break;case"mouseover":case"mouseout":Xr=null;break;case"pointerover":case"pointerout":Zs.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":xr.delete(a.pointerId)}}function Kn(o,a,c,p,y,w){return o===null||o.nativeEvent!==w?(o={blockedOn:a,domEventName:c,eventSystemFlags:p,nativeEvent:w,targetContainers:[y]},a!==null&&(a=id(a),a!==null&&bl(a)),o):(o.eventSystemFlags|=p,a=o.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),o)}function zy(o,a,c,p,y){switch(a){case"focusin":return _n=Kn(_n,o,a,c,p,y),!0;case"dragenter":return Jr=Kn(Jr,o,a,c,p,y),!0;case"mouseover":return Xr=Kn(Xr,o,a,c,p,y),!0;case"pointerover":var w=y.pointerId;return Zs.set(w,Kn(Zs.get(w)||null,o,a,c,p,y)),!0;case"gotpointercapture":return w=y.pointerId,xr.set(w,Kn(xr.get(w)||null,o,a,c,p,y)),!0}return!1}function $f(o){var a=_a(o.target);if(a!==null){var c=Qr(a);if(c!==null){if(a=c.tag,a===13){if(a=ua(c),a!==null){o.blockedOn=a,Ff(o.priority,function(){Vf(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){o.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}o.blockedOn=null}function as(o){if(o.blockedOn!==null)return!1;for(var a=o.targetContainers;0<a.length;){var c=Pl(o.domEventName,o.eventSystemFlags,a[0],o.nativeEvent);if(c===null){c=o.nativeEvent;var p=new c.constructor(c.type,c);sa=p,c.target.dispatchEvent(p),sa=null}else return a=id(c),a!==null&&bl(a),o.blockedOn=c,!1;a.shift()}return!0}function pa(o,a,c){as(o)&&c.delete(a)}function jf(){zc=!1,_n!==null&&as(_n)&&(_n=null),Jr!==null&&as(Jr)&&(Jr=null),Xr!==null&&as(Xr)&&(Xr=null),Zs.forEach(pa),xr.forEach(pa)}function Zr(o,a){o.blockedOn===a&&(o.blockedOn=null,zc||(zc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,jf)))}function ei(o){function a(y){return Zr(y,o)}if(0<vi.length){Zr(vi[0],o);for(var c=1;c<vi.length;c++){var p=vi[c];p.blockedOn===o&&(p.blockedOn=null)}}for(_n!==null&&Zr(_n,o),Jr!==null&&Zr(Jr,o),Xr!==null&&Zr(Xr,o),Zs.forEach(a),xr.forEach(a),c=0;c<wi.length;c++)p=wi[c],p.blockedOn===o&&(p.blockedOn=null);for(;0<wi.length&&(c=wi[0],c.blockedOn===null);)$f(c),c.blockedOn===null&&wi.shift()}var ls=B.ReactCurrentBatchConfig,eo=!0;function wt(o,a,c,p){var y=He,w=ls.transition;ls.transition=null;try{He=1,Wc(o,a,c,p)}finally{He=y,ls.transition=w}}function Wy(o,a,c,p){var y=He,w=ls.transition;ls.transition=null;try{He=4,Wc(o,a,c,p)}finally{He=y,ls.transition=w}}function Wc(o,a,c,p){if(eo){var y=Pl(o,a,c,p);if(y===null)t_(o,a,p,ma,c),Uf(o,p);else if(zy(y,o,a,c,p))p.stopPropagation();else if(Uf(o,p),a&4&&-1<By.indexOf(o)){for(;y!==null;){var w=id(y);if(w!==null&&Lf(w),w=Pl(o,a,c,p),w===null&&t_(o,a,p,ma,c),w===y)break;y=w}y!==null&&p.stopPropagation()}else t_(o,a,p,null,c)}}var ma=null;function Pl(o,a,c,p){if(ma=null,o=yl(p),o=_a(o),o!==null)if(a=Qr(o),a===null)o=null;else if(c=a.tag,c===13){if(o=ua(a),o!==null)return o;o=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;o=null}else a!==o&&(o=null);return ma=o,null}function qc(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kf()){case ca:return 1;case Ks:return 4;case kr:case jc:return 16;case xf:return 536870912;default:return 16}default:return 16}}var cr=null,Cl=null,Gn=null;function Hc(){if(Gn)return Gn;var o,a=Cl,c=a.length,p,y="value"in cr?cr.value:cr.textContent,w=y.length;for(o=0;o<c&&a[o]===y[o];o++);var P=c-o;for(p=1;p<=P&&a[c-p]===y[w-p];p++);return Gn=y.slice(o,1<p?1-p:void 0)}function kl(o){var a=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&a===13&&(o=13)):o=a,o===10&&(o=13),32<=o||o===13?o:0}function Ei(){return!0}function Kc(){return!1}function vn(o){function a(c,p,y,w,P){this._reactName=c,this._targetInst=y,this.type=p,this.nativeEvent=w,this.target=P,this.currentTarget=null;for(var U in o)o.hasOwnProperty(U)&&(c=o[U],this[U]=c?c(w):w[U]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Ei:Kc,this.isPropagationStopped=Kc,this}return he(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Ei)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Ei)},persist:function(){},isPersistent:Ei}),a}var ti={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xl=vn(ti),Ii=he({},ti,{view:0,detail:0}),qy=vn(Ii),Ol,us,to,ga=he({},Ii,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ti,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==to&&(to&&o.type==="mousemove"?(Ol=o.screenX-to.screenX,us=o.screenY-to.screenY):us=Ol=0,to=o),Ol)},movementY:function(o){return"movementY"in o?o.movementY:us}}),Nl=vn(ga),Gc=he({},ga,{dataTransfer:0}),Bf=vn(Gc),Dl=he({},Ii,{relatedTarget:0}),Ll=vn(Dl),zf=he({},ti,{animationName:0,elapsedTime:0,pseudoElement:0}),cs=vn(zf),Wf=he({},ti,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),qf=vn(Wf),Hf=he({},ti,{data:0}),Qc=vn(Hf),Vl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gf(o){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(o):(o=Kf[o])?!!a[o]:!1}function Ti(){return Gf}var f=he({},Ii,{key:function(o){if(o.key){var a=Vl[o.key]||o.key;if(a!=="Unidentified")return a}return o.type==="keypress"?(o=kl(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Fn[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ti,charCode:function(o){return o.type==="keypress"?kl(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?kl(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),v=vn(f),S=he({},ga,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),N=vn(S),Q=he({},Ii,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ti}),ne=vn(Q),ye=he({},ti,{propertyName:0,elapsedTime:0,pseudoElement:0}),st=vn(ye),rn=he({},ga,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Ye=vn(rn),cn=[9,13,27,32],Ht=u&&"CompositionEvent"in window,Or=null;u&&"documentMode"in document&&(Or=document.documentMode);var dr=u&&"TextEvent"in window&&!Or,ya=u&&(!Ht||Or&&8<Or&&11>=Or),Ml=" ",xI=!1;function OI(o,a){switch(o){case"keyup":return cn.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function NI(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Fl=!1;function CD(o,a){switch(o){case"compositionend":return NI(a);case"keypress":return a.which!==32?null:(xI=!0,Ml);case"textInput":return o=a.data,o===Ml&&xI?null:o;default:return null}}function kD(o,a){if(Fl)return o==="compositionend"||!Ht&&OI(o,a)?(o=Hc(),Gn=Cl=cr=null,Fl=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return ya&&a.locale!=="ko"?null:a.data;default:return null}}var xD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function DI(o){var a=o&&o.nodeName&&o.nodeName.toLowerCase();return a==="input"?!!xD[o.type]:a==="textarea"}function LI(o,a,c,p){_i(p),a=Zf(a,"onChange"),0<a.length&&(c=new xl("onChange","change",null,c,p),o.push({event:c,listeners:a}))}var Yc=null,Jc=null;function OD(o){ZI(o,0)}function Qf(o){var a=zl(o);if(it(a))return o}function ND(o,a){if(o==="change")return a}var VI=!1;if(u){var Hy;if(u){var Ky="oninput"in document;if(!Ky){var MI=document.createElement("div");MI.setAttribute("oninput","return;"),Ky=typeof MI.oninput=="function"}Hy=Ky}else Hy=!1;VI=Hy&&(!document.documentMode||9<document.documentMode)}function FI(){Yc&&(Yc.detachEvent("onpropertychange",UI),Jc=Yc=null)}function UI(o){if(o.propertyName==="value"&&Qf(Jc)){var a=[];LI(a,Jc,o,yl(o)),Mc(OD,a)}}function DD(o,a,c){o==="focusin"?(FI(),Yc=a,Jc=c,Yc.attachEvent("onpropertychange",UI)):o==="focusout"&&FI()}function LD(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Qf(Jc)}function VD(o,a){if(o==="click")return Qf(a)}function MD(o,a){if(o==="input"||o==="change")return Qf(a)}function FD(o,a){return o===a&&(o!==0||1/o===1/a)||o!==o&&a!==a}var ni=typeof Object.is=="function"?Object.is:FD;function Xc(o,a){if(ni(o,a))return!0;if(typeof o!="object"||o===null||typeof a!="object"||a===null)return!1;var c=Object.keys(o),p=Object.keys(a);if(c.length!==p.length)return!1;for(p=0;p<c.length;p++){var y=c[p];if(!d.call(a,y)||!ni(o[y],a[y]))return!1}return!0}function $I(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function jI(o,a){var c=$I(o);o=0;for(var p;c;){if(c.nodeType===3){if(p=o+c.textContent.length,o<=a&&p>=a)return{node:c,offset:a-o};o=p}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=$I(c)}}function BI(o,a){return o&&a?o===a?!0:o&&o.nodeType===3?!1:a&&a.nodeType===3?BI(o,a.parentNode):"contains"in o?o.contains(a):o.compareDocumentPosition?!!(o.compareDocumentPosition(a)&16):!1:!1}function zI(){for(var o=window,a=mt();a instanceof o.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)o=a.contentWindow;else break;a=mt(o.document)}return a}function Gy(o){var a=o&&o.nodeName&&o.nodeName.toLowerCase();return a&&(a==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||a==="textarea"||o.contentEditable==="true")}function UD(o){var a=zI(),c=o.focusedElem,p=o.selectionRange;if(a!==c&&c&&c.ownerDocument&&BI(c.ownerDocument.documentElement,c)){if(p!==null&&Gy(c)){if(a=p.start,o=p.end,o===void 0&&(o=a),"selectionStart"in c)c.selectionStart=a,c.selectionEnd=Math.min(o,c.value.length);else if(o=(a=c.ownerDocument||document)&&a.defaultView||window,o.getSelection){o=o.getSelection();var y=c.textContent.length,w=Math.min(p.start,y);p=p.end===void 0?w:Math.min(p.end,y),!o.extend&&w>p&&(y=p,p=w,w=y),y=jI(c,w);var P=jI(c,p);y&&P&&(o.rangeCount!==1||o.anchorNode!==y.node||o.anchorOffset!==y.offset||o.focusNode!==P.node||o.focusOffset!==P.offset)&&(a=a.createRange(),a.setStart(y.node,y.offset),o.removeAllRanges(),w>p?(o.addRange(a),o.extend(P.node,P.offset)):(a.setEnd(P.node,P.offset),o.addRange(a)))}}for(a=[],o=c;o=o.parentNode;)o.nodeType===1&&a.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<a.length;c++)o=a[c],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var $D=u&&"documentMode"in document&&11>=document.documentMode,Ul=null,Qy=null,Zc=null,Yy=!1;function WI(o,a,c){var p=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Yy||Ul==null||Ul!==mt(p)||(p=Ul,"selectionStart"in p&&Gy(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Zc&&Xc(Zc,p)||(Zc=p,p=Zf(Qy,"onSelect"),0<p.length&&(a=new xl("onSelect","select",null,a,c),o.push({event:a,listeners:p}),a.target=Ul)))}function Yf(o,a){var c={};return c[o.toLowerCase()]=a.toLowerCase(),c["Webkit"+o]="webkit"+a,c["Moz"+o]="moz"+a,c}var $l={animationend:Yf("Animation","AnimationEnd"),animationiteration:Yf("Animation","AnimationIteration"),animationstart:Yf("Animation","AnimationStart"),transitionend:Yf("Transition","TransitionEnd")},Jy={},qI={};u&&(qI=document.createElement("div").style,"AnimationEvent"in window||(delete $l.animationend.animation,delete $l.animationiteration.animation,delete $l.animationstart.animation),"TransitionEvent"in window||delete $l.transitionend.transition);function Jf(o){if(Jy[o])return Jy[o];if(!$l[o])return o;var a=$l[o],c;for(c in a)if(a.hasOwnProperty(c)&&c in qI)return Jy[o]=a[c];return o}var HI=Jf("animationend"),KI=Jf("animationiteration"),GI=Jf("animationstart"),QI=Jf("transitionend"),YI=new Map,JI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function no(o,a){YI.set(o,a),s(a,[o])}for(var Xy=0;Xy<JI.length;Xy++){var Zy=JI[Xy],jD=Zy.toLowerCase(),BD=Zy[0].toUpperCase()+Zy.slice(1);no(jD,"on"+BD)}no(HI,"onAnimationEnd"),no(KI,"onAnimationIteration"),no(GI,"onAnimationStart"),no("dblclick","onDoubleClick"),no("focusin","onFocus"),no("focusout","onBlur"),no(QI,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ed="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zD=new Set("cancel close invalid load scroll toggle".split(" ").concat(ed));function XI(o,a,c){var p=o.type||"unknown-event";o.currentTarget=c,bf(p,a,void 0,o),o.currentTarget=null}function ZI(o,a){a=(a&4)!==0;for(var c=0;c<o.length;c++){var p=o[c],y=p.event;p=p.listeners;e:{var w=void 0;if(a)for(var P=p.length-1;0<=P;P--){var U=p[P],z=U.instance,ee=U.currentTarget;if(U=U.listener,z!==w&&y.isPropagationStopped())break e;XI(y,U,ee),w=z}else for(P=0;P<p.length;P++){if(U=p[P],z=U.instance,ee=U.currentTarget,U=U.listener,z!==w&&y.isPropagationStopped())break e;XI(y,U,ee),w=z}}}if(Gr)throw o=Fc,Gr=!1,Fc=null,o}function gt(o,a){var c=a[a_];c===void 0&&(c=a[a_]=new Set);var p=o+"__bubble";c.has(p)||(eT(a,o,2,!1),c.add(p))}function e_(o,a,c){var p=0;a&&(p|=4),eT(c,o,p,a)}var Xf="_reactListening"+Math.random().toString(36).slice(2);function td(o){if(!o[Xf]){o[Xf]=!0,r.forEach(function(c){c!=="selectionchange"&&(zD.has(c)||e_(c,!1,o),e_(c,!0,o))});var a=o.nodeType===9?o:o.ownerDocument;a===null||a[Xf]||(a[Xf]=!0,e_("selectionchange",!1,a))}}function eT(o,a,c,p){switch(qc(a)){case 1:var y=wt;break;case 4:y=Wy;break;default:y=Wc}c=y.bind(null,a,c,o),y=void 0,!wl||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),p?y!==void 0?o.addEventListener(a,c,{capture:!0,passive:y}):o.addEventListener(a,c,!0):y!==void 0?o.addEventListener(a,c,{passive:y}):o.addEventListener(a,c,!1)}function t_(o,a,c,p,y){var w=p;if(!(a&1)&&!(a&2)&&p!==null)e:for(;;){if(p===null)return;var P=p.tag;if(P===3||P===4){var U=p.stateNode.containerInfo;if(U===y||U.nodeType===8&&U.parentNode===y)break;if(P===4)for(P=p.return;P!==null;){var z=P.tag;if((z===3||z===4)&&(z=P.stateNode.containerInfo,z===y||z.nodeType===8&&z.parentNode===y))return;P=P.return}for(;U!==null;){if(P=_a(U),P===null)return;if(z=P.tag,z===5||z===6){p=w=P;continue e}U=U.parentNode}}p=p.return}Mc(function(){var ee=w,ce=yl(c),fe=[];e:{var le=YI.get(o);if(le!==void 0){var we=xl,Se=o;switch(o){case"keypress":if(kl(c)===0)break e;case"keydown":case"keyup":we=v;break;case"focusin":Se="focus",we=Ll;break;case"focusout":Se="blur",we=Ll;break;case"beforeblur":case"afterblur":we=Ll;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=Nl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=Bf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=ne;break;case HI:case KI:case GI:we=cs;break;case QI:we=st;break;case"scroll":we=qy;break;case"wheel":we=Ye;break;case"copy":case"cut":case"paste":we=qf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=N}var Ae=(a&4)!==0,jt=!Ae&&o==="scroll",Y=Ae?le!==null?le+"Capture":null:le;Ae=[];for(var H=ee,J;H!==null;){J=H;var ge=J.stateNode;if(J.tag===5&&ge!==null&&(J=ge,Y!==null&&(ge=$t(H,Y),ge!=null&&Ae.push(nd(H,ge,J)))),jt)break;H=H.return}0<Ae.length&&(le=new we(le,Se,null,c,ce),fe.push({event:le,listeners:Ae}))}}if(!(a&7)){e:{if(le=o==="mouseover"||o==="pointerover",we=o==="mouseout"||o==="pointerout",le&&c!==sa&&(Se=c.relatedTarget||c.fromElement)&&(_a(Se)||Se[ds]))break e;if((we||le)&&(le=ce.window===ce?ce:(le=ce.ownerDocument)?le.defaultView||le.parentWindow:window,we?(Se=c.relatedTarget||c.toElement,we=ee,Se=Se?_a(Se):null,Se!==null&&(jt=Qr(Se),Se!==jt||Se.tag!==5&&Se.tag!==6)&&(Se=null)):(we=null,Se=ee),we!==Se)){if(Ae=Nl,ge="onMouseLeave",Y="onMouseEnter",H="mouse",(o==="pointerout"||o==="pointerover")&&(Ae=N,ge="onPointerLeave",Y="onPointerEnter",H="pointer"),jt=we==null?le:zl(we),J=Se==null?le:zl(Se),le=new Ae(ge,H+"leave",we,c,ce),le.target=jt,le.relatedTarget=J,ge=null,_a(ce)===ee&&(Ae=new Ae(Y,H+"enter",Se,c,ce),Ae.target=J,Ae.relatedTarget=jt,ge=Ae),jt=ge,we&&Se)t:{for(Ae=we,Y=Se,H=0,J=Ae;J;J=jl(J))H++;for(J=0,ge=Y;ge;ge=jl(ge))J++;for(;0<H-J;)Ae=jl(Ae),H--;for(;0<J-H;)Y=jl(Y),J--;for(;H--;){if(Ae===Y||Y!==null&&Ae===Y.alternate)break t;Ae=jl(Ae),Y=jl(Y)}Ae=null}else Ae=null;we!==null&&tT(fe,le,we,Ae,!1),Se!==null&&jt!==null&&tT(fe,jt,Se,Ae,!0)}}e:{if(le=ee?zl(ee):window,we=le.nodeName&&le.nodeName.toLowerCase(),we==="select"||we==="input"&&le.type==="file")var be=ND;else if(DI(le))if(VI)be=MD;else{be=LD;var xe=DD}else(we=le.nodeName)&&we.toLowerCase()==="input"&&(le.type==="checkbox"||le.type==="radio")&&(be=VD);if(be&&(be=be(o,ee))){LI(fe,be,c,ce);break e}xe&&xe(o,le,ee),o==="focusout"&&(xe=le._wrapperState)&&xe.controlled&&le.type==="number"&&Hn(le,"number",le.value)}switch(xe=ee?zl(ee):window,o){case"focusin":(DI(xe)||xe.contentEditable==="true")&&(Ul=xe,Qy=ee,Zc=null);break;case"focusout":Zc=Qy=Ul=null;break;case"mousedown":Yy=!0;break;case"contextmenu":case"mouseup":case"dragend":Yy=!1,WI(fe,c,ce);break;case"selectionchange":if($D)break;case"keydown":case"keyup":WI(fe,c,ce)}var Oe;if(Ht)e:{switch(o){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else Fl?OI(o,c)&&(De="onCompositionEnd"):o==="keydown"&&c.keyCode===229&&(De="onCompositionStart");De&&(ya&&c.locale!=="ko"&&(Fl||De!=="onCompositionStart"?De==="onCompositionEnd"&&Fl&&(Oe=Hc()):(cr=ce,Cl="value"in cr?cr.value:cr.textContent,Fl=!0)),xe=Zf(ee,De),0<xe.length&&(De=new Qc(De,o,null,c,ce),fe.push({event:De,listeners:xe}),Oe?De.data=Oe:(Oe=NI(c),Oe!==null&&(De.data=Oe)))),(Oe=dr?CD(o,c):kD(o,c))&&(ee=Zf(ee,"onBeforeInput"),0<ee.length&&(ce=new Qc("onBeforeInput","beforeinput",null,c,ce),fe.push({event:ce,listeners:ee}),ce.data=Oe))}ZI(fe,a)})}function nd(o,a,c){return{instance:o,listener:a,currentTarget:c}}function Zf(o,a){for(var c=a+"Capture",p=[];o!==null;){var y=o,w=y.stateNode;y.tag===5&&w!==null&&(y=w,w=$t(o,c),w!=null&&p.unshift(nd(o,w,y)),w=$t(o,a),w!=null&&p.push(nd(o,w,y))),o=o.return}return p}function jl(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function tT(o,a,c,p,y){for(var w=a._reactName,P=[];c!==null&&c!==p;){var U=c,z=U.alternate,ee=U.stateNode;if(z!==null&&z===p)break;U.tag===5&&ee!==null&&(U=ee,y?(z=$t(c,w),z!=null&&P.unshift(nd(c,z,U))):y||(z=$t(c,w),z!=null&&P.push(nd(c,z,U)))),c=c.return}P.length!==0&&o.push({event:a,listeners:P})}var WD=/\r\n?/g,qD=/\u0000|\uFFFD/g;function nT(o){return(typeof o=="string"?o:""+o).replace(WD,`
`).replace(qD,"")}function ep(o,a,c){if(a=nT(a),nT(o)!==a&&c)throw Error(t(425))}function tp(){}var n_=null,r_=null;function i_(o,a){return o==="textarea"||o==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var s_=typeof setTimeout=="function"?setTimeout:void 0,HD=typeof clearTimeout=="function"?clearTimeout:void 0,rT=typeof Promise=="function"?Promise:void 0,KD=typeof queueMicrotask=="function"?queueMicrotask:typeof rT<"u"?function(o){return rT.resolve(null).then(o).catch(GD)}:s_;function GD(o){setTimeout(function(){throw o})}function o_(o,a){var c=a,p=0;do{var y=c.nextSibling;if(o.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"){if(p===0){o.removeChild(y),ei(a);return}p--}else c!=="$"&&c!=="$?"&&c!=="$!"||p++;c=y}while(c);ei(a)}function ro(o){for(;o!=null;o=o.nextSibling){var a=o.nodeType;if(a===1||a===3)break;if(a===8){if(a=o.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return o}function iT(o){o=o.previousSibling;for(var a=0;o;){if(o.nodeType===8){var c=o.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return o;a--}else c==="/$"&&a++}o=o.previousSibling}return null}var Bl=Math.random().toString(36).slice(2),Si="__reactFiber$"+Bl,rd="__reactProps$"+Bl,ds="__reactContainer$"+Bl,a_="__reactEvents$"+Bl,QD="__reactListeners$"+Bl,YD="__reactHandles$"+Bl;function _a(o){var a=o[Si];if(a)return a;for(var c=o.parentNode;c;){if(a=c[ds]||c[Si]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(o=iT(o);o!==null;){if(c=o[Si])return c;o=iT(o)}return a}o=c,c=o.parentNode}return null}function id(o){return o=o[Si]||o[ds],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function zl(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function np(o){return o[rd]||null}var l_=[],Wl=-1;function io(o){return{current:o}}function yt(o){0>Wl||(o.current=l_[Wl],l_[Wl]=null,Wl--)}function ft(o,a){Wl++,l_[Wl]=o.current,o.current=a}var so={},bn=io(so),Qn=io(!1),va=so;function ql(o,a){var c=o.type.contextTypes;if(!c)return so;var p=o.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===a)return p.__reactInternalMemoizedMaskedChildContext;var y={},w;for(w in c)y[w]=a[w];return p&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=a,o.__reactInternalMemoizedMaskedChildContext=y),y}function Yn(o){return o=o.childContextTypes,o!=null}function rp(){yt(Qn),yt(bn)}function sT(o,a,c){if(bn.current!==so)throw Error(t(168));ft(bn,a),ft(Qn,c)}function oT(o,a,c){var p=o.stateNode;if(a=a.childContextTypes,typeof p.getChildContext!="function")return c;p=p.getChildContext();for(var y in p)if(!(y in a))throw Error(t(108,Qe(o)||"Unknown",y));return he({},c,p)}function ip(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||so,va=bn.current,ft(bn,o),ft(Qn,Qn.current),!0}function aT(o,a,c){var p=o.stateNode;if(!p)throw Error(t(169));c?(o=oT(o,a,va),p.__reactInternalMemoizedMergedChildContext=o,yt(Qn),yt(bn),ft(bn,o)):yt(Qn),ft(Qn,c)}var hs=null,sp=!1,u_=!1;function lT(o){hs===null?hs=[o]:hs.push(o)}function JD(o){sp=!0,lT(o)}function oo(){if(!u_&&hs!==null){u_=!0;var o=0,a=He;try{var c=hs;for(He=1;o<c.length;o++){var p=c[o];do p=p(!0);while(p!==null)}hs=null,sp=!1}catch(y){throw hs!==null&&(hs=hs.slice(o+1)),Sl(ca,oo),y}finally{He=a,u_=!1}}return null}var Hl=[],Kl=0,op=null,ap=0,Nr=[],Dr=0,wa=null,fs=1,ps="";function Ea(o,a){Hl[Kl++]=ap,Hl[Kl++]=op,op=o,ap=a}function uT(o,a,c){Nr[Dr++]=fs,Nr[Dr++]=ps,Nr[Dr++]=wa,wa=o;var p=fs;o=ps;var y=32-Mn(p)-1;p&=~(1<<y),c+=1;var w=32-Mn(a)+y;if(30<w){var P=y-y%5;w=(p&(1<<P)-1).toString(32),p>>=P,y-=P,fs=1<<32-Mn(a)+y|c<<y|p,ps=w+o}else fs=1<<w|c<<y|p,ps=o}function c_(o){o.return!==null&&(Ea(o,1),uT(o,1,0))}function d_(o){for(;o===op;)op=Hl[--Kl],Hl[Kl]=null,ap=Hl[--Kl],Hl[Kl]=null;for(;o===wa;)wa=Nr[--Dr],Nr[Dr]=null,ps=Nr[--Dr],Nr[Dr]=null,fs=Nr[--Dr],Nr[Dr]=null}var hr=null,fr=null,Et=!1,ri=null;function cT(o,a){var c=Fr(5,null,null,0);c.elementType="DELETED",c.stateNode=a,c.return=o,a=o.deletions,a===null?(o.deletions=[c],o.flags|=16):a.push(c)}function dT(o,a){switch(o.tag){case 5:var c=o.type;return a=a.nodeType!==1||c.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(o.stateNode=a,hr=o,fr=ro(a.firstChild),!0):!1;case 6:return a=o.pendingProps===""||a.nodeType!==3?null:a,a!==null?(o.stateNode=a,hr=o,fr=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(c=wa!==null?{id:fs,overflow:ps}:null,o.memoizedState={dehydrated:a,treeContext:c,retryLane:1073741824},c=Fr(18,null,null,0),c.stateNode=a,c.return=o,o.child=c,hr=o,fr=null,!0):!1;default:return!1}}function h_(o){return(o.mode&1)!==0&&(o.flags&128)===0}function f_(o){if(Et){var a=fr;if(a){var c=a;if(!dT(o,a)){if(h_(o))throw Error(t(418));a=ro(c.nextSibling);var p=hr;a&&dT(o,a)?cT(p,c):(o.flags=o.flags&-4097|2,Et=!1,hr=o)}}else{if(h_(o))throw Error(t(418));o.flags=o.flags&-4097|2,Et=!1,hr=o}}}function hT(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;hr=o}function lp(o){if(o!==hr)return!1;if(!Et)return hT(o),Et=!0,!1;var a;if((a=o.tag!==3)&&!(a=o.tag!==5)&&(a=o.type,a=a!=="head"&&a!=="body"&&!i_(o.type,o.memoizedProps)),a&&(a=fr)){if(h_(o))throw fT(),Error(t(418));for(;a;)cT(o,a),a=ro(a.nextSibling)}if(hT(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,a=0;o;){if(o.nodeType===8){var c=o.data;if(c==="/$"){if(a===0){fr=ro(o.nextSibling);break e}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++}o=o.nextSibling}fr=null}}else fr=hr?ro(o.stateNode.nextSibling):null;return!0}function fT(){for(var o=fr;o;)o=ro(o.nextSibling)}function Gl(){fr=hr=null,Et=!1}function p_(o){ri===null?ri=[o]:ri.push(o)}var XD=B.ReactCurrentBatchConfig;function sd(o,a,c){if(o=c.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var p=c.stateNode}if(!p)throw Error(t(147,o));var y=p,w=""+o;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===w?a.ref:(a=function(P){var U=y.refs;P===null?delete U[w]:U[w]=P},a._stringRef=w,a)}if(typeof o!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,o))}return o}function up(o,a){throw o=Object.prototype.toString.call(a),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":o))}function pT(o){var a=o._init;return a(o._payload)}function mT(o){function a(Y,H){if(o){var J=Y.deletions;J===null?(Y.deletions=[H],Y.flags|=16):J.push(H)}}function c(Y,H){if(!o)return null;for(;H!==null;)a(Y,H),H=H.sibling;return null}function p(Y,H){for(Y=new Map;H!==null;)H.key!==null?Y.set(H.key,H):Y.set(H.index,H),H=H.sibling;return Y}function y(Y,H){return Y=mo(Y,H),Y.index=0,Y.sibling=null,Y}function w(Y,H,J){return Y.index=J,o?(J=Y.alternate,J!==null?(J=J.index,J<H?(Y.flags|=2,H):J):(Y.flags|=2,H)):(Y.flags|=1048576,H)}function P(Y){return o&&Y.alternate===null&&(Y.flags|=2),Y}function U(Y,H,J,ge){return H===null||H.tag!==6?(H=sv(J,Y.mode,ge),H.return=Y,H):(H=y(H,J),H.return=Y,H)}function z(Y,H,J,ge){var be=J.type;return be===D?ce(Y,H,J.props.children,ge,J.key):H!==null&&(H.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===me&&pT(be)===H.type)?(ge=y(H,J.props),ge.ref=sd(Y,H,J),ge.return=Y,ge):(ge=Np(J.type,J.key,J.props,null,Y.mode,ge),ge.ref=sd(Y,H,J),ge.return=Y,ge)}function ee(Y,H,J,ge){return H===null||H.tag!==4||H.stateNode.containerInfo!==J.containerInfo||H.stateNode.implementation!==J.implementation?(H=ov(J,Y.mode,ge),H.return=Y,H):(H=y(H,J.children||[]),H.return=Y,H)}function ce(Y,H,J,ge,be){return H===null||H.tag!==7?(H=Ca(J,Y.mode,ge,be),H.return=Y,H):(H=y(H,J),H.return=Y,H)}function fe(Y,H,J){if(typeof H=="string"&&H!==""||typeof H=="number")return H=sv(""+H,Y.mode,J),H.return=Y,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case $:return J=Np(H.type,H.key,H.props,null,Y.mode,J),J.ref=sd(Y,null,H),J.return=Y,J;case W:return H=ov(H,Y.mode,J),H.return=Y,H;case me:var ge=H._init;return fe(Y,ge(H._payload),J)}if(ar(H)||pe(H))return H=Ca(H,Y.mode,J,null),H.return=Y,H;up(Y,H)}return null}function le(Y,H,J,ge){var be=H!==null?H.key:null;if(typeof J=="string"&&J!==""||typeof J=="number")return be!==null?null:U(Y,H,""+J,ge);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case $:return J.key===be?z(Y,H,J,ge):null;case W:return J.key===be?ee(Y,H,J,ge):null;case me:return be=J._init,le(Y,H,be(J._payload),ge)}if(ar(J)||pe(J))return be!==null?null:ce(Y,H,J,ge,null);up(Y,J)}return null}function we(Y,H,J,ge,be){if(typeof ge=="string"&&ge!==""||typeof ge=="number")return Y=Y.get(J)||null,U(H,Y,""+ge,be);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case $:return Y=Y.get(ge.key===null?J:ge.key)||null,z(H,Y,ge,be);case W:return Y=Y.get(ge.key===null?J:ge.key)||null,ee(H,Y,ge,be);case me:var xe=ge._init;return we(Y,H,J,xe(ge._payload),be)}if(ar(ge)||pe(ge))return Y=Y.get(J)||null,ce(H,Y,ge,be,null);up(H,ge)}return null}function Se(Y,H,J,ge){for(var be=null,xe=null,Oe=H,De=H=0,fn=null;Oe!==null&&De<J.length;De++){Oe.index>De?(fn=Oe,Oe=null):fn=Oe.sibling;var Ze=le(Y,Oe,J[De],ge);if(Ze===null){Oe===null&&(Oe=fn);break}o&&Oe&&Ze.alternate===null&&a(Y,Oe),H=w(Ze,H,De),xe===null?be=Ze:xe.sibling=Ze,xe=Ze,Oe=fn}if(De===J.length)return c(Y,Oe),Et&&Ea(Y,De),be;if(Oe===null){for(;De<J.length;De++)Oe=fe(Y,J[De],ge),Oe!==null&&(H=w(Oe,H,De),xe===null?be=Oe:xe.sibling=Oe,xe=Oe);return Et&&Ea(Y,De),be}for(Oe=p(Y,Oe);De<J.length;De++)fn=we(Oe,Y,De,J[De],ge),fn!==null&&(o&&fn.alternate!==null&&Oe.delete(fn.key===null?De:fn.key),H=w(fn,H,De),xe===null?be=fn:xe.sibling=fn,xe=fn);return o&&Oe.forEach(function(go){return a(Y,go)}),Et&&Ea(Y,De),be}function Ae(Y,H,J,ge){var be=pe(J);if(typeof be!="function")throw Error(t(150));if(J=be.call(J),J==null)throw Error(t(151));for(var xe=be=null,Oe=H,De=H=0,fn=null,Ze=J.next();Oe!==null&&!Ze.done;De++,Ze=J.next()){Oe.index>De?(fn=Oe,Oe=null):fn=Oe.sibling;var go=le(Y,Oe,Ze.value,ge);if(go===null){Oe===null&&(Oe=fn);break}o&&Oe&&go.alternate===null&&a(Y,Oe),H=w(go,H,De),xe===null?be=go:xe.sibling=go,xe=go,Oe=fn}if(Ze.done)return c(Y,Oe),Et&&Ea(Y,De),be;if(Oe===null){for(;!Ze.done;De++,Ze=J.next())Ze=fe(Y,Ze.value,ge),Ze!==null&&(H=w(Ze,H,De),xe===null?be=Ze:xe.sibling=Ze,xe=Ze);return Et&&Ea(Y,De),be}for(Oe=p(Y,Oe);!Ze.done;De++,Ze=J.next())Ze=we(Oe,Y,De,Ze.value,ge),Ze!==null&&(o&&Ze.alternate!==null&&Oe.delete(Ze.key===null?De:Ze.key),H=w(Ze,H,De),xe===null?be=Ze:xe.sibling=Ze,xe=Ze);return o&&Oe.forEach(function(xL){return a(Y,xL)}),Et&&Ea(Y,De),be}function jt(Y,H,J,ge){if(typeof J=="object"&&J!==null&&J.type===D&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case $:e:{for(var be=J.key,xe=H;xe!==null;){if(xe.key===be){if(be=J.type,be===D){if(xe.tag===7){c(Y,xe.sibling),H=y(xe,J.props.children),H.return=Y,Y=H;break e}}else if(xe.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===me&&pT(be)===xe.type){c(Y,xe.sibling),H=y(xe,J.props),H.ref=sd(Y,xe,J),H.return=Y,Y=H;break e}c(Y,xe);break}else a(Y,xe);xe=xe.sibling}J.type===D?(H=Ca(J.props.children,Y.mode,ge,J.key),H.return=Y,Y=H):(ge=Np(J.type,J.key,J.props,null,Y.mode,ge),ge.ref=sd(Y,H,J),ge.return=Y,Y=ge)}return P(Y);case W:e:{for(xe=J.key;H!==null;){if(H.key===xe)if(H.tag===4&&H.stateNode.containerInfo===J.containerInfo&&H.stateNode.implementation===J.implementation){c(Y,H.sibling),H=y(H,J.children||[]),H.return=Y,Y=H;break e}else{c(Y,H);break}else a(Y,H);H=H.sibling}H=ov(J,Y.mode,ge),H.return=Y,Y=H}return P(Y);case me:return xe=J._init,jt(Y,H,xe(J._payload),ge)}if(ar(J))return Se(Y,H,J,ge);if(pe(J))return Ae(Y,H,J,ge);up(Y,J)}return typeof J=="string"&&J!==""||typeof J=="number"?(J=""+J,H!==null&&H.tag===6?(c(Y,H.sibling),H=y(H,J),H.return=Y,Y=H):(c(Y,H),H=sv(J,Y.mode,ge),H.return=Y,Y=H),P(Y)):c(Y,H)}return jt}var Ql=mT(!0),gT=mT(!1),cp=io(null),dp=null,Yl=null,m_=null;function g_(){m_=Yl=dp=null}function y_(o){var a=cp.current;yt(cp),o._currentValue=a}function __(o,a,c){for(;o!==null;){var p=o.alternate;if((o.childLanes&a)!==a?(o.childLanes|=a,p!==null&&(p.childLanes|=a)):p!==null&&(p.childLanes&a)!==a&&(p.childLanes|=a),o===c)break;o=o.return}}function Jl(o,a){dp=o,m_=Yl=null,o=o.dependencies,o!==null&&o.firstContext!==null&&(o.lanes&a&&(Jn=!0),o.firstContext=null)}function Lr(o){var a=o._currentValue;if(m_!==o)if(o={context:o,memoizedValue:a,next:null},Yl===null){if(dp===null)throw Error(t(308));Yl=o,dp.dependencies={lanes:0,firstContext:o}}else Yl=Yl.next=o;return a}var Ia=null;function v_(o){Ia===null?Ia=[o]:Ia.push(o)}function yT(o,a,c,p){var y=a.interleaved;return y===null?(c.next=c,v_(a)):(c.next=y.next,y.next=c),a.interleaved=c,ms(o,p)}function ms(o,a){o.lanes|=a;var c=o.alternate;for(c!==null&&(c.lanes|=a),c=o,o=o.return;o!==null;)o.childLanes|=a,c=o.alternate,c!==null&&(c.childLanes|=a),c=o,o=o.return;return c.tag===3?c.stateNode:null}var ao=!1;function w_(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _T(o,a){o=o.updateQueue,a.updateQueue===o&&(a.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function gs(o,a){return{eventTime:o,lane:a,tag:0,payload:null,callback:null,next:null}}function lo(o,a,c){var p=o.updateQueue;if(p===null)return null;if(p=p.shared,Xe&2){var y=p.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),p.pending=a,ms(o,c)}return y=p.interleaved,y===null?(a.next=a,v_(p)):(a.next=y.next,y.next=a),p.interleaved=a,ms(o,c)}function hp(o,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194240)!==0)){var p=a.lanes;p&=o.pendingLanes,c|=p,a.lanes=c,Js(o,c)}}function vT(o,a){var c=o.updateQueue,p=o.alternate;if(p!==null&&(p=p.updateQueue,c===p)){var y=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var P={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};w===null?y=w=P:w=w.next=P,c=c.next}while(c!==null);w===null?y=w=a:w=w.next=a}else y=w=a;c={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:w,shared:p.shared,effects:p.effects},o.updateQueue=c;return}o=c.lastBaseUpdate,o===null?c.firstBaseUpdate=a:o.next=a,c.lastBaseUpdate=a}function fp(o,a,c,p){var y=o.updateQueue;ao=!1;var w=y.firstBaseUpdate,P=y.lastBaseUpdate,U=y.shared.pending;if(U!==null){y.shared.pending=null;var z=U,ee=z.next;z.next=null,P===null?w=ee:P.next=ee,P=z;var ce=o.alternate;ce!==null&&(ce=ce.updateQueue,U=ce.lastBaseUpdate,U!==P&&(U===null?ce.firstBaseUpdate=ee:U.next=ee,ce.lastBaseUpdate=z))}if(w!==null){var fe=y.baseState;P=0,ce=ee=z=null,U=w;do{var le=U.lane,we=U.eventTime;if((p&le)===le){ce!==null&&(ce=ce.next={eventTime:we,lane:0,tag:U.tag,payload:U.payload,callback:U.callback,next:null});e:{var Se=o,Ae=U;switch(le=a,we=c,Ae.tag){case 1:if(Se=Ae.payload,typeof Se=="function"){fe=Se.call(we,fe,le);break e}fe=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Ae.payload,le=typeof Se=="function"?Se.call(we,fe,le):Se,le==null)break e;fe=he({},fe,le);break e;case 2:ao=!0}}U.callback!==null&&U.lane!==0&&(o.flags|=64,le=y.effects,le===null?y.effects=[U]:le.push(U))}else we={eventTime:we,lane:le,tag:U.tag,payload:U.payload,callback:U.callback,next:null},ce===null?(ee=ce=we,z=fe):ce=ce.next=we,P|=le;if(U=U.next,U===null){if(U=y.shared.pending,U===null)break;le=U,U=le.next,le.next=null,y.lastBaseUpdate=le,y.shared.pending=null}}while(!0);if(ce===null&&(z=fe),y.baseState=z,y.firstBaseUpdate=ee,y.lastBaseUpdate=ce,a=y.shared.interleaved,a!==null){y=a;do P|=y.lane,y=y.next;while(y!==a)}else w===null&&(y.shared.lanes=0);Ra|=P,o.lanes=P,o.memoizedState=fe}}function wT(o,a,c){if(o=a.effects,a.effects=null,o!==null)for(a=0;a<o.length;a++){var p=o[a],y=p.callback;if(y!==null){if(p.callback=null,p=c,typeof y!="function")throw Error(t(191,y));y.call(p)}}}var od={},Ri=io(od),ad=io(od),ld=io(od);function Ta(o){if(o===od)throw Error(t(174));return o}function E_(o,a){switch(ft(ld,a),ft(ad,o),ft(Ri,od),o=a.nodeType,o){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:nn(null,"");break;default:o=o===8?a.parentNode:a,a=o.namespaceURI||null,o=o.tagName,a=nn(a,o)}yt(Ri),ft(Ri,a)}function Xl(){yt(Ri),yt(ad),yt(ld)}function ET(o){Ta(ld.current);var a=Ta(Ri.current),c=nn(a,o.type);a!==c&&(ft(ad,o),ft(Ri,c))}function I_(o){ad.current===o&&(yt(Ri),yt(ad))}var Pt=io(0);function pp(o){for(var a=o;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if(a.flags&128)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break;for(;a.sibling===null;){if(a.return===null||a.return===o)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var T_=[];function S_(){for(var o=0;o<T_.length;o++)T_[o]._workInProgressVersionPrimary=null;T_.length=0}var mp=B.ReactCurrentDispatcher,R_=B.ReactCurrentBatchConfig,Sa=0,Ct=null,sn=null,dn=null,gp=!1,ud=!1,cd=0,ZD=0;function Pn(){throw Error(t(321))}function A_(o,a){if(a===null)return!1;for(var c=0;c<a.length&&c<o.length;c++)if(!ni(o[c],a[c]))return!1;return!0}function b_(o,a,c,p,y,w){if(Sa=w,Ct=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,mp.current=o===null||o.memoizedState===null?rL:iL,o=c(p,y),ud){w=0;do{if(ud=!1,cd=0,25<=w)throw Error(t(301));w+=1,dn=sn=null,a.updateQueue=null,mp.current=sL,o=c(p,y)}while(ud)}if(mp.current=vp,a=sn!==null&&sn.next!==null,Sa=0,dn=sn=Ct=null,gp=!1,a)throw Error(t(300));return o}function P_(){var o=cd!==0;return cd=0,o}function Ai(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?Ct.memoizedState=dn=o:dn=dn.next=o,dn}function Vr(){if(sn===null){var o=Ct.alternate;o=o!==null?o.memoizedState:null}else o=sn.next;var a=dn===null?Ct.memoizedState:dn.next;if(a!==null)dn=a,sn=o;else{if(o===null)throw Error(t(310));sn=o,o={memoizedState:sn.memoizedState,baseState:sn.baseState,baseQueue:sn.baseQueue,queue:sn.queue,next:null},dn===null?Ct.memoizedState=dn=o:dn=dn.next=o}return dn}function dd(o,a){return typeof a=="function"?a(o):a}function C_(o){var a=Vr(),c=a.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=o;var p=sn,y=p.baseQueue,w=c.pending;if(w!==null){if(y!==null){var P=y.next;y.next=w.next,w.next=P}p.baseQueue=y=w,c.pending=null}if(y!==null){w=y.next,p=p.baseState;var U=P=null,z=null,ee=w;do{var ce=ee.lane;if((Sa&ce)===ce)z!==null&&(z=z.next={lane:0,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),p=ee.hasEagerState?ee.eagerState:o(p,ee.action);else{var fe={lane:ce,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null};z===null?(U=z=fe,P=p):z=z.next=fe,Ct.lanes|=ce,Ra|=ce}ee=ee.next}while(ee!==null&&ee!==w);z===null?P=p:z.next=U,ni(p,a.memoizedState)||(Jn=!0),a.memoizedState=p,a.baseState=P,a.baseQueue=z,c.lastRenderedState=p}if(o=c.interleaved,o!==null){y=o;do w=y.lane,Ct.lanes|=w,Ra|=w,y=y.next;while(y!==o)}else y===null&&(c.lanes=0);return[a.memoizedState,c.dispatch]}function k_(o){var a=Vr(),c=a.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=o;var p=c.dispatch,y=c.pending,w=a.memoizedState;if(y!==null){c.pending=null;var P=y=y.next;do w=o(w,P.action),P=P.next;while(P!==y);ni(w,a.memoizedState)||(Jn=!0),a.memoizedState=w,a.baseQueue===null&&(a.baseState=w),c.lastRenderedState=w}return[w,p]}function IT(){}function TT(o,a){var c=Ct,p=Vr(),y=a(),w=!ni(p.memoizedState,y);if(w&&(p.memoizedState=y,Jn=!0),p=p.queue,x_(AT.bind(null,c,p,o),[o]),p.getSnapshot!==a||w||dn!==null&&dn.memoizedState.tag&1){if(c.flags|=2048,hd(9,RT.bind(null,c,p,y,a),void 0,null),hn===null)throw Error(t(349));Sa&30||ST(c,a,y)}return y}function ST(o,a,c){o.flags|=16384,o={getSnapshot:a,value:c},a=Ct.updateQueue,a===null?(a={lastEffect:null,stores:null},Ct.updateQueue=a,a.stores=[o]):(c=a.stores,c===null?a.stores=[o]:c.push(o))}function RT(o,a,c,p){a.value=c,a.getSnapshot=p,bT(a)&&PT(o)}function AT(o,a,c){return c(function(){bT(a)&&PT(o)})}function bT(o){var a=o.getSnapshot;o=o.value;try{var c=a();return!ni(o,c)}catch{return!0}}function PT(o){var a=ms(o,1);a!==null&&ai(a,o,1,-1)}function CT(o){var a=Ai();return typeof o=="function"&&(o=o()),a.memoizedState=a.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:dd,lastRenderedState:o},a.queue=o,o=o.dispatch=nL.bind(null,Ct,o),[a.memoizedState,o]}function hd(o,a,c,p){return o={tag:o,create:a,destroy:c,deps:p,next:null},a=Ct.updateQueue,a===null?(a={lastEffect:null,stores:null},Ct.updateQueue=a,a.lastEffect=o.next=o):(c=a.lastEffect,c===null?a.lastEffect=o.next=o:(p=c.next,c.next=o,o.next=p,a.lastEffect=o)),o}function kT(){return Vr().memoizedState}function yp(o,a,c,p){var y=Ai();Ct.flags|=o,y.memoizedState=hd(1|a,c,void 0,p===void 0?null:p)}function _p(o,a,c,p){var y=Vr();p=p===void 0?null:p;var w=void 0;if(sn!==null){var P=sn.memoizedState;if(w=P.destroy,p!==null&&A_(p,P.deps)){y.memoizedState=hd(a,c,w,p);return}}Ct.flags|=o,y.memoizedState=hd(1|a,c,w,p)}function xT(o,a){return yp(8390656,8,o,a)}function x_(o,a){return _p(2048,8,o,a)}function OT(o,a){return _p(4,2,o,a)}function NT(o,a){return _p(4,4,o,a)}function DT(o,a){if(typeof a=="function")return o=o(),a(o),function(){a(null)};if(a!=null)return o=o(),a.current=o,function(){a.current=null}}function LT(o,a,c){return c=c!=null?c.concat([o]):null,_p(4,4,DT.bind(null,a,o),c)}function O_(){}function VT(o,a){var c=Vr();a=a===void 0?null:a;var p=c.memoizedState;return p!==null&&a!==null&&A_(a,p[1])?p[0]:(c.memoizedState=[o,a],o)}function MT(o,a){var c=Vr();a=a===void 0?null:a;var p=c.memoizedState;return p!==null&&a!==null&&A_(a,p[1])?p[0]:(o=o(),c.memoizedState=[o,a],o)}function FT(o,a,c){return Sa&21?(ni(c,a)||(c=fa(),Ct.lanes|=c,Ra|=c,o.baseState=!0),a):(o.baseState&&(o.baseState=!1,Jn=!0),o.memoizedState=c)}function eL(o,a){var c=He;He=c!==0&&4>c?c:4,o(!0);var p=R_.transition;R_.transition={};try{o(!1),a()}finally{He=c,R_.transition=p}}function UT(){return Vr().memoizedState}function tL(o,a,c){var p=fo(o);if(c={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null},$T(o))jT(a,c);else if(c=yT(o,a,c,p),c!==null){var y=$n();ai(c,o,p,y),BT(c,a,p)}}function nL(o,a,c){var p=fo(o),y={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null};if($T(o))jT(a,y);else{var w=o.alternate;if(o.lanes===0&&(w===null||w.lanes===0)&&(w=a.lastRenderedReducer,w!==null))try{var P=a.lastRenderedState,U=w(P,c);if(y.hasEagerState=!0,y.eagerState=U,ni(U,P)){var z=a.interleaved;z===null?(y.next=y,v_(a)):(y.next=z.next,z.next=y),a.interleaved=y;return}}catch{}finally{}c=yT(o,a,y,p),c!==null&&(y=$n(),ai(c,o,p,y),BT(c,a,p))}}function $T(o){var a=o.alternate;return o===Ct||a!==null&&a===Ct}function jT(o,a){ud=gp=!0;var c=o.pending;c===null?a.next=a:(a.next=c.next,c.next=a),o.pending=a}function BT(o,a,c){if(c&4194240){var p=a.lanes;p&=o.pendingLanes,c|=p,a.lanes=c,Js(o,c)}}var vp={readContext:Lr,useCallback:Pn,useContext:Pn,useEffect:Pn,useImperativeHandle:Pn,useInsertionEffect:Pn,useLayoutEffect:Pn,useMemo:Pn,useReducer:Pn,useRef:Pn,useState:Pn,useDebugValue:Pn,useDeferredValue:Pn,useTransition:Pn,useMutableSource:Pn,useSyncExternalStore:Pn,useId:Pn,unstable_isNewReconciler:!1},rL={readContext:Lr,useCallback:function(o,a){return Ai().memoizedState=[o,a===void 0?null:a],o},useContext:Lr,useEffect:xT,useImperativeHandle:function(o,a,c){return c=c!=null?c.concat([o]):null,yp(4194308,4,DT.bind(null,a,o),c)},useLayoutEffect:function(o,a){return yp(4194308,4,o,a)},useInsertionEffect:function(o,a){return yp(4,2,o,a)},useMemo:function(o,a){var c=Ai();return a=a===void 0?null:a,o=o(),c.memoizedState=[o,a],o},useReducer:function(o,a,c){var p=Ai();return a=c!==void 0?c(a):a,p.memoizedState=p.baseState=a,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:a},p.queue=o,o=o.dispatch=tL.bind(null,Ct,o),[p.memoizedState,o]},useRef:function(o){var a=Ai();return o={current:o},a.memoizedState=o},useState:CT,useDebugValue:O_,useDeferredValue:function(o){return Ai().memoizedState=o},useTransition:function(){var o=CT(!1),a=o[0];return o=eL.bind(null,o[1]),Ai().memoizedState=o,[a,o]},useMutableSource:function(){},useSyncExternalStore:function(o,a,c){var p=Ct,y=Ai();if(Et){if(c===void 0)throw Error(t(407));c=c()}else{if(c=a(),hn===null)throw Error(t(349));Sa&30||ST(p,a,c)}y.memoizedState=c;var w={value:c,getSnapshot:a};return y.queue=w,xT(AT.bind(null,p,w,o),[o]),p.flags|=2048,hd(9,RT.bind(null,p,w,c,a),void 0,null),c},useId:function(){var o=Ai(),a=hn.identifierPrefix;if(Et){var c=ps,p=fs;c=(p&~(1<<32-Mn(p)-1)).toString(32)+c,a=":"+a+"R"+c,c=cd++,0<c&&(a+="H"+c.toString(32)),a+=":"}else c=ZD++,a=":"+a+"r"+c.toString(32)+":";return o.memoizedState=a},unstable_isNewReconciler:!1},iL={readContext:Lr,useCallback:VT,useContext:Lr,useEffect:x_,useImperativeHandle:LT,useInsertionEffect:OT,useLayoutEffect:NT,useMemo:MT,useReducer:C_,useRef:kT,useState:function(){return C_(dd)},useDebugValue:O_,useDeferredValue:function(o){var a=Vr();return FT(a,sn.memoizedState,o)},useTransition:function(){var o=C_(dd)[0],a=Vr().memoizedState;return[o,a]},useMutableSource:IT,useSyncExternalStore:TT,useId:UT,unstable_isNewReconciler:!1},sL={readContext:Lr,useCallback:VT,useContext:Lr,useEffect:x_,useImperativeHandle:LT,useInsertionEffect:OT,useLayoutEffect:NT,useMemo:MT,useReducer:k_,useRef:kT,useState:function(){return k_(dd)},useDebugValue:O_,useDeferredValue:function(o){var a=Vr();return sn===null?a.memoizedState=o:FT(a,sn.memoizedState,o)},useTransition:function(){var o=k_(dd)[0],a=Vr().memoizedState;return[o,a]},useMutableSource:IT,useSyncExternalStore:TT,useId:UT,unstable_isNewReconciler:!1};function ii(o,a){if(o&&o.defaultProps){a=he({},a),o=o.defaultProps;for(var c in o)a[c]===void 0&&(a[c]=o[c]);return a}return a}function N_(o,a,c,p){a=o.memoizedState,c=c(p,a),c=c==null?a:he({},a,c),o.memoizedState=c,o.lanes===0&&(o.updateQueue.baseState=c)}var wp={isMounted:function(o){return(o=o._reactInternals)?Qr(o)===o:!1},enqueueSetState:function(o,a,c){o=o._reactInternals;var p=$n(),y=fo(o),w=gs(p,y);w.payload=a,c!=null&&(w.callback=c),a=lo(o,w,y),a!==null&&(ai(a,o,y,p),hp(a,o,y))},enqueueReplaceState:function(o,a,c){o=o._reactInternals;var p=$n(),y=fo(o),w=gs(p,y);w.tag=1,w.payload=a,c!=null&&(w.callback=c),a=lo(o,w,y),a!==null&&(ai(a,o,y,p),hp(a,o,y))},enqueueForceUpdate:function(o,a){o=o._reactInternals;var c=$n(),p=fo(o),y=gs(c,p);y.tag=2,a!=null&&(y.callback=a),a=lo(o,y,p),a!==null&&(ai(a,o,p,c),hp(a,o,p))}};function zT(o,a,c,p,y,w,P){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(p,w,P):a.prototype&&a.prototype.isPureReactComponent?!Xc(c,p)||!Xc(y,w):!0}function WT(o,a,c){var p=!1,y=so,w=a.contextType;return typeof w=="object"&&w!==null?w=Lr(w):(y=Yn(a)?va:bn.current,p=a.contextTypes,w=(p=p!=null)?ql(o,y):so),a=new a(c,w),o.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=wp,o.stateNode=a,a._reactInternals=o,p&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=y,o.__reactInternalMemoizedMaskedChildContext=w),a}function qT(o,a,c,p){o=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,p),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,p),a.state!==o&&wp.enqueueReplaceState(a,a.state,null)}function D_(o,a,c,p){var y=o.stateNode;y.props=c,y.state=o.memoizedState,y.refs={},w_(o);var w=a.contextType;typeof w=="object"&&w!==null?y.context=Lr(w):(w=Yn(a)?va:bn.current,y.context=ql(o,w)),y.state=o.memoizedState,w=a.getDerivedStateFromProps,typeof w=="function"&&(N_(o,a,w,c),y.state=o.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(a=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),a!==y.state&&wp.enqueueReplaceState(y,y.state,null),fp(o,c,y,p),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308)}function Zl(o,a){try{var c="",p=a;do c+=Ve(p),p=p.return;while(p);var y=c}catch(w){y=`
Error generating stack: `+w.message+`
`+w.stack}return{value:o,source:a,stack:y,digest:null}}function L_(o,a,c){return{value:o,source:null,stack:c??null,digest:a??null}}function V_(o,a){try{console.error(a.value)}catch(c){setTimeout(function(){throw c})}}var oL=typeof WeakMap=="function"?WeakMap:Map;function HT(o,a,c){c=gs(-1,c),c.tag=3,c.payload={element:null};var p=a.value;return c.callback=function(){bp||(bp=!0,J_=p),V_(o,a)},c}function KT(o,a,c){c=gs(-1,c),c.tag=3;var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var y=a.value;c.payload=function(){return p(y)},c.callback=function(){V_(o,a)}}var w=o.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(c.callback=function(){V_(o,a),typeof p!="function"&&(co===null?co=new Set([this]):co.add(this));var P=a.stack;this.componentDidCatch(a.value,{componentStack:P!==null?P:""})}),c}function GT(o,a,c){var p=o.pingCache;if(p===null){p=o.pingCache=new oL;var y=new Set;p.set(a,y)}else y=p.get(a),y===void 0&&(y=new Set,p.set(a,y));y.has(c)||(y.add(c),o=wL.bind(null,o,a,c),a.then(o,o))}function QT(o){do{var a;if((a=o.tag===13)&&(a=o.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return o;o=o.return}while(o!==null);return null}function YT(o,a,c,p,y){return o.mode&1?(o.flags|=65536,o.lanes=y,o):(o===a?o.flags|=65536:(o.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(a=gs(-1,1),a.tag=2,lo(c,a,1))),c.lanes|=1),o)}var aL=B.ReactCurrentOwner,Jn=!1;function Un(o,a,c,p){a.child=o===null?gT(a,null,c,p):Ql(a,o.child,c,p)}function JT(o,a,c,p,y){c=c.render;var w=a.ref;return Jl(a,y),p=b_(o,a,c,p,w,y),c=P_(),o!==null&&!Jn?(a.updateQueue=o.updateQueue,a.flags&=-2053,o.lanes&=~y,ys(o,a,y)):(Et&&c&&c_(a),a.flags|=1,Un(o,a,p,y),a.child)}function XT(o,a,c,p,y){if(o===null){var w=c.type;return typeof w=="function"&&!iv(w)&&w.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(a.tag=15,a.type=w,ZT(o,a,w,p,y)):(o=Np(c.type,null,p,a,a.mode,y),o.ref=a.ref,o.return=a,a.child=o)}if(w=o.child,!(o.lanes&y)){var P=w.memoizedProps;if(c=c.compare,c=c!==null?c:Xc,c(P,p)&&o.ref===a.ref)return ys(o,a,y)}return a.flags|=1,o=mo(w,p),o.ref=a.ref,o.return=a,a.child=o}function ZT(o,a,c,p,y){if(o!==null){var w=o.memoizedProps;if(Xc(w,p)&&o.ref===a.ref)if(Jn=!1,a.pendingProps=p=w,(o.lanes&y)!==0)o.flags&131072&&(Jn=!0);else return a.lanes=o.lanes,ys(o,a,y)}return M_(o,a,c,p,y)}function eS(o,a,c){var p=a.pendingProps,y=p.children,w=o!==null?o.memoizedState:null;if(p.mode==="hidden")if(!(a.mode&1))a.memoizedState={baseLanes:0,cachePool:null,transitions:null},ft(tu,pr),pr|=c;else{if(!(c&1073741824))return o=w!==null?w.baseLanes|c:c,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:o,cachePool:null,transitions:null},a.updateQueue=null,ft(tu,pr),pr|=o,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=w!==null?w.baseLanes:c,ft(tu,pr),pr|=p}else w!==null?(p=w.baseLanes|c,a.memoizedState=null):p=c,ft(tu,pr),pr|=p;return Un(o,a,y,c),a.child}function tS(o,a){var c=a.ref;(o===null&&c!==null||o!==null&&o.ref!==c)&&(a.flags|=512,a.flags|=2097152)}function M_(o,a,c,p,y){var w=Yn(c)?va:bn.current;return w=ql(a,w),Jl(a,y),c=b_(o,a,c,p,w,y),p=P_(),o!==null&&!Jn?(a.updateQueue=o.updateQueue,a.flags&=-2053,o.lanes&=~y,ys(o,a,y)):(Et&&p&&c_(a),a.flags|=1,Un(o,a,c,y),a.child)}function nS(o,a,c,p,y){if(Yn(c)){var w=!0;ip(a)}else w=!1;if(Jl(a,y),a.stateNode===null)Ip(o,a),WT(a,c,p),D_(a,c,p,y),p=!0;else if(o===null){var P=a.stateNode,U=a.memoizedProps;P.props=U;var z=P.context,ee=c.contextType;typeof ee=="object"&&ee!==null?ee=Lr(ee):(ee=Yn(c)?va:bn.current,ee=ql(a,ee));var ce=c.getDerivedStateFromProps,fe=typeof ce=="function"||typeof P.getSnapshotBeforeUpdate=="function";fe||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(U!==p||z!==ee)&&qT(a,P,p,ee),ao=!1;var le=a.memoizedState;P.state=le,fp(a,p,P,y),z=a.memoizedState,U!==p||le!==z||Qn.current||ao?(typeof ce=="function"&&(N_(a,c,ce,p),z=a.memoizedState),(U=ao||zT(a,c,U,p,le,z,ee))?(fe||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(a.flags|=4194308)):(typeof P.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=p,a.memoizedState=z),P.props=p,P.state=z,P.context=ee,p=U):(typeof P.componentDidMount=="function"&&(a.flags|=4194308),p=!1)}else{P=a.stateNode,_T(o,a),U=a.memoizedProps,ee=a.type===a.elementType?U:ii(a.type,U),P.props=ee,fe=a.pendingProps,le=P.context,z=c.contextType,typeof z=="object"&&z!==null?z=Lr(z):(z=Yn(c)?va:bn.current,z=ql(a,z));var we=c.getDerivedStateFromProps;(ce=typeof we=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(U!==fe||le!==z)&&qT(a,P,p,z),ao=!1,le=a.memoizedState,P.state=le,fp(a,p,P,y);var Se=a.memoizedState;U!==fe||le!==Se||Qn.current||ao?(typeof we=="function"&&(N_(a,c,we,p),Se=a.memoizedState),(ee=ao||zT(a,c,ee,p,le,Se,z)||!1)?(ce||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(p,Se,z),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(p,Se,z)),typeof P.componentDidUpdate=="function"&&(a.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof P.componentDidUpdate!="function"||U===o.memoizedProps&&le===o.memoizedState||(a.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||U===o.memoizedProps&&le===o.memoizedState||(a.flags|=1024),a.memoizedProps=p,a.memoizedState=Se),P.props=p,P.state=Se,P.context=z,p=ee):(typeof P.componentDidUpdate!="function"||U===o.memoizedProps&&le===o.memoizedState||(a.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||U===o.memoizedProps&&le===o.memoizedState||(a.flags|=1024),p=!1)}return F_(o,a,c,p,w,y)}function F_(o,a,c,p,y,w){tS(o,a);var P=(a.flags&128)!==0;if(!p&&!P)return y&&aT(a,c,!1),ys(o,a,w);p=a.stateNode,aL.current=a;var U=P&&typeof c.getDerivedStateFromError!="function"?null:p.render();return a.flags|=1,o!==null&&P?(a.child=Ql(a,o.child,null,w),a.child=Ql(a,null,U,w)):Un(o,a,U,w),a.memoizedState=p.state,y&&aT(a,c,!0),a.child}function rS(o){var a=o.stateNode;a.pendingContext?sT(o,a.pendingContext,a.pendingContext!==a.context):a.context&&sT(o,a.context,!1),E_(o,a.containerInfo)}function iS(o,a,c,p,y){return Gl(),p_(y),a.flags|=256,Un(o,a,c,p),a.child}var U_={dehydrated:null,treeContext:null,retryLane:0};function $_(o){return{baseLanes:o,cachePool:null,transitions:null}}function sS(o,a,c){var p=a.pendingProps,y=Pt.current,w=!1,P=(a.flags&128)!==0,U;if((U=P)||(U=o!==null&&o.memoizedState===null?!1:(y&2)!==0),U?(w=!0,a.flags&=-129):(o===null||o.memoizedState!==null)&&(y|=1),ft(Pt,y&1),o===null)return f_(a),o=a.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?(a.mode&1?o.data==="$!"?a.lanes=8:a.lanes=1073741824:a.lanes=1,null):(P=p.children,o=p.fallback,w?(p=a.mode,w=a.child,P={mode:"hidden",children:P},!(p&1)&&w!==null?(w.childLanes=0,w.pendingProps=P):w=Dp(P,p,0,null),o=Ca(o,p,c,null),w.return=a,o.return=a,w.sibling=o,a.child=w,a.child.memoizedState=$_(c),a.memoizedState=U_,o):j_(a,P));if(y=o.memoizedState,y!==null&&(U=y.dehydrated,U!==null))return lL(o,a,P,p,U,y,c);if(w){w=p.fallback,P=a.mode,y=o.child,U=y.sibling;var z={mode:"hidden",children:p.children};return!(P&1)&&a.child!==y?(p=a.child,p.childLanes=0,p.pendingProps=z,a.deletions=null):(p=mo(y,z),p.subtreeFlags=y.subtreeFlags&14680064),U!==null?w=mo(U,w):(w=Ca(w,P,c,null),w.flags|=2),w.return=a,p.return=a,p.sibling=w,a.child=p,p=w,w=a.child,P=o.child.memoizedState,P=P===null?$_(c):{baseLanes:P.baseLanes|c,cachePool:null,transitions:P.transitions},w.memoizedState=P,w.childLanes=o.childLanes&~c,a.memoizedState=U_,p}return w=o.child,o=w.sibling,p=mo(w,{mode:"visible",children:p.children}),!(a.mode&1)&&(p.lanes=c),p.return=a,p.sibling=null,o!==null&&(c=a.deletions,c===null?(a.deletions=[o],a.flags|=16):c.push(o)),a.child=p,a.memoizedState=null,p}function j_(o,a){return a=Dp({mode:"visible",children:a},o.mode,0,null),a.return=o,o.child=a}function Ep(o,a,c,p){return p!==null&&p_(p),Ql(a,o.child,null,c),o=j_(a,a.pendingProps.children),o.flags|=2,a.memoizedState=null,o}function lL(o,a,c,p,y,w,P){if(c)return a.flags&256?(a.flags&=-257,p=L_(Error(t(422))),Ep(o,a,P,p)):a.memoizedState!==null?(a.child=o.child,a.flags|=128,null):(w=p.fallback,y=a.mode,p=Dp({mode:"visible",children:p.children},y,0,null),w=Ca(w,y,P,null),w.flags|=2,p.return=a,w.return=a,p.sibling=w,a.child=p,a.mode&1&&Ql(a,o.child,null,P),a.child.memoizedState=$_(P),a.memoizedState=U_,w);if(!(a.mode&1))return Ep(o,a,P,null);if(y.data==="$!"){if(p=y.nextSibling&&y.nextSibling.dataset,p)var U=p.dgst;return p=U,w=Error(t(419)),p=L_(w,p,void 0),Ep(o,a,P,p)}if(U=(P&o.childLanes)!==0,Jn||U){if(p=hn,p!==null){switch(P&-P){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=y&(p.suspendedLanes|P)?0:y,y!==0&&y!==w.retryLane&&(w.retryLane=y,ms(o,y),ai(p,o,y,-1))}return rv(),p=L_(Error(t(421))),Ep(o,a,P,p)}return y.data==="$?"?(a.flags|=128,a.child=o.child,a=EL.bind(null,o),y._reactRetry=a,null):(o=w.treeContext,fr=ro(y.nextSibling),hr=a,Et=!0,ri=null,o!==null&&(Nr[Dr++]=fs,Nr[Dr++]=ps,Nr[Dr++]=wa,fs=o.id,ps=o.overflow,wa=a),a=j_(a,p.children),a.flags|=4096,a)}function oS(o,a,c){o.lanes|=a;var p=o.alternate;p!==null&&(p.lanes|=a),__(o.return,a,c)}function B_(o,a,c,p,y){var w=o.memoizedState;w===null?o.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:p,tail:c,tailMode:y}:(w.isBackwards=a,w.rendering=null,w.renderingStartTime=0,w.last=p,w.tail=c,w.tailMode=y)}function aS(o,a,c){var p=a.pendingProps,y=p.revealOrder,w=p.tail;if(Un(o,a,p.children,c),p=Pt.current,p&2)p=p&1|2,a.flags|=128;else{if(o!==null&&o.flags&128)e:for(o=a.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&oS(o,c,a);else if(o.tag===19)oS(o,c,a);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}p&=1}if(ft(Pt,p),!(a.mode&1))a.memoizedState=null;else switch(y){case"forwards":for(c=a.child,y=null;c!==null;)o=c.alternate,o!==null&&pp(o)===null&&(y=c),c=c.sibling;c=y,c===null?(y=a.child,a.child=null):(y=c.sibling,c.sibling=null),B_(a,!1,y,c,w);break;case"backwards":for(c=null,y=a.child,a.child=null;y!==null;){if(o=y.alternate,o!==null&&pp(o)===null){a.child=y;break}o=y.sibling,y.sibling=c,c=y,y=o}B_(a,!0,c,null,w);break;case"together":B_(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Ip(o,a){!(a.mode&1)&&o!==null&&(o.alternate=null,a.alternate=null,a.flags|=2)}function ys(o,a,c){if(o!==null&&(a.dependencies=o.dependencies),Ra|=a.lanes,!(c&a.childLanes))return null;if(o!==null&&a.child!==o.child)throw Error(t(153));if(a.child!==null){for(o=a.child,c=mo(o,o.pendingProps),a.child=c,c.return=a;o.sibling!==null;)o=o.sibling,c=c.sibling=mo(o,o.pendingProps),c.return=a;c.sibling=null}return a.child}function uL(o,a,c){switch(a.tag){case 3:rS(a),Gl();break;case 5:ET(a);break;case 1:Yn(a.type)&&ip(a);break;case 4:E_(a,a.stateNode.containerInfo);break;case 10:var p=a.type._context,y=a.memoizedProps.value;ft(cp,p._currentValue),p._currentValue=y;break;case 13:if(p=a.memoizedState,p!==null)return p.dehydrated!==null?(ft(Pt,Pt.current&1),a.flags|=128,null):c&a.child.childLanes?sS(o,a,c):(ft(Pt,Pt.current&1),o=ys(o,a,c),o!==null?o.sibling:null);ft(Pt,Pt.current&1);break;case 19:if(p=(c&a.childLanes)!==0,o.flags&128){if(p)return aS(o,a,c);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ft(Pt,Pt.current),p)break;return null;case 22:case 23:return a.lanes=0,eS(o,a,c)}return ys(o,a,c)}var lS,z_,uS,cS;lS=function(o,a){for(var c=a.child;c!==null;){if(c.tag===5||c.tag===6)o.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},z_=function(){},uS=function(o,a,c,p){var y=o.memoizedProps;if(y!==p){o=a.stateNode,Ta(Ri.current);var w=null;switch(c){case"input":y=en(o,y),p=en(o,p),w=[];break;case"select":y=he({},y,{value:void 0}),p=he({},p,{value:void 0}),w=[];break;case"textarea":y=bc(o,y),p=bc(o,p),w=[];break;default:typeof y.onClick!="function"&&typeof p.onClick=="function"&&(o.onclick=tp)}Nc(c,p);var P;c=null;for(ee in y)if(!p.hasOwnProperty(ee)&&y.hasOwnProperty(ee)&&y[ee]!=null)if(ee==="style"){var U=y[ee];for(P in U)U.hasOwnProperty(P)&&(c||(c={}),c[P]="")}else ee!=="dangerouslySetInnerHTML"&&ee!=="children"&&ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&ee!=="autoFocus"&&(i.hasOwnProperty(ee)?w||(w=[]):(w=w||[]).push(ee,null));for(ee in p){var z=p[ee];if(U=y!=null?y[ee]:void 0,p.hasOwnProperty(ee)&&z!==U&&(z!=null||U!=null))if(ee==="style")if(U){for(P in U)!U.hasOwnProperty(P)||z&&z.hasOwnProperty(P)||(c||(c={}),c[P]="");for(P in z)z.hasOwnProperty(P)&&U[P]!==z[P]&&(c||(c={}),c[P]=z[P])}else c||(w||(w=[]),w.push(ee,c)),c=z;else ee==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,U=U?U.__html:void 0,z!=null&&U!==z&&(w=w||[]).push(ee,z)):ee==="children"?typeof z!="string"&&typeof z!="number"||(w=w||[]).push(ee,""+z):ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&(i.hasOwnProperty(ee)?(z!=null&&ee==="onScroll"&&gt("scroll",o),w||U===z||(w=[])):(w=w||[]).push(ee,z))}c&&(w=w||[]).push("style",c);var ee=w;(a.updateQueue=ee)&&(a.flags|=4)}},cS=function(o,a,c,p){c!==p&&(a.flags|=4)};function fd(o,a){if(!Et)switch(o.tailMode){case"hidden":a=o.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?o.tail=null:c.sibling=null;break;case"collapsed":c=o.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?a||o.tail===null?o.tail=null:o.tail.sibling=null:p.sibling=null}}function Cn(o){var a=o.alternate!==null&&o.alternate.child===o.child,c=0,p=0;if(a)for(var y=o.child;y!==null;)c|=y.lanes|y.childLanes,p|=y.subtreeFlags&14680064,p|=y.flags&14680064,y.return=o,y=y.sibling;else for(y=o.child;y!==null;)c|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=o,y=y.sibling;return o.subtreeFlags|=p,o.childLanes=c,a}function cL(o,a,c){var p=a.pendingProps;switch(d_(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cn(a),null;case 1:return Yn(a.type)&&rp(),Cn(a),null;case 3:return p=a.stateNode,Xl(),yt(Qn),yt(bn),S_(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(o===null||o.child===null)&&(lp(a)?a.flags|=4:o===null||o.memoizedState.isDehydrated&&!(a.flags&256)||(a.flags|=1024,ri!==null&&(ev(ri),ri=null))),z_(o,a),Cn(a),null;case 5:I_(a);var y=Ta(ld.current);if(c=a.type,o!==null&&a.stateNode!=null)uS(o,a,c,p,y),o.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!p){if(a.stateNode===null)throw Error(t(166));return Cn(a),null}if(o=Ta(Ri.current),lp(a)){p=a.stateNode,c=a.type;var w=a.memoizedProps;switch(p[Si]=a,p[rd]=w,o=(a.mode&1)!==0,c){case"dialog":gt("cancel",p),gt("close",p);break;case"iframe":case"object":case"embed":gt("load",p);break;case"video":case"audio":for(y=0;y<ed.length;y++)gt(ed[y],p);break;case"source":gt("error",p);break;case"img":case"image":case"link":gt("error",p),gt("load",p);break;case"details":gt("toggle",p);break;case"input":Hr(p,w),gt("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!w.multiple},gt("invalid",p);break;case"textarea":ml(p,w),gt("invalid",p)}Nc(c,w),y=null;for(var P in w)if(w.hasOwnProperty(P)){var U=w[P];P==="children"?typeof U=="string"?p.textContent!==U&&(w.suppressHydrationWarning!==!0&&ep(p.textContent,U,o),y=["children",U]):typeof U=="number"&&p.textContent!==""+U&&(w.suppressHydrationWarning!==!0&&ep(p.textContent,U,o),y=["children",""+U]):i.hasOwnProperty(P)&&U!=null&&P==="onScroll"&&gt("scroll",p)}switch(c){case"input":un(p),qn(p,w,!0);break;case"textarea":un(p),Pc(p);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(p.onclick=tp)}p=y,a.updateQueue=p,p!==null&&(a.flags|=4)}else{P=y.nodeType===9?y:y.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=tn(c)),o==="http://www.w3.org/1999/xhtml"?c==="script"?(o=P.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof p.is=="string"?o=P.createElement(c,{is:p.is}):(o=P.createElement(c),c==="select"&&(P=o,p.multiple?P.multiple=!0:p.size&&(P.size=p.size))):o=P.createElementNS(o,c),o[Si]=a,o[rd]=p,lS(o,a,!1,!1),a.stateNode=o;e:{switch(P=Dc(c,p),c){case"dialog":gt("cancel",o),gt("close",o),y=p;break;case"iframe":case"object":case"embed":gt("load",o),y=p;break;case"video":case"audio":for(y=0;y<ed.length;y++)gt(ed[y],o);y=p;break;case"source":gt("error",o),y=p;break;case"img":case"image":case"link":gt("error",o),gt("load",o),y=p;break;case"details":gt("toggle",o),y=p;break;case"input":Hr(o,p),y=en(o,p),gt("invalid",o);break;case"option":y=p;break;case"select":o._wrapperState={wasMultiple:!!p.multiple},y=he({},p,{value:void 0}),gt("invalid",o);break;case"textarea":ml(o,p),y=bc(o,p),gt("invalid",o);break;default:y=p}Nc(c,y),U=y;for(w in U)if(U.hasOwnProperty(w)){var z=U[w];w==="style"?xc(o,z):w==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,z!=null&&Cc(o,z)):w==="children"?typeof z=="string"?(c!=="textarea"||z!=="")&&Hs(o,z):typeof z=="number"&&Hs(o,""+z):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(i.hasOwnProperty(w)?z!=null&&w==="onScroll"&&gt("scroll",o):z!=null&&L(o,w,z,P))}switch(c){case"input":un(o),qn(o,p,!1);break;case"textarea":un(o),Pc(o);break;case"option":p.value!=null&&o.setAttribute("value",""+qe(p.value));break;case"select":o.multiple=!!p.multiple,w=p.value,w!=null?rs(o,!!p.multiple,w,!1):p.defaultValue!=null&&rs(o,!!p.multiple,p.defaultValue,!0);break;default:typeof y.onClick=="function"&&(o.onclick=tp)}switch(c){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Cn(a),null;case 6:if(o&&a.stateNode!=null)cS(o,a,o.memoizedProps,p);else{if(typeof p!="string"&&a.stateNode===null)throw Error(t(166));if(c=Ta(ld.current),Ta(Ri.current),lp(a)){if(p=a.stateNode,c=a.memoizedProps,p[Si]=a,(w=p.nodeValue!==c)&&(o=hr,o!==null))switch(o.tag){case 3:ep(p.nodeValue,c,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&ep(p.nodeValue,c,(o.mode&1)!==0)}w&&(a.flags|=4)}else p=(c.nodeType===9?c:c.ownerDocument).createTextNode(p),p[Si]=a,a.stateNode=p}return Cn(a),null;case 13:if(yt(Pt),p=a.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Et&&fr!==null&&a.mode&1&&!(a.flags&128))fT(),Gl(),a.flags|=98560,w=!1;else if(w=lp(a),p!==null&&p.dehydrated!==null){if(o===null){if(!w)throw Error(t(318));if(w=a.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(t(317));w[Si]=a}else Gl(),!(a.flags&128)&&(a.memoizedState=null),a.flags|=4;Cn(a),w=!1}else ri!==null&&(ev(ri),ri=null),w=!0;if(!w)return a.flags&65536?a:null}return a.flags&128?(a.lanes=c,a):(p=p!==null,p!==(o!==null&&o.memoizedState!==null)&&p&&(a.child.flags|=8192,a.mode&1&&(o===null||Pt.current&1?on===0&&(on=3):rv())),a.updateQueue!==null&&(a.flags|=4),Cn(a),null);case 4:return Xl(),z_(o,a),o===null&&td(a.stateNode.containerInfo),Cn(a),null;case 10:return y_(a.type._context),Cn(a),null;case 17:return Yn(a.type)&&rp(),Cn(a),null;case 19:if(yt(Pt),w=a.memoizedState,w===null)return Cn(a),null;if(p=(a.flags&128)!==0,P=w.rendering,P===null)if(p)fd(w,!1);else{if(on!==0||o!==null&&o.flags&128)for(o=a.child;o!==null;){if(P=pp(o),P!==null){for(a.flags|=128,fd(w,!1),p=P.updateQueue,p!==null&&(a.updateQueue=p,a.flags|=4),a.subtreeFlags=0,p=c,c=a.child;c!==null;)w=c,o=p,w.flags&=14680066,P=w.alternate,P===null?(w.childLanes=0,w.lanes=o,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=P.childLanes,w.lanes=P.lanes,w.child=P.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=P.memoizedProps,w.memoizedState=P.memoizedState,w.updateQueue=P.updateQueue,w.type=P.type,o=P.dependencies,w.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),c=c.sibling;return ft(Pt,Pt.current&1|2),a.child}o=o.sibling}w.tail!==null&&ht()>nu&&(a.flags|=128,p=!0,fd(w,!1),a.lanes=4194304)}else{if(!p)if(o=pp(P),o!==null){if(a.flags|=128,p=!0,c=o.updateQueue,c!==null&&(a.updateQueue=c,a.flags|=4),fd(w,!0),w.tail===null&&w.tailMode==="hidden"&&!P.alternate&&!Et)return Cn(a),null}else 2*ht()-w.renderingStartTime>nu&&c!==1073741824&&(a.flags|=128,p=!0,fd(w,!1),a.lanes=4194304);w.isBackwards?(P.sibling=a.child,a.child=P):(c=w.last,c!==null?c.sibling=P:a.child=P,w.last=P)}return w.tail!==null?(a=w.tail,w.rendering=a,w.tail=a.sibling,w.renderingStartTime=ht(),a.sibling=null,c=Pt.current,ft(Pt,p?c&1|2:c&1),a):(Cn(a),null);case 22:case 23:return nv(),p=a.memoizedState!==null,o!==null&&o.memoizedState!==null!==p&&(a.flags|=8192),p&&a.mode&1?pr&1073741824&&(Cn(a),a.subtreeFlags&6&&(a.flags|=8192)):Cn(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function dL(o,a){switch(d_(a),a.tag){case 1:return Yn(a.type)&&rp(),o=a.flags,o&65536?(a.flags=o&-65537|128,a):null;case 3:return Xl(),yt(Qn),yt(bn),S_(),o=a.flags,o&65536&&!(o&128)?(a.flags=o&-65537|128,a):null;case 5:return I_(a),null;case 13:if(yt(Pt),o=a.memoizedState,o!==null&&o.dehydrated!==null){if(a.alternate===null)throw Error(t(340));Gl()}return o=a.flags,o&65536?(a.flags=o&-65537|128,a):null;case 19:return yt(Pt),null;case 4:return Xl(),null;case 10:return y_(a.type._context),null;case 22:case 23:return nv(),null;case 24:return null;default:return null}}var Tp=!1,kn=!1,hL=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function eu(o,a){var c=o.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(p){Dt(o,a,p)}else c.current=null}function W_(o,a,c){try{c()}catch(p){Dt(o,a,p)}}var dS=!1;function fL(o,a){if(n_=eo,o=zI(),Gy(o)){if("selectionStart"in o)var c={start:o.selectionStart,end:o.selectionEnd};else e:{c=(c=o.ownerDocument)&&c.defaultView||window;var p=c.getSelection&&c.getSelection();if(p&&p.rangeCount!==0){c=p.anchorNode;var y=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var P=0,U=-1,z=-1,ee=0,ce=0,fe=o,le=null;t:for(;;){for(var we;fe!==c||y!==0&&fe.nodeType!==3||(U=P+y),fe!==w||p!==0&&fe.nodeType!==3||(z=P+p),fe.nodeType===3&&(P+=fe.nodeValue.length),(we=fe.firstChild)!==null;)le=fe,fe=we;for(;;){if(fe===o)break t;if(le===c&&++ee===y&&(U=P),le===w&&++ce===p&&(z=P),(we=fe.nextSibling)!==null)break;fe=le,le=fe.parentNode}fe=we}c=U===-1||z===-1?null:{start:U,end:z}}else c=null}c=c||{start:0,end:0}}else c=null;for(r_={focusedElem:o,selectionRange:c},eo=!1,Ie=a;Ie!==null;)if(a=Ie,o=a.child,(a.subtreeFlags&1028)!==0&&o!==null)o.return=a,Ie=o;else for(;Ie!==null;){a=Ie;try{var Se=a.alternate;if(a.flags&1024)switch(a.tag){case 0:case 11:case 15:break;case 1:if(Se!==null){var Ae=Se.memoizedProps,jt=Se.memoizedState,Y=a.stateNode,H=Y.getSnapshotBeforeUpdate(a.elementType===a.type?Ae:ii(a.type,Ae),jt);Y.__reactInternalSnapshotBeforeUpdate=H}break;case 3:var J=a.stateNode.containerInfo;J.nodeType===1?J.textContent="":J.nodeType===9&&J.documentElement&&J.removeChild(J.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ge){Dt(a,a.return,ge)}if(o=a.sibling,o!==null){o.return=a.return,Ie=o;break}Ie=a.return}return Se=dS,dS=!1,Se}function pd(o,a,c){var p=a.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var y=p=p.next;do{if((y.tag&o)===o){var w=y.destroy;y.destroy=void 0,w!==void 0&&W_(a,c,w)}y=y.next}while(y!==p)}}function Sp(o,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&o)===o){var p=c.create;c.destroy=p()}c=c.next}while(c!==a)}}function q_(o){var a=o.ref;if(a!==null){var c=o.stateNode;switch(o.tag){case 5:o=c;break;default:o=c}typeof a=="function"?a(o):a.current=o}}function hS(o){var a=o.alternate;a!==null&&(o.alternate=null,hS(a)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(a=o.stateNode,a!==null&&(delete a[Si],delete a[rd],delete a[a_],delete a[QD],delete a[YD])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function fS(o){return o.tag===5||o.tag===3||o.tag===4}function pS(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||fS(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function H_(o,a,c){var p=o.tag;if(p===5||p===6)o=o.stateNode,a?c.nodeType===8?c.parentNode.insertBefore(o,a):c.insertBefore(o,a):(c.nodeType===8?(a=c.parentNode,a.insertBefore(o,c)):(a=c,a.appendChild(o)),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=tp));else if(p!==4&&(o=o.child,o!==null))for(H_(o,a,c),o=o.sibling;o!==null;)H_(o,a,c),o=o.sibling}function K_(o,a,c){var p=o.tag;if(p===5||p===6)o=o.stateNode,a?c.insertBefore(o,a):c.appendChild(o);else if(p!==4&&(o=o.child,o!==null))for(K_(o,a,c),o=o.sibling;o!==null;)K_(o,a,c),o=o.sibling}var wn=null,si=!1;function uo(o,a,c){for(c=c.child;c!==null;)mS(o,a,c),c=c.sibling}function mS(o,a,c){if(lr&&typeof lr.onCommitFiberUnmount=="function")try{lr.onCommitFiberUnmount(da,c)}catch{}switch(c.tag){case 5:kn||eu(c,a);case 6:var p=wn,y=si;wn=null,uo(o,a,c),wn=p,si=y,wn!==null&&(si?(o=wn,c=c.stateNode,o.nodeType===8?o.parentNode.removeChild(c):o.removeChild(c)):wn.removeChild(c.stateNode));break;case 18:wn!==null&&(si?(o=wn,c=c.stateNode,o.nodeType===8?o_(o.parentNode,c):o.nodeType===1&&o_(o,c),ei(o)):o_(wn,c.stateNode));break;case 4:p=wn,y=si,wn=c.stateNode.containerInfo,si=!0,uo(o,a,c),wn=p,si=y;break;case 0:case 11:case 14:case 15:if(!kn&&(p=c.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){y=p=p.next;do{var w=y,P=w.destroy;w=w.tag,P!==void 0&&(w&2||w&4)&&W_(c,a,P),y=y.next}while(y!==p)}uo(o,a,c);break;case 1:if(!kn&&(eu(c,a),p=c.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=c.memoizedProps,p.state=c.memoizedState,p.componentWillUnmount()}catch(U){Dt(c,a,U)}uo(o,a,c);break;case 21:uo(o,a,c);break;case 22:c.mode&1?(kn=(p=kn)||c.memoizedState!==null,uo(o,a,c),kn=p):uo(o,a,c);break;default:uo(o,a,c)}}function gS(o){var a=o.updateQueue;if(a!==null){o.updateQueue=null;var c=o.stateNode;c===null&&(c=o.stateNode=new hL),a.forEach(function(p){var y=IL.bind(null,o,p);c.has(p)||(c.add(p),p.then(y,y))})}}function oi(o,a){var c=a.deletions;if(c!==null)for(var p=0;p<c.length;p++){var y=c[p];try{var w=o,P=a,U=P;e:for(;U!==null;){switch(U.tag){case 5:wn=U.stateNode,si=!1;break e;case 3:wn=U.stateNode.containerInfo,si=!0;break e;case 4:wn=U.stateNode.containerInfo,si=!0;break e}U=U.return}if(wn===null)throw Error(t(160));mS(w,P,y),wn=null,si=!1;var z=y.alternate;z!==null&&(z.return=null),y.return=null}catch(ee){Dt(y,a,ee)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)yS(a,o),a=a.sibling}function yS(o,a){var c=o.alternate,p=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(oi(a,o),bi(o),p&4){try{pd(3,o,o.return),Sp(3,o)}catch(Ae){Dt(o,o.return,Ae)}try{pd(5,o,o.return)}catch(Ae){Dt(o,o.return,Ae)}}break;case 1:oi(a,o),bi(o),p&512&&c!==null&&eu(c,c.return);break;case 5:if(oi(a,o),bi(o),p&512&&c!==null&&eu(c,c.return),o.flags&32){var y=o.stateNode;try{Hs(y,"")}catch(Ae){Dt(o,o.return,Ae)}}if(p&4&&(y=o.stateNode,y!=null)){var w=o.memoizedProps,P=c!==null?c.memoizedProps:w,U=o.type,z=o.updateQueue;if(o.updateQueue=null,z!==null)try{U==="input"&&w.type==="radio"&&w.name!=null&&br(y,w),Dc(U,P);var ee=Dc(U,w);for(P=0;P<z.length;P+=2){var ce=z[P],fe=z[P+1];ce==="style"?xc(y,fe):ce==="dangerouslySetInnerHTML"?Cc(y,fe):ce==="children"?Hs(y,fe):L(y,ce,fe,ee)}switch(U){case"input":Pr(y,w);break;case"textarea":gl(y,w);break;case"select":var le=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!w.multiple;var we=w.value;we!=null?rs(y,!!w.multiple,we,!1):le!==!!w.multiple&&(w.defaultValue!=null?rs(y,!!w.multiple,w.defaultValue,!0):rs(y,!!w.multiple,w.multiple?[]:"",!1))}y[rd]=w}catch(Ae){Dt(o,o.return,Ae)}}break;case 6:if(oi(a,o),bi(o),p&4){if(o.stateNode===null)throw Error(t(162));y=o.stateNode,w=o.memoizedProps;try{y.nodeValue=w}catch(Ae){Dt(o,o.return,Ae)}}break;case 3:if(oi(a,o),bi(o),p&4&&c!==null&&c.memoizedState.isDehydrated)try{ei(a.containerInfo)}catch(Ae){Dt(o,o.return,Ae)}break;case 4:oi(a,o),bi(o);break;case 13:oi(a,o),bi(o),y=o.child,y.flags&8192&&(w=y.memoizedState!==null,y.stateNode.isHidden=w,!w||y.alternate!==null&&y.alternate.memoizedState!==null||(Y_=ht())),p&4&&gS(o);break;case 22:if(ce=c!==null&&c.memoizedState!==null,o.mode&1?(kn=(ee=kn)||ce,oi(a,o),kn=ee):oi(a,o),bi(o),p&8192){if(ee=o.memoizedState!==null,(o.stateNode.isHidden=ee)&&!ce&&o.mode&1)for(Ie=o,ce=o.child;ce!==null;){for(fe=Ie=ce;Ie!==null;){switch(le=Ie,we=le.child,le.tag){case 0:case 11:case 14:case 15:pd(4,le,le.return);break;case 1:eu(le,le.return);var Se=le.stateNode;if(typeof Se.componentWillUnmount=="function"){p=le,c=le.return;try{a=p,Se.props=a.memoizedProps,Se.state=a.memoizedState,Se.componentWillUnmount()}catch(Ae){Dt(p,c,Ae)}}break;case 5:eu(le,le.return);break;case 22:if(le.memoizedState!==null){wS(fe);continue}}we!==null?(we.return=le,Ie=we):wS(fe)}ce=ce.sibling}e:for(ce=null,fe=o;;){if(fe.tag===5){if(ce===null){ce=fe;try{y=fe.stateNode,ee?(w=y.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(U=fe.stateNode,z=fe.memoizedProps.style,P=z!=null&&z.hasOwnProperty("display")?z.display:null,U.style.display=kc("display",P))}catch(Ae){Dt(o,o.return,Ae)}}}else if(fe.tag===6){if(ce===null)try{fe.stateNode.nodeValue=ee?"":fe.memoizedProps}catch(Ae){Dt(o,o.return,Ae)}}else if((fe.tag!==22&&fe.tag!==23||fe.memoizedState===null||fe===o)&&fe.child!==null){fe.child.return=fe,fe=fe.child;continue}if(fe===o)break e;for(;fe.sibling===null;){if(fe.return===null||fe.return===o)break e;ce===fe&&(ce=null),fe=fe.return}ce===fe&&(ce=null),fe.sibling.return=fe.return,fe=fe.sibling}}break;case 19:oi(a,o),bi(o),p&4&&gS(o);break;case 21:break;default:oi(a,o),bi(o)}}function bi(o){var a=o.flags;if(a&2){try{e:{for(var c=o.return;c!==null;){if(fS(c)){var p=c;break e}c=c.return}throw Error(t(160))}switch(p.tag){case 5:var y=p.stateNode;p.flags&32&&(Hs(y,""),p.flags&=-33);var w=pS(o);K_(o,w,y);break;case 3:case 4:var P=p.stateNode.containerInfo,U=pS(o);H_(o,U,P);break;default:throw Error(t(161))}}catch(z){Dt(o,o.return,z)}o.flags&=-3}a&4096&&(o.flags&=-4097)}function pL(o,a,c){Ie=o,_S(o)}function _S(o,a,c){for(var p=(o.mode&1)!==0;Ie!==null;){var y=Ie,w=y.child;if(y.tag===22&&p){var P=y.memoizedState!==null||Tp;if(!P){var U=y.alternate,z=U!==null&&U.memoizedState!==null||kn;U=Tp;var ee=kn;if(Tp=P,(kn=z)&&!ee)for(Ie=y;Ie!==null;)P=Ie,z=P.child,P.tag===22&&P.memoizedState!==null?ES(y):z!==null?(z.return=P,Ie=z):ES(y);for(;w!==null;)Ie=w,_S(w),w=w.sibling;Ie=y,Tp=U,kn=ee}vS(o)}else y.subtreeFlags&8772&&w!==null?(w.return=y,Ie=w):vS(o)}}function vS(o){for(;Ie!==null;){var a=Ie;if(a.flags&8772){var c=a.alternate;try{if(a.flags&8772)switch(a.tag){case 0:case 11:case 15:kn||Sp(5,a);break;case 1:var p=a.stateNode;if(a.flags&4&&!kn)if(c===null)p.componentDidMount();else{var y=a.elementType===a.type?c.memoizedProps:ii(a.type,c.memoizedProps);p.componentDidUpdate(y,c.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var w=a.updateQueue;w!==null&&wT(a,w,p);break;case 3:var P=a.updateQueue;if(P!==null){if(c=null,a.child!==null)switch(a.child.tag){case 5:c=a.child.stateNode;break;case 1:c=a.child.stateNode}wT(a,P,c)}break;case 5:var U=a.stateNode;if(c===null&&a.flags&4){c=U;var z=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":z.autoFocus&&c.focus();break;case"img":z.src&&(c.src=z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var ee=a.alternate;if(ee!==null){var ce=ee.memoizedState;if(ce!==null){var fe=ce.dehydrated;fe!==null&&ei(fe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}kn||a.flags&512&&q_(a)}catch(le){Dt(a,a.return,le)}}if(a===o){Ie=null;break}if(c=a.sibling,c!==null){c.return=a.return,Ie=c;break}Ie=a.return}}function wS(o){for(;Ie!==null;){var a=Ie;if(a===o){Ie=null;break}var c=a.sibling;if(c!==null){c.return=a.return,Ie=c;break}Ie=a.return}}function ES(o){for(;Ie!==null;){var a=Ie;try{switch(a.tag){case 0:case 11:case 15:var c=a.return;try{Sp(4,a)}catch(z){Dt(a,c,z)}break;case 1:var p=a.stateNode;if(typeof p.componentDidMount=="function"){var y=a.return;try{p.componentDidMount()}catch(z){Dt(a,y,z)}}var w=a.return;try{q_(a)}catch(z){Dt(a,w,z)}break;case 5:var P=a.return;try{q_(a)}catch(z){Dt(a,P,z)}}}catch(z){Dt(a,a.return,z)}if(a===o){Ie=null;break}var U=a.sibling;if(U!==null){U.return=a.return,Ie=U;break}Ie=a.return}}var mL=Math.ceil,Rp=B.ReactCurrentDispatcher,G_=B.ReactCurrentOwner,Mr=B.ReactCurrentBatchConfig,Xe=0,hn=null,Kt=null,En=0,pr=0,tu=io(0),on=0,md=null,Ra=0,Ap=0,Q_=0,gd=null,Xn=null,Y_=0,nu=1/0,_s=null,bp=!1,J_=null,co=null,Pp=!1,ho=null,Cp=0,yd=0,X_=null,kp=-1,xp=0;function $n(){return Xe&6?ht():kp!==-1?kp:kp=ht()}function fo(o){return o.mode&1?Xe&2&&En!==0?En&-En:XD.transition!==null?(xp===0&&(xp=fa()),xp):(o=He,o!==0||(o=window.event,o=o===void 0?16:qc(o.type)),o):1}function ai(o,a,c,p){if(50<yd)throw yd=0,X_=null,Error(t(185));Ys(o,c,p),(!(Xe&2)||o!==hn)&&(o===hn&&(!(Xe&2)&&(Ap|=c),on===4&&po(o,En)),Zn(o,p),c===1&&Xe===0&&!(a.mode&1)&&(nu=ht()+500,sp&&oo()))}function Zn(o,a){var c=o.callbackNode;os(o,a);var p=ha(o,o===hn?En:0);if(p===0)c!==null&&$c(c),o.callbackNode=null,o.callbackPriority=0;else if(a=p&-p,o.callbackPriority!==a){if(c!=null&&$c(c),a===1)o.tag===0?JD(TS.bind(null,o)):lT(TS.bind(null,o)),KD(function(){!(Xe&6)&&oo()}),c=null;else{switch(Xs(p)){case 1:c=ca;break;case 4:c=Ks;break;case 16:c=kr;break;case 536870912:c=xf;break;default:c=kr}c=xS(c,IS.bind(null,o))}o.callbackPriority=a,o.callbackNode=c}}function IS(o,a){if(kp=-1,xp=0,Xe&6)throw Error(t(327));var c=o.callbackNode;if(ru()&&o.callbackNode!==c)return null;var p=ha(o,o===hn?En:0);if(p===0)return null;if(p&30||p&o.expiredLanes||a)a=Op(o,p);else{a=p;var y=Xe;Xe|=2;var w=RS();(hn!==o||En!==a)&&(_s=null,nu=ht()+500,ba(o,a));do try{_L();break}catch(U){SS(o,U)}while(!0);g_(),Rp.current=w,Xe=y,Kt!==null?a=0:(hn=null,En=0,a=on)}if(a!==0){if(a===2&&(y=ur(o),y!==0&&(p=y,a=Z_(o,y))),a===1)throw c=md,ba(o,0),po(o,p),Zn(o,ht()),c;if(a===6)po(o,p);else{if(y=o.current.alternate,!(p&30)&&!gL(y)&&(a=Op(o,p),a===2&&(w=ur(o),w!==0&&(p=w,a=Z_(o,w))),a===1))throw c=md,ba(o,0),po(o,p),Zn(o,ht()),c;switch(o.finishedWork=y,o.finishedLanes=p,a){case 0:case 1:throw Error(t(345));case 2:Pa(o,Xn,_s);break;case 3:if(po(o,p),(p&130023424)===p&&(a=Y_+500-ht(),10<a)){if(ha(o,0)!==0)break;if(y=o.suspendedLanes,(y&p)!==p){$n(),o.pingedLanes|=o.suspendedLanes&y;break}o.timeoutHandle=s_(Pa.bind(null,o,Xn,_s),a);break}Pa(o,Xn,_s);break;case 4:if(po(o,p),(p&4194240)===p)break;for(a=o.eventTimes,y=-1;0<p;){var P=31-Mn(p);w=1<<P,P=a[P],P>y&&(y=P),p&=~w}if(p=y,p=ht()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*mL(p/1960))-p,10<p){o.timeoutHandle=s_(Pa.bind(null,o,Xn,_s),p);break}Pa(o,Xn,_s);break;case 5:Pa(o,Xn,_s);break;default:throw Error(t(329))}}}return Zn(o,ht()),o.callbackNode===c?IS.bind(null,o):null}function Z_(o,a){var c=gd;return o.current.memoizedState.isDehydrated&&(ba(o,a).flags|=256),o=Op(o,a),o!==2&&(a=Xn,Xn=c,a!==null&&ev(a)),o}function ev(o){Xn===null?Xn=o:Xn.push.apply(Xn,o)}function gL(o){for(var a=o;;){if(a.flags&16384){var c=a.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var p=0;p<c.length;p++){var y=c[p],w=y.getSnapshot;y=y.value;try{if(!ni(w(),y))return!1}catch{return!1}}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===o)break;for(;a.sibling===null;){if(a.return===null||a.return===o)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function po(o,a){for(a&=~Q_,a&=~Ap,o.suspendedLanes|=a,o.pingedLanes&=~a,o=o.expirationTimes;0<a;){var c=31-Mn(a),p=1<<c;o[c]=-1,a&=~p}}function TS(o){if(Xe&6)throw Error(t(327));ru();var a=ha(o,0);if(!(a&1))return Zn(o,ht()),null;var c=Op(o,a);if(o.tag!==0&&c===2){var p=ur(o);p!==0&&(a=p,c=Z_(o,p))}if(c===1)throw c=md,ba(o,0),po(o,a),Zn(o,ht()),c;if(c===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=a,Pa(o,Xn,_s),Zn(o,ht()),null}function tv(o,a){var c=Xe;Xe|=1;try{return o(a)}finally{Xe=c,Xe===0&&(nu=ht()+500,sp&&oo())}}function Aa(o){ho!==null&&ho.tag===0&&!(Xe&6)&&ru();var a=Xe;Xe|=1;var c=Mr.transition,p=He;try{if(Mr.transition=null,He=1,o)return o()}finally{He=p,Mr.transition=c,Xe=a,!(Xe&6)&&oo()}}function nv(){pr=tu.current,yt(tu)}function ba(o,a){o.finishedWork=null,o.finishedLanes=0;var c=o.timeoutHandle;if(c!==-1&&(o.timeoutHandle=-1,HD(c)),Kt!==null)for(c=Kt.return;c!==null;){var p=c;switch(d_(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&rp();break;case 3:Xl(),yt(Qn),yt(bn),S_();break;case 5:I_(p);break;case 4:Xl();break;case 13:yt(Pt);break;case 19:yt(Pt);break;case 10:y_(p.type._context);break;case 22:case 23:nv()}c=c.return}if(hn=o,Kt=o=mo(o.current,null),En=pr=a,on=0,md=null,Q_=Ap=Ra=0,Xn=gd=null,Ia!==null){for(a=0;a<Ia.length;a++)if(c=Ia[a],p=c.interleaved,p!==null){c.interleaved=null;var y=p.next,w=c.pending;if(w!==null){var P=w.next;w.next=y,p.next=P}c.pending=p}Ia=null}return o}function SS(o,a){do{var c=Kt;try{if(g_(),mp.current=vp,gp){for(var p=Ct.memoizedState;p!==null;){var y=p.queue;y!==null&&(y.pending=null),p=p.next}gp=!1}if(Sa=0,dn=sn=Ct=null,ud=!1,cd=0,G_.current=null,c===null||c.return===null){on=1,md=a,Kt=null;break}e:{var w=o,P=c.return,U=c,z=a;if(a=En,U.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){var ee=z,ce=U,fe=ce.tag;if(!(ce.mode&1)&&(fe===0||fe===11||fe===15)){var le=ce.alternate;le?(ce.updateQueue=le.updateQueue,ce.memoizedState=le.memoizedState,ce.lanes=le.lanes):(ce.updateQueue=null,ce.memoizedState=null)}var we=QT(P);if(we!==null){we.flags&=-257,YT(we,P,U,w,a),we.mode&1&&GT(w,ee,a),a=we,z=ee;var Se=a.updateQueue;if(Se===null){var Ae=new Set;Ae.add(z),a.updateQueue=Ae}else Se.add(z);break e}else{if(!(a&1)){GT(w,ee,a),rv();break e}z=Error(t(426))}}else if(Et&&U.mode&1){var jt=QT(P);if(jt!==null){!(jt.flags&65536)&&(jt.flags|=256),YT(jt,P,U,w,a),p_(Zl(z,U));break e}}w=z=Zl(z,U),on!==4&&(on=2),gd===null?gd=[w]:gd.push(w),w=P;do{switch(w.tag){case 3:w.flags|=65536,a&=-a,w.lanes|=a;var Y=HT(w,z,a);vT(w,Y);break e;case 1:U=z;var H=w.type,J=w.stateNode;if(!(w.flags&128)&&(typeof H.getDerivedStateFromError=="function"||J!==null&&typeof J.componentDidCatch=="function"&&(co===null||!co.has(J)))){w.flags|=65536,a&=-a,w.lanes|=a;var ge=KT(w,U,a);vT(w,ge);break e}}w=w.return}while(w!==null)}bS(c)}catch(be){a=be,Kt===c&&c!==null&&(Kt=c=c.return);continue}break}while(!0)}function RS(){var o=Rp.current;return Rp.current=vp,o===null?vp:o}function rv(){(on===0||on===3||on===2)&&(on=4),hn===null||!(Ra&268435455)&&!(Ap&268435455)||po(hn,En)}function Op(o,a){var c=Xe;Xe|=2;var p=RS();(hn!==o||En!==a)&&(_s=null,ba(o,a));do try{yL();break}catch(y){SS(o,y)}while(!0);if(g_(),Xe=c,Rp.current=p,Kt!==null)throw Error(t(261));return hn=null,En=0,on}function yL(){for(;Kt!==null;)AS(Kt)}function _L(){for(;Kt!==null&&!Cf();)AS(Kt)}function AS(o){var a=kS(o.alternate,o,pr);o.memoizedProps=o.pendingProps,a===null?bS(o):Kt=a,G_.current=null}function bS(o){var a=o;do{var c=a.alternate;if(o=a.return,a.flags&32768){if(c=dL(c,a),c!==null){c.flags&=32767,Kt=c;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{on=6,Kt=null;return}}else if(c=cL(c,a,pr),c!==null){Kt=c;return}if(a=a.sibling,a!==null){Kt=a;return}Kt=a=o}while(a!==null);on===0&&(on=5)}function Pa(o,a,c){var p=He,y=Mr.transition;try{Mr.transition=null,He=1,vL(o,a,c,p)}finally{Mr.transition=y,He=p}return null}function vL(o,a,c,p){do ru();while(ho!==null);if(Xe&6)throw Error(t(327));c=o.finishedWork;var y=o.finishedLanes;if(c===null)return null;if(o.finishedWork=null,o.finishedLanes=0,c===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var w=c.lanes|c.childLanes;if(ut(o,w),o===hn&&(Kt=hn=null,En=0),!(c.subtreeFlags&2064)&&!(c.flags&2064)||Pp||(Pp=!0,xS(kr,function(){return ru(),null})),w=(c.flags&15990)!==0,c.subtreeFlags&15990||w){w=Mr.transition,Mr.transition=null;var P=He;He=1;var U=Xe;Xe|=4,G_.current=null,fL(o,c),yS(c,o),UD(r_),eo=!!n_,r_=n_=null,o.current=c,pL(c),$y(),Xe=U,He=P,Mr.transition=w}else o.current=c;if(Pp&&(Pp=!1,ho=o,Cp=y),w=o.pendingLanes,w===0&&(co=null),Of(c.stateNode),Zn(o,ht()),a!==null)for(p=o.onRecoverableError,c=0;c<a.length;c++)y=a[c],p(y.value,{componentStack:y.stack,digest:y.digest});if(bp)throw bp=!1,o=J_,J_=null,o;return Cp&1&&o.tag!==0&&ru(),w=o.pendingLanes,w&1?o===X_?yd++:(yd=0,X_=o):yd=0,oo(),null}function ru(){if(ho!==null){var o=Xs(Cp),a=Mr.transition,c=He;try{if(Mr.transition=null,He=16>o?16:o,ho===null)var p=!1;else{if(o=ho,ho=null,Cp=0,Xe&6)throw Error(t(331));var y=Xe;for(Xe|=4,Ie=o.current;Ie!==null;){var w=Ie,P=w.child;if(Ie.flags&16){var U=w.deletions;if(U!==null){for(var z=0;z<U.length;z++){var ee=U[z];for(Ie=ee;Ie!==null;){var ce=Ie;switch(ce.tag){case 0:case 11:case 15:pd(8,ce,w)}var fe=ce.child;if(fe!==null)fe.return=ce,Ie=fe;else for(;Ie!==null;){ce=Ie;var le=ce.sibling,we=ce.return;if(hS(ce),ce===ee){Ie=null;break}if(le!==null){le.return=we,Ie=le;break}Ie=we}}}var Se=w.alternate;if(Se!==null){var Ae=Se.child;if(Ae!==null){Se.child=null;do{var jt=Ae.sibling;Ae.sibling=null,Ae=jt}while(Ae!==null)}}Ie=w}}if(w.subtreeFlags&2064&&P!==null)P.return=w,Ie=P;else e:for(;Ie!==null;){if(w=Ie,w.flags&2048)switch(w.tag){case 0:case 11:case 15:pd(9,w,w.return)}var Y=w.sibling;if(Y!==null){Y.return=w.return,Ie=Y;break e}Ie=w.return}}var H=o.current;for(Ie=H;Ie!==null;){P=Ie;var J=P.child;if(P.subtreeFlags&2064&&J!==null)J.return=P,Ie=J;else e:for(P=H;Ie!==null;){if(U=Ie,U.flags&2048)try{switch(U.tag){case 0:case 11:case 15:Sp(9,U)}}catch(be){Dt(U,U.return,be)}if(U===P){Ie=null;break e}var ge=U.sibling;if(ge!==null){ge.return=U.return,Ie=ge;break e}Ie=U.return}}if(Xe=y,oo(),lr&&typeof lr.onPostCommitFiberRoot=="function")try{lr.onPostCommitFiberRoot(da,o)}catch{}p=!0}return p}finally{He=c,Mr.transition=a}}return!1}function PS(o,a,c){a=Zl(c,a),a=HT(o,a,1),o=lo(o,a,1),a=$n(),o!==null&&(Ys(o,1,a),Zn(o,a))}function Dt(o,a,c){if(o.tag===3)PS(o,o,c);else for(;a!==null;){if(a.tag===3){PS(a,o,c);break}else if(a.tag===1){var p=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(co===null||!co.has(p))){o=Zl(c,o),o=KT(a,o,1),a=lo(a,o,1),o=$n(),a!==null&&(Ys(a,1,o),Zn(a,o));break}}a=a.return}}function wL(o,a,c){var p=o.pingCache;p!==null&&p.delete(a),a=$n(),o.pingedLanes|=o.suspendedLanes&c,hn===o&&(En&c)===c&&(on===4||on===3&&(En&130023424)===En&&500>ht()-Y_?ba(o,0):Q_|=c),Zn(o,a)}function CS(o,a){a===0&&(o.mode&1?(a=Al,Al<<=1,!(Al&130023424)&&(Al=4194304)):a=1);var c=$n();o=ms(o,a),o!==null&&(Ys(o,a,c),Zn(o,c))}function EL(o){var a=o.memoizedState,c=0;a!==null&&(c=a.retryLane),CS(o,c)}function IL(o,a){var c=0;switch(o.tag){case 13:var p=o.stateNode,y=o.memoizedState;y!==null&&(c=y.retryLane);break;case 19:p=o.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(a),CS(o,c)}var kS;kS=function(o,a,c){if(o!==null)if(o.memoizedProps!==a.pendingProps||Qn.current)Jn=!0;else{if(!(o.lanes&c)&&!(a.flags&128))return Jn=!1,uL(o,a,c);Jn=!!(o.flags&131072)}else Jn=!1,Et&&a.flags&1048576&&uT(a,ap,a.index);switch(a.lanes=0,a.tag){case 2:var p=a.type;Ip(o,a),o=a.pendingProps;var y=ql(a,bn.current);Jl(a,c),y=b_(null,a,p,o,y,c);var w=P_();return a.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Yn(p)?(w=!0,ip(a)):w=!1,a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,w_(a),y.updater=wp,a.stateNode=y,y._reactInternals=a,D_(a,p,o,c),a=F_(null,a,p,!0,w,c)):(a.tag=0,Et&&w&&c_(a),Un(null,a,y,c),a=a.child),a;case 16:p=a.elementType;e:{switch(Ip(o,a),o=a.pendingProps,y=p._init,p=y(p._payload),a.type=p,y=a.tag=SL(p),o=ii(p,o),y){case 0:a=M_(null,a,p,o,c);break e;case 1:a=nS(null,a,p,o,c);break e;case 11:a=JT(null,a,p,o,c);break e;case 14:a=XT(null,a,p,ii(p.type,o),c);break e}throw Error(t(306,p,""))}return a;case 0:return p=a.type,y=a.pendingProps,y=a.elementType===p?y:ii(p,y),M_(o,a,p,y,c);case 1:return p=a.type,y=a.pendingProps,y=a.elementType===p?y:ii(p,y),nS(o,a,p,y,c);case 3:e:{if(rS(a),o===null)throw Error(t(387));p=a.pendingProps,w=a.memoizedState,y=w.element,_T(o,a),fp(a,p,null,c);var P=a.memoizedState;if(p=P.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:P.cache,pendingSuspenseBoundaries:P.pendingSuspenseBoundaries,transitions:P.transitions},a.updateQueue.baseState=w,a.memoizedState=w,a.flags&256){y=Zl(Error(t(423)),a),a=iS(o,a,p,c,y);break e}else if(p!==y){y=Zl(Error(t(424)),a),a=iS(o,a,p,c,y);break e}else for(fr=ro(a.stateNode.containerInfo.firstChild),hr=a,Et=!0,ri=null,c=gT(a,null,p,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Gl(),p===y){a=ys(o,a,c);break e}Un(o,a,p,c)}a=a.child}return a;case 5:return ET(a),o===null&&f_(a),p=a.type,y=a.pendingProps,w=o!==null?o.memoizedProps:null,P=y.children,i_(p,y)?P=null:w!==null&&i_(p,w)&&(a.flags|=32),tS(o,a),Un(o,a,P,c),a.child;case 6:return o===null&&f_(a),null;case 13:return sS(o,a,c);case 4:return E_(a,a.stateNode.containerInfo),p=a.pendingProps,o===null?a.child=Ql(a,null,p,c):Un(o,a,p,c),a.child;case 11:return p=a.type,y=a.pendingProps,y=a.elementType===p?y:ii(p,y),JT(o,a,p,y,c);case 7:return Un(o,a,a.pendingProps,c),a.child;case 8:return Un(o,a,a.pendingProps.children,c),a.child;case 12:return Un(o,a,a.pendingProps.children,c),a.child;case 10:e:{if(p=a.type._context,y=a.pendingProps,w=a.memoizedProps,P=y.value,ft(cp,p._currentValue),p._currentValue=P,w!==null)if(ni(w.value,P)){if(w.children===y.children&&!Qn.current){a=ys(o,a,c);break e}}else for(w=a.child,w!==null&&(w.return=a);w!==null;){var U=w.dependencies;if(U!==null){P=w.child;for(var z=U.firstContext;z!==null;){if(z.context===p){if(w.tag===1){z=gs(-1,c&-c),z.tag=2;var ee=w.updateQueue;if(ee!==null){ee=ee.shared;var ce=ee.pending;ce===null?z.next=z:(z.next=ce.next,ce.next=z),ee.pending=z}}w.lanes|=c,z=w.alternate,z!==null&&(z.lanes|=c),__(w.return,c,a),U.lanes|=c;break}z=z.next}}else if(w.tag===10)P=w.type===a.type?null:w.child;else if(w.tag===18){if(P=w.return,P===null)throw Error(t(341));P.lanes|=c,U=P.alternate,U!==null&&(U.lanes|=c),__(P,c,a),P=w.sibling}else P=w.child;if(P!==null)P.return=w;else for(P=w;P!==null;){if(P===a){P=null;break}if(w=P.sibling,w!==null){w.return=P.return,P=w;break}P=P.return}w=P}Un(o,a,y.children,c),a=a.child}return a;case 9:return y=a.type,p=a.pendingProps.children,Jl(a,c),y=Lr(y),p=p(y),a.flags|=1,Un(o,a,p,c),a.child;case 14:return p=a.type,y=ii(p,a.pendingProps),y=ii(p.type,y),XT(o,a,p,y,c);case 15:return ZT(o,a,a.type,a.pendingProps,c);case 17:return p=a.type,y=a.pendingProps,y=a.elementType===p?y:ii(p,y),Ip(o,a),a.tag=1,Yn(p)?(o=!0,ip(a)):o=!1,Jl(a,c),WT(a,p,y),D_(a,p,y,c),F_(null,a,p,!0,o,c);case 19:return aS(o,a,c);case 22:return eS(o,a,c)}throw Error(t(156,a.tag))};function xS(o,a){return Sl(o,a)}function TL(o,a,c,p){this.tag=o,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fr(o,a,c,p){return new TL(o,a,c,p)}function iv(o){return o=o.prototype,!(!o||!o.isReactComponent)}function SL(o){if(typeof o=="function")return iv(o)?1:0;if(o!=null){if(o=o.$$typeof,o===k)return 11;if(o===F)return 14}return 2}function mo(o,a){var c=o.alternate;return c===null?(c=Fr(o.tag,a,o.key,o.mode),c.elementType=o.elementType,c.type=o.type,c.stateNode=o.stateNode,c.alternate=o,o.alternate=c):(c.pendingProps=a,c.type=o.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=o.flags&14680064,c.childLanes=o.childLanes,c.lanes=o.lanes,c.child=o.child,c.memoizedProps=o.memoizedProps,c.memoizedState=o.memoizedState,c.updateQueue=o.updateQueue,a=o.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=o.sibling,c.index=o.index,c.ref=o.ref,c}function Np(o,a,c,p,y,w){var P=2;if(p=o,typeof o=="function")iv(o)&&(P=1);else if(typeof o=="string")P=5;else e:switch(o){case D:return Ca(c.children,y,w,a);case b:P=8,y|=8;break;case C:return o=Fr(12,c,a,y|2),o.elementType=C,o.lanes=w,o;case O:return o=Fr(13,c,a,y),o.elementType=O,o.lanes=w,o;case X:return o=Fr(19,c,a,y),o.elementType=X,o.lanes=w,o;case oe:return Dp(c,y,w,a);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case E:P=10;break e;case x:P=9;break e;case k:P=11;break e;case F:P=14;break e;case me:P=16,p=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return a=Fr(P,c,a,y),a.elementType=o,a.type=p,a.lanes=w,a}function Ca(o,a,c,p){return o=Fr(7,o,p,a),o.lanes=c,o}function Dp(o,a,c,p){return o=Fr(22,o,p,a),o.elementType=oe,o.lanes=c,o.stateNode={isHidden:!1},o}function sv(o,a,c){return o=Fr(6,o,null,a),o.lanes=c,o}function ov(o,a,c){return a=Fr(4,o.children!==null?o.children:[],o.key,a),a.lanes=c,a.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},a}function RL(o,a,c,p,y){this.tag=a,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qs(0),this.expirationTimes=Qs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qs(0),this.identifierPrefix=p,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function av(o,a,c,p,y,w,P,U,z){return o=new RL(o,a,c,U,z),a===1?(a=1,w===!0&&(a|=8)):a=0,w=Fr(3,null,null,a),o.current=w,w.stateNode=o,w.memoizedState={element:p,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},w_(w),o}function AL(o,a,c){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:W,key:p==null?null:""+p,children:o,containerInfo:a,implementation:c}}function OS(o){if(!o)return so;o=o._reactInternals;e:{if(Qr(o)!==o||o.tag!==1)throw Error(t(170));var a=o;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Yn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(o.tag===1){var c=o.type;if(Yn(c))return oT(o,c,a)}return a}function NS(o,a,c,p,y,w,P,U,z){return o=av(c,p,!0,o,y,w,P,U,z),o.context=OS(null),c=o.current,p=$n(),y=fo(c),w=gs(p,y),w.callback=a??null,lo(c,w,y),o.current.lanes=y,Ys(o,y,p),Zn(o,p),o}function Lp(o,a,c,p){var y=a.current,w=$n(),P=fo(y);return c=OS(c),a.context===null?a.context=c:a.pendingContext=c,a=gs(w,P),a.payload={element:o},p=p===void 0?null:p,p!==null&&(a.callback=p),o=lo(y,a,P),o!==null&&(ai(o,y,P,w),hp(o,y,P)),P}function Vp(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function DS(o,a){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var c=o.retryLane;o.retryLane=c!==0&&c<a?c:a}}function lv(o,a){DS(o,a),(o=o.alternate)&&DS(o,a)}function bL(){return null}var LS=typeof reportError=="function"?reportError:function(o){console.error(o)};function uv(o){this._internalRoot=o}Mp.prototype.render=uv.prototype.render=function(o){var a=this._internalRoot;if(a===null)throw Error(t(409));Lp(o,a,null,null)},Mp.prototype.unmount=uv.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var a=o.containerInfo;Aa(function(){Lp(null,o,null,null)}),a[ds]=null}};function Mp(o){this._internalRoot=o}Mp.prototype.unstable_scheduleHydration=function(o){if(o){var a=Mf();o={blockedOn:null,target:o,priority:a};for(var c=0;c<wi.length&&a!==0&&a<wi[c].priority;c++);wi.splice(c,0,o),c===0&&$f(o)}};function cv(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Fp(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function VS(){}function PL(o,a,c,p,y){if(y){if(typeof p=="function"){var w=p;p=function(){var ee=Vp(P);w.call(ee)}}var P=NS(a,p,o,0,null,!1,!1,"",VS);return o._reactRootContainer=P,o[ds]=P.current,td(o.nodeType===8?o.parentNode:o),Aa(),P}for(;y=o.lastChild;)o.removeChild(y);if(typeof p=="function"){var U=p;p=function(){var ee=Vp(z);U.call(ee)}}var z=av(o,0,!1,null,null,!1,!1,"",VS);return o._reactRootContainer=z,o[ds]=z.current,td(o.nodeType===8?o.parentNode:o),Aa(function(){Lp(a,z,c,p)}),z}function Up(o,a,c,p,y){var w=c._reactRootContainer;if(w){var P=w;if(typeof y=="function"){var U=y;y=function(){var z=Vp(P);U.call(z)}}Lp(a,P,o,y)}else P=PL(c,a,o,y,p);return Vp(P)}Lf=function(o){switch(o.tag){case 3:var a=o.stateNode;if(a.current.memoizedState.isDehydrated){var c=Gs(a.pendingLanes);c!==0&&(Js(a,c|1),Zn(a,ht()),!(Xe&6)&&(nu=ht()+500,oo()))}break;case 13:Aa(function(){var p=ms(o,1);if(p!==null){var y=$n();ai(p,o,1,y)}}),lv(o,1)}},bl=function(o){if(o.tag===13){var a=ms(o,134217728);if(a!==null){var c=$n();ai(a,o,134217728,c)}lv(o,134217728)}},Vf=function(o){if(o.tag===13){var a=fo(o),c=ms(o,a);if(c!==null){var p=$n();ai(c,o,a,p)}lv(o,a)}},Mf=function(){return He},Ff=function(o,a){var c=He;try{return He=o,a()}finally{He=c}},_l=function(o,a,c){switch(a){case"input":if(Pr(o,c),a=c.name,c.type==="radio"&&a!=null){for(c=o;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<c.length;a++){var p=c[a];if(p!==o&&p.form===o.form){var y=np(p);if(!y)throw Error(t(90));it(p),Pr(p,y)}}}break;case"textarea":gl(o,c);break;case"select":a=c.value,a!=null&&rs(o,!!c.multiple,a,!1)}},oa=tv,Vc=Aa;var CL={usingClientEntryPoint:!1,Events:[id,zl,np,_i,Lc,tv]},_d={findFiberByHostInstance:_a,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kL={bundleType:_d.bundleType,version:_d.version,rendererPackageName:_d.rendererPackageName,rendererConfig:_d.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Uc(o),o===null?null:o.stateNode},findFiberByHostInstance:_d.findFiberByHostInstance||bL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$p.isDisabled&&$p.supportsFiber)try{da=$p.inject(kL),lr=$p}catch{}}return er.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CL,er.createPortal=function(o,a){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cv(a))throw Error(t(200));return AL(o,a,null,c)},er.createRoot=function(o,a){if(!cv(o))throw Error(t(299));var c=!1,p="",y=LS;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(y=a.onRecoverableError)),a=av(o,1,!1,null,null,c,!1,p,y),o[ds]=a.current,td(o.nodeType===8?o.parentNode:o),new uv(a)},er.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var a=o._reactInternals;if(a===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=Uc(a),o=o===null?null:o.stateNode,o},er.flushSync=function(o){return Aa(o)},er.hydrate=function(o,a,c){if(!Fp(a))throw Error(t(200));return Up(null,o,a,!0,c)},er.hydrateRoot=function(o,a,c){if(!cv(o))throw Error(t(405));var p=c!=null&&c.hydratedSources||null,y=!1,w="",P=LS;if(c!=null&&(c.unstable_strictMode===!0&&(y=!0),c.identifierPrefix!==void 0&&(w=c.identifierPrefix),c.onRecoverableError!==void 0&&(P=c.onRecoverableError)),a=NS(a,null,o,1,c??null,y,!1,w,P),o[ds]=a.current,td(o),p)for(o=0;o<p.length;o++)c=p[o],y=c._getVersion,y=y(c._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[c,y]:a.mutableSourceEagerHydrationData.push(c,y);return new Mp(a)},er.render=function(o,a,c){if(!Fp(a))throw Error(t(200));return Up(null,o,a,!1,c)},er.unmountComponentAtNode=function(o){if(!Fp(o))throw Error(t(40));return o._reactRootContainer?(Aa(function(){Up(null,null,o,!1,function(){o._reactRootContainer=null,o[ds]=null})}),!0):!1},er.unstable_batchedUpdates=tv,er.unstable_renderSubtreeIntoContainer=function(o,a,c,p){if(!Fp(c))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return Up(o,a,c,!1,p)},er.version="18.3.1-next-f1338f8080-20240426",er}var WS;function UL(){if(WS)return fv.exports;WS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),fv.exports=FL(),fv.exports}var qS;function $L(){if(qS)return jp;qS=1;var n=UL();return jp.createRoot=n.createRoot,jp.hydrateRoot=n.hydrateRoot,jp}var jL=$L(),wd={},HS;function BL(){if(HS)return wd;HS=1,Object.defineProperty(wd,"__esModule",{value:!0}),wd.parse=l,wd.serialize=h;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const _=function(){};return _.prototype=Object.create(null),_})();function l(_,T){const I=new s,R=_.length;if(R<2)return I;const A=(T==null?void 0:T.decode)||m;let V=0;do{const M=_.indexOf("=",V);if(M===-1)break;const L=_.indexOf(";",V),B=L===-1?R:L;if(M>B){V=_.lastIndexOf(";",M-1)+1;continue}const $=u(_,V,M),W=d(_,M,$),D=_.slice($,W);if(I[D]===void 0){let b=u(_,M+1,B),C=d(_,B,b);const E=A(_.slice(b,C));I[D]=E}V=B+1}while(V<R);return I}function u(_,T,I){do{const R=_.charCodeAt(T);if(R!==32&&R!==9)return T}while(++T<I);return I}function d(_,T,I){for(;T>I;){const R=_.charCodeAt(--T);if(R!==32&&R!==9)return T+1}return I}function h(_,T,I){const R=(I==null?void 0:I.encode)||encodeURIComponent;if(!n.test(_))throw new TypeError(`argument name is invalid: ${_}`);const A=R(T);if(!e.test(A))throw new TypeError(`argument val is invalid: ${T}`);let V=_+"="+A;if(!I)return V;if(I.maxAge!==void 0){if(!Number.isInteger(I.maxAge))throw new TypeError(`option maxAge is invalid: ${I.maxAge}`);V+="; Max-Age="+I.maxAge}if(I.domain){if(!t.test(I.domain))throw new TypeError(`option domain is invalid: ${I.domain}`);V+="; Domain="+I.domain}if(I.path){if(!r.test(I.path))throw new TypeError(`option path is invalid: ${I.path}`);V+="; Path="+I.path}if(I.expires){if(!g(I.expires)||!Number.isFinite(I.expires.valueOf()))throw new TypeError(`option expires is invalid: ${I.expires}`);V+="; Expires="+I.expires.toUTCString()}if(I.httpOnly&&(V+="; HttpOnly"),I.secure&&(V+="; Secure"),I.partitioned&&(V+="; Partitioned"),I.priority)switch(typeof I.priority=="string"?I.priority.toLowerCase():void 0){case"low":V+="; Priority=Low";break;case"medium":V+="; Priority=Medium";break;case"high":V+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${I.priority}`)}if(I.sameSite)switch(typeof I.sameSite=="string"?I.sameSite.toLowerCase():I.sameSite){case!0:case"strict":V+="; SameSite=Strict";break;case"lax":V+="; SameSite=Lax";break;case"none":V+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${I.sameSite}`)}return V}function m(_){if(_.indexOf("%")===-1)return _;try{return decodeURIComponent(_)}catch{return _}}function g(_){return i.call(_)==="[object Date]"}return wd}BL();/**
 * react-router v7.2.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var KS="popstate";function zL(n={}){function e(r,i){let{pathname:s,search:l,hash:u}=r.location;return tw("",{pathname:s,search:l,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:mh(i)}return qL(e,t,null,n)}function xt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Gi(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function WL(){return Math.random().toString(36).substring(2,10)}function GS(n,e){return{usr:n.state,key:n.key,idx:e}}function tw(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?oc(e):e,state:t,key:e&&e.key||r||WL()}}function mh({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function oc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function qL(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,l=i.history,u="POP",d=null,h=m();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function m(){return(l.state||{idx:null}).idx}function g(){u="POP";let A=m(),V=A==null?null:A-h;h=A,d&&d({action:u,location:R.location,delta:V})}function _(A,V){u="PUSH";let M=tw(R.location,A,V);h=m()+1;let L=GS(M,h),B=R.createHref(M);try{l.pushState(L,"",B)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;i.location.assign(B)}s&&d&&d({action:u,location:R.location,delta:1})}function T(A,V){u="REPLACE";let M=tw(R.location,A,V);h=m();let L=GS(M,h),B=R.createHref(M);l.replaceState(L,"",B),s&&d&&d({action:u,location:R.location,delta:0})}function I(A){let V=i.location.origin!=="null"?i.location.origin:i.location.href,M=typeof A=="string"?A:mh(A);return M=M.replace(/ $/,"%20"),xt(V,`No window.location.(origin|href) available to create URL for href: ${M}`),new URL(M,V)}let R={get action(){return u},get location(){return n(i,l)},listen(A){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(KS,g),d=A,()=>{i.removeEventListener(KS,g),d=null}},createHref(A){return e(i,A)},createURL:I,encodeLocation(A){let V=I(A);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:_,replace:T,go(A){return l.go(A)}};return R}function zP(n,e,t="/"){return HL(n,e,t,!1)}function HL(n,e,t,r){let i=typeof e=="string"?oc(e):e,s=No(i.pathname||"/",t);if(s==null)return null;let l=WP(n);KL(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let h=iV(s);u=nV(l[d],h,r)}return u}function WP(n,e=[],t=[],r=""){let i=(s,l,u)=>{let d={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:l,route:s};d.relativePath.startsWith("/")&&(xt(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length));let h=Cs([r,d.relativePath]),m=t.concat(d);s.children&&s.children.length>0&&(xt(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),WP(s.children,e,m,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:eV(h,s.index),routesMeta:m})};return n.forEach((s,l)=>{var u;if(s.path===""||!((u=s.path)!=null&&u.includes("?")))i(s,l);else for(let d of qP(s.path))i(s,l,d)}),e}function qP(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let l=qP(r.join("/")),u=[];return u.push(...l.map(d=>d===""?s:[s,d].join("/"))),i&&u.push(...l),u.map(d=>n.startsWith("/")&&d===""?"/":d)}function KL(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:tV(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var GL=/^:[\w-]+$/,QL=3,YL=2,JL=1,XL=10,ZL=-2,QS=n=>n==="*";function eV(n,e){let t=n.split("/"),r=t.length;return t.some(QS)&&(r+=ZL),e&&(r+=YL),t.filter(i=>!QS(i)).reduce((i,s)=>i+(GL.test(s)?QL:s===""?JL:XL),r)}function tV(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function nV(n,e,t=!1){let{routesMeta:r}=n,i={},s="/",l=[];for(let u=0;u<r.length;++u){let d=r[u],h=u===r.length-1,m=s==="/"?e:e.slice(s.length)||"/",g=Vm({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},m),_=d.route;if(!g&&h&&t&&!r[r.length-1].route.index&&(g=Vm({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},m)),!g)return null;Object.assign(i,g.params),l.push({params:i,pathname:Cs([s,g.pathname]),pathnameBase:lV(Cs([s,g.pathnameBase])),route:_}),g.pathnameBase!=="/"&&(s=Cs([s,g.pathnameBase]))}return l}function Vm(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=rV(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],l=s.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((h,{paramName:m,isOptional:g},_)=>{if(m==="*"){let I=u[_]||"";l=s.slice(0,s.length-I.length).replace(/(.)\/+$/,"$1")}const T=u[_];return g&&!T?h[m]=void 0:h[m]=(T||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:l,pattern:n}}function rV(n,e=!1,t=!0){Gi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function iV(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Gi(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function No(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function sV(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?oc(n):n;return{pathname:t?t.startsWith("/")?t:oV(t,e):e,search:uV(r),hash:cV(i)}}function oV(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function gv(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function aV(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function HP(n){let e=aV(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function KP(n,e,t,r=!1){let i;typeof n=="string"?i=oc(n):(i={...n},xt(!i.pathname||!i.pathname.includes("?"),gv("?","pathname","search",i)),xt(!i.pathname||!i.pathname.includes("#"),gv("#","pathname","hash",i)),xt(!i.search||!i.search.includes("#"),gv("#","search","hash",i)));let s=n===""||i.pathname==="",l=s?"/":i.pathname,u;if(l==null)u=t;else{let g=e.length-1;if(!r&&l.startsWith("..")){let _=l.split("/");for(;_[0]==="..";)_.shift(),g-=1;i.pathname=_.join("/")}u=g>=0?e[g]:"/"}let d=sV(i,u),h=l&&l!=="/"&&l.endsWith("/"),m=(s||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(h||m)&&(d.pathname+="/"),d}var Cs=n=>n.join("/").replace(/\/\/+/g,"/"),lV=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),uV=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,cV=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function dV(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var GP=["POST","PUT","PATCH","DELETE"];new Set(GP);var hV=["GET",...GP];new Set(hV);var ac=K.createContext(null);ac.displayName="DataRouter";var Rg=K.createContext(null);Rg.displayName="DataRouterState";var QP=K.createContext({isTransitioning:!1});QP.displayName="ViewTransition";var fV=K.createContext(new Map);fV.displayName="Fetchers";var pV=K.createContext(null);pV.displayName="Await";var es=K.createContext(null);es.displayName="Navigation";var qh=K.createContext(null);qh.displayName="Location";var ts=K.createContext({outlet:null,matches:[],isDataRoute:!1});ts.displayName="Route";var gE=K.createContext(null);gE.displayName="RouteError";function mV(n,{relative:e}={}){xt(Hh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=K.useContext(es),{hash:i,pathname:s,search:l}=Kh(n,{relative:e}),u=s;return t!=="/"&&(u=s==="/"?t:Cs([t,s])),r.createHref({pathname:u,search:l,hash:i})}function Hh(){return K.useContext(qh)!=null}function Go(){return xt(Hh(),"useLocation() may be used only in the context of a <Router> component."),K.useContext(qh).location}var YP="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function JP(n){K.useContext(es).static||K.useLayoutEffect(n)}function Ag(){let{isDataRoute:n}=K.useContext(ts);return n?PV():gV()}function gV(){xt(Hh(),"useNavigate() may be used only in the context of a <Router> component.");let n=K.useContext(ac),{basename:e,navigator:t}=K.useContext(es),{matches:r}=K.useContext(ts),{pathname:i}=Go(),s=JSON.stringify(HP(r)),l=K.useRef(!1);return JP(()=>{l.current=!0}),K.useCallback((d,h={})=>{if(Gi(l.current,YP),!l.current)return;if(typeof d=="number"){t.go(d);return}let m=KP(d,JSON.parse(s),i,h.relative==="path");n==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Cs([e,m.pathname])),(h.replace?t.replace:t.push)(m,h.state,h)},[e,t,s,i,n])}K.createContext(null);function XP(){let{matches:n}=K.useContext(ts),e=n[n.length-1];return e?e.params:{}}function Kh(n,{relative:e}={}){let{matches:t}=K.useContext(ts),{pathname:r}=Go(),i=JSON.stringify(HP(t));return K.useMemo(()=>KP(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function yV(n,e){return ZP(n,e)}function ZP(n,e,t,r){var M;xt(Hh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:s}=K.useContext(es),{matches:l}=K.useContext(ts),u=l[l.length-1],d=u?u.params:{},h=u?u.pathname:"/",m=u?u.pathnameBase:"/",g=u&&u.route;{let L=g&&g.path||"";eC(h,!g||L.endsWith("*")||L.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${L}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${L}"> to <Route path="${L==="/"?"*":`${L}/*`}">.`)}let _=Go(),T;if(e){let L=typeof e=="string"?oc(e):e;xt(m==="/"||((M=L.pathname)==null?void 0:M.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${L.pathname}" was given in the \`location\` prop.`),T=L}else T=_;let I=T.pathname||"/",R=I;if(m!=="/"){let L=m.replace(/^\//,"").split("/");R="/"+I.replace(/^\//,"").split("/").slice(L.length).join("/")}let A=!s&&t&&t.matches&&t.matches.length>0?t.matches:zP(n,{pathname:R});Gi(g||A!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),Gi(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let V=IV(A&&A.map(L=>Object.assign({},L,{params:Object.assign({},d,L.params),pathname:Cs([m,i.encodeLocation?i.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?m:Cs([m,i.encodeLocation?i.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),l,t,r);return e&&V?K.createElement(qh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},V):V}function _V(){let n=bV(),e=dV(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=K.createElement(K.Fragment,null,K.createElement("p",null,"💿 Hey developer 👋"),K.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",K.createElement("code",{style:s},"ErrorBoundary")," or"," ",K.createElement("code",{style:s},"errorElement")," prop on your route.")),K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},e),t?K.createElement("pre",{style:i},t):null,l)}var vV=K.createElement(_V,null),wV=class extends K.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?K.createElement(ts.Provider,{value:this.props.routeContext},K.createElement(gE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function EV({routeContext:n,match:e,children:t}){let r=K.useContext(ac);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),K.createElement(ts.Provider,{value:n},t)}function IV(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,s=t==null?void 0:t.errors;if(s!=null){let d=i.findIndex(h=>h.route.id&&(s==null?void 0:s[h.route.id])!==void 0);xt(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let l=!1,u=-1;if(t)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:m,errors:g}=t,_=h.route.loader&&!m.hasOwnProperty(h.route.id)&&(!g||g[h.route.id]===void 0);if(h.route.lazy||_){l=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((d,h,m)=>{let g,_=!1,T=null,I=null;t&&(g=s&&h.route.id?s[h.route.id]:void 0,T=h.route.errorElement||vV,l&&(u<0&&m===0?(eC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,I=null):u===m&&(_=!0,I=h.route.hydrateFallbackElement||null)));let R=e.concat(i.slice(0,m+1)),A=()=>{let V;return g?V=T:_?V=I:h.route.Component?V=K.createElement(h.route.Component,null):h.route.element?V=h.route.element:V=d,K.createElement(EV,{match:h,routeContext:{outlet:d,matches:R,isDataRoute:t!=null},children:V})};return t&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?K.createElement(wV,{location:t.location,revalidation:t.revalidation,component:T,error:g,children:A(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):A()},null)}function yE(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function TV(n){let e=K.useContext(ac);return xt(e,yE(n)),e}function SV(n){let e=K.useContext(Rg);return xt(e,yE(n)),e}function RV(n){let e=K.useContext(ts);return xt(e,yE(n)),e}function _E(n){let e=RV(n),t=e.matches[e.matches.length-1];return xt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function AV(){return _E("useRouteId")}function bV(){var r;let n=K.useContext(gE),e=SV("useRouteError"),t=_E("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function PV(){let{router:n}=TV("useNavigate"),e=_E("useNavigate"),t=K.useRef(!1);return JP(()=>{t.current=!0}),K.useCallback(async(i,s={})=>{Gi(t.current,YP),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...s}))},[n,e])}var YS={};function eC(n,e,t){!e&&!YS[n]&&(YS[n]=!0,Gi(!1,t))}K.memo(CV);function CV({routes:n,future:e,state:t}){return ZP(n,void 0,t,e)}function To(n){xt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function kV({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:s=!1}){xt(!Hh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),u=K.useMemo(()=>({basename:l,navigator:i,static:s,future:{}}),[l,i,s]);typeof t=="string"&&(t=oc(t));let{pathname:d="/",search:h="",hash:m="",state:g=null,key:_="default"}=t,T=K.useMemo(()=>{let I=No(d,l);return I==null?null:{location:{pathname:I,search:h,hash:m,state:g,key:_},navigationType:r}},[l,d,h,m,g,_,r]);return Gi(T!=null,`<Router basename="${l}"> is not able to match the URL "${d}${h}${m}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:K.createElement(es.Provider,{value:u},K.createElement(qh.Provider,{children:e,value:T}))}function xV({children:n,location:e}){return yV(nw(n),e)}function nw(n,e=[]){let t=[];return K.Children.forEach(n,(r,i)=>{if(!K.isValidElement(r))return;let s=[...e,i];if(r.type===K.Fragment){t.push.apply(t,nw(r.props.children,s));return}xt(r.type===To,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),xt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=nw(r.props.children,s)),t.push(l)}),t}var om="get",am="application/x-www-form-urlencoded";function bg(n){return n!=null&&typeof n.tagName=="string"}function OV(n){return bg(n)&&n.tagName.toLowerCase()==="button"}function NV(n){return bg(n)&&n.tagName.toLowerCase()==="form"}function DV(n){return bg(n)&&n.tagName.toLowerCase()==="input"}function LV(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function VV(n,e){return n.button===0&&(!e||e==="_self")&&!LV(n)}var Bp=null;function MV(){if(Bp===null)try{new FormData(document.createElement("form"),0),Bp=!1}catch{Bp=!0}return Bp}var FV=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function yv(n){return n!=null&&!FV.has(n)?(Gi(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${am}"`),null):n}function UV(n,e){let t,r,i,s,l;if(NV(n)){let u=n.getAttribute("action");r=u?No(u,e):null,t=n.getAttribute("method")||om,i=yv(n.getAttribute("enctype"))||am,s=new FormData(n)}else if(OV(n)||DV(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||u.getAttribute("action");if(r=d?No(d,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||om,i=yv(n.getAttribute("formenctype"))||yv(u.getAttribute("enctype"))||am,s=new FormData(u,n),!MV()){let{name:h,type:m,value:g}=n;if(m==="image"){let _=h?`${h}.`:"";s.append(`${_}x`,"0"),s.append(`${_}y`,"0")}else h&&s.append(h,g)}}else{if(bg(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=om,r=null,i=am,l=n}return s&&i==="text/plain"&&(l=s,s=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:s,body:l}}function vE(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function $V(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function jV(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function BV(n,e,t){let r=await Promise.all(n.map(async i=>{let s=e.routes[i.route.id];if(s){let l=await $V(s,t);return l.links?l.links():[]}return[]}));return HV(r.flat(1).filter(jV).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function JS(n,e,t,r,i,s){let l=(d,h)=>t[h]?d.route.id!==t[h].route.id:!0,u=(d,h)=>{var m;return t[h].pathname!==d.pathname||((m=t[h].route.path)==null?void 0:m.endsWith("*"))&&t[h].params["*"]!==d.params["*"]};return s==="assets"?e.filter((d,h)=>l(d,h)||u(d,h)):s==="data"?e.filter((d,h)=>{var g;let m=r.routes[d.route.id];if(!m||!m.hasLoader)return!1;if(l(d,h)||u(d,h))return!0;if(d.route.shouldRevalidate){let _=d.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((g=t[0])==null?void 0:g.params)||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function zV(n,e,{includeHydrateFallback:t}={}){return WV(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function WV(n){return[...new Set(n)]}function qV(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function HV(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let s=JSON.stringify(qV(i));return t.has(s)||(t.add(s),r.push({key:s,link:i})),r},[])}function KV(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function GV(){let n=K.useContext(ac);return vE(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function QV(){let n=K.useContext(Rg);return vE(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var wE=K.createContext(void 0);wE.displayName="FrameworkContext";function tC(){let n=K.useContext(wE);return vE(n,"You must render this element inside a <HydratedRouter> element"),n}function YV(n,e){let t=K.useContext(wE),[r,i]=K.useState(!1),[s,l]=K.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:h,onMouseLeave:m,onTouchStart:g}=e,_=K.useRef(null);K.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let R=V=>{V.forEach(M=>{l(M.isIntersecting)})},A=new IntersectionObserver(R,{threshold:.5});return _.current&&A.observe(_.current),()=>{A.disconnect()}}},[n]),K.useEffect(()=>{if(r){let R=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(R)}}},[r]);let T=()=>{i(!0)},I=()=>{i(!1),l(!1)};return t?n!=="intent"?[s,_,{}]:[s,_,{onFocus:Ed(u,T),onBlur:Ed(d,I),onMouseEnter:Ed(h,T),onMouseLeave:Ed(m,I),onTouchStart:Ed(g,T)}]:[!1,_,{}]}function Ed(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function JV({page:n,...e}){let{router:t}=GV(),r=K.useMemo(()=>zP(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?K.createElement(ZV,{page:n,matches:r,...e}):null}function XV(n){let{manifest:e,routeModules:t}=tC(),[r,i]=K.useState([]);return K.useEffect(()=>{let s=!1;return BV(n,e,t).then(l=>{s||i(l)}),()=>{s=!0}},[n,e,t]),r}function ZV({page:n,matches:e,...t}){let r=Go(),{manifest:i,routeModules:s}=tC(),{loaderData:l,matches:u}=QV(),d=K.useMemo(()=>JS(n,e,u,i,r,"data"),[n,e,u,i,r]),h=K.useMemo(()=>JS(n,e,u,i,r,"assets"),[n,e,u,i,r]),m=K.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let T=new Set,I=!1;if(e.forEach(A=>{var M;let V=i.routes[A.route.id];!V||!V.hasLoader||(!d.some(L=>L.route.id===A.route.id)&&A.route.id in l&&((M=s[A.route.id])!=null&&M.shouldRevalidate)||V.hasClientLoader?I=!0:T.add(A.route.id))}),T.size===0)return[];let R=KV(n);return I&&T.size>0&&R.searchParams.set("_routes",e.filter(A=>T.has(A.route.id)).map(A=>A.route.id).join(",")),[R.pathname+R.search]},[l,r,i,d,e,n,s]),g=K.useMemo(()=>zV(h,i),[h,i]),_=XV(h);return K.createElement(K.Fragment,null,m.map(T=>K.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...t})),g.map(T=>K.createElement("link",{key:T,rel:"modulepreload",href:T,...t})),_.map(({key:T,link:I})=>K.createElement("link",{key:T,...I})))}function eM(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var nC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{nC&&(window.__reactRouterVersion="7.2.0")}catch{}function tM({basename:n,children:e,window:t}){let r=K.useRef();r.current==null&&(r.current=zL({window:t,v5Compat:!0}));let i=r.current,[s,l]=K.useState({action:i.action,location:i.location}),u=K.useCallback(d=>{K.startTransition(()=>l(d))},[l]);return K.useLayoutEffect(()=>i.listen(u),[i,u]),K.createElement(kV,{basename:n,children:e,location:s.location,navigationType:s.action,navigator:i})}var rC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ci=K.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:s,replace:l,state:u,target:d,to:h,preventScrollReset:m,viewTransition:g,..._},T){let{basename:I}=K.useContext(es),R=typeof h=="string"&&rC.test(h),A,V=!1;if(typeof h=="string"&&R&&(A=h,nC))try{let C=new URL(window.location.href),E=h.startsWith("//")?new URL(C.protocol+h):new URL(h),x=No(E.pathname,I);E.origin===C.origin&&x!=null?h=x+E.search+E.hash:V=!0}catch{Gi(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let M=mV(h,{relative:i}),[L,B,$]=YV(r,_),W=sM(h,{replace:l,state:u,target:d,preventScrollReset:m,relative:i,viewTransition:g});function D(C){e&&e(C),C.defaultPrevented||W(C)}let b=K.createElement("a",{..._,...$,href:A||M,onClick:V||s?e:D,ref:eM(T,B),target:d,"data-discover":!R&&t==="render"?"true":void 0});return L&&!R?K.createElement(K.Fragment,null,b,K.createElement(JV,{page:M})):b});ci.displayName="Link";var nM=K.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:s,to:l,viewTransition:u,children:d,...h},m){let g=Kh(l,{relative:h.relative}),_=Go(),T=K.useContext(Rg),{navigator:I,basename:R}=K.useContext(es),A=T!=null&&cM(g)&&u===!0,V=I.encodeLocation?I.encodeLocation(g).pathname:g.pathname,M=_.pathname,L=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;t||(M=M.toLowerCase(),L=L?L.toLowerCase():null,V=V.toLowerCase()),L&&R&&(L=No(L,R)||L);const B=V!=="/"&&V.endsWith("/")?V.length-1:V.length;let $=M===V||!i&&M.startsWith(V)&&M.charAt(B)==="/",W=L!=null&&(L===V||!i&&L.startsWith(V)&&L.charAt(V.length)==="/"),D={isActive:$,isPending:W,isTransitioning:A},b=$?e:void 0,C;typeof r=="function"?C=r(D):C=[r,$?"active":null,W?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let E=typeof s=="function"?s(D):s;return K.createElement(ci,{...h,"aria-current":b,className:C,ref:m,style:E,to:l,viewTransition:u},typeof d=="function"?d(D):d)});nM.displayName="NavLink";var rM=K.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:s,method:l=om,action:u,onSubmit:d,relative:h,preventScrollReset:m,viewTransition:g,..._},T)=>{let I=lM(),R=uM(u,{relative:h}),A=l.toLowerCase()==="get"?"get":"post",V=typeof u=="string"&&rC.test(u),M=L=>{if(d&&d(L),L.defaultPrevented)return;L.preventDefault();let B=L.nativeEvent.submitter,$=(B==null?void 0:B.getAttribute("formmethod"))||l;I(B||L.currentTarget,{fetcherKey:e,method:$,navigate:t,replace:i,state:s,relative:h,preventScrollReset:m,viewTransition:g})};return K.createElement("form",{ref:T,method:A,action:R,onSubmit:r?d:M,..._,"data-discover":!V&&n==="render"?"true":void 0})});rM.displayName="Form";function iM(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function iC(n){let e=K.useContext(ac);return xt(e,iM(n)),e}function sM(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:s,viewTransition:l}={}){let u=Ag(),d=Go(),h=Kh(n,{relative:s});return K.useCallback(m=>{if(VV(m,e)){m.preventDefault();let g=t!==void 0?t:mh(d)===mh(h);u(n,{replace:g,state:r,preventScrollReset:i,relative:s,viewTransition:l})}},[d,u,h,t,r,e,n,i,s,l])}var oM=0,aM=()=>`__${String(++oM)}__`;function lM(){let{router:n}=iC("useSubmit"),{basename:e}=K.useContext(es),t=AV();return K.useCallback(async(r,i={})=>{let{action:s,method:l,encType:u,formData:d,body:h}=UV(r,e);if(i.navigate===!1){let m=i.fetcherKey||aM();await n.fetch(m,t,i.action||s,{preventScrollReset:i.preventScrollReset,formData:d,body:h,formMethod:i.method||l,formEncType:i.encType||u,flushSync:i.flushSync})}else await n.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:d,body:h,formMethod:i.method||l,formEncType:i.encType||u,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function uM(n,{relative:e}={}){let{basename:t}=K.useContext(es),r=K.useContext(ts);xt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...Kh(n||".",{relative:e})},l=Go();if(n==null){s.search=l.search;let u=new URLSearchParams(s.search),d=u.getAll("index");if(d.some(m=>m==="")){u.delete("index"),d.filter(g=>g).forEach(g=>u.append("index",g));let m=u.toString();s.search=m?`?${m}`:""}}return(!n||n===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:Cs([t,s.pathname])),mh(s)}function cM(n,e={}){let t=K.useContext(QP);xt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=iC("useViewTransitionState"),i=Kh(n,{relative:e.relative});if(!t.isTransitioning)return!1;let s=No(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=No(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Vm(i.pathname,l)!=null||Vm(i.pathname,s)!=null}new TextEncoder;const dM="_fixed_uyozo_9",hM="_header__container_uyozo_19",fM="_logo__container_uyozo_35",pM="_delivery_uyozo_59",mM="_search_uyozo_83",gM="_order__container_uyozo_155",yM="_language_uyozo_183",_M="_cart_uyozo_211",vM="_lower__container_uyozo_241",Es={fixed:dM,header__container:hM,logo__container:fM,delivery:pM,search:mM,order__container:gM,language:yM,cart:_M,lower__container:vM};var sC={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},XS=Ke.createContext&&Ke.createContext(sC),wM=["attr","size","title"];function EM(n,e){if(n==null)return{};var t=IM(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function IM(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Mm(){return Mm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Mm.apply(this,arguments)}function ZS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Fm(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ZS(Object(t),!0).forEach(function(r){TM(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ZS(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function TM(n,e,t){return e=SM(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function SM(n){var e=RM(n,"string");return typeof e=="symbol"?e:e+""}function RM(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function oC(n){return n&&n.map((e,t)=>Ke.createElement(e.tag,Fm({key:t},e.attr),oC(e.child)))}function lc(n){return e=>Ke.createElement(AM,Mm({attr:Fm({},n.attr)},e),oC(n.child))}function AM(n){var e=t=>{var{attr:r,size:i,title:s}=n,l=EM(n,wM),u=i||t.size||"1em",d;return t.className&&(d=t.className),n.className&&(d=(d?d+" ":"")+n.className),Ke.createElement("svg",Mm({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,l,{className:d,style:Fm(Fm({color:n.color||t.color},t.style),n.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),s&&Ke.createElement("title",null,s),n.children)};return XS!==void 0?Ke.createElement(XS.Consumer,null,t=>e(t)):e(sC)}function bM(n){return lc({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M515.664-.368C305.76-.368 128 178.4 128 390.176c0 221.76 206.032 448.544 344.624 607.936.528.64 22.929 25.52 50.528 25.52h2.449c27.6 0 49.84-24.88 50.399-25.52 130.064-149.52 320-396.048 320-607.936C896 178.4 757.344-.368 515.664-.368zm12.832 955.552c-1.12 1.12-2.753 2.369-4.193 3.409-1.472-1.008-3.072-2.288-4.255-3.408l-16.737-19.248C371.92 785.2 192 578.785 192 390.176c0-177.008 148.224-326.56 323.664-326.56 218.528 0 316.336 164 316.336 326.56 0 143.184-102.128 333.296-303.504 565.008zm-15.377-761.776c-106.032 0-192 85.968-192 192s85.968 192 192 192 192-85.968 192-192-85.968-192-192-192zm0 320c-70.576 0-129.473-58.816-129.473-129.408 0-70.576 57.424-128 128-128 70.624 0 128 57.424 128 128 .032 70.592-55.903 129.408-126.527 129.408z"},child:[]}]})(n)}function PM(n){return lc({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"},child:[]}]})(n)}function CM(n){return lc({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M21.822 7.431A1 1 0 0 0 21 7H7.333L6.179 4.23A1.994 1.994 0 0 0 4.333 3H2v2h2.333l4.744 11.385A1 1 0 0 0 10 17h8c.417 0 .79-.259.937-.648l3-8a1 1 0 0 0-.115-.921zM17.307 15h-6.64l-2.5-6h11.39l-2.25 6z"},child:[]},{tag:"circle",attr:{cx:"10.5",cy:"19.5",r:"1.5"},child:[]},{tag:"circle",attr:{cx:"17.5",cy:"19.5",r:"1.5"},child:[]}]})(n)}function kM(n){return lc({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"},child:[]}]})(n)}function xM(){return j.jsx("div",{className:Es.lower__container,children:j.jsxs("ul",{children:[j.jsxs("li",{children:[j.jsx(kM,{}),j.jsx("p",{children:"All"})]}),j.jsx("li",{children:"Today's Deals"}),j.jsx("li",{children:"Customer Service"}),j.jsx("li",{children:"Registry"}),j.jsx("li",{children:"Gift Cards"}),j.jsx("li",{children:"Sell"})]})})}const Us=K.createContext(),OM=({children:n,reducer:e,initialState:t})=>j.jsx(Us.Provider,{value:K.useReducer(e,t),children:n}),NM=()=>{};var eR={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},DM=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],l=n[t++],u=n[t++],d=((i&7)<<18|(s&63)<<12|(l&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const s=n[t++],l=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|l&63)}}return e.join("")},lC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],l=i+1<n.length,u=l?n[i+1]:0,d=i+2<n.length,h=d?n[i+2]:0,m=s>>2,g=(s&3)<<4|u>>4;let _=(u&15)<<2|h>>6,T=h&63;d||(T=64,l||(_=64)),r.push(t[m],t[g],t[_],t[T])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(aC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):DM(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;const h=i<n.length?t[n.charAt(i)]:64;++i;const g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||u==null||h==null||g==null)throw new LM;const _=s<<2|u>>4;if(r.push(_),h!==64){const T=u<<4&240|h>>2;if(r.push(T),g!==64){const I=h<<6&192|g;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class LM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VM=function(n){const e=aC(n);return lC.encodeByteArray(e,!0)},Um=function(n){return VM(n).replace(/\./g,"")},Pg=function(n){try{return lC.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function $m(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!MM(t)||(n[t]=$m(n[t],e[t]));return n}function MM(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FM=()=>uC().__FIREBASE_DEFAULTS__,UM=()=>{if(typeof process>"u"||typeof eR>"u")return;const n=eR.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},$M=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Pg(n[1]);return e&&JSON.parse(e)},Cg=()=>{try{return NM()||FM()||UM()||$M()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},jM=n=>{var e,t;return(t=(e=Cg())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},cC=()=>{var n;return(n=Cg())===null||n===void 0?void 0:n.config},EE=n=>{var e;return(e=Cg())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zM(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Um(JSON.stringify(t)),Um(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function IE(){var n;const e=(n=Cg())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function WM(){return typeof window<"u"||hC()}function hC(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function fC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function TE(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function kg(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SE(){const n=We();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function pC(){return!IE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gh(){try{return typeof indexedDB=="object"}catch{return!1}}function qM(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM="FirebaseError";class gn extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=HM,Object.setPrototypeOf(this,gn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ns.prototype.create)}}class ns{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],l=s?KM(s,r):"Error",u=`${this.serviceName}: ${l} (${i}).`;return new gn(i,u,r)}}function KM(n,e){return n.replace(GM,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const GM=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function mC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function hi(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],l=e[i];if(nR(s)&&nR(l)){if(!hi(s,l))return!1}else if(s!==l)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function nR(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function di(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Fi(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function RE(n,e){const t=new QM(n,e);return t.subscribe.bind(t)}class QM{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");YM(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=_v),i.error===void 0&&(i.error=_v),i.complete===void 0&&(i.complete=_v);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function YM(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function _v(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(n){return n&&n._delegate?n._delegate:n}class zr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new BM;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ZM(e))try{this.getOrInitializeService({instanceIdentifier:Oa})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Oa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Oa){return this.instances.has(e)}getOptions(e=Oa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(s);r===u&&l.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const l=this.instances.get(i);return l&&e(l,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:XM(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Oa){return this.component?this.component.multipleInstances?e:Oa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XM(n){return n===Oa?void 0:n}function ZM(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new JM(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE=[];var Ue;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ue||(Ue={}));const yC={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},e2=Ue.INFO,t2={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},n2=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=t2[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gh{constructor(e){this.name=e,this._logLevel=e2,this._logHandler=n2,this._userLogHandler=null,AE.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}function r2(n){AE.forEach(e=>{e.setLogLevel(n)})}function i2(n,e){for(const t of AE){let r=null;e&&e.level&&(r=yC[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(i,s,...l)=>{const u=l.map(d=>{if(d==null)return null;if(typeof d=="string")return d;if(typeof d=="number"||typeof d=="boolean")return d.toString();if(d instanceof Error)return d.message;try{return JSON.stringify(d)}catch{return null}}).filter(d=>d).join(" ");s>=(r??i.logLevel)&&n({level:Ue[s].toLowerCase(),message:u,args:l,type:i.name})}}}const s2=(n,e)=>e.some(t=>n instanceof t);let rR,iR;function o2(){return rR||(rR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function a2(){return iR||(iR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _C=new WeakMap,rw=new WeakMap,vC=new WeakMap,vv=new WeakMap,bE=new WeakMap;function l2(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",l)},s=()=>{t(Po(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&_C.set(t,n)}).catch(()=>{}),bE.set(e,n),e}function u2(n){if(rw.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",l),n.removeEventListener("abort",l)},s=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",l),n.addEventListener("abort",l)});rw.set(n,e)}let iw={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return rw.get(n);if(e==="objectStoreNames")return n.objectStoreNames||vC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Po(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function c2(n){iw=n(iw)}function d2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(wv(this),e,...t);return vC.set(r,e.sort?e.sort():[e]),Po(r)}:a2().includes(n)?function(...e){return n.apply(wv(this),e),Po(_C.get(this))}:function(...e){return Po(n.apply(wv(this),e))}}function h2(n){return typeof n=="function"?d2(n):(n instanceof IDBTransaction&&u2(n),s2(n,o2())?new Proxy(n,iw):n)}function Po(n){if(n instanceof IDBRequest)return l2(n);if(vv.has(n))return vv.get(n);const e=h2(n);return e!==n&&(vv.set(n,e),bE.set(e,n)),e}const wv=n=>bE.get(n);function f2(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const l=indexedDB.open(n,e),u=Po(l);return r&&l.addEventListener("upgradeneeded",d=>{r(Po(l.result),d.oldVersion,d.newVersion,Po(l.transaction),d)}),t&&l.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{s&&d.addEventListener("close",()=>s()),i&&d.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const p2=["get","getKey","getAll","getAllKeys","count"],m2=["put","add","delete","clear"],Ev=new Map;function sR(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ev.get(e))return Ev.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=m2.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||p2.includes(t)))return;const s=async function(l,...u){const d=this.transaction(l,i?"readwrite":"readonly");let h=d.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[t](...u),i&&d.done]))[0]};return Ev.set(e,s),s}c2(n=>({...n,get:(e,t,r)=>sR(e,t)||n.get(e,t,r),has:(e,t)=>!!sR(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(y2(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function y2(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const jm="@firebase/app",sw="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os=new Gh("@firebase/app"),_2="@firebase/app-compat",v2="@firebase/analytics-compat",w2="@firebase/analytics",E2="@firebase/app-check-compat",I2="@firebase/app-check",T2="@firebase/auth",S2="@firebase/auth-compat",R2="@firebase/database",A2="@firebase/data-connect",b2="@firebase/database-compat",P2="@firebase/functions",C2="@firebase/functions-compat",k2="@firebase/installations",x2="@firebase/installations-compat",O2="@firebase/messaging",N2="@firebase/messaging-compat",D2="@firebase/performance",L2="@firebase/performance-compat",V2="@firebase/remote-config",M2="@firebase/remote-config-compat",F2="@firebase/storage",U2="@firebase/storage-compat",$2="@firebase/firestore",j2="@firebase/vertexai",B2="@firebase/firestore-compat",z2="firebase",W2="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do="[DEFAULT]",q2={[jm]:"fire-core",[_2]:"fire-core-compat",[w2]:"fire-analytics",[v2]:"fire-analytics-compat",[I2]:"fire-app-check",[E2]:"fire-app-check-compat",[T2]:"fire-auth",[S2]:"fire-auth-compat",[R2]:"fire-rtdb",[A2]:"fire-data-connect",[b2]:"fire-rtdb-compat",[P2]:"fire-fn",[C2]:"fire-fn-compat",[k2]:"fire-iid",[x2]:"fire-iid-compat",[O2]:"fire-fcm",[N2]:"fire-fcm-compat",[D2]:"fire-perf",[L2]:"fire-perf-compat",[V2]:"fire-rc",[M2]:"fire-rc-compat",[F2]:"fire-gcs",[U2]:"fire-gcs-compat",[$2]:"fire-fst",[B2]:"fire-fst-compat",[j2]:"fire-vertex","fire-js":"fire-js",[z2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo=new Map,Du=new Map,Lu=new Map;function yh(n,e){try{n.container.addComponent(e)}catch(t){Os.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function wC(n,e){n.container.addOrOverwriteComponent(e)}function Qi(n){const e=n.name;if(Lu.has(e))return Os.debug(`There were multiple attempts to register component ${e}.`),!1;Lu.set(e,n);for(const t of Lo.values())yh(t,n);for(const t of Du.values())yh(t,n);return!0}function xg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function H2(n,e,t=Do){xg(n,e).clearInstance(t)}function EC(n){return n.options!==void 0}function Ge(n){return n==null?!1:n.settings!==void 0}function K2(){Lu.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Br=new ns("app","Firebase",G2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let IC=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Br.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(n,e){const t=Pg(n.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const i=JSON.parse(t).exp*1e3,s=new Date().getTime();i-s<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class Q2 extends IC{constructor(e,t,r,i){const s=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,l={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,l,i);else{const u=e;super(u.options,l,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},t),this._serverConfig.authIdToken&&oR(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&oR(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Er(jm,sw,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){CE(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Br.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar=W2;function PE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Do,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Br.create("bad-app-name",{appName:String(i)});if(t||(t=cC()),!t)throw Br.create("no-options");const s=Lo.get(i);if(s){if(hi(t,s.options)&&hi(r,s.config))return s;throw Br.create("duplicate-app",{appName:i})}const l=new gC(i);for(const d of Lu.values())l.addComponent(d);const u=new IC(t,r,l);return Lo.set(i,u),u}function Y2(n,e){if(WM()&&!hC())throw Br.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;EC(n)?t=n.options:t=n;const r=Object.assign(Object.assign({},e),t);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=h=>[...h].reduce((m,g)=>Math.imul(31,m)+g.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Br.create("finalization-registry-not-supported",{});const s=""+i(JSON.stringify(r)),l=Du.get(s);if(l)return l.incRefCount(e.releaseOnDeref),l;const u=new gC(s);for(const h of Lu.values())u.addComponent(h);const d=new Q2(t,e,s,u);return Du.set(s,d),d}function TC(n=Do){const e=Lo.get(n);if(!e&&n===Do&&cC())return PE();if(!e)throw Br.create("no-app",{appName:n});return e}function J2(){return Array.from(Lo.values())}async function CE(n){let e=!1;const t=n.name;Lo.has(t)?(e=!0,Lo.delete(t)):Du.has(t)&&n.decRefCount()<=0&&(Du.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function Er(n,e,t){var r;let i=(r=q2[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),l=e.match(/\s|\//);if(s||l){const u=[`Unable to register library "${i}" with version "${e}":`];s&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Os.warn(u.join(" "));return}Qi(new zr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function SC(n,e){if(n!==null&&typeof n!="function")throw Br.create("invalid-log-argument");i2(n,e)}function RC(n){r2(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2="firebase-heartbeat-database",Z2=1,_h="firebase-heartbeat-store";let Iv=null;function AC(){return Iv||(Iv=f2(X2,Z2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(_h)}catch(t){console.warn(t)}}}}).catch(n=>{throw Br.create("idb-open",{originalErrorMessage:n.message})})),Iv}async function eF(n){try{const t=(await AC()).transaction(_h),r=await t.objectStore(_h).get(bC(n));return await t.done,r}catch(e){if(e instanceof gn)Os.warn(e.message);else{const t=Br.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Os.warn(t.message)}}}async function aR(n,e){try{const r=(await AC()).transaction(_h,"readwrite");await r.objectStore(_h).put(e,bC(n)),await r.done}catch(t){if(t instanceof gn)Os.warn(t.message);else{const r=Br.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Os.warn(r.message)}}}function bC(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tF=1024,nF=30;class rF{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new sF(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=lR();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>nF){const l=oF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Os.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=lR(),{heartbeatsToSend:r,unsentEntries:i}=iF(this._heartbeatsCache.heartbeats),s=Um(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Os.warn(t),""}}}function lR(){return new Date().toISOString().substring(0,10)}function iF(n,e=tF){const t=[];let r=n.slice();for(const i of n){const s=t.find(l=>l.agent===i.agent);if(s){if(s.dates.push(i.date),uR(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),uR(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class sF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gh()?qM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await eF(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return aR(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return aR(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function uR(n){return Um(JSON.stringify({version:2,heartbeats:n})).length}function oF(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aF(n){Qi(new zr("platform-logger",e=>new g2(e),"PRIVATE")),Qi(new zr("heartbeat",e=>new rF(e),"PRIVATE")),Er(jm,sw,n),Er(jm,sw,"esm2017"),Er("fire-js","")}aF("");const lF=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:gn,SDK_VERSION:Ar,_DEFAULT_ENTRY_NAME:Do,_addComponent:yh,_addOrOverwriteComponent:wC,_apps:Lo,_clearComponents:K2,_components:Lu,_getProvider:xg,_isFirebaseApp:EC,_isFirebaseServerApp:Ge,_registerComponent:Qi,_removeServiceInstance:H2,_serverApps:Du,deleteApp:CE,getApp:TC,getApps:J2,initializeApp:PE,initializeServerApp:Y2,onLog:SC,registerVersion:Er,setLogLevel:RC},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{constructor(e,t){this._delegate=e,this.firebase=t,yh(e,new zr("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),CE(this._delegate)))}_getService(e,t=Do){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=Do){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){yh(this._delegate,e)}_addOrOverwriteComponent(e){wC(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cF={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},cR=new ns("app-compat","Firebase",cF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dF(n){const e={},t={__esModule:!0,initializeApp:s,app:i,registerVersion:Er,setLogLevel:RC,onLog:SC,apps:null,SDK_VERSION:Ar,INTERNAL:{registerComponent:u,removeApp:r,useAsService:d,modularAPIs:lF}};t.default=t,Object.defineProperty(t,"apps",{get:l});function r(h){delete e[h]}function i(h){if(h=h||Do,!tR(e,h))throw cR.create("no-app",{appName:h});return e[h]}i.App=n;function s(h,m={}){const g=PE(h,m);if(tR(e,g.name))return e[g.name];const _=new n(g,t);return e[g.name]=_,_}function l(){return Object.keys(e).map(h=>e[h])}function u(h){const m=h.name,g=m.replace("-compat","");if(Qi(h)&&h.type==="PUBLIC"){const _=(T=i())=>{if(typeof T[g]!="function")throw cR.create("invalid-app-argument",{appName:m});return T[g]()};h.serviceProps!==void 0&&$m(_,h.serviceProps),t[g]=_,n.prototype[g]=function(...T){return this._getService.bind(this,m).apply(this,h.multipleInstances?T:[])}}return h.type==="PUBLIC"?t[g]:null}function d(h,m){return m==="serverAuth"?null:m}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(){const n=dF(uF);n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:PC,extendNamespace:e,createSubscribe:RE,ErrorFactory:ns,deepExtend:$m});function e(t){$m(n,t)}return n}const hF=PC();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR=new Gh("@firebase/app-compat"),fF="@firebase/app-compat",pF="0.2.51";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mF(n){Er(fF,pF,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const n=uC();if(n.firebase!==void 0){dR.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&dR.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const uc=hF;mF();var gF="firebase",yF="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */uc.registerVersion(gF,yF,"app-compat");function cc(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function CC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _F=CC,kC=new ns("auth","Firebase",CC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm=new Gh("@firebase/auth");function vF(n,...e){Bm.logLevel<=Ue.WARN&&Bm.warn(`Auth (${Ar}): ${n}`,...e)}function lm(n,...e){Bm.logLevel<=Ue.ERROR&&Bm.error(`Auth (${Ar}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(n,...e){throw kE(n,...e)}function zi(n,...e){return kE(n,...e)}function xC(n,e,t){const r=Object.assign(Object.assign({},_F()),{[e]:t});return new ns("auth","Firebase",r).create(e,{appName:n.name})}function ks(n){return xC(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function kE(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return kC.create(n,...e)}function Ne(n,e,...t){if(!n)throw kE(e,...t)}function Ts(n){const e="INTERNAL ASSERTION FAILED: "+n;throw lm(e),new Error(e)}function Ns(n,e){n||Ts(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function wF(){return hR()==="http:"||hR()==="https:"}function hR(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wF()||TE()||"connection"in navigator)?navigator.onLine:!0}function IF(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qh=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ns(t>e,"Short delay should be less than long delay!"),this.isMobile=dC()||kg()}get(){return EF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(n,e){Ns(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let OC=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ts("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ts("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ts("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SF=new Qh(3e4,6e4);function Qo(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Yo(n,e,t,r,i={}){return NC(n,i,async()=>{let s={},l={};r&&(e==="GET"?l=r:s={body:JSON.stringify(r)});const u=mi(Object.assign({key:n.config.apiKey},l)).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const h=Object.assign({method:e,headers:d},s);return fC()||(h.referrerPolicy="no-referrer"),OC.fetch()(DC(n,n.config.apiHost,t,u),h)})}async function NC(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},TF),e);try{const i=new AF(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await s.json();if("needConfirmation"in l)throw zp(n,"account-exists-with-different-credential",l);if(s.ok&&!("errorMessage"in l))return l;{const u=s.ok?l.errorMessage:l.error.message,[d,h]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw zp(n,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw zp(n,"email-already-in-use",l);if(d==="USER_DISABLED")throw zp(n,"user-disabled",l);const m=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw xC(n,m,h);fi(n,m)}}catch(i){if(i instanceof gn)throw i;fi(n,"network-request-failed",{message:String(i)})}}async function Yh(n,e,t,r,i={}){const s=await Yo(n,e,t,r,i);return"mfaPendingCredential"in s&&fi(n,"multi-factor-auth-required",{_serverResponse:s}),s}function DC(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?xE(n.config,i):`${n.config.apiScheme}://${i}`}function RF(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}let AF=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(zi(this.auth,"network-request-failed")),SF.get())})}};function zp(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=zi(n,e,r);return i.customData._tokenResponse=t,i}function fR(n){return n!==void 0&&n.enterprise!==void 0}let bF=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return RF(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};async function PF(n,e){return Yo(n,"GET","/v2/recaptchaConfig",Qo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CF(n,e){return Yo(n,"POST","/v1/accounts:delete",e)}async function LC(n,e){return Yo(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function kF(n,e=!1){const t=Ce(n),r=await t.getIdToken(e),i=OE(r);Ne(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,l=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:eh(Tv(i.auth_time)),issuedAtTime:eh(Tv(i.iat)),expirationTime:eh(Tv(i.exp)),signInProvider:l||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Tv(n){return Number(n)*1e3}function OE(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return lm("JWT malformed, contained fewer than 3 sections"),null;try{const i=Pg(t);return i?JSON.parse(i):(lm("Failed to decode base64 JWT payload"),null)}catch(i){return lm("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function pR(n){const e=OE(n);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vh(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof gn&&xF(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function xF({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let OF=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aw=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=eh(this.lastLoginAt),this.creationTime=eh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zm(n){var e;const t=n.auth,r=await n.getIdToken(),i=await vh(n,LC(t,{idToken:r}));Ne(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const l=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?VC(s.providerUserInfo):[],u=DF(n.providerData,l),d=n.isAnonymous,h=!(n.email&&s.passwordHash)&&!(u!=null&&u.length),m=d?h:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:u,metadata:new aw(s.createdAt,s.lastLoginAt),isAnonymous:m};Object.assign(n,g)}async function NF(n){const e=Ce(n);await zm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function DF(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function VC(n){return n.map(e=>{var{providerId:t}=e,r=cc(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LF(n,e){const t=await NC(n,{},async()=>{const r=mi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,l=DC(n,i,"/v1/token",`key=${s}`),u=await n._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",OC.fetch()(l,{method:"POST",headers:u,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function VF(n,e){return Yo(n,"POST","/v2/accounts:revokeToken",Qo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sv=class lw{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):pR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const t=pR(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await LF(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,l=new lw;return r&&(Ne(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(Ne(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),s&&(Ne(typeof s=="number","internal-error",{appName:e}),l.expirationTime=s),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new lw,this.toJSON())}_performRefresh(){return Ts("not implemented")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yo(n,e){Ne(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}let Wm=class Wd{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=cc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new OF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new aw(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await vh(this,this.stsTokenManager.getToken(this.auth,e));return Ne(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return kF(this,e)}reload(){return NF(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Wd(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await zm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ge(this.auth.app))return Promise.reject(ks(this.auth));const e=await this.getIdToken();return await vh(this,CF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,l,u,d,h,m;const g=(r=t.displayName)!==null&&r!==void 0?r:void 0,_=(i=t.email)!==null&&i!==void 0?i:void 0,T=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,I=(l=t.photoURL)!==null&&l!==void 0?l:void 0,R=(u=t.tenantId)!==null&&u!==void 0?u:void 0,A=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,V=(h=t.createdAt)!==null&&h!==void 0?h:void 0,M=(m=t.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:L,emailVerified:B,isAnonymous:$,providerData:W,stsTokenManager:D}=t;Ne(L&&D,e,"internal-error");const b=Sv.fromJSON(this.name,D);Ne(typeof L=="string",e,"internal-error"),yo(g,e.name),yo(_,e.name),Ne(typeof B=="boolean",e,"internal-error"),Ne(typeof $=="boolean",e,"internal-error"),yo(T,e.name),yo(I,e.name),yo(R,e.name),yo(A,e.name),yo(V,e.name),yo(M,e.name);const C=new Wd({uid:L,auth:e,email:_,emailVerified:B,displayName:g,isAnonymous:$,photoURL:I,phoneNumber:T,tenantId:R,stsTokenManager:b,createdAt:V,lastLoginAt:M});return W&&Array.isArray(W)&&(C.providerData=W.map(E=>Object.assign({},E))),A&&(C._redirectEventId=A),C}static async _fromIdTokenResponse(e,t,r=!1){const i=new Sv;i.updateFromServerResponse(t);const s=new Wd({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await zm(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Ne(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?VC(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),u=new Sv;u.updateFromIdToken(r);const d=new Wd({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:l}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new aw(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(d,h),d}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=new Map;function Ss(n){Ns(n instanceof Function,"Expected a class definition");let e=mR.get(n);return e?(Ns(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,mR.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MC=class{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}};MC.type="NONE";const gR=MC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(n,e,t){return`firebase:${n}:${e}:${t}`}let yR=class cm{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=um(this.userKey,i.apiKey,s),this.fullPersistenceKey=um("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Wm._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new cm(Ss(gR),e,r);const i=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||Ss(gR);const l=um(r,e.config.apiKey,e.name);let u=null;for(const h of t)try{const m=await h._get(l);if(m){const g=Wm._fromJSON(e,m);h!==s&&(u=g),s=h;break}}catch{}const d=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!d.length?new cm(s,e,r):(s=d[0],u&&await s._set(l,u.toJSON()),await Promise.all(t.map(async h=>{if(h!==s)try{await h._remove(l)}catch{}})),new cm(s,e,r))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zC(e))return"Blackberry";if(WC(e))return"Webos";if(UC(e))return"Safari";if((e.includes("chrome/")||$C(e))&&!e.includes("edge/"))return"Chrome";if(BC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function FC(n=We()){return/firefox\//i.test(n)}function UC(n=We()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $C(n=We()){return/crios\//i.test(n)}function jC(n=We()){return/iemobile/i.test(n)}function BC(n=We()){return/android/i.test(n)}function zC(n=We()){return/blackberry/i.test(n)}function WC(n=We()){return/webos/i.test(n)}function NE(n=We()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function MF(n=We()){var e;return NE(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function FF(){return SE()&&document.documentMode===10}function qC(n=We()){return NE(n)||BC(n)||WC(n)||zC(n)||/windows phone/i.test(n)||jC(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(n,e=[]){let t;switch(n){case"Browser":t=_R(We());break;case"Worker":t=`${_R(We())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ar}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let UF=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((l,u)=>{try{const d=e(s);l(d)}catch(d){u(d)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $F(n,e={}){return Yo(n,"GET","/v2/passwordPolicy",Qo(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jF=6;let BF=class{constructor(e){var t,r,i,s;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:jF,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,l,u;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(i=d.containsLowercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(s=d.containsUppercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(u=d.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),d}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zF=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vR(this),this.idTokenSubscription=new vR(this),this.beforeStateQueue=new UF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ss(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await yR.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await LC(this,{idToken:e}),r=await Wm._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ge(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=i==null?void 0:i._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===u)&&(d!=null&&d.user)&&(i=d.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await zm(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=IF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ge(this.app))return Promise.reject(ks(this));const t=e?Ce(e):null;return t&&Ne(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ge(this.app)?Promise.reject(ks(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ge(this.app)?Promise.reject(ks(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ss(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await $F(this),t=new BF(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ns("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await VF(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ss(e)||this._popupRedirectResolver;Ne(t,this,"argument-error"),this.redirectPersistenceManager=await yR.create(this,[Ss(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(u,this,"internal-error"),u.then(()=>{l||s(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,i);return()=>{l=!0,d()}}else{const d=e.addObserver(t);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=HC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Ge(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&vF(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}};function ul(n){return Ce(n)}let vR=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=RE(t=>this.observer=t)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Og={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function WF(n){Og=n}function KC(n){return Og.loadJS(n)}function qF(){return Og.recaptchaEnterpriseScript}function HF(){return Og.gapiScript}function KF(n){return`__${n}${Math.floor(Math.random()*1e6)}`}let GF=class{constructor(){this.enterprise=new QF}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},QF=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};const YF="recaptcha-enterprise",GC="NO_RECAPTCHA";let JF=class{constructor(e){this.type=YF,this.auth=ul(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(l,u)=>{PF(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const h=new bF(d);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,l(h.siteKey)}}).catch(d=>{u(d)})})}function i(s,l,u){const d=window.grecaptcha;fR(d)?d.enterprise.ready(()=>{d.enterprise.execute(s,{action:e}).then(h=>{l(h)}).catch(()=>{l(GC)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new GF().execute("siteKey",{action:"verify"}):new Promise((s,l)=>{r(this.auth).then(u=>{if(!t&&fR(window.grecaptcha))i(u,s,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=qF();d.length!==0&&(d+=u),KC(d).then(()=>{i(u,s,l)}).catch(h=>{l(h)})}}).catch(u=>{l(u)})})}};async function wR(n,e,t,r=!1,i=!1){const s=new JF(n);let l;if(i)l=GC;else try{l=await s.verify(t)}catch{l=await s.verify(t,!0)}const u=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,h=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function uw(n,e,t,r,i){var s;if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await wR(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await wR(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XF(n,e){const t=xg(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(hi(s,e??{}))return i;fi(i,"already-initialized")}return t.initialize({options:e})}function ZF(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Ss);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function eU(n,e,t){const r=ul(n);Ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=QC(e),{host:l,port:u}=tU(e),d=u===null?"":`:${u}`,h={url:`${s}//${l}${d}/`},m=Object.freeze({host:l,port:u,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ne(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ne(hi(h,r.config.emulator)&&hi(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,nU()}function QC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function tU(n){const e=QC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:ER(r.substr(s.length+1))}}else{const[s,l]=r.split(":");return{host:s,port:ER(l)}}}function ER(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function nU(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DE=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ts("not implemented")}_getIdTokenResponse(e){return Ts("not implemented")}_linkToIdToken(e,t){return Ts("not implemented")}_getReauthenticationResolver(e){return Ts("not implemented")}};async function rU(n,e){return Yo(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iU(n,e){return Yh(n,"POST","/v1/accounts:signInWithPassword",Qo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sU(n,e){return Yh(n,"POST","/v1/accounts:signInWithEmailLink",Qo(n,e))}async function oU(n,e){return Yh(n,"POST","/v1/accounts:signInWithEmailLink",Qo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let IR=class cw extends DE{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new cw(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new cw(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return uw(e,t,"signInWithPassword",iU);case"emailLink":return sU(e,{email:this._email,oobCode:this._password});default:fi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return uw(e,r,"signUpPassword",rU);case"emailLink":return oU(e,{idToken:t,email:this._email,oobCode:this._password});default:fi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ru(n,e){return Yh(n,"POST","/v1/accounts:signInWithIdp",Qo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aU="http://localhost";let Ng=class dw extends DE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new dw(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):fi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=cc(t,["providerId","signInMethod"]);if(!r||!i)return null;const l=new dw(r,i);return l.idToken=s.idToken||void 0,l.accessToken=s.accessToken||void 0,l.secret=s.secret,l.nonce=s.nonce,l.pendingToken=s.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Ru(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ru(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ru(e,t)}buildRequest(){const e={requestUri:aU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=mi(t)}return e}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lU(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function uU(n){const e=di(Fi(n)).link,t=e?di(Fi(e)).deep_link_id:null,r=di(Fi(n)).deep_link_id;return(r?di(Fi(r)).link:null)||r||t||e||n}let cU=class YC{constructor(e){var t,r,i,s,l,u;const d=di(Fi(e)),h=(t=d.apiKey)!==null&&t!==void 0?t:null,m=(r=d.oobCode)!==null&&r!==void 0?r:null,g=lU((i=d.mode)!==null&&i!==void 0?i:null);Ne(h&&m&&g,"argument-error"),this.apiKey=h,this.operation=g,this.code=m,this.continueUrl=(s=d.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(l=d.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(u=d.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const t=uU(e);try{return new YC(t)}catch{return null}}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dg=class JC{constructor(){this.providerId=JC.PROVIDER_ID}static credential(e,t){return IR._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=cU.parseLink(t);return Ne(r,"argument-error"),IR._fromEmailAndCode(e,r.code,r.tenantId)}};Dg.PROVIDER_ID="password";Dg.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Dg.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let XC=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jh=class extends XC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZC=class gu extends Jh{constructor(){super("facebook.com")}static credential(e){return Ng._fromParams({providerId:gu.PROVIDER_ID,signInMethod:gu.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gu.credentialFromTaggedObject(e)}static credentialFromError(e){return gu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gu.credential(e.oauthAccessToken)}catch{return null}}};ZC.FACEBOOK_SIGN_IN_METHOD="facebook.com";ZC.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ek=class yu extends Jh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ng._fromParams({providerId:yu.PROVIDER_ID,signInMethod:yu.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return yu.credentialFromTaggedObject(e)}static credentialFromError(e){return yu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return yu.credential(t,r)}catch{return null}}};ek.GOOGLE_SIGN_IN_METHOD="google.com";ek.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tk=class _u extends Jh{constructor(){super("github.com")}static credential(e){return Ng._fromParams({providerId:_u.PROVIDER_ID,signInMethod:_u.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _u.credentialFromTaggedObject(e)}static credentialFromError(e){return _u.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _u.credential(e.oauthAccessToken)}catch{return null}}};tk.GITHUB_SIGN_IN_METHOD="github.com";tk.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nk=class vu extends Jh{constructor(){super("twitter.com")}static credential(e,t){return Ng._fromParams({providerId:vu.PROVIDER_ID,signInMethod:vu.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return vu.credentialFromTaggedObject(e)}static credentialFromError(e){return vu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return vu.credential(t,r)}catch{return null}}};nk.TWITTER_SIGN_IN_METHOD="twitter.com";nk.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dU(n,e){return Yh(n,"POST","/v1/accounts:signUp",Qo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lg=class hw{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Wm._fromIdTokenResponse(e,r,i),l=TR(r);return new hw({user:s,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=TR(r);return new hw({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function TR(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hU=class fw extends gn{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,fw.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new fw(e,t,r,i)}};function rk(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?hU._fromErrorAndOperation(n,s,e,r):s})}async function fU(n,e,t=!1){const r=await vh(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Lg._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pU(n,e,t=!1){const{auth:r}=n;if(Ge(r.app))return Promise.reject(ks(r));const i="reauthenticate";try{const s=await vh(n,rk(r,i,e,n),t);Ne(s.idToken,r,"internal-error");const l=OE(s.idToken);Ne(l,r,"internal-error");const{sub:u}=l;return Ne(n.uid===u,r,"user-mismatch"),Lg._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&fi(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ik(n,e,t=!1){if(Ge(n.app))return Promise.reject(ks(n));const r="signIn",i=await rk(n,r,e),s=await Lg._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function mU(n,e){return ik(ul(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sk(n){const e=ul(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function gU(n,e,t){if(Ge(n.app))return Promise.reject(ks(n));const r=ul(n),l=await uw(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",dU).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&sk(n),d}),u=await Lg._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(u.user),u}function yU(n,e,t){return Ge(n.app)?Promise.reject(ks(n)):mU(Ce(n),Dg.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&sk(n),r})}function _U(n,e,t,r){return Ce(n).onIdTokenChanged(e,t,r)}function vU(n,e,t){return Ce(n).beforeAuthStateChanged(e,t)}const qm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ok=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(qm,"1"),this.storage.removeItem(qm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wU=1e3,EU=10;let ak=class extends ok{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,u,d)=>{this.notifyListeners(l,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},s=this.storage.getItem(r);FF()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,EU):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},wU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}};ak.type="LOCAL";const IU=ak;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lk=class extends ok{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}};lk.type="SESSION";const uk=lk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TU(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ck=class dk{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new dk(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(l).map(async h=>h(t.origin,s)),d=await TU(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}};ck.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SU=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,l;return new Promise((u,d)=>{const h=LE("",20);i.port1.start();const m=setTimeout(()=>{d(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(g){const _=g;if(_.data.eventId===h)switch(_.data.status){case"ack":clearTimeout(m),s=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(_.data.response);break;default:clearTimeout(m),clearTimeout(s),d(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(){return window}function RU(n){Wi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hk(){return typeof Wi().WorkerGlobalScope<"u"&&typeof Wi().importScripts=="function"}async function AU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function bU(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function PU(){return hk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk="firebaseLocalStorageDb",CU=1,Hm="firebaseLocalStorage",pk="fbase_key";let Xh=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Vg(n,e){return n.transaction([Hm],e?"readwrite":"readonly").objectStore(Hm)}function kU(){const n=indexedDB.deleteDatabase(fk);return new Xh(n).toPromise()}function pw(){const n=indexedDB.open(fk,CU);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Hm,{keyPath:pk})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Hm)?e(r):(r.close(),await kU(),e(await pw()))})})}async function SR(n,e,t){const r=Vg(n,!0).put({[pk]:e,value:t});return new Xh(r).toPromise()}async function xU(n,e){const t=Vg(n,!1).get(e),r=await new Xh(t).toPromise();return r===void 0?null:r.value}function RR(n,e){const t=Vg(n,!0).delete(e);return new Xh(t).toPromise()}const OU=800,NU=3;let mk=class{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await pw(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>NU)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ck._getInstance(PU()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await AU(),!this.activeServiceWorker)return;this.sender=new SU(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||bU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await pw();return await SR(e,qm,"1"),await RR(e,qm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>SR(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>xU(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>RR(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Vg(i,!1).getAll();return new Xh(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),OU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};mk.type="LOCAL";const DU=mk;new Qh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LU(n,e){return e?Ss(e):(Ne(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VE=class extends DE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ru(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ru(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ru(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function VU(n){return ik(n.auth,new VE(n),n.bypassAuthState)}function MU(n){const{auth:e,user:t}=n;return Ne(t,e,"internal-error"),pU(t,new VE(n),n.bypassAuthState)}async function FU(n){const{auth:e,user:t}=n;return Ne(t,e,"internal-error"),fU(t,new VE(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gk=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:l,type:u}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VU;case"linkViaPopup":case"linkViaRedirect":return FU;case"reauthViaPopup":case"reauthViaRedirect":return MU;default:fi(this.auth,"internal-error")}}resolve(e){Ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UU=new Qh(2e3,1e4);let $U=class qd extends gk{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,qd.currentPopupAction&&qd.currentPopupAction.cancel(),qd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){Ns(this.filter.length===1,"Popup operations only handle one event");const e=LE();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(zi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(zi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,UU.get())};e()}};$U.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jU="pendingRedirect",dm=new Map;let BU=class extends gk{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=dm.get(this.auth._key());if(!e){try{const r=await zU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}dm.set(this.auth._key(),e)}return this.bypassAuthState||dm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function zU(n,e){const t=HU(e),r=qU(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function WU(n,e){dm.set(n._key(),e)}function qU(n){return Ss(n._redirectPersistence)}function HU(n){return um(jU,n.config.apiKey,n.name)}async function KU(n,e,t=!1){if(Ge(n.app))return Promise.reject(ks(n));const r=ul(n),i=LU(r,e),l=await new BU(r,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GU=10*60*1e3;let QU=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!YU(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!yk(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(zi(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=GU&&this.cachedEventUids.clear(),this.cachedEventUids.has(AR(e))}saveEventToCache(e){this.cachedEventUids.add(AR(e)),this.lastProcessedEventTime=Date.now()}};function AR(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function yk({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function YU(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yk(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JU(n,e={}){return Yo(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZU=/^https?/;async function e4(n){if(n.config.emulator)return;const{authorizedDomains:e}=await JU(n);for(const t of e)try{if(t4(t))return}catch{}fi(n,"unauthorized-domain")}function t4(n){const e=ow(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!ZU.test(t))return!1;if(XU.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4=new Qh(3e4,6e4);function bR(){const n=Wi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function r4(n){return new Promise((e,t)=>{var r,i,s;function l(){bR(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{bR(),t(zi(n,"network-request-failed"))},timeout:n4.get()})}if(!((i=(r=Wi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Wi().gapi)===null||s===void 0)&&s.load)l();else{const u=KF("iframefcb");return Wi()[u]=()=>{gapi.load?l():t(zi(n,"network-request-failed"))},KC(`${HF()}?onload=${u}`).catch(d=>t(d))}}).catch(e=>{throw hm=null,e})}let hm=null;function i4(n){return hm=hm||r4(n),hm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4=new Qh(5e3,15e3),o4="__/auth/iframe",a4="emulator/auth/iframe",l4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},u4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function c4(n){const e=n.config;Ne(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?xE(e,a4):`https://${n.config.authDomain}/${o4}`,r={apiKey:e.apiKey,appName:n.name,v:Ar},i=u4.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${mi(r).slice(1)}`}async function d4(n){const e=await i4(n),t=Wi().gapi;return Ne(t,n,"internal-error"),e.open({where:document.body,url:c4(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:l4,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const l=zi(n,"network-request-failed"),u=Wi().setTimeout(()=>{s(l)},s4.get());function d(){Wi().clearTimeout(u),i(r)}r.ping(d).then(d,()=>{s(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},f4=500,p4=600,m4="_blank",g4="http://localhost";let PR=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function y4(n,e,t,r=f4,i=p4){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const d=Object.assign(Object.assign({},h4),{width:r.toString(),height:i.toString(),top:s,left:l}),h=We().toLowerCase();t&&(u=$C(h)?m4:t),FC(h)&&(e=e||g4,d.scrollbars="yes");const m=Object.entries(d).reduce((_,[T,I])=>`${_}${T}=${I},`,"");if(MF(h)&&u!=="_self")return _4(e||"",u),new PR(null);const g=window.open(e||"",u,m);Ne(g,n,"popup-blocked");try{g.focus()}catch{}return new PR(g)}function _4(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4="__/auth/handler",w4="emulator/auth/handler",E4=encodeURIComponent("fac");async function CR(n,e,t,r,i,s){Ne(n.config.authDomain,n,"auth-domain-config-required"),Ne(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ar,eventId:i};if(e instanceof XC){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",mC(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))l[m]=g}if(e instanceof Jh){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(l.scopes=m.join(","))}n.tenantId&&(l.tid=n.tenantId);const u=l;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const d=await n._getAppCheckToken(),h=d?`#${E4}=${encodeURIComponent(d)}`:"";return`${I4(n)}?${mi(u).slice(1)}${h}`}function I4({config:n}){return n.emulator?xE(n,w4):`https://${n.authDomain}/${v4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv="webStorageSupport";let T4=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uk,this._completeRedirectFn=KU,this._overrideRedirectResult=WU}async _openPopup(e,t,r,i){var s;Ns((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const l=await CR(e,t,r,ow(),i);return y4(e,l,LE())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await CR(e,t,r,ow(),i);return RU(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Ns(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await d4(e),r=new QU(e);return t.register("authEvent",i=>(Ne(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Rv,{type:Rv},i=>{var s;const l=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Rv];l!==void 0&&t(!!l),fi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=e4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return qC()||UC()||NE()}};const S4=T4;var kR="@firebase/auth",xR="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let R4=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function b4(n){Qi(new zr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=r.options;Ne(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:l,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:HC(n)},h=new zF(r,i,s,d);return ZF(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Qi(new zr("auth-internal",e=>{const t=ul(e.getProvider("auth").getImmediate());return(r=>new R4(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Er(kR,xR,A4(n)),Er(kR,xR,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4=5*60,C4=EE("authIdTokenMaxAge")||P4;let OR=null;const k4=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>C4)return;const i=t==null?void 0:t.token;OR!==i&&(OR=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function x4(n=TC()){const e=xg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=XF(n,{popupRedirectResolver:S4,persistence:[DU,IU,uk]}),r=EE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const l=k4(s.toString());vU(t,l,()=>l(t.currentUser)),_U(t,u=>l(u))}}const i=jM("auth");return i&&eU(t,`http://${i}`),t}function O4(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}WF({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=zi("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",O4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});b4("Browser");var NR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Co,_k;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,b){function C(){}C.prototype=b.prototype,D.D=b.prototype,D.prototype=new C,D.prototype.constructor=D,D.C=function(E,x,k){for(var O=Array(arguments.length-2),X=2;X<arguments.length;X++)O[X-2]=arguments[X];return b.prototype[x].apply(E,O)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,b,C){C||(C=0);var E=Array(16);if(typeof b=="string")for(var x=0;16>x;++x)E[x]=b.charCodeAt(C++)|b.charCodeAt(C++)<<8|b.charCodeAt(C++)<<16|b.charCodeAt(C++)<<24;else for(x=0;16>x;++x)E[x]=b[C++]|b[C++]<<8|b[C++]<<16|b[C++]<<24;b=D.g[0],C=D.g[1],x=D.g[2];var k=D.g[3],O=b+(k^C&(x^k))+E[0]+3614090360&4294967295;b=C+(O<<7&4294967295|O>>>25),O=k+(x^b&(C^x))+E[1]+3905402710&4294967295,k=b+(O<<12&4294967295|O>>>20),O=x+(C^k&(b^C))+E[2]+606105819&4294967295,x=k+(O<<17&4294967295|O>>>15),O=C+(b^x&(k^b))+E[3]+3250441966&4294967295,C=x+(O<<22&4294967295|O>>>10),O=b+(k^C&(x^k))+E[4]+4118548399&4294967295,b=C+(O<<7&4294967295|O>>>25),O=k+(x^b&(C^x))+E[5]+1200080426&4294967295,k=b+(O<<12&4294967295|O>>>20),O=x+(C^k&(b^C))+E[6]+2821735955&4294967295,x=k+(O<<17&4294967295|O>>>15),O=C+(b^x&(k^b))+E[7]+4249261313&4294967295,C=x+(O<<22&4294967295|O>>>10),O=b+(k^C&(x^k))+E[8]+1770035416&4294967295,b=C+(O<<7&4294967295|O>>>25),O=k+(x^b&(C^x))+E[9]+2336552879&4294967295,k=b+(O<<12&4294967295|O>>>20),O=x+(C^k&(b^C))+E[10]+4294925233&4294967295,x=k+(O<<17&4294967295|O>>>15),O=C+(b^x&(k^b))+E[11]+2304563134&4294967295,C=x+(O<<22&4294967295|O>>>10),O=b+(k^C&(x^k))+E[12]+1804603682&4294967295,b=C+(O<<7&4294967295|O>>>25),O=k+(x^b&(C^x))+E[13]+4254626195&4294967295,k=b+(O<<12&4294967295|O>>>20),O=x+(C^k&(b^C))+E[14]+2792965006&4294967295,x=k+(O<<17&4294967295|O>>>15),O=C+(b^x&(k^b))+E[15]+1236535329&4294967295,C=x+(O<<22&4294967295|O>>>10),O=b+(x^k&(C^x))+E[1]+4129170786&4294967295,b=C+(O<<5&4294967295|O>>>27),O=k+(C^x&(b^C))+E[6]+3225465664&4294967295,k=b+(O<<9&4294967295|O>>>23),O=x+(b^C&(k^b))+E[11]+643717713&4294967295,x=k+(O<<14&4294967295|O>>>18),O=C+(k^b&(x^k))+E[0]+3921069994&4294967295,C=x+(O<<20&4294967295|O>>>12),O=b+(x^k&(C^x))+E[5]+3593408605&4294967295,b=C+(O<<5&4294967295|O>>>27),O=k+(C^x&(b^C))+E[10]+38016083&4294967295,k=b+(O<<9&4294967295|O>>>23),O=x+(b^C&(k^b))+E[15]+3634488961&4294967295,x=k+(O<<14&4294967295|O>>>18),O=C+(k^b&(x^k))+E[4]+3889429448&4294967295,C=x+(O<<20&4294967295|O>>>12),O=b+(x^k&(C^x))+E[9]+568446438&4294967295,b=C+(O<<5&4294967295|O>>>27),O=k+(C^x&(b^C))+E[14]+3275163606&4294967295,k=b+(O<<9&4294967295|O>>>23),O=x+(b^C&(k^b))+E[3]+4107603335&4294967295,x=k+(O<<14&4294967295|O>>>18),O=C+(k^b&(x^k))+E[8]+1163531501&4294967295,C=x+(O<<20&4294967295|O>>>12),O=b+(x^k&(C^x))+E[13]+2850285829&4294967295,b=C+(O<<5&4294967295|O>>>27),O=k+(C^x&(b^C))+E[2]+4243563512&4294967295,k=b+(O<<9&4294967295|O>>>23),O=x+(b^C&(k^b))+E[7]+1735328473&4294967295,x=k+(O<<14&4294967295|O>>>18),O=C+(k^b&(x^k))+E[12]+2368359562&4294967295,C=x+(O<<20&4294967295|O>>>12),O=b+(C^x^k)+E[5]+4294588738&4294967295,b=C+(O<<4&4294967295|O>>>28),O=k+(b^C^x)+E[8]+2272392833&4294967295,k=b+(O<<11&4294967295|O>>>21),O=x+(k^b^C)+E[11]+1839030562&4294967295,x=k+(O<<16&4294967295|O>>>16),O=C+(x^k^b)+E[14]+4259657740&4294967295,C=x+(O<<23&4294967295|O>>>9),O=b+(C^x^k)+E[1]+2763975236&4294967295,b=C+(O<<4&4294967295|O>>>28),O=k+(b^C^x)+E[4]+1272893353&4294967295,k=b+(O<<11&4294967295|O>>>21),O=x+(k^b^C)+E[7]+4139469664&4294967295,x=k+(O<<16&4294967295|O>>>16),O=C+(x^k^b)+E[10]+3200236656&4294967295,C=x+(O<<23&4294967295|O>>>9),O=b+(C^x^k)+E[13]+681279174&4294967295,b=C+(O<<4&4294967295|O>>>28),O=k+(b^C^x)+E[0]+3936430074&4294967295,k=b+(O<<11&4294967295|O>>>21),O=x+(k^b^C)+E[3]+3572445317&4294967295,x=k+(O<<16&4294967295|O>>>16),O=C+(x^k^b)+E[6]+76029189&4294967295,C=x+(O<<23&4294967295|O>>>9),O=b+(C^x^k)+E[9]+3654602809&4294967295,b=C+(O<<4&4294967295|O>>>28),O=k+(b^C^x)+E[12]+3873151461&4294967295,k=b+(O<<11&4294967295|O>>>21),O=x+(k^b^C)+E[15]+530742520&4294967295,x=k+(O<<16&4294967295|O>>>16),O=C+(x^k^b)+E[2]+3299628645&4294967295,C=x+(O<<23&4294967295|O>>>9),O=b+(x^(C|~k))+E[0]+4096336452&4294967295,b=C+(O<<6&4294967295|O>>>26),O=k+(C^(b|~x))+E[7]+1126891415&4294967295,k=b+(O<<10&4294967295|O>>>22),O=x+(b^(k|~C))+E[14]+2878612391&4294967295,x=k+(O<<15&4294967295|O>>>17),O=C+(k^(x|~b))+E[5]+4237533241&4294967295,C=x+(O<<21&4294967295|O>>>11),O=b+(x^(C|~k))+E[12]+1700485571&4294967295,b=C+(O<<6&4294967295|O>>>26),O=k+(C^(b|~x))+E[3]+2399980690&4294967295,k=b+(O<<10&4294967295|O>>>22),O=x+(b^(k|~C))+E[10]+4293915773&4294967295,x=k+(O<<15&4294967295|O>>>17),O=C+(k^(x|~b))+E[1]+2240044497&4294967295,C=x+(O<<21&4294967295|O>>>11),O=b+(x^(C|~k))+E[8]+1873313359&4294967295,b=C+(O<<6&4294967295|O>>>26),O=k+(C^(b|~x))+E[15]+4264355552&4294967295,k=b+(O<<10&4294967295|O>>>22),O=x+(b^(k|~C))+E[6]+2734768916&4294967295,x=k+(O<<15&4294967295|O>>>17),O=C+(k^(x|~b))+E[13]+1309151649&4294967295,C=x+(O<<21&4294967295|O>>>11),O=b+(x^(C|~k))+E[4]+4149444226&4294967295,b=C+(O<<6&4294967295|O>>>26),O=k+(C^(b|~x))+E[11]+3174756917&4294967295,k=b+(O<<10&4294967295|O>>>22),O=x+(b^(k|~C))+E[2]+718787259&4294967295,x=k+(O<<15&4294967295|O>>>17),O=C+(k^(x|~b))+E[9]+3951481745&4294967295,D.g[0]=D.g[0]+b&4294967295,D.g[1]=D.g[1]+(x+(O<<21&4294967295|O>>>11))&4294967295,D.g[2]=D.g[2]+x&4294967295,D.g[3]=D.g[3]+k&4294967295}r.prototype.u=function(D,b){b===void 0&&(b=D.length);for(var C=b-this.blockSize,E=this.B,x=this.h,k=0;k<b;){if(x==0)for(;k<=C;)i(this,D,k),k+=this.blockSize;if(typeof D=="string"){for(;k<b;)if(E[x++]=D.charCodeAt(k++),x==this.blockSize){i(this,E),x=0;break}}else for(;k<b;)if(E[x++]=D[k++],x==this.blockSize){i(this,E),x=0;break}}this.h=x,this.o+=b},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var b=1;b<D.length-8;++b)D[b]=0;var C=8*this.o;for(b=D.length-8;b<D.length;++b)D[b]=C&255,C/=256;for(this.u(D),D=Array(16),b=C=0;4>b;++b)for(var E=0;32>E;E+=8)D[C++]=this.g[b]>>>E&255;return D};function s(D,b){var C=u;return Object.prototype.hasOwnProperty.call(C,D)?C[D]:C[D]=b(D)}function l(D,b){this.h=b;for(var C=[],E=!0,x=D.length-1;0<=x;x--){var k=D[x]|0;E&&k==b||(C[x]=k,E=!1)}this.g=C}var u={};function d(D){return-128<=D&&128>D?s(D,function(b){return new l([b|0],0>b?-1:0)}):new l([D|0],0>D?-1:0)}function h(D){if(isNaN(D)||!isFinite(D))return g;if(0>D)return A(h(-D));for(var b=[],C=1,E=0;D>=C;E++)b[E]=D/C|0,C*=4294967296;return new l(b,0)}function m(D,b){if(D.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(D.charAt(0)=="-")return A(m(D.substring(1),b));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=h(Math.pow(b,8)),E=g,x=0;x<D.length;x+=8){var k=Math.min(8,D.length-x),O=parseInt(D.substring(x,x+k),b);8>k?(k=h(Math.pow(b,k)),E=E.j(k).add(h(O))):(E=E.j(C),E=E.add(h(O)))}return E}var g=d(0),_=d(1),T=d(16777216);n=l.prototype,n.m=function(){if(R(this))return-A(this).m();for(var D=0,b=1,C=0;C<this.g.length;C++){var E=this.i(C);D+=(0<=E?E:4294967296+E)*b,b*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(I(this))return"0";if(R(this))return"-"+A(this).toString(D);for(var b=h(Math.pow(D,6)),C=this,E="";;){var x=B(C,b).g;C=V(C,x.j(b));var k=((0<C.g.length?C.g[0]:C.h)>>>0).toString(D);if(C=x,I(C))return k+E;for(;6>k.length;)k="0"+k;E=k+E}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function I(D){if(D.h!=0)return!1;for(var b=0;b<D.g.length;b++)if(D.g[b]!=0)return!1;return!0}function R(D){return D.h==-1}n.l=function(D){return D=V(this,D),R(D)?-1:I(D)?0:1};function A(D){for(var b=D.g.length,C=[],E=0;E<b;E++)C[E]=~D.g[E];return new l(C,~D.h).add(_)}n.abs=function(){return R(this)?A(this):this},n.add=function(D){for(var b=Math.max(this.g.length,D.g.length),C=[],E=0,x=0;x<=b;x++){var k=E+(this.i(x)&65535)+(D.i(x)&65535),O=(k>>>16)+(this.i(x)>>>16)+(D.i(x)>>>16);E=O>>>16,k&=65535,O&=65535,C[x]=O<<16|k}return new l(C,C[C.length-1]&-2147483648?-1:0)};function V(D,b){return D.add(A(b))}n.j=function(D){if(I(this)||I(D))return g;if(R(this))return R(D)?A(this).j(A(D)):A(A(this).j(D));if(R(D))return A(this.j(A(D)));if(0>this.l(T)&&0>D.l(T))return h(this.m()*D.m());for(var b=this.g.length+D.g.length,C=[],E=0;E<2*b;E++)C[E]=0;for(E=0;E<this.g.length;E++)for(var x=0;x<D.g.length;x++){var k=this.i(E)>>>16,O=this.i(E)&65535,X=D.i(x)>>>16,F=D.i(x)&65535;C[2*E+2*x]+=O*F,M(C,2*E+2*x),C[2*E+2*x+1]+=k*F,M(C,2*E+2*x+1),C[2*E+2*x+1]+=O*X,M(C,2*E+2*x+1),C[2*E+2*x+2]+=k*X,M(C,2*E+2*x+2)}for(E=0;E<b;E++)C[E]=C[2*E+1]<<16|C[2*E];for(E=b;E<2*b;E++)C[E]=0;return new l(C,0)};function M(D,b){for(;(D[b]&65535)!=D[b];)D[b+1]+=D[b]>>>16,D[b]&=65535,b++}function L(D,b){this.g=D,this.h=b}function B(D,b){if(I(b))throw Error("division by zero");if(I(D))return new L(g,g);if(R(D))return b=B(A(D),b),new L(A(b.g),A(b.h));if(R(b))return b=B(D,A(b)),new L(A(b.g),b.h);if(30<D.g.length){if(R(D)||R(b))throw Error("slowDivide_ only works with positive integers.");for(var C=_,E=b;0>=E.l(D);)C=$(C),E=$(E);var x=W(C,1),k=W(E,1);for(E=W(E,2),C=W(C,2);!I(E);){var O=k.add(E);0>=O.l(D)&&(x=x.add(C),k=O),E=W(E,1),C=W(C,1)}return b=V(D,x.j(b)),new L(x,b)}for(x=g;0<=D.l(b);){for(C=Math.max(1,Math.floor(D.m()/b.m())),E=Math.ceil(Math.log(C)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),k=h(C),O=k.j(b);R(O)||0<O.l(D);)C-=E,k=h(C),O=k.j(b);I(k)&&(k=_),x=x.add(k),D=V(D,O)}return new L(x,D)}n.A=function(D){return B(this,D).h},n.and=function(D){for(var b=Math.max(this.g.length,D.g.length),C=[],E=0;E<b;E++)C[E]=this.i(E)&D.i(E);return new l(C,this.h&D.h)},n.or=function(D){for(var b=Math.max(this.g.length,D.g.length),C=[],E=0;E<b;E++)C[E]=this.i(E)|D.i(E);return new l(C,this.h|D.h)},n.xor=function(D){for(var b=Math.max(this.g.length,D.g.length),C=[],E=0;E<b;E++)C[E]=this.i(E)^D.i(E);return new l(C,this.h^D.h)};function $(D){for(var b=D.g.length+1,C=[],E=0;E<b;E++)C[E]=D.i(E)<<1|D.i(E-1)>>>31;return new l(C,D.h)}function W(D,b){var C=b>>5;b%=32;for(var E=D.g.length-C,x=[],k=0;k<E;k++)x[k]=0<b?D.i(k+C)>>>b|D.i(k+C+1)<<32-b:D.i(k+C);return new l(x,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,_k=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=h,l.fromString=m,Co=l}).apply(typeof NR<"u"?NR:typeof self<"u"?self:typeof window<"u"?window:{});var Wp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vk,Hd,wk,fm,mw,Ek,Ik,Tk;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,v,S){return f==Array.prototype||f==Object.prototype||(f[v]=S.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wp=="object"&&Wp];for(var v=0;v<f.length;++v){var S=f[v];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var r=t(this);function i(f,v){if(v)e:{var S=r;f=f.split(".");for(var N=0;N<f.length-1;N++){var Q=f[N];if(!(Q in S))break e;S=S[Q]}f=f[f.length-1],N=S[f],v=v(N),v!=N&&v!=null&&e(S,f,{configurable:!0,writable:!0,value:v})}}function s(f,v){f instanceof String&&(f+="");var S=0,N=!1,Q={next:function(){if(!N&&S<f.length){var ne=S++;return{value:v(ne,f[ne]),done:!1}}return N=!0,{done:!0,value:void 0}}};return Q[Symbol.iterator]=function(){return Q},Q}i("Array.prototype.values",function(f){return f||function(){return s(this,function(v,S){return S})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function d(f){var v=typeof f;return v=v!="object"?v:f?Array.isArray(f)?"array":v:"null",v=="array"||v=="object"&&typeof f.length=="number"}function h(f){var v=typeof f;return v=="object"&&f!=null||v=="function"}function m(f,v,S){return f.call.apply(f.bind,arguments)}function g(f,v,S){if(!f)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var Q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Q,N),f.apply(v,Q)}}return function(){return f.apply(v,arguments)}}function _(f,v,S){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:g,_.apply(null,arguments)}function T(f,v){var S=Array.prototype.slice.call(arguments,1);return function(){var N=S.slice();return N.push.apply(N,arguments),f.apply(this,N)}}function I(f,v){function S(){}S.prototype=v.prototype,f.aa=v.prototype,f.prototype=new S,f.prototype.constructor=f,f.Qb=function(N,Q,ne){for(var ye=Array(arguments.length-2),st=2;st<arguments.length;st++)ye[st-2]=arguments[st];return v.prototype[Q].apply(N,ye)}}function R(f){const v=f.length;if(0<v){const S=Array(v);for(let N=0;N<v;N++)S[N]=f[N];return S}return[]}function A(f,v){for(let S=1;S<arguments.length;S++){const N=arguments[S];if(d(N)){const Q=f.length||0,ne=N.length||0;f.length=Q+ne;for(let ye=0;ye<ne;ye++)f[Q+ye]=N[ye]}else f.push(N)}}class V{constructor(v,S){this.i=v,this.j=S,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function M(f){return/^[\s\xa0]*$/.test(f)}function L(){var f=u.navigator;return f&&(f=f.userAgent)?f:""}function B(f){return B[" "](f),f}B[" "]=function(){};var $=L().indexOf("Gecko")!=-1&&!(L().toLowerCase().indexOf("webkit")!=-1&&L().indexOf("Edge")==-1)&&!(L().indexOf("Trident")!=-1||L().indexOf("MSIE")!=-1)&&L().indexOf("Edge")==-1;function W(f,v,S){for(const N in f)v.call(S,f[N],N,f)}function D(f,v){for(const S in f)v.call(void 0,f[S],S,f)}function b(f){const v={};for(const S in f)v[S]=f[S];return v}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(f,v){let S,N;for(let Q=1;Q<arguments.length;Q++){N=arguments[Q];for(S in N)f[S]=N[S];for(let ne=0;ne<C.length;ne++)S=C[ne],Object.prototype.hasOwnProperty.call(N,S)&&(f[S]=N[S])}}function x(f){var v=1;f=f.split(":");const S=[];for(;0<v&&f.length;)S.push(f.shift()),v--;return f.length&&S.push(f.join(":")),S}function k(f){u.setTimeout(()=>{throw f},0)}function O(){var f=pe;let v=null;return f.g&&(v=f.g,f.g=f.g.next,f.g||(f.h=null),v.next=null),v}class X{constructor(){this.h=this.g=null}add(v,S){const N=F.get();N.set(v,S),this.h?this.h.next=N:this.g=N,this.h=N}}var F=new V(()=>new me,f=>f.reset());class me{constructor(){this.next=this.g=this.h=null}set(v,S){this.h=v,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,Z=!1,pe=new X,he=()=>{const f=u.Promise.resolve(void 0);oe=()=>{f.then(q)}};var q=()=>{for(var f;f=O();){try{f.h.call(f.g)}catch(S){k(S)}var v=F;v.j(f),100>v.h&&(v.h++,f.next=v.g,v.g=f)}Z=!1};function ie(){this.s=this.s,this.C=this.C}ie.prototype.s=!1,ie.prototype.ma=function(){this.s||(this.s=!0,this.N())},ie.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Te(f,v){this.type=f,this.g=this.target=v,this.defaultPrevented=!1}Te.prototype.h=function(){this.defaultPrevented=!0};var ke=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var f=!1,v=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const S=()=>{};u.addEventListener("test",S,v),u.removeEventListener("test",S,v)}catch{}return f}();function Ve(f,v){if(Te.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var S=this.type=f.type,N=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=v,v=f.relatedTarget){if($){e:{try{B(v.nodeName);var Q=!0;break e}catch{}Q=!1}Q||(v=null)}}else S=="mouseover"?v=f.fromElement:S=="mouseout"&&(v=f.toElement);this.relatedTarget=v,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:$e[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Ve.aa.h.call(this)}}I(Ve,Te);var $e={2:"touch",3:"pen",4:"mouse"};Ve.prototype.h=function(){Ve.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Qe="closure_listenable_"+(1e6*Math.random()|0),qe=0;function rt(f,v,S,N,Q){this.listener=f,this.proxy=null,this.src=v,this.type=S,this.capture=!!N,this.ha=Q,this.key=++qe,this.da=this.fa=!1}function vt(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function un(f){this.src=f,this.g={},this.h=0}un.prototype.add=function(f,v,S,N,Q){var ne=f.toString();f=this.g[ne],f||(f=this.g[ne]=[],this.h++);var ye=mt(f,v,N,Q);return-1<ye?(v=f[ye],S||(v.fa=!1)):(v=new rt(v,this.src,ne,!!N,Q),v.fa=S,f.push(v)),v};function it(f,v){var S=v.type;if(S in f.g){var N=f.g[S],Q=Array.prototype.indexOf.call(N,v,void 0),ne;(ne=0<=Q)&&Array.prototype.splice.call(N,Q,1),ne&&(vt(v),f.g[S].length==0&&(delete f.g[S],f.h--))}}function mt(f,v,S,N){for(var Q=0;Q<f.length;++Q){var ne=f[Q];if(!ne.da&&ne.listener==v&&ne.capture==!!S&&ne.ha==N)return Q}return-1}var en="closure_lm_"+(1e6*Math.random()|0),Hr={};function br(f,v,S,N,Q){if(Array.isArray(v)){for(var ne=0;ne<v.length;ne++)br(f,v[ne],S,N,Q);return null}return S=Pc(S),f&&f[Qe]?f.K(v,S,h(N)?!!N.capture:!1,Q):Pr(f,v,S,!1,N,Q)}function Pr(f,v,S,N,Q,ne){if(!v)throw Error("Invalid event type");var ye=h(Q)?!!Q.capture:!!Q,st=ml(f);if(st||(f[en]=st=new un(f)),S=st.add(v,S,N,ye,ne),S.proxy)return S;if(N=qn(),S.proxy=N,N.src=f,N.listener=S,f.addEventListener)ke||(Q=ye),Q===void 0&&(Q=!1),f.addEventListener(v.toString(),N,Q);else if(f.attachEvent)f.attachEvent(rs(v.toString()),N);else if(f.addListener&&f.removeListener)f.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return S}function qn(){function f(S){return v.call(f.src,f.listener,S)}const v=bc;return f}function Hn(f,v,S,N,Q){if(Array.isArray(v))for(var ne=0;ne<v.length;ne++)Hn(f,v[ne],S,N,Q);else N=h(N)?!!N.capture:!!N,S=Pc(S),f&&f[Qe]?(f=f.i,v=String(v).toString(),v in f.g&&(ne=f.g[v],S=mt(ne,S,N,Q),-1<S&&(vt(ne[S]),Array.prototype.splice.call(ne,S,1),ne.length==0&&(delete f.g[v],f.h--)))):f&&(f=ml(f))&&(v=f.g[v.toString()],f=-1,v&&(f=mt(v,S,N,Q)),(S=-1<f?v[f]:null)&&ar(S))}function ar(f){if(typeof f!="number"&&f&&!f.da){var v=f.src;if(v&&v[Qe])it(v.i,f);else{var S=f.type,N=f.proxy;v.removeEventListener?v.removeEventListener(S,N,f.capture):v.detachEvent?v.detachEvent(rs(S),N):v.addListener&&v.removeListener&&v.removeListener(N),(S=ml(v))?(it(S,f),S.h==0&&(S.src=null,v[en]=null)):vt(f)}}}function rs(f){return f in Hr?Hr[f]:Hr[f]="on"+f}function bc(f,v){if(f.da)f=!0;else{v=new Ve(v,this);var S=f.listener,N=f.ha||f.src;f.fa&&ar(f),f=S.call(N,v)}return f}function ml(f){return f=f[en],f instanceof un?f:null}var gl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pc(f){return typeof f=="function"?f:(f[gl]||(f[gl]=function(v){return f.handleEvent(v)}),f[gl])}function tn(){ie.call(this),this.i=new un(this),this.M=this,this.F=null}I(tn,ie),tn.prototype[Qe]=!0,tn.prototype.removeEventListener=function(f,v,S,N){Hn(this,f,v,S,N)};function nn(f,v){var S,N=f.F;if(N)for(S=[];N;N=N.F)S.push(N);if(f=f.M,N=v.type||v,typeof v=="string")v=new Te(v,f);else if(v instanceof Te)v.target=v.target||f;else{var Q=v;v=new Te(N,f),E(v,Q)}if(Q=!0,S)for(var ne=S.length-1;0<=ne;ne--){var ye=v.g=S[ne];Q=is(ye,N,!0,v)&&Q}if(ye=v.g=f,Q=is(ye,N,!0,v)&&Q,Q=is(ye,N,!1,v)&&Q,S)for(ne=0;ne<S.length;ne++)ye=v.g=S[ne],Q=is(ye,N,!1,v)&&Q}tn.prototype.N=function(){if(tn.aa.N.call(this),this.i){var f=this.i,v;for(v in f.g){for(var S=f.g[v],N=0;N<S.length;N++)vt(S[N]);delete f.g[v],f.h--}}this.F=null},tn.prototype.K=function(f,v,S,N){return this.i.add(String(f),v,!1,S,N)},tn.prototype.L=function(f,v,S,N){return this.i.add(String(f),v,!0,S,N)};function is(f,v,S,N){if(v=f.i.g[String(v)],!v)return!0;v=v.concat();for(var Q=!0,ne=0;ne<v.length;++ne){var ye=v[ne];if(ye&&!ye.da&&ye.capture==S){var st=ye.listener,rn=ye.ha||ye.src;ye.fa&&it(f.i,ye),Q=st.call(rn,N)!==!1&&Q}}return Q&&!N.defaultPrevented}function Cc(f,v,S){if(typeof f=="function")S&&(f=_(f,S));else if(f&&typeof f.handleEvent=="function")f=_(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:u.setTimeout(f,v||0)}function Hs(f){f.g=Cc(()=>{f.g=null,f.i&&(f.i=!1,Hs(f))},f.l);const v=f.h;f.h=null,f.m.apply(null,v)}class ra extends ie{constructor(v,S){super(),this.m=v,this.l=S,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Hs(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ia(f){ie.call(this),this.h=f,this.g={}}I(ia,ie);var kc=[];function xc(f){W(f.g,function(v,S){this.g.hasOwnProperty(S)&&ar(v)},f),f.g={}}ia.prototype.N=function(){ia.aa.N.call(this),xc(this)},ia.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Oc=u.JSON.stringify,Nc=u.JSON.parse,Dc=class{stringify(f){return u.JSON.stringify(f,void 0)}parse(f){return u.JSON.parse(f,void 0)}};function sa(){}sa.prototype.h=null;function yl(f){return f.h||(f.h=f.i())}function _l(){}var Cr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yi(){Te.call(this,"d")}I(yi,Te);function vl(){Te.call(this,"c")}I(vl,Te);var _i={},Lc=null;function oa(){return Lc=Lc||new tn}_i.La="serverreachability";function Vc(f){Te.call(this,_i.La,f)}I(Vc,Te);function ss(f){const v=oa();nn(v,new Vc(v))}_i.STAT_EVENT="statevent";function Mc(f,v){Te.call(this,_i.STAT_EVENT,f),this.stat=v}I(Mc,Te);function $t(f){const v=oa();nn(v,new Mc(v,f))}_i.Ma="timingevent";function wl(f,v){Te.call(this,_i.Ma,f),this.size=v}I(wl,Te);function Kr(f,v){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){f()},v)}function aa(){this.g=!0}aa.prototype.xa=function(){this.g=!1};function la(f,v,S,N,Q,ne){f.info(function(){if(f.g)if(ne)for(var ye="",st=ne.split("&"),rn=0;rn<st.length;rn++){var Ye=st[rn].split("=");if(1<Ye.length){var cn=Ye[0];Ye=Ye[1];var Ht=cn.split("_");ye=2<=Ht.length&&Ht[1]=="type"?ye+(cn+"="+Ye+"&"):ye+(cn+"=redacted&")}}else ye=null;else ye=ne;return"XMLHTTP REQ ("+N+") [attempt "+Q+"]: "+v+`
`+S+`
`+ye})}function El(f,v,S,N,Q,ne,ye){f.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+Q+"]: "+v+`
`+S+`
`+ne+" "+ye})}function Gr(f,v,S,N){f.info(function(){return"XMLHTTP TEXT ("+v+"): "+Uy(f,S)+(N?" "+N:"")})}function Fc(f,v){f.info(function(){return"TIMEOUT: "+v})}aa.prototype.info=function(){};function Uy(f,v){if(!f.g)return v;if(!v)return null;try{var S=JSON.parse(v);if(S){for(f=0;f<S.length;f++)if(Array.isArray(S[f])){var N=S[f];if(!(2>N.length)){var Q=N[1];if(Array.isArray(Q)&&!(1>Q.length)){var ne=Q[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(var ye=1;ye<Q.length;ye++)Q[ye]=""}}}}return Oc(S)}catch{return v}}var Il={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},bf={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Qr;function ua(){}I(ua,sa),ua.prototype.g=function(){return new XMLHttpRequest},ua.prototype.i=function(){return{}},Qr=new ua;function Yr(f,v,S,N){this.j=f,this.i=v,this.l=S,this.R=N||1,this.U=new ia(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pf}function Pf(){this.i=null,this.g="",this.h=!1}var Uc={},Tl={};function Sl(f,v,S){f.L=1,f.v=Js(ur(v)),f.m=S,f.P=!0,$c(f,null)}function $c(f,v){f.F=Date.now(),ht(f),f.A=ur(f.v);var S=f.A,N=f.R;Array.isArray(N)||(N=[String(N)]),Zs(S.i,"t",N),f.C=0,S=f.j.J,f.h=new Pf,f.g=Hf(f.j,S?v:null,!f.m),0<f.O&&(f.M=new ra(_(f.Y,f,f.g),f.O)),v=f.U,S=f.g,N=f.ca;var Q="readystatechange";Array.isArray(Q)||(Q&&(kc[0]=Q.toString()),Q=kc);for(var ne=0;ne<Q.length;ne++){var ye=br(S,Q[ne],N||v.handleEvent,!1,v.h||v);if(!ye)break;v.g[ye.key]=ye}v=f.H?b(f.H):{},f.m?(f.u||(f.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,v)):(f.u="GET",f.g.ea(f.A,f.u,null,v)),ss(),la(f.i,f.u,f.A,f.l,f.R,f.m)}Yr.prototype.ca=function(f){f=f.target;const v=this.M;v&&Gn(f)==3?v.j():this.Y(f)},Yr.prototype.Y=function(f){try{if(f==this.g)e:{const Ht=Gn(this.g);var v=this.g.Ba();const Or=this.g.Z();if(!(3>Ht)&&(Ht!=3||this.g&&(this.h.h||this.g.oa()||Hc(this.g)))){this.J||Ht!=4||v==7||(v==8||0>=Or?ss(3):ss(2)),ca(this);var S=this.g.Z();this.X=S;t:if(Cf(this)){var N=Hc(this.g);f="";var Q=N.length,ne=Gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){kr(this),Ks(this);var ye="";break t}this.h.i=new u.TextDecoder}for(v=0;v<Q;v++)this.h.h=!0,f+=this.h.i.decode(N[v],{stream:!(ne&&v==Q-1)});N.length=0,this.h.g+=f,this.C=0,ye=this.h.g}else ye=this.g.oa();if(this.o=S==200,El(this.i,this.u,this.A,this.l,this.R,Ht,S),this.o){if(this.T&&!this.K){t:{if(this.g){var st,rn=this.g;if((st=rn.g?rn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(st)){var Ye=st;break t}}Ye=null}if(S=Ye)Gr(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jc(this,S);else{this.o=!1,this.s=3,$t(12),kr(this),Ks(this);break e}}if(this.P){S=!0;let dr;for(;!this.J&&this.C<ye.length;)if(dr=$y(this,ye),dr==Tl){Ht==4&&(this.s=4,$t(14),S=!1),Gr(this.i,this.l,null,"[Incomplete Response]");break}else if(dr==Uc){this.s=4,$t(15),Gr(this.i,this.l,ye,"[Invalid Chunk]"),S=!1;break}else Gr(this.i,this.l,dr,null),jc(this,dr);if(Cf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ht!=4||ye.length!=0||this.h.h||(this.s=1,$t(16),S=!1),this.o=this.o&&S,!S)Gr(this.i,this.l,ye,"[Invalid Chunked Response]"),kr(this),Ks(this);else if(0<ye.length&&!this.W){this.W=!0;var cn=this.j;cn.g==this&&cn.ba&&!cn.M&&(cn.j.info("Great, no buffering proxy detected. Bytes received: "+ye.length),Gc(cn),cn.M=!0,$t(11))}}else Gr(this.i,this.l,ye,null),jc(this,ye);Ht==4&&kr(this),this.o&&!this.J&&(Ht==4?Ll(this.j,this):(this.o=!1,ht(this)))}else kl(this.g),S==400&&0<ye.indexOf("Unknown SID")?(this.s=3,$t(12)):(this.s=0,$t(13)),kr(this),Ks(this)}}}catch{}finally{}};function Cf(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function $y(f,v){var S=f.C,N=v.indexOf(`
`,S);return N==-1?Tl:(S=Number(v.substring(S,N)),isNaN(S)?Uc:(N+=1,N+S>v.length?Tl:(v=v.slice(N,N+S),f.C=N+S,v)))}Yr.prototype.cancel=function(){this.J=!0,kr(this)};function ht(f){f.S=Date.now()+f.I,kf(f,f.I)}function kf(f,v){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Kr(_(f.ba,f),v)}function ca(f){f.B&&(u.clearTimeout(f.B),f.B=null)}Yr.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Fc(this.i,this.A),this.L!=2&&(ss(),$t(17)),kr(this),this.s=2,Ks(this)):kf(this,this.S-f)};function Ks(f){f.j.G==0||f.J||Ll(f.j,f)}function kr(f){ca(f);var v=f.M;v&&typeof v.ma=="function"&&v.ma(),f.M=null,xc(f.U),f.g&&(v=f.g,f.g=null,v.abort(),v.ma())}function jc(f,v){try{var S=f.j;if(S.G!=0&&(S.g==f||Mn(S.h,f))){if(!f.K&&Mn(S.h,f)&&S.G==3){try{var N=S.Da.g.parse(v)}catch{N=null}if(Array.isArray(N)&&N.length==3){var Q=N;if(Q[0]==0){e:if(!S.u){if(S.g)if(S.g.F+3e3<f.F)Dl(S),ti(S);else break e;Nl(S),$t(18)}}else S.za=Q[1],0<S.za-S.T&&37500>Q[2]&&S.F&&S.v==0&&!S.C&&(S.C=Kr(_(S.Za,S),6e3));if(1>=Of(S.h)&&S.ca){try{S.ca()}catch{}S.ca=void 0}}else cs(S,11)}else if((f.K||S.g==f)&&Dl(S),!M(v))for(Q=S.Da.g.parse(v),v=0;v<Q.length;v++){let Ye=Q[v];if(S.T=Ye[0],Ye=Ye[1],S.G==2)if(Ye[0]=="c"){S.K=Ye[1],S.ia=Ye[2];const cn=Ye[3];cn!=null&&(S.la=cn,S.j.info("VER="+S.la));const Ht=Ye[4];Ht!=null&&(S.Aa=Ht,S.j.info("SVER="+S.Aa));const Or=Ye[5];Or!=null&&typeof Or=="number"&&0<Or&&(N=1.5*Or,S.L=N,S.j.info("backChannelRequestTimeoutMs_="+N)),N=S;const dr=f.g;if(dr){const ya=dr.g?dr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ya){var ne=N.h;ne.g||ya.indexOf("spdy")==-1&&ya.indexOf("quic")==-1&&ya.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(Bc(ne,ne.h),ne.h=null))}if(N.D){const Ml=dr.g?dr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ml&&(N.ya=Ml,ut(N.I,N.D,Ml))}}S.G=3,S.l&&S.l.ua(),S.ba&&(S.R=Date.now()-f.F,S.j.info("Handshake RTT: "+S.R+"ms")),N=S;var ye=f;if(N.qa=qf(N,N.J?N.ia:null,N.W),ye.K){Nf(N.h,ye);var st=ye,rn=N.L;rn&&(st.I=rn),st.B&&(ca(st),ht(st)),N.g=ye}else ga(N);0<S.i.length&&Ii(S)}else Ye[0]!="stop"&&Ye[0]!="close"||cs(S,7);else S.G==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?cs(S,7):vn(S):Ye[0]!="noop"&&S.l&&S.l.ta(Ye),S.v=0)}}ss(4)}catch{}}var xf=class{constructor(f,v){this.g=f,this.map=v}};function da(f){this.l=f||10,u.PerformanceNavigationTiming?(f=u.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function lr(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Of(f){return f.h?1:f.g?f.g.size:0}function Mn(f,v){return f.h?f.h==v:f.g?f.g.has(v):!1}function Bc(f,v){f.g?f.g.add(v):f.h=v}function Nf(f,v){f.h&&f.h==v?f.h=null:f.g&&f.g.has(v)&&f.g.delete(v)}da.prototype.cancel=function(){if(this.i=Df(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Df(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let v=f.i;for(const S of f.g.values())v=v.concat(S.D);return v}return R(f.i)}function Rl(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(d(f)){for(var v=[],S=f.length,N=0;N<S;N++)v.push(f[N]);return v}v=[],S=0;for(N in f)v[S++]=f[N];return v}function Al(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(d(f)||typeof f=="string"){var v=[];f=f.length;for(var S=0;S<f;S++)v.push(S);return v}v=[],S=0;for(const N in f)v[S++]=N;return v}}}function Gs(f,v){if(f.forEach&&typeof f.forEach=="function")f.forEach(v,void 0);else if(d(f)||typeof f=="string")Array.prototype.forEach.call(f,v,void 0);else for(var S=Al(f),N=Rl(f),Q=N.length,ne=0;ne<Q;ne++)v.call(void 0,N[ne],S&&S[ne],f)}var ha=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jy(f,v){if(f){f=f.split("&");for(var S=0;S<f.length;S++){var N=f[S].indexOf("="),Q=null;if(0<=N){var ne=f[S].substring(0,N);Q=f[S].substring(N+1)}else ne=f[S];v(ne,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function os(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof os){this.h=f.h,fa(this,f.j),this.o=f.o,this.g=f.g,Qs(this,f.s),this.l=f.l;var v=f.i,S=new vi;S.i=v.i,v.g&&(S.g=new Map(v.g),S.h=v.h),Ys(this,S),this.m=f.m}else f&&(v=String(f).match(ha))?(this.h=!1,fa(this,v[1]||"",!0),this.o=He(v[2]||""),this.g=He(v[3]||"",!0),Qs(this,v[4]),this.l=He(v[5]||"",!0),Ys(this,v[6]||"",!0),this.m=He(v[7]||"")):(this.h=!1,this.i=new vi(null,this.h))}os.prototype.toString=function(){var f=[],v=this.j;v&&f.push(Xs(v,bl,!0),":");var S=this.g;return(S||v=="file")&&(f.push("//"),(v=this.o)&&f.push(Xs(v,bl,!0),"@"),f.push(encodeURIComponent(String(S)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.s,S!=null&&f.push(":",String(S))),(S=this.l)&&(this.g&&S.charAt(0)!="/"&&f.push("/"),f.push(Xs(S,S.charAt(0)=="/"?Mf:Vf,!0))),(S=this.i.toString())&&f.push("?",S),(S=this.m)&&f.push("#",Xs(S,zc)),f.join("")};function ur(f){return new os(f)}function fa(f,v,S){f.j=S?He(v,!0):v,f.j&&(f.j=f.j.replace(/:$/,""))}function Qs(f,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);f.s=v}else f.s=null}function Ys(f,v,S){v instanceof vi?(f.i=v,wi(f.i,f.h)):(S||(v=Xs(v,Ff)),f.i=new vi(v,f.h))}function ut(f,v,S){f.i.set(v,S)}function Js(f){return ut(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function He(f,v){return f?v?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Xs(f,v,S){return typeof f=="string"?(f=encodeURI(f).replace(v,Lf),S&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Lf(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var bl=/[#\/\?@]/g,Vf=/[#\?:]/g,Mf=/[#\?]/g,Ff=/[#\?@]/g,zc=/#/g;function vi(f,v){this.h=this.g=null,this.i=f||null,this.j=!!v}function _n(f){f.g||(f.g=new Map,f.h=0,f.i&&jy(f.i,function(v,S){f.add(decodeURIComponent(v.replace(/\+/g," ")),S)}))}n=vi.prototype,n.add=function(f,v){_n(this),this.i=null,f=xr(this,f);var S=this.g.get(f);return S||this.g.set(f,S=[]),S.push(v),this.h+=1,this};function Jr(f,v){_n(f),v=xr(f,v),f.g.has(v)&&(f.i=null,f.h-=f.g.get(v).length,f.g.delete(v))}function Xr(f,v){return _n(f),v=xr(f,v),f.g.has(v)}n.forEach=function(f,v){_n(this),this.g.forEach(function(S,N){S.forEach(function(Q){f.call(v,Q,N,this)},this)},this)},n.na=function(){_n(this);const f=Array.from(this.g.values()),v=Array.from(this.g.keys()),S=[];for(let N=0;N<v.length;N++){const Q=f[N];for(let ne=0;ne<Q.length;ne++)S.push(v[N])}return S},n.V=function(f){_n(this);let v=[];if(typeof f=="string")Xr(this,f)&&(v=v.concat(this.g.get(xr(this,f))));else{f=Array.from(this.g.values());for(let S=0;S<f.length;S++)v=v.concat(f[S])}return v},n.set=function(f,v){return _n(this),this.i=null,f=xr(this,f),Xr(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[v]),this.h+=1,this},n.get=function(f,v){return f?(f=this.V(f),0<f.length?String(f[0]):v):v};function Zs(f,v,S){Jr(f,v),0<S.length&&(f.i=null,f.g.set(xr(f,v),R(S)),f.h+=S.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],v=Array.from(this.g.keys());for(var S=0;S<v.length;S++){var N=v[S];const ne=encodeURIComponent(String(N)),ye=this.V(N);for(N=0;N<ye.length;N++){var Q=ne;ye[N]!==""&&(Q+="="+encodeURIComponent(String(ye[N]))),f.push(Q)}}return this.i=f.join("&")};function xr(f,v){return v=String(v),f.j&&(v=v.toLowerCase()),v}function wi(f,v){v&&!f.j&&(_n(f),f.i=null,f.g.forEach(function(S,N){var Q=N.toLowerCase();N!=Q&&(Jr(this,N),Zs(this,Q,S))},f)),f.j=v}function By(f,v){const S=new aa;if(u.Image){const N=new Image;N.onload=T(Kn,S,"TestLoadImage: loaded",!0,v,N),N.onerror=T(Kn,S,"TestLoadImage: error",!1,v,N),N.onabort=T(Kn,S,"TestLoadImage: abort",!1,v,N),N.ontimeout=T(Kn,S,"TestLoadImage: timeout",!1,v,N),u.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=f}else v(!1)}function Uf(f,v){const S=new aa,N=new AbortController,Q=setTimeout(()=>{N.abort(),Kn(S,"TestPingServer: timeout",!1,v)},1e4);fetch(f,{signal:N.signal}).then(ne=>{clearTimeout(Q),ne.ok?Kn(S,"TestPingServer: ok",!0,v):Kn(S,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(Q),Kn(S,"TestPingServer: error",!1,v)})}function Kn(f,v,S,N,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),N(S)}catch{}}function zy(){this.g=new Dc}function $f(f,v,S){const N=S||"";try{Gs(f,function(Q,ne){let ye=Q;h(Q)&&(ye=Oc(Q)),v.push(N+ne+"="+encodeURIComponent(ye))})}catch(Q){throw v.push(N+"type="+encodeURIComponent("_badmap")),Q}}function as(f){this.l=f.Ub||null,this.j=f.eb||!1}I(as,sa),as.prototype.g=function(){return new pa(this.l,this.j)},as.prototype.i=function(f){return function(){return f}}({});function pa(f,v){tn.call(this),this.D=f,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(pa,tn),n=pa.prototype,n.open=function(f,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=v,this.readyState=1,ei(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(v.body=f),(this.D||u).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zr(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,ei(this)),this.g&&(this.readyState=3,ei(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;jf(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function jf(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var v=f.value?f.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!f.done}))&&(this.response=this.responseText+=v)}f.done?Zr(this):ei(this),this.readyState==3&&jf(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,Zr(this))},n.Qa=function(f){this.g&&(this.response=f,Zr(this))},n.ga=function(){this.g&&Zr(this)};function Zr(f){f.readyState=4,f.l=null,f.j=null,f.v=null,ei(f)}n.setRequestHeader=function(f,v){this.u.append(f,v)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],v=this.h.entries();for(var S=v.next();!S.done;)S=S.value,f.push(S[0]+": "+S[1]),S=v.next();return f.join(`\r
`)};function ei(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(pa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function ls(f){let v="";return W(f,function(S,N){v+=N,v+=":",v+=S,v+=`\r
`}),v}function eo(f,v,S){e:{for(N in S){var N=!1;break e}N=!0}N||(S=ls(S),typeof f=="string"?S!=null&&encodeURIComponent(String(S)):ut(f,v,S))}function wt(f){tn.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(wt,tn);var Wy=/^https?$/i,Wc=["POST","PUT"];n=wt.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,v,S,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);v=v?v.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Qr.g(),this.v=this.o?yl(this.o):yl(Qr),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(v,String(f),!0),this.B=!1}catch(ne){ma(this,ne);return}if(f=S||"",S=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var Q in N)S.set(Q,N[Q]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const ne of N.keys())S.set(ne,N.get(ne));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(S.keys()).find(ne=>ne.toLowerCase()=="content-type"),Q=u.FormData&&f instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Wc,v,void 0))||N||Q||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,ye]of S)this.g.setRequestHeader(ne,ye);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cl(this),this.u=!0,this.g.send(f),this.u=!1}catch(ne){ma(this,ne)}};function ma(f,v){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=v,f.m=5,Pl(f),cr(f)}function Pl(f){f.A||(f.A=!0,nn(f,"complete"),nn(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,nn(this,"complete"),nn(this,"abort"),cr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cr(this,!0)),wt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?qc(this):this.bb())},n.bb=function(){qc(this)};function qc(f){if(f.h&&typeof l<"u"&&(!f.v[1]||Gn(f)!=4||f.Z()!=2)){if(f.u&&Gn(f)==4)Cc(f.Ea,0,f);else if(nn(f,"readystatechange"),Gn(f)==4){f.h=!1;try{const ye=f.Z();e:switch(ye){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var S;if(!(S=v)){var N;if(N=ye===0){var Q=String(f.D).match(ha)[1]||null;!Q&&u.self&&u.self.location&&(Q=u.self.location.protocol.slice(0,-1)),N=!Wy.test(Q?Q.toLowerCase():"")}S=N}if(S)nn(f,"complete"),nn(f,"success");else{f.m=6;try{var ne=2<Gn(f)?f.g.statusText:""}catch{ne=""}f.l=ne+" ["+f.Z()+"]",Pl(f)}}finally{cr(f)}}}}function cr(f,v){if(f.g){Cl(f);const S=f.g,N=f.v[0]?()=>{}:null;f.g=null,f.v=null,v||nn(f,"ready");try{S.onreadystatechange=N}catch{}}}function Cl(f){f.I&&(u.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function Gn(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<Gn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var v=this.g.responseText;return f&&v.indexOf(f)==0&&(v=v.substring(f.length)),Nc(v)}};function Hc(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function kl(f){const v={};f=(f.g&&2<=Gn(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<f.length;N++){if(M(f[N]))continue;var S=x(f[N]);const Q=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const ne=v[Q]||[];v[Q]=ne,ne.push(S)}D(v,function(N){return N.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ei(f,v,S){return S&&S.internalChannelParams&&S.internalChannelParams[f]||v}function Kc(f){this.Aa=0,this.i=[],this.j=new aa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ei("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ei("baseRetryDelayMs",5e3,f),this.cb=Ei("retryDelaySeedMs",1e4,f),this.Wa=Ei("forwardChannelMaxRetries",2,f),this.wa=Ei("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new da(f&&f.concurrentRequestLimit),this.Da=new zy,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Kc.prototype,n.la=8,n.G=1,n.connect=function(f,v,S,N){$t(0),this.W=f,this.H=v||{},S&&N!==void 0&&(this.H.OSID=S,this.H.OAID=N),this.F=this.X,this.I=qf(this,null,this.W),Ii(this)};function vn(f){if(xl(f),f.G==3){var v=f.U++,S=ur(f.I);if(ut(S,"SID",f.K),ut(S,"RID",v),ut(S,"TYPE","terminate"),us(f,S),v=new Yr(f,f.j,v),v.L=2,v.v=Js(ur(S)),S=!1,u.navigator&&u.navigator.sendBeacon)try{S=u.navigator.sendBeacon(v.v.toString(),"")}catch{}!S&&u.Image&&(new Image().src=v.v,S=!0),S||(v.g=Hf(v.j,null),v.g.ea(v.v)),v.F=Date.now(),ht(v)}Wf(f)}function ti(f){f.g&&(Gc(f),f.g.cancel(),f.g=null)}function xl(f){ti(f),f.u&&(u.clearTimeout(f.u),f.u=null),Dl(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&u.clearTimeout(f.s),f.s=null)}function Ii(f){if(!lr(f.h)&&!f.s){f.s=!0;var v=f.Ga;oe||he(),Z||(oe(),Z=!0),pe.add(v,f),f.B=0}}function qy(f,v){return Of(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=v.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Kr(_(f.Ga,f,v),zf(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const Q=new Yr(this,this.j,f);let ne=this.o;if(this.S&&(ne?(ne=b(ne),E(ne,this.S)):ne=this.S),this.m!==null||this.O||(Q.H=ne,ne=null),this.P)e:{for(var v=0,S=0;S<this.i.length;S++){t:{var N=this.i[S];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(v+=N,4096<v){v=S;break e}if(v===4096||S===this.i.length-1){v=S+1;break e}}v=1e3}else v=1e3;v=to(this,Q,v),S=ur(this.I),ut(S,"RID",f),ut(S,"CVER",22),this.D&&ut(S,"X-HTTP-Session-Id",this.D),us(this,S),ne&&(this.O?v="headers="+encodeURIComponent(String(ls(ne)))+"&"+v:this.m&&eo(S,this.m,ne)),Bc(this.h,Q),this.Ua&&ut(S,"TYPE","init"),this.P?(ut(S,"$req",v),ut(S,"SID","null"),Q.T=!0,Sl(Q,S,null)):Sl(Q,S,v),this.G=2}}else this.G==3&&(f?Ol(this,f):this.i.length==0||lr(this.h)||Ol(this))};function Ol(f,v){var S;v?S=v.l:S=f.U++;const N=ur(f.I);ut(N,"SID",f.K),ut(N,"RID",S),ut(N,"AID",f.T),us(f,N),f.m&&f.o&&eo(N,f.m,f.o),S=new Yr(f,f.j,S,f.B+1),f.m===null&&(S.H=f.o),v&&(f.i=v.D.concat(f.i)),v=to(f,S,1e3),S.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Bc(f.h,S),Sl(S,N,v)}function us(f,v){f.H&&W(f.H,function(S,N){ut(v,N,S)}),f.l&&Gs({},function(S,N){ut(v,N,S)})}function to(f,v,S){S=Math.min(f.i.length,S);var N=f.l?_(f.l.Na,f.l,f):null;e:{var Q=f.i;let ne=-1;for(;;){const ye=["count="+S];ne==-1?0<S?(ne=Q[0].g,ye.push("ofs="+ne)):ne=0:ye.push("ofs="+ne);let st=!0;for(let rn=0;rn<S;rn++){let Ye=Q[rn].g;const cn=Q[rn].map;if(Ye-=ne,0>Ye)ne=Math.max(0,Q[rn].g-100),st=!1;else try{$f(cn,ye,"req"+Ye+"_")}catch{N&&N(cn)}}if(st){N=ye.join("&");break e}}}return f=f.i.splice(0,S),v.D=f,N}function ga(f){if(!f.g&&!f.u){f.Y=1;var v=f.Fa;oe||he(),Z||(oe(),Z=!0),pe.add(v,f),f.v=0}}function Nl(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Kr(_(f.Fa,f),zf(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,Bf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Kr(_(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,$t(10),ti(this),Bf(this))};function Gc(f){f.A!=null&&(u.clearTimeout(f.A),f.A=null)}function Bf(f){f.g=new Yr(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var v=ur(f.qa);ut(v,"RID","rpc"),ut(v,"SID",f.K),ut(v,"AID",f.T),ut(v,"CI",f.F?"0":"1"),!f.F&&f.ja&&ut(v,"TO",f.ja),ut(v,"TYPE","xmlhttp"),us(f,v),f.m&&f.o&&eo(v,f.m,f.o),f.L&&(f.g.I=f.L);var S=f.g;f=f.ia,S.L=1,S.v=Js(ur(v)),S.m=null,S.P=!0,$c(S,f)}n.Za=function(){this.C!=null&&(this.C=null,ti(this),Nl(this),$t(19))};function Dl(f){f.C!=null&&(u.clearTimeout(f.C),f.C=null)}function Ll(f,v){var S=null;if(f.g==v){Dl(f),Gc(f),f.g=null;var N=2}else if(Mn(f.h,v))S=v.D,Nf(f.h,v),N=1;else return;if(f.G!=0){if(v.o)if(N==1){S=v.m?v.m.length:0,v=Date.now()-v.F;var Q=f.B;N=oa(),nn(N,new wl(N,S)),Ii(f)}else ga(f);else if(Q=v.s,Q==3||Q==0&&0<v.X||!(N==1&&qy(f,v)||N==2&&Nl(f)))switch(S&&0<S.length&&(v=f.h,v.i=v.i.concat(S)),Q){case 1:cs(f,5);break;case 4:cs(f,10);break;case 3:cs(f,6);break;default:cs(f,2)}}}function zf(f,v){let S=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(S*=2),S*v}function cs(f,v){if(f.j.info("Error code "+v),v==2){var S=_(f.fb,f),N=f.Xa;const Q=!N;N=new os(N||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||fa(N,"https"),Js(N),Q?By(N.toString(),S):Uf(N.toString(),S)}else $t(2);f.G=0,f.l&&f.l.sa(v),Wf(f),xl(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function Wf(f){if(f.G=0,f.ka=[],f.l){const v=Df(f.h);(v.length!=0||f.i.length!=0)&&(A(f.ka,v),A(f.ka,f.i),f.h.i.length=0,R(f.i),f.i.length=0),f.l.ra()}}function qf(f,v,S){var N=S instanceof os?ur(S):new os(S);if(N.g!="")v&&(N.g=v+"."+N.g),Qs(N,N.s);else{var Q=u.location;N=Q.protocol,v=v?v+"."+Q.hostname:Q.hostname,Q=+Q.port;var ne=new os(null);N&&fa(ne,N),v&&(ne.g=v),Q&&Qs(ne,Q),S&&(ne.l=S),N=ne}return S=f.D,v=f.ya,S&&v&&ut(N,S,v),ut(N,"VER",f.la),us(f,N),N}function Hf(f,v,S){if(v&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=f.Ca&&!f.pa?new wt(new as({eb:S})):new wt(f.pa),v.Ha(f.J),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qc(){}n=Qc.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Vl(){}Vl.prototype.g=function(f,v){return new Fn(f,v)};function Fn(f,v){tn.call(this),this.g=new Kc(v),this.l=f,this.h=v&&v.messageUrlParams||null,f=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(f?f["X-WebChannel-Content-Type"]=v.messageContentType:f={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(f?f["X-WebChannel-Client-Profile"]=v.va:f={"X-WebChannel-Client-Profile":v.va}),this.g.S=f,(f=v&&v.Sb)&&!M(f)&&(this.g.m=f),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!M(v)&&(this.g.D=v,f=this.h,f!==null&&v in f&&(f=this.h,v in f&&delete f[v])),this.j=new Ti(this)}I(Fn,tn),Fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Fn.prototype.close=function(){vn(this.g)},Fn.prototype.o=function(f){var v=this.g;if(typeof f=="string"){var S={};S.__data__=f,f=S}else this.u&&(S={},S.__data__=Oc(f),f=S);v.i.push(new xf(v.Ya++,f)),v.G==3&&Ii(v)},Fn.prototype.N=function(){this.g.l=null,delete this.j,vn(this.g),delete this.g,Fn.aa.N.call(this)};function Kf(f){yi.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var v=f.__sm__;if(v){e:{for(const S in v){f=S;break e}f=void 0}(this.i=f)&&(f=this.i,v=v!==null&&f in v?v[f]:void 0),this.data=v}else this.data=f}I(Kf,yi);function Gf(){vl.call(this),this.status=1}I(Gf,vl);function Ti(f){this.g=f}I(Ti,Qc),Ti.prototype.ua=function(){nn(this.g,"a")},Ti.prototype.ta=function(f){nn(this.g,new Kf(f))},Ti.prototype.sa=function(f){nn(this.g,new Gf)},Ti.prototype.ra=function(){nn(this.g,"b")},Vl.prototype.createWebChannel=Vl.prototype.g,Fn.prototype.send=Fn.prototype.o,Fn.prototype.open=Fn.prototype.m,Fn.prototype.close=Fn.prototype.close,Tk=function(){return new Vl},Ik=function(){return oa()},Ek=_i,mw={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Il.NO_ERROR=0,Il.TIMEOUT=8,Il.HTTP_ERROR=6,fm=Il,bf.COMPLETE="complete",wk=bf,_l.EventType=Cr,Cr.OPEN="a",Cr.CLOSE="b",Cr.ERROR="c",Cr.MESSAGE="d",tn.prototype.listen=tn.prototype.K,Hd=_l,wt.prototype.listenOnce=wt.prototype.L,wt.prototype.getLastError=wt.prototype.Ka,wt.prototype.getLastErrorCode=wt.prototype.Ba,wt.prototype.getStatus=wt.prototype.Z,wt.prototype.getResponseJson=wt.prototype.Oa,wt.prototype.getResponseText=wt.prototype.oa,wt.prototype.send=wt.prototype.ea,wt.prototype.setWithCredentials=wt.prototype.Ha,vk=wt}).apply(typeof Wp<"u"?Wp:typeof self<"u"?self:typeof window<"u"?window:{});const DR="@firebase/firestore",LR="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};mn.UNAUTHENTICATED=new mn(null),mn.GOOGLE_CREDENTIALS=new mn("google-credentials-uid"),mn.FIRST_PARTY=new mn("first-party-uid"),mn.MOCK_USER=new mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dc="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo=new Gh("@firebase/firestore");function wu(){return Vo.logLevel}function N4(n){Vo.setLogLevel(n)}function ue(n,...e){if(Vo.logLevel<=Ue.DEBUG){const t=e.map(ME);Vo.debug(`Firestore (${dc}): ${n}`,...t)}}function Bt(n,...e){if(Vo.logLevel<=Ue.ERROR){const t=e.map(ME);Vo.error(`Firestore (${dc}): ${n}`,...t)}}function Yi(n,...e){if(Vo.logLevel<=Ue.WARN){const t=e.map(ME);Vo.warn(`Firestore (${dc}): ${n}`,...t)}}function ME(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(n="Unexpected state"){const e=`FIRESTORE (${dc}) INTERNAL ASSERTION FAILED: `+n;throw Bt(e),new Error(e)}function Re(n,e){n||Ee()}function D4(n,e){n||Ee()}function ve(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends gn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class L4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(mn.UNAUTHENTICATED))}shutdown(){}}class V4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class M4{constructor(e){this.t=e,this.currentUser=mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Re(this.o===void 0);let r=this.i;const i=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let s=new Rn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Rn,e.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const d=s;e.enqueueRetryable(async()=>{await d.promise,await i(this.currentUser)})},u=d=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Rn)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Re(typeof r.accessToken=="string"),new Sk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Re(e===null||typeof e=="string"),new mn(e)}}class F4{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=mn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class U4{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new F4(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(mn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class VR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $4{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Ge(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Re(this.o===void 0);const r=s=>{s.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const l=s.token!==this.R;return this.R=s.token,ue("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new VR(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Re(typeof t.token=="string"),this.R=t.token,new VR(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=j4(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function Le(n,e){return n<e?-1:n>e?1:0}function Vu(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Ak(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=-62135596800,FR=1e6;class At{static now(){return At.fromMillis(Date.now())}static fromDate(e){return At.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*FR);return new At(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ae(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ae(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<MR)throw new ae(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/FR}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-MR;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new At(0,0))}static max(){return new Pe(new At(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR="__name__";class ki{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ee(),r===void 0?r=e.length-t:r>e.length-t&&Ee(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ki.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ki?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=ki.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Math.sign(e.length-t.length)}static compareSegments(e,t){const r=ki.isNumericId(e),i=ki.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?ki.extractNumericId(e).compare(ki.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Co.fromString(e.substring(4,e.length-2))}}class Be extends ki{construct(e,t,r){return new Be(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ae(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Be(t)}static emptyPath(){return new Be([])}}const B4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class St extends ki{construct(e,t,r){return new St(e,t,r)}static isValidIdentifier(e){return B4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),St.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===UR}static keyField(){return new St([UR])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ae(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new ae(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ae(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,i+=2}else u==="`"?(l=!l,i++):u!=="."||l?(r+=u,i++):(s(),i++)}if(s(),l)throw new ae(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new St(t)}static emptyPath(){return new St([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(Be.fromString(e))}static fromName(e){return new _e(Be.fromString(e).popFirst(5))}static empty(){return new _e(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Be.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new Be(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mu=-1;class Km{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function gw(n){return n.fields.find(e=>e.kind===2)}function Na(n){return n.fields.filter(e=>e.kind!==2)}Km.UNKNOWN_ID=-1;class pm{constructor(e,t){this.fieldPath=e,this.kind=t}}class wh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new wh(0,Rr.min())}}function bk(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Pe.fromTimestamp(r===1e9?new At(t+1,0):new At(t,r));return new Rr(i,_e.empty(),e)}function Pk(n){return new Rr(n.readTime,n.key,Mu)}class Rr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Rr(Pe.min(),_e.empty(),Mu)}static max(){return new Rr(Pe.max(),_e.empty(),Mu)}}function FE(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(n.documentKey,e.documentKey),t!==0?t:Le(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jo(n){if(n.code!==te.FAILED_PRECONDITION||n.message!==Ck)throw n;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):G.reject(t)}static resolve(e){return new G((t,r)=>{t(e)})}static reject(e){return new G((t,r)=>{r(e)})}static waitFor(e){return new G((t,r)=>{let i=0,s=0,l=!1;e.forEach(u=>{++i,u.next(()=>{++s,l&&s===i&&t()},d=>r(d))}),l=!0,s===i&&t()})}static or(e){let t=G.resolve(!1);for(const r of e)t=t.next(i=>i?G.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new G((r,i)=>{const s=e.length,l=new Array(s);let u=0;for(let d=0;d<s;d++){const h=d;t(e[h]).next(m=>{l[h]=m,++u,u===s&&r(l)},m=>i(m))}})}static doWhile(e,t){return new G((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr="SimpleDb";class Mg{static open(e,t,r,i){try{return new Mg(t,e.transaction(i,r))}catch(s){throw new th(t,s)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.m=new Rn,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{t.error?this.m.reject(new th(e,t.error)):this.m.resolve()},this.transaction.onerror=r=>{const i=UE(r.target.error);this.m.reject(new th(e,i))}}get p(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(ue(yr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new W4(t)}}class qi{static delete(e){return ue(yr,"Removing database:",e),La(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!gh())return!1;if(qi.v())return!0;const e=We(),t=qi.C(e),r=0<t&&t<10,i=xk(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,t){return e.store(t)}static C(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.O=r,qi.C(We())===12.2&&Bt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async N(e){return this.db||(ue(yr,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const l=s.target.result;t(l)},i.onblocked=()=>{r(new th(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const l=s.target.error;l.name==="VersionError"?r(new ae(te.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?r(new ae(te.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):r(new th(e,l))},i.onupgradeneeded=s=>{ue(yr,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const l=s.target.result;this.O.B(l,i.transaction,s.oldVersion,this.version).next(()=>{ue(yr,"Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=t=>this.L(t)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.N(e);const u=Mg.open(this.db,e,s?"readonly":"readwrite",r),d=i(u).next(h=>(u.S(),h)).catch(h=>(u.abort(h),G.reject(h))).toPromise();return d.catch(()=>{}),await u.p,d}catch(u){const d=u,h=d.name!=="FirebaseError"&&l<3;if(ue(yr,"Transaction failed with error:",d.message,"Retrying:",h),this.close(),!h)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function xk(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class z4{constructor(e){this.q=e,this.$=!1,this.K=null}get isDone(){return this.$}get U(){return this.K}set cursor(e){this.q=e}done(){this.$=!0}W(e){this.K=e}delete(){return La(this.q.delete())}}class th extends ae{constructor(e,t){super(te.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Xo(n){return n.name==="IndexedDbTransactionError"}class W4{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ue(yr,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(ue(yr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),La(r)}add(e){return ue(yr,"ADD",this.store.name,e,e),La(this.store.add(e))}get(e){return La(this.store.get(e)).next(t=>(t===void 0&&(t=null),ue(yr,"GET",this.store.name,e,t),t))}delete(e){return ue(yr,"DELETE",this.store.name,e),La(this.store.delete(e))}count(){return ue(yr,"COUNT",this.store.name),La(this.store.count())}G(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new G((l,u)=>{s.onerror=d=>{u(d.target.error)},s.onsuccess=d=>{l(d.target.result)}})}{const s=this.cursor(r),l=[];return this.j(s,(u,d)=>{l.push(d)}).next(()=>l)}}H(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new G((i,s)=>{r.onerror=l=>{s(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}J(e,t){ue(yr,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.j(i,(s,l,u)=>u.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.j(i,t)}X(e){const t=this.cursor({});return new G((r,i)=>{t.onerror=s=>{const l=UE(s.target.error);i(l)},t.onsuccess=s=>{const l=s.target.result;l?e(l.primaryKey,l.value).next(u=>{u?l.continue():r()}):r()}})}j(e,t){const r=[];return new G((i,s)=>{e.onerror=l=>{s(l.target.error)},e.onsuccess=l=>{const u=l.target.result;if(!u)return void i();const d=new z4(u),h=t(u.primaryKey,u.value,d);if(h instanceof G){const m=h.catch(g=>(d.done(),G.reject(g)));r.push(m)}d.isDone?i():d.U===null?u.continue():u.continue(d.U)}}).next(()=>G.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function La(n){return new G((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=UE(r.target.error);t(i)}})}let $R=!1;function UE(n){const e=qi.C(We());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return $R||($R=!0,setTimeout(()=>{throw r},0)),r}}return n}const nh="IndexBackfiller";class q4{constructor(e,t){this.asyncQueue=e,this.ee=t,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(e){ue(nh,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.ee.ne();ue(nh,`Documents written: ${t}`)}catch(t){Xo(t)?ue(nh,"Ignoring IndexedDB error during index backfill: ",t):await Jo(t)}await this.te(6e4)})}}class H4{constructor(e,t){this.localStore=e,this.persistence=t}async ne(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.re(t,e))}re(e,t){const r=new Set;let i=t,s=!0;return G.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(l!==null&&!r.has(l))return ue(nh,`Processing collection: ${l}`),this.ie(e,l,i).next(u=>{i-=u,r.add(l)});s=!1})).next(()=>t-i)}ie(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const l=s.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.se(i,s)).next(u=>(ue(nh,`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,t,u))).next(()=>l.size)}))}se(e,t){let r=e;return t.changes.forEach((i,s)=>{const l=Pk(s);FE(l,r)>0&&(r=l)}),new Rr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}nr.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko=-1;function Zh(n){return n==null}function Eh(n){return n===0&&1/n==-1/0}function Ok(n){return typeof n=="number"&&Number.isInteger(n)&&!Eh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="";function Ln(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=jR(e)),e=K4(n.get(t),e);return jR(e)}function K4(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case Gm:t+="";break;default:t+=s}}return t}function jR(n){return n+Gm+""}function Ui(n){const e=n.length;if(Re(e>=2),e===2)return Re(n.charAt(0)===Gm&&n.charAt(1)===""),Be.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const l=n.indexOf(Gm,s);switch((l<0||l>t)&&Ee(),n.charAt(l+1)){case"":const u=n.substring(s,l);let d;i.length===0?d=u:(i+=u,d=i,i=""),r.push(d);break;case"":i+=n.substring(s,l),i+="\0";break;case"":i+=n.substring(s,l+1);break;default:Ee()}s=l+2}return new Be(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da="remoteDocuments",ef="owner",iu="owner",Ih="mutationQueues",G4="userId",ui="mutations",BR="batchId",$a="userMutationsIndex",zR=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(n,e){return[n,Ln(e)]}function Nk(n,e,t){return[n,Ln(e),t]}const Q4={},Fu="documentMutations",Qm="remoteDocumentsV14",Y4=["prefixPath","collectionGroup","readTime","documentId"],gm="documentKeyIndex",J4=["prefixPath","collectionGroup","documentId"],Dk="collectionGroupIndex",X4=["collectionGroup","readTime","prefixPath","documentId"],Th="remoteDocumentGlobal",yw="remoteDocumentGlobalKey",Uu="targets",Lk="queryTargetsIndex",Z4=["canonicalId","targetId"],$u="targetDocuments",e$=["targetId","path"],$E="documentTargetsIndex",t$=["path","targetId"],Ym="targetGlobalKey",qa="targetGlobal",Sh="collectionParents",n$=["collectionId","parent"],ju="clientMetadata",r$="clientId",Fg="bundles",i$="bundleId",Ug="namedQueries",s$="name",jE="indexConfiguration",o$="indexId",_w="collectionGroupIndex",a$="collectionGroup",Jm="indexState",l$=["indexId","uid"],Vk="sequenceNumberIndex",u$=["uid","sequenceNumber"],Xm="indexEntries",c$=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Mk="documentKeyIndex",d$=["indexId","uid","orderedDocumentKey"],$g="documentOverlays",h$=["userId","collectionPath","documentId"],vw="collectionPathOverlayIndex",f$=["userId","collectionPath","largestBatchId"],Fk="collectionGroupOverlayIndex",p$=["userId","collectionGroup","largestBatchId"],BE="globals",m$="name",Uk=[Ih,ui,Fu,Da,Uu,ef,qa,$u,ju,Th,Sh,Fg,Ug],g$=[...Uk,$g],$k=[Ih,ui,Fu,Qm,Uu,ef,qa,$u,ju,Th,Sh,Fg,Ug,$g],jk=$k,zE=[...jk,jE,Jm,Xm],y$=zE,_$=[...zE,BE];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww extends kk{constructor(e,t){super(),this.ue=e,this.currentSequenceNumber=t}}function ln(n,e){const t=ve(n);return qi.M(t.ue,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Zo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Bk(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,t){this.comparator=e,this.root=t||In.EMPTY}insert(e,t){return new pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,In.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,In.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qp(this.root,e,this.comparator,!1)}getReverseIterator(){return new qp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qp(this.root,e,this.comparator,!0)}}class qp{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class In{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??In.RED,this.left=i??In.EMPTY,this.right=s??In.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new In(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return In.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return In.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,In.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,In.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ee();const e=this.left.check();if(e!==this.right.check())throw Ee();return e+(this.isRed()?0:1)}}In.EMPTY=null,In.RED=!0,In.BLACK=!1;In.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee()}get value(){throw Ee()}get color(){throw Ee()}get left(){throw Ee()}get right(){throw Ee()}copy(e,t,r,i,s){return this}insert(e,t,r){return new In(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qR(this.data.getIterator())}getIteratorFrom(e){return new qR(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof at)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new at(this.comparator);return t.data=e,t}}class qR{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function su(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e){this.fields=e,e.sort(St.comparator)}static empty(){return new rr([])}unionWith(e){let t=new at(St.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new rr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vu(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v$(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new zk("Invalid base64 string: "+s):s}}(e);return new Mt(t)}static fromUint8Array(e){const t=function(i){let s="";for(let l=0;l<i.length;++l)s+=String.fromCharCode(i[l]);return s}(e);return new Mt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mt.EMPTY_BYTE_STRING=new Mt("");const w$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ds(n){if(Re(!!n),typeof n=="string"){let e=0;const t=w$.exec(n);if(Re(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tt(n.seconds),nanos:Tt(n.nanos)}}function Tt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ls(n){return typeof n=="string"?Mt.fromBase64String(n):Mt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk="server_timestamp",qk="__type__",Hk="__previous_value__",Kk="__local_write_time__";function jg(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[qk])===null||t===void 0?void 0:t.stringValue)===Wk}function Bg(n){const e=n.mapValue.fields[Hk];return jg(e)?Bg(e):e}function Rh(n){const e=Ds(n.mapValue.fields[Kk].timestampValue);return new At(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E${constructor(e,t,r,i,s,l,u,d,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=h}}const Ew="(default)";class Mo{constructor(e,t){this.projectId=e,this.database=t||Ew}static empty(){return new Mo("","")}get isDefaultDatabase(){return this.database===Ew}isEqual(e){return e instanceof Mo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE="__type__",Gk="__max__",Ro={mapValue:{fields:{__type__:{stringValue:Gk}}}},qE="__vector__",Bu="value",ym={nullValue:"NULL_VALUE"};function Fo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?jg(n)?4:Qk(n)?9007199254740991:zg(n)?10:11:Ee()}function Ji(n,e){if(n===e)return!0;const t=Fo(n);if(t!==Fo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Rh(n).isEqual(Rh(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const l=Ds(i.timestampValue),u=Ds(s.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Ls(i.bytesValue).isEqual(Ls(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Tt(i.geoPointValue.latitude)===Tt(s.geoPointValue.latitude)&&Tt(i.geoPointValue.longitude)===Tt(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Tt(i.integerValue)===Tt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const l=Tt(i.doubleValue),u=Tt(s.doubleValue);return l===u?Eh(l)===Eh(u):isNaN(l)&&isNaN(u)}return!1}(n,e);case 9:return Vu(n.arrayValue.values||[],e.arrayValue.values||[],Ji);case 10:case 11:return function(i,s){const l=i.mapValue.fields||{},u=s.mapValue.fields||{};if(WR(l)!==WR(u))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(u[d]===void 0||!Ji(l[d],u[d])))return!1;return!0}(n,e);default:return Ee()}}function Ah(n,e){return(n.values||[]).find(t=>Ji(t,e))!==void 0}function Uo(n,e){if(n===e)return 0;const t=Fo(n),r=Fo(e);if(t!==r)return Le(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(n.booleanValue,e.booleanValue);case 2:return function(s,l){const u=Tt(s.integerValue||s.doubleValue),d=Tt(l.integerValue||l.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(n,e);case 3:return HR(n.timestampValue,e.timestampValue);case 4:return HR(Rh(n),Rh(e));case 5:return Le(n.stringValue,e.stringValue);case 6:return function(s,l){const u=Ls(s),d=Ls(l);return u.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(s,l){const u=s.split("/"),d=l.split("/");for(let h=0;h<u.length&&h<d.length;h++){const m=Le(u[h],d[h]);if(m!==0)return m}return Le(u.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,l){const u=Le(Tt(s.latitude),Tt(l.latitude));return u!==0?u:Le(Tt(s.longitude),Tt(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return KR(n.arrayValue,e.arrayValue);case 10:return function(s,l){var u,d,h,m;const g=s.fields||{},_=l.fields||{},T=(u=g[Bu])===null||u===void 0?void 0:u.arrayValue,I=(d=_[Bu])===null||d===void 0?void 0:d.arrayValue,R=Le(((h=T==null?void 0:T.values)===null||h===void 0?void 0:h.length)||0,((m=I==null?void 0:I.values)===null||m===void 0?void 0:m.length)||0);return R!==0?R:KR(T,I)}(n.mapValue,e.mapValue);case 11:return function(s,l){if(s===Ro.mapValue&&l===Ro.mapValue)return 0;if(s===Ro.mapValue)return 1;if(l===Ro.mapValue)return-1;const u=s.fields||{},d=Object.keys(u),h=l.fields||{},m=Object.keys(h);d.sort(),m.sort();for(let g=0;g<d.length&&g<m.length;++g){const _=Le(d[g],m[g]);if(_!==0)return _;const T=Uo(u[d[g]],h[m[g]]);if(T!==0)return T}return Le(d.length,m.length)}(n.mapValue,e.mapValue);default:throw Ee()}}function HR(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Le(n,e);const t=Ds(n),r=Ds(e),i=Le(t.seconds,r.seconds);return i!==0?i:Le(t.nanos,r.nanos)}function KR(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=Uo(t[i],r[i]);if(s)return s}return Le(t.length,r.length)}function zu(n){return Iw(n)}function Iw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Ds(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ls(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return _e.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=Iw(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const l of r)s?s=!1:i+=",",i+=`${l}:${Iw(t.fields[l])}`;return i+"}"}(n.mapValue):Ee()}function _m(n){switch(Fo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Bg(n);return e?16+_m(e):16;case 5:return 2*n.stringValue.length;case 6:return Ls(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+_m(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Zo(r.fields,(s,l)=>{i+=s.length+_m(l)}),i}(n.mapValue);default:throw Ee()}}function Qa(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Tw(n){return!!n&&"integerValue"in n}function bh(n){return!!n&&"arrayValue"in n}function GR(n){return!!n&&"nullValue"in n}function QR(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function vm(n){return!!n&&"mapValue"in n}function zg(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[WE])===null||t===void 0?void 0:t.stringValue)===qE}function rh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Zo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=rh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=rh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Qk(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Gk}const Yk={mapValue:{fields:{[WE]:{stringValue:qE},[Bu]:{arrayValue:{}}}}};function I$(n){return"nullValue"in n?ym:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Qa(Mo.empty(),_e.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?zg(n)?Yk:{mapValue:{}}:Ee()}function T$(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Qa(Mo.empty(),_e.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?Yk:"mapValue"in n?zg(n)?{mapValue:{}}:Ro:Ee()}function YR(n,e){const t=Uo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function JR(n,e){const t=Uo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.value=e}static empty(){return new Sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!vm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=rh(t)}setAll(e){let t=St.emptyPath(),r={},i=[];e.forEach((l,u)=>{if(!t.isImmediateParentOf(u)){const d=this.getFieldsMap(t);this.applyChanges(d,r,i),r={},i=[],t=u.popLast()}l?r[u.lastSegment()]=rh(l):i.push(u.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());vm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ji(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];vm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Zo(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Sn(rh(this.value))}}function Jk(n){const e=[];return Zo(n.fields,(t,r)=>{const i=new St([t]);if(vm(r)){const s=Jk(r.mapValue).fields;if(s.length===0)e.push(i);else for(const l of s)e.push(i.child(l))}else e.push(i)}),new rr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,t,r,i,s,l,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=l,this.documentState=u}static newInvalidDocument(e){return new _t(e,0,Pe.min(),Pe.min(),Pe.min(),Sn.empty(),0)}static newFoundDocument(e,t,r,i){return new _t(e,1,t,Pe.min(),r,i,0)}static newNoDocument(e,t){return new _t(e,2,t,Pe.min(),Pe.min(),Sn.empty(),0)}static newUnknownDocument(e,t){return new _t(e,3,t,Pe.min(),Pe.min(),Sn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e,t){this.position=e,this.inclusive=t}}function XR(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],l=n.position[i];if(s.field.isKeyField()?r=_e.comparator(_e.fromName(l.referenceValue),t.key):r=Uo(l,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function ZR(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ji(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,t="asc"){this.field=e,this.dir=t}}function S$(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{}class ze extends Xk{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new R$(e,t,r):t==="array-contains"?new P$(e,r):t==="in"?new i1(e,r):t==="not-in"?new C$(e,r):t==="array-contains-any"?new k$(e,r):new ze(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new A$(e,r):new b$(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Uo(t,this.value)):t!==null&&Fo(this.value)===Fo(t)&&this.matchesComparison(Uo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ot extends Xk{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new ot(e,t)}matches(e){return Wu(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Wu(n){return n.op==="and"}function Sw(n){return n.op==="or"}function HE(n){return Zk(n)&&Wu(n)}function Zk(n){for(const e of n.filters)if(e instanceof ot)return!1;return!0}function Rw(n){if(n instanceof ze)return n.field.canonicalString()+n.op.toString()+zu(n.value);if(HE(n))return n.filters.map(e=>Rw(e)).join(",");{const e=n.filters.map(t=>Rw(t)).join(",");return`${n.op}(${e})`}}function e1(n,e){return n instanceof ze?function(r,i){return i instanceof ze&&r.op===i.op&&r.field.isEqual(i.field)&&Ji(r.value,i.value)}(n,e):n instanceof ot?function(r,i){return i instanceof ot&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,l,u)=>s&&e1(l,i.filters[u]),!0):!1}(n,e):void Ee()}function t1(n,e){const t=n.filters.concat(e);return ot.create(t,n.op)}function n1(n){return n instanceof ze?function(t){return`${t.field.canonicalString()} ${t.op} ${zu(t.value)}`}(n):n instanceof ot?function(t){return t.op.toString()+" {"+t.getFilters().map(n1).join(" ,")+"}"}(n):"Filter"}class R$ extends ze{constructor(e,t,r){super(e,t,r),this.key=_e.fromName(r.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class A$ extends ze{constructor(e,t){super(e,"in",t),this.keys=r1("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class b$ extends ze{constructor(e,t){super(e,"not-in",t),this.keys=r1("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function r1(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>_e.fromName(r.referenceValue))}class P$ extends ze{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return bh(t)&&Ah(t.arrayValue,this.value)}}class i1 extends ze{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ah(this.value.arrayValue,t)}}class C$ extends ze{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ah(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Ah(this.value.arrayValue,t)}}class k$ extends ze{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!bh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ah(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x${constructor(e,t=null,r=[],i=[],s=null,l=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=l,this.endAt=u,this.le=null}}function Aw(n,e=null,t=[],r=[],i=null,s=null,l=null){return new x$(n,e,t,r,i,s,l)}function Ya(n){const e=ve(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Rw(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Zh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>zu(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>zu(r)).join(",")),e.le=t}return e.le}function tf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!S$(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!e1(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ZR(n.startAt,e.startAt)&&ZR(n.endAt,e.endAt)}function Zm(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function eg(n,e){return n.filters.filter(t=>t instanceof ze&&t.field.isEqual(e))}function eA(n,e,t){let r=ym,i=!0;for(const s of eg(n,e)){let l=ym,u=!0;switch(s.op){case"<":case"<=":l=I$(s.value);break;case"==":case"in":case">=":l=s.value;break;case">":l=s.value,u=!1;break;case"!=":case"not-in":l=ym}YR({value:r,inclusive:i},{value:l,inclusive:u})<0&&(r=l,i=u)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];YR({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}}return{value:r,inclusive:i}}function tA(n,e,t){let r=Ro,i=!0;for(const s of eg(n,e)){let l=Ro,u=!0;switch(s.op){case">=":case">":l=T$(s.value),u=!1;break;case"==":case"in":case"<=":l=s.value;break;case"<":l=s.value,u=!1;break;case"!=":case"not-in":l=Ro}JR({value:r,inclusive:i},{value:l,inclusive:u})>0&&(r=l,i=u)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];JR({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,t=null,r=[],i=[],s=null,l="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=l,this.startAt=u,this.endAt=d,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function s1(n,e,t,r,i,s,l,u){return new $s(n,e,t,r,i,s,l,u)}function hc(n){return new $s(n)}function nA(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function KE(n){return n.collectionGroup!==null}function Au(n){const e=ve(n);if(e.he===null){e.he=[];const t=new Set;for(const s of e.explicitOrderBy)e.he.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new at(St.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(h=>{h.isInequality()&&(u=u.add(h.field))})}),u})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.he.push(new Ph(s,r))}),t.has(St.keyField().canonicalString())||e.he.push(new Ph(St.keyField(),r))}return e.he}function zn(n){const e=ve(n);return e.Pe||(e.Pe=O$(e,Au(n))),e.Pe}function O$(n,e){if(n.limitType==="F")return Aw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Ph(i.field,s)});const t=n.endAt?new $o(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new $o(n.startAt.position,n.startAt.inclusive):null;return Aw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function bw(n,e){const t=n.filters.concat([e]);return new $s(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function tg(n,e,t){return new $s(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function nf(n,e){return tf(zn(n),zn(e))&&n.limitType===e.limitType}function o1(n){return`${Ya(zn(n))}|lt:${n.limitType}`}function Eu(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>n1(i)).join(", ")}]`),Zh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>zu(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>zu(i)).join(",")),`Target(${r})`}(zn(n))}; limitType=${n.limitType})`}function rf(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):_e.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Au(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(l,u,d){const h=XR(l,u,d);return l.inclusive?h<=0:h<0}(r.startAt,Au(r),i)||r.endAt&&!function(l,u,d){const h=XR(l,u,d);return l.inclusive?h>=0:h>0}(r.endAt,Au(r),i))}(n,e)}function a1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function l1(n){return(e,t)=>{let r=!1;for(const i of Au(n)){const s=N$(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function N$(n,e,t){const r=n.field.isKeyField()?_e.comparator(e.key,t.key):function(s,l,u){const d=l.data.field(s),h=u.data.field(s);return d!==null&&h!==null?Uo(d,h):Ee()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Zo(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Bk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D$=new pt(_e.comparator);function ir(){return D$}const u1=new pt(_e.comparator);function Kd(...n){let e=u1;for(const t of n)e=e.insert(t.key,t);return e}function c1(n){let e=u1;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function $i(){return ih()}function d1(){return ih()}function ih(){return new js(n=>n.toString(),(n,e)=>n.isEqual(e))}const L$=new pt(_e.comparator),V$=new at(_e.comparator);function Fe(...n){let e=V$;for(const t of n)e=e.add(t);return e}const M$=new at(Le);function GE(){return M$}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eh(e)?"-0":e}}function h1(n){return{integerValue:""+n}}function f1(n,e){return Ok(e)?h1(e):QE(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(){this._=void 0}}function F$(n,e,t){return n instanceof qu?function(i,s){const l={fields:{[qk]:{stringValue:Wk},[Kk]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&jg(s)&&(s=Bg(s)),s&&(l.fields[Hk]=s),{mapValue:l}}(t,e):n instanceof Ja?m1(n,e):n instanceof Xa?g1(n,e):function(i,s){const l=p1(i,s),u=rA(l)+rA(i.Ie);return Tw(l)&&Tw(i.Ie)?h1(u):QE(i.serializer,u)}(n,e)}function U$(n,e,t){return n instanceof Ja?m1(n,e):n instanceof Xa?g1(n,e):t}function p1(n,e){return n instanceof Hu?function(r){return Tw(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class qu extends Wg{}class Ja extends Wg{constructor(e){super(),this.elements=e}}function m1(n,e){const t=y1(e);for(const r of n.elements)t.some(i=>Ji(i,r))||t.push(r);return{arrayValue:{values:t}}}class Xa extends Wg{constructor(e){super(),this.elements=e}}function g1(n,e){let t=y1(e);for(const r of n.elements)t=t.filter(i=>!Ji(i,r));return{arrayValue:{values:t}}}class Hu extends Wg{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function rA(n){return Tt(n.integerValue||n.doubleValue)}function y1(n){return bh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,t){this.field=e,this.transform=t}}function $$(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Ja&&i instanceof Ja||r instanceof Xa&&i instanceof Xa?Vu(r.elements,i.elements,Ji):r instanceof Hu&&i instanceof Hu?Ji(r.Ie,i.Ie):r instanceof qu&&i instanceof qu}(n.transform,e.transform)}class j${constructor(e,t){this.version=e,this.transformResults=t}}class Rt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Rt}static exists(e){return new Rt(void 0,e)}static updateTime(e){return new Rt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class qg{}function _1(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new pc(n.key,Rt.none()):new fc(n.key,n.data,Rt.none());{const t=n.data,r=Sn.empty();let i=new at(St.comparator);for(let s of e.fields)if(!i.has(s)){let l=t.field(s);l===null&&s.length>1&&(s=s.popLast(),l=t.field(s)),l===null?r.delete(s):r.set(s,l),i=i.add(s)}return new Bs(n.key,r,new rr(i.toArray()),Rt.none())}}function B$(n,e,t){n instanceof fc?function(i,s,l){const u=i.value.clone(),d=sA(i.fieldTransforms,s,l.transformResults);u.setAll(d),s.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Bs?function(i,s,l){if(!wm(i.precondition,s))return void s.convertToUnknownDocument(l.version);const u=sA(i.fieldTransforms,s,l.transformResults),d=s.data;d.setAll(v1(i)),d.setAll(u),s.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(n,e,t):function(i,s,l){s.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function sh(n,e,t,r){return n instanceof fc?function(s,l,u,d){if(!wm(s.precondition,l))return u;const h=s.value.clone(),m=oA(s.fieldTransforms,d,l);return h.setAll(m),l.convertToFoundDocument(l.version,h).setHasLocalMutations(),null}(n,e,t,r):n instanceof Bs?function(s,l,u,d){if(!wm(s.precondition,l))return u;const h=oA(s.fieldTransforms,d,l),m=l.data;return m.setAll(v1(s)),m.setAll(h),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,e,t,r):function(s,l,u){return wm(s.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u}(n,e,t)}function z$(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=p1(r.transform,i||null);s!=null&&(t===null&&(t=Sn.empty()),t.set(r.field,s))}return t||null}function iA(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Vu(r,i,(s,l)=>$$(s,l))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class fc extends qg{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Bs extends qg{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function v1(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function sA(n,e,t){const r=new Map;Re(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],l=s.transform,u=e.data.field(s.field);r.set(s.field,U$(l,u,t[i]))}return r}function oA(n,e,t){const r=new Map;for(const i of n){const s=i.transform,l=t.data.field(i.field);r.set(i.field,F$(s,l,e))}return r}class pc extends qg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YE extends qg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&B$(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=sh(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=sh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=d1();return this.mutations.forEach(i=>{const s=e.get(i.key),l=s.overlayedDocument;let u=this.applyToLocalView(l,s.mutatedFields);u=t.has(i.key)?null:u;const d=_1(l,u);d!==null&&r.set(i.key,d),l.isValidDocument()||l.convertToNoDocument(Pe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Fe())}isEqual(e){return this.batchId===e.batchId&&Vu(this.mutations,e.mutations,(t,r)=>iA(t,r))&&Vu(this.baseMutations,e.baseMutations,(t,r)=>iA(t,r))}}class XE{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Re(e.mutations.length===r.length);let i=function(){return L$}();const s=e.mutations;for(let l=0;l<s.length;l++)i=i.insert(s[l].key,r[l].version);return new XE(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W${constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qt,Je;function w1(n){switch(n){case te.OK:return Ee();case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Ee()}}function E1(n){if(n===void 0)return Bt("GRPC error has no .code"),te.UNKNOWN;switch(n){case Qt.OK:return te.OK;case Qt.CANCELLED:return te.CANCELLED;case Qt.UNKNOWN:return te.UNKNOWN;case Qt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Qt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Qt.INTERNAL:return te.INTERNAL;case Qt.UNAVAILABLE:return te.UNAVAILABLE;case Qt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Qt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Qt.NOT_FOUND:return te.NOT_FOUND;case Qt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Qt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Qt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Qt.ABORTED:return te.ABORTED;case Qt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Qt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Qt.DATA_LOSS:return te.DATA_LOSS;default:return Ee()}}(Je=Qt||(Qt={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q$=new Co([4294967295,4294967295],0);function aA(n){const e=I1().encode(n),t=new _k;return t.update(e),new Uint8Array(t.digest())}function lA(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Co([t,r],0),new Co([i,s],0)]}class e0{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Gd(`Invalid padding: ${t}`);if(r<0)throw new Gd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Gd(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Gd(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Co.fromNumber(this.Ee)}Ae(e,t,r){let i=e.add(t.multiply(Co.fromNumber(r)));return i.compare(q$)===1&&(i=new Co([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=aA(e),[r,i]=lA(t);for(let s=0;s<this.hashCount;s++){const l=this.Ae(r,i,s);if(!this.Re(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),l=new e0(s,i,t);return r.forEach(u=>l.insert(u)),l}insert(e){if(this.Ee===0)return;const t=aA(e),[r,i]=lA(t);for(let s=0;s<this.hashCount;s++){const l=this.Ae(r,i,s);this.Ve(l)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Gd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,af.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new of(Pe.min(),i,new pt(Le),ir(),Fe())}}class af{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new af(r,t,Fe(),Fe(),Fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,t,r,i){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=i}}class T1{constructor(e,t){this.targetId=e,this.ge=t}}class S1{constructor(e,t,r=Mt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class uA{constructor(){this.pe=0,this.ye=cA(),this.we=Mt.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=Fe(),t=Fe(),r=Fe();return this.ye.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ee()}}),new af(this.we,this.be,e,t,r)}Me(){this.Se=!1,this.ye=cA()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Re(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class H${constructor(e){this.ke=e,this.qe=new Map,this.Qe=ir(),this.$e=Hp(),this.Ke=Hp(),this.Ue=new pt(Le)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:Ee()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,i)=>{this.Je(i)&&t(i)})}Ze(e){const t=e.targetId,r=e.ge.count,i=this.Xe(t);if(i){const s=i.target;if(Zm(s))if(r===0){const l=new _e(s.path);this.ze(t,l,_t.newNoDocument(l,Pe.min()))}else Re(r===1);else{const l=this.et(t);if(l!==r){const u=this.tt(e),d=u?this.nt(u,e,l):1;if(d!==0){this.Ye(t);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,h)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let l,u;try{l=Ls(r).toUint8Array()}catch(d){if(d instanceof zk)return Yi("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new e0(l,i,s)}catch(d){return Yi(d instanceof Gd?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.Ee===0?null:u}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const l=this.ke.it(),u=`projects/${l.projectId}/databases/${l.database}/documents/${s.path.canonicalString()}`;e.mightContain(u)||(this.ze(t,s,null),i++)}),i}ot(e){const t=new Map;this.qe.forEach((s,l)=>{const u=this.Xe(l);if(u){if(s.current&&Zm(u.target)){const d=new _e(u.target.path);this._t(d).has(l)||this.ut(l,d)||this.ze(l,d,_t.newNoDocument(d,e))}s.ve&&(t.set(l,s.Fe()),s.Me())}});let r=Fe();this.Ke.forEach((s,l)=>{let u=!0;l.forEachWhile(d=>{const h=this.Xe(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(s))}),this.Qe.forEach((s,l)=>l.setReadTime(e));const i=new of(e,t,this.Ue,this.Qe,r);return this.Qe=ir(),this.$e=Hp(),this.Ke=Hp(),this.Ue=new pt(Le),i}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const i=this.He(e);this.ut(e,t)?i.xe(t,1):i.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new uA,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new at(Le),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new at(Le),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new uA),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function Hp(){return new pt(_e.comparator)}function cA(){return new pt(_e.comparator)}const K$={asc:"ASCENDING",desc:"DESCENDING"},G$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Q$={and:"AND",or:"OR"};class Y${constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Pw(n,e){return n.useProto3Json||Zh(e)?e:{value:e}}function Ku(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function R1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function J$(n,e){return Ku(n,e.toTimestamp())}function zt(n){return Re(!!n),Pe.fromTimestamp(function(t){const r=Ds(t);return new At(r.seconds,r.nanos)}(n))}function t0(n,e){return Cw(n,e).canonicalString()}function Cw(n,e){const t=function(i){return new Be(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function A1(n){const e=Be.fromString(n);return Re(V1(e)),e}function Ch(n,e){return t0(n.databaseId,e.path)}function Hi(n,e){const t=A1(e);if(t.get(1)!==n.databaseId.projectId)throw new ae(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ae(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _e(C1(t))}function b1(n,e){return t0(n.databaseId,e)}function P1(n){const e=A1(n);return e.length===4?Be.emptyPath():C1(e)}function kw(n){return new Be(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function C1(n){return Re(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function dA(n,e,t){return{name:Ch(n,e),fields:t.value.mapValue.fields}}function k1(n,e,t){const r=Hi(n,e.name),i=zt(e.updateTime),s=e.createTime?zt(e.createTime):Pe.min(),l=new Sn({mapValue:{fields:e.fields}}),u=_t.newFoundDocument(r,i,s,l);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function X$(n,e){return"found"in e?function(r,i){Re(!!i.found),i.found.name,i.found.updateTime;const s=Hi(r,i.found.name),l=zt(i.found.updateTime),u=i.found.createTime?zt(i.found.createTime):Pe.min(),d=new Sn({mapValue:{fields:i.found.fields}});return _t.newFoundDocument(s,l,u,d)}(n,e):"missing"in e?function(r,i){Re(!!i.missing),Re(!!i.readTime);const s=Hi(r,i.missing),l=zt(i.readTime);return _t.newNoDocument(s,l)}(n,e):Ee()}function Z$(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,m){return h.useProto3Json?(Re(m===void 0||typeof m=="string"),Mt.fromBase64String(m||"")):(Re(m===void 0||m instanceof Buffer||m instanceof Uint8Array),Mt.fromUint8Array(m||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&function(h){const m=h.code===void 0?te.UNKNOWN:E1(h.code);return new ae(m,h.message||"")}(l);t=new S1(r,i,s,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Hi(n,r.document.name),s=zt(r.document.updateTime),l=r.document.createTime?zt(r.document.createTime):Pe.min(),u=new Sn({mapValue:{fields:r.document.fields}}),d=_t.newFoundDocument(i,s,l,u),h=r.targetIds||[],m=r.removedTargetIds||[];t=new Em(h,m,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Hi(n,r.document),s=r.readTime?zt(r.readTime):Pe.min(),l=_t.newNoDocument(i,s),u=r.removedTargetIds||[];t=new Em([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Hi(n,r.document),s=r.removedTargetIds||[];t=new Em([],s,i,null)}else{if(!("filter"in e))return Ee();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,l=new W$(i,s),u=r.targetId;t=new T1(u,l)}}return t}function kh(n,e){let t;if(e instanceof fc)t={update:dA(n,e.key,e.value)};else if(e instanceof pc)t={delete:Ch(n,e.key)};else if(e instanceof Bs)t={update:dA(n,e.key,e.data),updateMask:sj(e.fieldMask)};else{if(!(e instanceof YE))return Ee();t={verify:Ch(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,l){const u=l.transform;if(u instanceof qu)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Ja)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Xa)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Hu)return{fieldPath:l.field.canonicalString(),increment:u.Ie};throw Ee()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:J$(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ee()}(n,e.precondition)),t}function xw(n,e){const t=e.currentDocument?function(s){return s.updateTime!==void 0?Rt.updateTime(zt(s.updateTime)):s.exists!==void 0?Rt.exists(s.exists):Rt.none()}(e.currentDocument):Rt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(l,u){let d=null;if("setToServerValue"in u)Re(u.setToServerValue==="REQUEST_TIME"),d=new qu;else if("appendMissingElements"in u){const m=u.appendMissingElements.values||[];d=new Ja(m)}else if("removeAllFromArray"in u){const m=u.removeAllFromArray.values||[];d=new Xa(m)}else"increment"in u?d=new Hu(l,u.increment):Ee();const h=St.fromServerFormat(u.fieldPath);return new sf(h,d)}(n,i)):[];if(e.update){e.update.name;const i=Hi(n,e.update.name),s=new Sn({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=function(d){const h=d.fieldPaths||[];return new rr(h.map(m=>St.fromServerFormat(m)))}(e.updateMask);return new Bs(i,s,l,t,r)}return new fc(i,s,t,r)}if(e.delete){const i=Hi(n,e.delete);return new pc(i,t)}if(e.verify){const i=Hi(n,e.verify);return new YE(i,t)}return Ee()}function ej(n,e){return n&&n.length>0?(Re(e!==void 0),n.map(t=>function(i,s){let l=i.updateTime?zt(i.updateTime):zt(s);return l.isEqual(Pe.min())&&(l=zt(s)),new j$(l,i.transformResults||[])}(t,e))):[]}function x1(n,e){return{documents:[b1(n,e.path)]}}function O1(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=b1(n,i);const s=function(h){if(h.length!==0)return L1(ot.create(h,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const l=function(h){if(h.length!==0)return h.map(m=>function(_){return{field:Iu(_.field),direction:nj(_.dir)}}(m))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const u=Pw(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ht:t,parent:i}}function N1(n){let e=P1(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Re(r===1);const m=t.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let s=[];t.where&&(s=function(g){const _=D1(g);return _ instanceof ot&&HE(_)?_.getFilters():[_]}(t.where));let l=[];t.orderBy&&(l=function(g){return g.map(_=>function(I){return new Ph(Tu(I.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(_))}(t.orderBy));let u=null;t.limit&&(u=function(g){let _;return _=typeof g=="object"?g.value:g,Zh(_)?null:_}(t.limit));let d=null;t.startAt&&(d=function(g){const _=!!g.before,T=g.values||[];return new $o(T,_)}(t.startAt));let h=null;return t.endAt&&(h=function(g){const _=!g.before,T=g.values||[];return new $o(T,_)}(t.endAt)),s1(e,i,l,s,u,"F",d,h)}function tj(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function D1(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Tu(t.unaryFilter.field);return ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Tu(t.unaryFilter.field);return ze.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Tu(t.unaryFilter.field);return ze.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Tu(t.unaryFilter.field);return ze.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Ee()}}(n):n.fieldFilter!==void 0?function(t){return ze.create(Tu(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ee()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ot.create(t.compositeFilter.filters.map(r=>D1(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ee()}}(t.compositeFilter.op))}(n):Ee()}function nj(n){return K$[n]}function rj(n){return G$[n]}function ij(n){return Q$[n]}function Iu(n){return{fieldPath:n.canonicalString()}}function Tu(n){return St.fromServerFormat(n.fieldPath)}function L1(n){return n instanceof ze?function(t){if(t.op==="=="){if(QR(t.value))return{unaryFilter:{field:Iu(t.field),op:"IS_NAN"}};if(GR(t.value))return{unaryFilter:{field:Iu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(QR(t.value))return{unaryFilter:{field:Iu(t.field),op:"IS_NOT_NAN"}};if(GR(t.value))return{unaryFilter:{field:Iu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Iu(t.field),op:rj(t.op),value:t.value}}}(n):n instanceof ot?function(t){const r=t.getFilters().map(i=>L1(i));return r.length===1?r[0]:{compositeFilter:{op:ij(t.op),filters:r}}}(n):Ee()}function sj(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function V1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,t,r,i,s=Pe.min(),l=Pe.min(),u=Mt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new Rs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Rs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e){this.Tt=e}}function oj(n,e){let t;if(e.document)t=k1(n.Tt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=_e.fromSegments(e.noDocument.path),i=el(e.noDocument.readTime);t=_t.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ee();{const r=_e.fromSegments(e.unknownDocument.path),i=el(e.unknownDocument.version);t=_t.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new At(i[0],i[1]);return Pe.fromTimestamp(s)}(e.readTime)),t}function hA(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ng(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,l){return{name:Ch(s,l.key),fields:l.data.value.mapValue.fields,updateTime:Ku(s,l.version.toTimestamp()),createTime:Ku(s,l.createTime.toTimestamp())}}(n.Tt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Za(e.version)};else{if(!e.isUnknownDocument())return Ee();r.unknownDocument={path:t.path.toArray(),version:Za(e.version)}}return r}function ng(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Za(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function el(n){const e=new At(n.seconds,n.nanoseconds);return Pe.fromTimestamp(e)}function Va(n,e){const t=(e.baseMutations||[]).map(s=>xw(n.Tt,s));for(let s=0;s<e.mutations.length-1;++s){const l=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const u=e.mutations[s+1];l.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>xw(n.Tt,s)),i=At.fromMillis(e.localWriteTimeMs);return new JE(e.batchId,i,t,r)}function Qd(n){const e=el(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?el(n.lastLimboFreeSnapshotVersion):Pe.min();let r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){return Re(s.documents.length===1),zn(hc(P1(s.documents[0])))}(n.query):function(s){return zn(N1(s))}(n.query),new Rs(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Mt.fromBase64String(n.resumeToken))}function F1(n,e){const t=Za(e.snapshotVersion),r=Za(e.lastLimboFreeSnapshotVersion);let i;i=Zm(e.target)?x1(n.Tt,e.target):O1(n.Tt,e.target).ht;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ya(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function n0(n){const e=N1({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?tg(e,e.limit,"L"):e}function Av(n,e){return new ZE(e.largestBatchId,xw(n.Tt,e.overlayMutation))}function fA(n,e){const t=e.path.lastSegment();return[n,Ln(e.path.popLast()),t]}function pA(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Za(r.readTime),documentKey:Ln(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{getBundleMetadata(e,t){return mA(e).get(t).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:el(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,t){return mA(e).put(function(i){return{bundleId:i.id,createTime:Za(zt(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return gA(e).get(t).next(r=>{if(r)return function(s){return{name:s.name,query:n0(s.bundledQuery),readTime:el(s.readTime)}}(r)})}saveNamedQuery(e,t){return gA(e).put(function(i){return{name:i.name,readTime:Za(zt(i.readTime)),bundledQuery:i.bundledQuery}}(t))}}function mA(n){return ln(n,Fg)}function gA(n){return ln(n,Ug)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e,t){this.serializer=e,this.userId=t}static It(e,t){const r=t.uid||"";return new Hg(e,r)}getOverlay(e,t){return Id(e).get(fA(this.userId,t)).next(r=>r?Av(this.serializer,r):null)}getOverlays(e,t){const r=$i();return G.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,l)=>{const u=new ZE(t,l);i.push(this.Et(e,u))}),G.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Ln(l.getCollectionPath())));const s=[];return i.forEach(l=>{const u=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);s.push(Id(e).J(vw,u))}),G.waitFor(s)}getOverlaysForCollection(e,t,r){const i=$i(),s=Ln(t),l=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Id(e).G(vw,l).next(u=>{for(const d of u){const h=Av(this.serializer,d);i.set(h.getKey(),h)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=$i();let l;const u=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Id(e).Z({index:Fk,range:u},(d,h,m)=>{const g=Av(this.serializer,h);s.size()<i||g.largestBatchId===l?(s.set(g.getKey(),g),l=g.largestBatchId):m.done()}).next(()=>s)}Et(e,t){return Id(e).put(function(i,s,l){const[u,d,h]=fA(s,l.mutation.key);return{userId:s,collectionPath:d,documentId:h,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:kh(i.Tt,l.mutation)}}(this.serializer,this.userId,t))}}function Id(n){return ln(n,$g)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{dt(e){return ln(e,BE)}getSessionToken(e){return this.dt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?Mt.fromUint8Array(r):Mt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.dt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(Tt(e.integerValue));else if("doubleValue"in e){const r=Tt(e.doubleValue);isNaN(r)?this.ft(t,13):(this.ft(t,15),Eh(r)?t.gt(0):t.gt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.ft(t,20),typeof r=="string"&&(r=Ds(r)),t.yt(`${r.seconds||""}`),t.gt(r.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.bt(t);else if("bytesValue"in e)this.ft(t,30),t.St(Ls(e.bytesValue)),this.bt(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ft(t,45),t.gt(r.latitude||0),t.gt(r.longitude||0)}else"mapValue"in e?Qk(e)?this.ft(t,Number.MAX_SAFE_INTEGER):zg(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.bt(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.bt(t)):Ee()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){const r=e.fields||{};this.ft(t,55);for(const i of Object.keys(r))this.wt(i,t),this.Rt(r[i],t)}vt(e,t){var r,i;const s=e.fields||{};this.ft(t,53);const l=Bu,u=((i=(r=s[l].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.ft(t,15),t.gt(Tt(u)),this.wt(l,t),this.Rt(s[l],t)}Ft(e,t){const r=e.values||[];this.ft(t,50);for(const i of r)this.Rt(i,t)}Dt(e,t){this.ft(t,37),_e.fromName(e).path.forEach(r=>{this.ft(t,60),this.Mt(r,t)})}ft(e,t){e.gt(t)}bt(e){e.gt(2)}}Ma.xt=new Ma;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou=255;function uj(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function yA(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const l=uj(255&r[s]);if(i+=l,l!==8)break}return i}(n);return Math.ceil(e/8)}class cj{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Nt(r.value),r=t.next();this.Bt()}Lt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.kt(r.value),r=t.next();this.qt()}Qt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Nt(r);else if(r<2048)this.Nt(960|r>>>6),this.Nt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Nt(480|r>>>12),this.Nt(128|63&r>>>6),this.Nt(128|63&r);else{const i=t.codePointAt(0);this.Nt(240|i>>>18),this.Nt(128|63&i>>>12),this.Nt(128|63&i>>>6),this.Nt(128|63&i)}}this.Bt()}$t(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.kt(r);else if(r<2048)this.kt(960|r>>>6),this.kt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.kt(480|r>>>12),this.kt(128|63&r>>>6),this.kt(128|63&r);else{const i=t.codePointAt(0);this.kt(240|i>>>18),this.kt(128|63&i>>>12),this.kt(128|63&i>>>6),this.kt(128|63&i)}}this.qt()}Kt(e){const t=this.Ut(e),r=yA(t);this.Wt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Gt(e){const t=this.Ut(e),r=yA(t);this.Wt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}zt(){this.jt(ou),this.jt(255)}Ht(){this.Jt(ou),this.Jt(255)}reset(){this.position=0}seed(e){this.Wt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Yt(){return this.buffer.slice(0,this.position)}Ut(e){const t=function(s){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,s,!1),new Uint8Array(l.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Nt(e){const t=255&e;t===0?(this.jt(0),this.jt(255)):t===ou?(this.jt(ou),this.jt(0)):this.jt(t)}kt(e){const t=255&e;t===0?(this.Jt(0),this.Jt(255)):t===ou?(this.Jt(ou),this.Jt(0)):this.Jt(e)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(e){this.Wt(1),this.buffer[this.position++]=e}Jt(e){this.Wt(1),this.buffer[this.position++]=~e}Wt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class dj{constructor(e){this.Zt=e}St(e){this.Zt.Ot(e)}yt(e){this.Zt.Qt(e)}gt(e){this.Zt.Kt(e)}Vt(){this.Zt.zt()}}class hj{constructor(e){this.Zt=e}St(e){this.Zt.Lt(e)}yt(e){this.Zt.$t(e)}gt(e){this.Zt.Gt(e)}Vt(){this.Zt.Ht()}}class Td{constructor(){this.Zt=new cj,this.Xt=new dj(this.Zt),this.en=new hj(this.Zt)}seed(e){this.Zt.seed(e)}tn(e){return e===0?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}nn(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Fa(this.indexId,this.documentKey,this.arrayValue,r)}}function _o(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=_A(n.arrayValue,e.arrayValue),t!==0?t:(t=_A(n.directionalValue,e.directionalValue),t!==0?t:_e.comparator(n.documentKey,e.documentKey)))}function _A(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e){this.rn=new at((t,r)=>St.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.sn=e.orderBy,this._n=[];for(const t of e.filters){const r=t;r.isInequality()?this.rn=this.rn.add(r):this._n.push(r)}}get an(){return this.rn.size>1}un(e){if(Re(e.collectionGroup===this.collectionId),this.an)return!1;const t=gw(e);if(t!==void 0&&!this.cn(t))return!1;const r=Na(e);let i=new Set,s=0,l=0;for(;s<r.length&&this.cn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.rn.size>0){const u=this.rn.getIterator().getNext();if(!i.has(u.field.canonicalString())){const d=r[s];if(!this.ln(u,d)||!this.hn(this.sn[l++],d))return!1}++s}for(;s<r.length;++s){const u=r[s];if(l>=this.sn.length||!this.hn(this.sn[l++],u))return!1}return!0}Pn(){if(this.an)return null;let e=new at(St.comparator);const t=[];for(const r of this._n)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new pm(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new pm(r.field,0))}for(const r of this.sn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new pm(r.field,r.dir==="asc"?0:1)));return new Km(Km.UNKNOWN_ID,this.collectionId,t,wh.empty())}cn(e){for(const t of this._n)if(this.ln(t,e))return!0;return!1}ln(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}hn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(n){var e,t;if(Re(n instanceof ze||n instanceof ot),n instanceof ze){if(n instanceof i1){const i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>ze.create(n.field,"==",s)))||[];return ot.create(i,"or")}return n}const r=n.filters.map(i=>U1(i));return ot.create(r,n.op)}function fj(n){if(n.getFilters().length===0)return[];const e=Dw(U1(n));return Re($1(e)),Ow(e)||Nw(e)?[e]:e.getFilters()}function Ow(n){return n instanceof ze}function Nw(n){return n instanceof ot&&HE(n)}function $1(n){return Ow(n)||Nw(n)||function(t){if(t instanceof ot&&Sw(t)){for(const r of t.getFilters())if(!Ow(r)&&!Nw(r))return!1;return!0}return!1}(n)}function Dw(n){if(Re(n instanceof ze||n instanceof ot),n instanceof ze)return n;if(n.filters.length===1)return Dw(n.filters[0]);const e=n.filters.map(r=>Dw(r));let t=ot.create(e,n.op);return t=rg(t),$1(t)?t:(Re(t instanceof ot),Re(Wu(t)),Re(t.filters.length>1),t.filters.reduce((r,i)=>r0(r,i)))}function r0(n,e){let t;return Re(n instanceof ze||n instanceof ot),Re(e instanceof ze||e instanceof ot),t=n instanceof ze?e instanceof ze?function(i,s){return ot.create([i,s],"and")}(n,e):wA(n,e):e instanceof ze?wA(e,n):function(i,s){if(Re(i.filters.length>0&&s.filters.length>0),Wu(i)&&Wu(s))return t1(i,s.getFilters());const l=Sw(i)?i:s,u=Sw(i)?s:i,d=l.filters.map(h=>r0(h,u));return ot.create(d,"or")}(n,e),rg(t)}function wA(n,e){if(Wu(e))return t1(e,n.getFilters());{const t=e.filters.map(r=>r0(n,r));return ot.create(t,"or")}}function rg(n){if(Re(n instanceof ze||n instanceof ot),n instanceof ze)return n;const e=n.getFilters();if(e.length===1)return rg(e[0]);if(Zk(n))return n;const t=e.map(i=>rg(i)),r=[];return t.forEach(i=>{i instanceof ze?r.push(i):i instanceof ot&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:ot.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(){this.Tn=new i0}addToCollectionParentIndex(e,t){return this.Tn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(Rr.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(Rr.min())}updateCollectionGroup(e,t,r){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class i0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new at(Be.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new at(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA="IndexedDbIndexManager",Kp=new Uint8Array(0);class mj{constructor(e,t){this.databaseId=t,this.In=new i0,this.En=new js(r=>Ya(r),(r,i)=>tf(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.In.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.In.add(t)});const s={collectionId:r,parent:Ln(i)};return IA(e).put(s)}return G.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Ak(t),""],!1,!0);return IA(e).G(i).next(s=>{for(const l of s){if(l.collectionId!==t)break;r.push(Ui(l.parent))}return r})}addFieldIndex(e,t){const r=Sd(e),i=function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])}}(t);delete i.indexId;const s=r.add(i);if(t.indexState){const l=lu(e);return s.next(u=>{l.put(pA(u,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=Sd(e),i=lu(e),s=au(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Sd(e),r=au(e),i=lu(e);return t.J().next(()=>r.J()).next(()=>i.J())}createTargetIndexes(e,t){return G.forEach(this.dn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new vA(r).Pn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=au(e);let i=!0;const s=new Map;return G.forEach(this.dn(t),l=>this.An(e,l).next(u=>{i&&(i=!!u),s.set(l,u)})).next(()=>{if(i){let l=Fe();const u=[];return G.forEach(s,(d,h)=>{ue(EA,`Using index ${function(L){return`id=${L.indexId}|cg=${L.collectionGroup}|f=${L.fields.map(B=>`${B.fieldPath}:${B.kind}`).join(",")}`}(d)} to execute ${Ya(t)}`);const m=function(L,B){const $=gw(B);if($===void 0)return null;for(const W of eg(L,$.fieldPath))switch(W.op){case"array-contains-any":return W.value.arrayValue.values||[];case"array-contains":return[W.value]}return null}(h,d),g=function(L,B){const $=new Map;for(const W of Na(B))for(const D of eg(L,W.fieldPath))switch(D.op){case"==":case"in":$.set(W.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return $.set(W.fieldPath.canonicalString(),D.value),Array.from($.values())}return null}(h,d),_=function(L,B){const $=[];let W=!0;for(const D of Na(B)){const b=D.kind===0?eA(L,D.fieldPath,L.startAt):tA(L,D.fieldPath,L.startAt);$.push(b.value),W&&(W=b.inclusive)}return new $o($,W)}(h,d),T=function(L,B){const $=[];let W=!0;for(const D of Na(B)){const b=D.kind===0?tA(L,D.fieldPath,L.endAt):eA(L,D.fieldPath,L.endAt);$.push(b.value),W&&(W=b.inclusive)}return new $o($,W)}(h,d),I=this.Rn(d,h,_),R=this.Rn(d,h,T),A=this.Vn(d,h,g),V=this.mn(d.indexId,m,I,_.inclusive,R,T.inclusive,A);return G.forEach(V,M=>r.H(M,t.limit).next(L=>{L.forEach(B=>{const $=_e.fromSegments(B.documentKey);l.has($)||(l=l.add($),u.push($))})}))}).next(()=>u)}return G.resolve(null)})}dn(e){let t=this.En.get(e);return t||(e.filters.length===0?t=[e]:t=fj(ot.create(e.filters,"and")).map(r=>Aw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.En.set(e,t),t)}mn(e,t,r,i,s,l,u){const d=(t!=null?t.length:1)*Math.max(r.length,s.length),h=d/(t!=null?t.length:1),m=[];for(let g=0;g<d;++g){const _=t?this.fn(t[g/h]):Kp,T=this.gn(e,_,r[g%h],i),I=this.pn(e,_,s[g%h],l),R=u.map(A=>this.gn(e,_,A,!0));m.push(...this.createRange(T,I,R))}return m}gn(e,t,r,i){const s=new Fa(e,_e.empty(),t,r);return i?s:s.nn()}pn(e,t,r,i){const s=new Fa(e,_e.empty(),t,r);return i?s.nn():s}An(e,t){const r=new vA(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let l=null;for(const u of s)r.un(u)&&(!l||u.fields.length>l.fields.length)&&(l=u);return l})}getIndexType(e,t){let r=2;const i=this.dn(t);return G.forEach(i,s=>this.An(e,s).next(l=>{l?r!==0&&l.fields.length<function(d){let h=new at(St.comparator),m=!1;for(const g of d.filters)for(const _ of g.getFlattenedFilters())_.field.isKeyField()||(_.op==="array-contains"||_.op==="array-contains-any"?m=!0:h=h.add(_.field));for(const g of d.orderBy)g.field.isKeyField()||(h=h.add(g.field));return h.size+(m?1:0)}(s)&&(r=1):r=0})).next(()=>function(l){return l.limit!==null}(t)&&i.length>1&&r===2?1:r)}yn(e,t){const r=new Td;for(const i of Na(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const l=r.tn(i.kind);Ma.xt.At(s,l)}return r.Yt()}fn(e){const t=new Td;return Ma.xt.At(e,t.tn(0)),t.Yt()}wn(e,t){const r=new Td;return Ma.xt.At(Qa(this.databaseId,t),r.tn(function(s){const l=Na(s);return l.length===0?0:l[l.length-1].kind}(e))),r.Yt()}Vn(e,t,r){if(r===null)return[];let i=[];i.push(new Td);let s=0;for(const l of Na(e)){const u=r[s++];for(const d of i)if(this.bn(t,l.fieldPath)&&bh(u))i=this.Sn(i,l,u);else{const h=d.tn(l.kind);Ma.xt.At(u,h)}}return this.Dn(i)}Rn(e,t,r){return this.Vn(e,t,r.position)}Dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Yt();return t}Sn(e,t,r){const i=[...e],s=[];for(const l of r.arrayValue.values||[])for(const u of i){const d=new Td;d.seed(u.Yt()),Ma.xt.At(l,d.tn(t.kind)),s.push(d)}return s}bn(e,t){return!!e.filters.find(r=>r instanceof ze&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=Sd(e),i=lu(e);return(t?r.G(_w,IDBKeyRange.bound(t,t)):r.G()).next(s=>{const l=[];return G.forEach(s,u=>i.get([u.indexId,this.uid]).next(d=>{l.push(function(m,g){const _=g?new wh(g.sequenceNumber,new Rr(el(g.readTime),new _e(Ui(g.documentKey)),g.largestBatchId)):wh.empty(),T=m.fields.map(([I,R])=>new pm(St.fromServerFormat(I),R));return new Km(m.indexId,m.collectionGroup,T,_)}(u,d))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Le(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Sd(e),s=lu(e);return this.vn(e).next(l=>i.G(_w,IDBKeyRange.bound(t,t)).next(u=>G.forEach(u,d=>s.put(pA(d.indexId,this.uid,l,r)))))}updateIndexEntries(e,t){const r=new Map;return G.forEach(t,(i,s)=>{const l=r.get(i.collectionGroup);return(l?G.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(u=>(r.set(i.collectionGroup,u),G.forEach(u,d=>this.Cn(e,i,d).next(h=>{const m=this.Fn(s,d);return h.isEqual(m)?G.resolve():this.Mn(e,s,d,h,m)}))))})}xn(e,t,r,i){return au(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.wn(r,t.key),documentKey:t.key.path.toArray()})}On(e,t,r,i){return au(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.wn(r,t.key),t.key.path.toArray()])}Cn(e,t,r){const i=au(e);let s=new at(_o);return i.Z({index:Mk,range:IDBKeyRange.only([r.indexId,this.uid,this.wn(r,t)])},(l,u)=>{s=s.add(new Fa(r.indexId,t,u.arrayValue,u.directionalValue))}).next(()=>s)}Fn(e,t){let r=new at(_o);const i=this.yn(t,e);if(i==null)return r;const s=gw(t);if(s!=null){const l=e.data.field(s.fieldPath);if(bh(l))for(const u of l.arrayValue.values||[])r=r.add(new Fa(t.indexId,e.key,this.fn(u),i))}else r=r.add(new Fa(t.indexId,e.key,Kp,i));return r}Mn(e,t,r,i,s){ue(EA,"Updating index entries for document '%s'",t.key);const l=[];return function(d,h,m,g,_){const T=d.getIterator(),I=h.getIterator();let R=su(T),A=su(I);for(;R||A;){let V=!1,M=!1;if(R&&A){const L=m(R,A);L<0?M=!0:L>0&&(V=!0)}else R!=null?M=!0:V=!0;V?(g(A),A=su(I)):M?(_(R),R=su(T)):(R=su(T),A=su(I))}}(i,s,_o,u=>{l.push(this.xn(e,t,r,u))},u=>{l.push(this.On(e,t,r,u))}),G.waitFor(l)}vn(e){let t=1;return lu(e).Z({index:Vk,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,u)=>_o(l,u)).filter((l,u,d)=>!u||_o(l,d[u-1])!==0);const i=[];i.push(e);for(const l of r){const u=_o(l,e),d=_o(l,t);if(u===0)i[0]=e.nn();else if(u>0&&d<0)i.push(l),i.push(l.nn());else if(d>0)break}i.push(t);const s=[];for(let l=0;l<i.length;l+=2){if(this.Nn(i[l],i[l+1]))return[];const u=[i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,Kp,[]],d=[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,Kp,[]];s.push(IDBKeyRange.bound(u,d))}return s}Nn(e,t){return _o(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(TA)}getMinOffset(e,t){return G.mapArray(this.dn(t),r=>this.An(e,r).next(i=>i||Ee())).next(TA)}}function IA(n){return ln(n,Sh)}function au(n){return ln(n,Xm)}function Sd(n){return ln(n,jE)}function lu(n){return ln(n,Jm)}function TA(n){Re(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;FE(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Rr(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},j1=41943040;class Nn{static withCacheSize(e){return new Nn(e,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(n,e,t){const r=n.store(ui),i=n.store(Fu),s=[],l=IDBKeyRange.only(t.batchId);let u=0;const d=r.Z({range:l},(m,g,_)=>(u++,_.delete()));s.push(d.next(()=>{Re(u===1)}));const h=[];for(const m of t.mutations){const g=Nk(e,m.key.path,t.batchId);s.push(i.delete(g)),h.push(m.key)}return G.waitFor(s).next(()=>h)}function ig(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ee();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nn.DEFAULT_COLLECTION_PERCENTILE=10,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nn.DEFAULT=new Nn(j1,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nn.DISABLED=new Nn(-1,0,0);class Kg{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Bn={}}static It(e,t,r,i){Re(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Kg(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vo(e).Z({index:$a,range:r},(i,s,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Su(e),l=vo(e);return l.add({}).next(u=>{Re(typeof u=="number");const d=new JE(u,t,r,i),h=function(T,I,R){const A=R.baseMutations.map(M=>kh(T.Tt,M)),V=R.mutations.map(M=>kh(T.Tt,M));return{userId:I,batchId:R.batchId,localWriteTimeMs:R.localWriteTime.toMillis(),baseMutations:A,mutations:V}}(this.serializer,this.userId,d),m=[];let g=new at((_,T)=>Le(_.canonicalString(),T.canonicalString()));for(const _ of i){const T=Nk(this.userId,_.key.path,u);g=g.add(_.key.path.popLast()),m.push(l.put(h)),m.push(s.put(T,Q4))}return g.forEach(_=>{m.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.Bn[u]=d.keys()}),G.waitFor(m).next(()=>d)})}lookupMutationBatch(e,t){return vo(e).get(t).next(r=>r?(Re(r.userId===this.userId),Va(this.serializer,r)):null)}Ln(e,t){return this.Bn[t]?G.resolve(this.Bn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Bn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return vo(e).Z({index:$a,range:i},(l,u,d)=>{u.userId===this.userId&&(Re(u.batchId>=r),s=Va(this.serializer,u)),d.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=ko;return vo(e).Z({index:$a,range:t,reverse:!0},(i,s,l)=>{r=s.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ko],[this.userId,Number.POSITIVE_INFINITY]);return vo(e).G($a,t).next(r=>r.map(i=>Va(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=mm(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Su(e).Z({range:i},(l,u,d)=>{const[h,m,g]=l,_=Ui(m);if(h===this.userId&&t.path.isEqual(_))return vo(e).get(g).next(T=>{if(!T)throw Ee();Re(T.userId===this.userId),s.push(Va(this.serializer,T))});d.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new at(Le);const i=[];return t.forEach(s=>{const l=mm(this.userId,s.path),u=IDBKeyRange.lowerBound(l),d=Su(e).Z({range:u},(h,m,g)=>{const[_,T,I]=h,R=Ui(T);_===this.userId&&s.path.isEqual(R)?r=r.add(I):g.done()});i.push(d)}),G.waitFor(i).next(()=>this.kn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=mm(this.userId,r),l=IDBKeyRange.lowerBound(s);let u=new at(Le);return Su(e).Z({range:l},(d,h,m)=>{const[g,_,T]=d,I=Ui(_);g===this.userId&&r.isPrefixOf(I)?I.length===i&&(u=u.add(T)):m.done()}).next(()=>this.kn(e,u))}kn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(vo(e).get(s).next(l=>{if(l===null)throw Ee();Re(l.userId===this.userId),r.push(Va(this.serializer,l))}))}),G.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return B1(e.ue,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.qn(t.batchId)}),G.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}qn(e){delete this.Bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return G.resolve();const r=IDBKeyRange.lowerBound(function(l){return[l]}(this.userId)),i=[];return Su(e).Z({range:r},(s,l,u)=>{if(s[0]===this.userId){const d=Ui(s[1]);i.push(d)}else u.done()}).next(()=>{Re(i.length===0)})})}containsKey(e,t){return z1(e,this.userId,t)}Qn(e){return W1(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:ko,lastStreamToken:""})}}function z1(n,e,t){const r=mm(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let l=!1;return Su(n).Z({range:s,Y:!0},(u,d,h)=>{const[m,g,_]=u;m===e&&g===i&&(l=!0),h.done()}).next(()=>l)}function vo(n){return ln(n,ui)}function Su(n){return ln(n,Fu)}function W1(n){return ln(n,Ih)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new tl(0)}static Un(){return new tl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Wn(e).next(t=>{const r=new tl(t.highestTargetId);return t.highestTargetId=r.next(),this.Gn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Wn(e).next(t=>Pe.fromTimestamp(new At(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Wn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Wn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Gn(e,i)))}addTargetData(e,t){return this.zn(e,t).next(()=>this.Wn(e).next(r=>(r.targetCount+=1,this.jn(t,r),this.Gn(e,r))))}updateTargetData(e,t){return this.zn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>uu(e).delete(t.targetId)).next(()=>this.Wn(e)).next(r=>(Re(r.targetCount>0),r.targetCount-=1,this.Gn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return uu(e).Z((l,u)=>{const d=Qd(u);d.sequenceNumber<=t&&r.get(d.targetId)===null&&(i++,s.push(this.removeTargetData(e,d)))}).next(()=>G.waitFor(s)).next(()=>i)}forEachTarget(e,t){return uu(e).Z((r,i)=>{const s=Qd(i);t(s)})}Wn(e){return RA(e).get(Ym).next(t=>(Re(t!==null),t))}Gn(e,t){return RA(e).put(Ym,t)}zn(e,t){return uu(e).put(F1(this.serializer,t))}jn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Wn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ya(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return uu(e).Z({range:i,index:Lk},(l,u,d)=>{const h=Qd(u);tf(t,h.target)&&(s=h,d.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=So(e);return t.forEach(l=>{const u=Ln(l.path);i.push(s.put({targetId:r,path:u})),i.push(this.referenceDelegate.addReference(e,r,l))}),G.waitFor(i)}removeMatchingKeys(e,t,r){const i=So(e);return G.forEach(t,s=>{const l=Ln(s.path);return G.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=So(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=So(e);let s=Fe();return i.Z({range:r,Y:!0},(l,u,d)=>{const h=Ui(l[1]),m=new _e(h);s=s.add(m)}).next(()=>s)}containsKey(e,t){const r=Ln(t.path),i=IDBKeyRange.bound([r],[Ak(r)],!1,!0);let s=0;return So(e).Z({index:$E,Y:!0,range:i},([l,u],d,h)=>{l!==0&&(s++,h.done())}).next(()=>s>0)}lt(e,t){return uu(e).get(t).next(r=>r?Qd(r):null)}}function uu(n){return ln(n,Uu)}function RA(n){return ln(n,qa)}function So(n){return ln(n,$u)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA="LruGarbageCollector",yj=1048576;function bA([n,e],[t,r]){const i=Le(n,t);return i===0?Le(e,r):i}class _j{constructor(e){this.Hn=e,this.buffer=new at(bA),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();bA(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class q1{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){ue(AA,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Xo(t)?ue(AA,"Ignoring IndexedDB error during garbage collection: ",t):await Jo(t)}await this.er(3e5)})}}class vj{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return G.resolve(nr.ae);const r=new _j(t);return this.tr.forEachTarget(e,i=>r.Zn(i.sequenceNumber)).next(()=>this.tr.rr(e,i=>r.Zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(SA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),SA):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,i,s,l,u,d,h;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,l=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,u=Date.now(),this.removeTargets(e,r,t))).next(g=>(s=g,d=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(h=Date.now(),wu()<=Ue.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-m}ms
	Determined least recently used ${i} in `+(u-l)+`ms
	Removed ${s} targets in `+(d-u)+`ms
	Removed ${g} documents in `+(h-d)+`ms
Total Duration: ${h-m}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}function H1(n,e){return new vj(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e,t){this.db=e,this.garbageCollector=H1(this,t)}nr(e){const t=this.sr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}rr(e,t){return this._r(e,(r,i)=>t(i))}addReference(e,t,r){return Gp(e,r)}removeReference(e,t,r){return Gp(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Gp(e,t)}ar(e,t){return function(i,s){let l=!1;return W1(i).X(u=>z1(i,u,s).next(d=>(d&&(l=!0),G.resolve(!d)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this._r(e,(l,u)=>{if(u<=t){const d=this.ar(e,l).next(h=>{if(!h)return s++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Pe.min()),So(e).delete(function(g){return[0,Ln(g.path)]}(l))))});i.push(d)}}).next(()=>G.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Gp(e,t)}_r(e,t){const r=So(e);let i,s=nr.ae;return r.Z({index:$E},([l,u],{path:d,sequenceNumber:h})=>{l===0?(s!==nr.ae&&t(new _e(Ui(i)),s),s=h,i=d):s=nr.ae}).next(()=>{s!==nr.ae&&t(new _e(Ui(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Gp(n,e){return So(n).put(function(r,i){return{targetId:0,path:Ln(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(){this.changes=new js(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_t.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?G.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ka(e).put(r)}removeEntry(e,t,r){return ka(e).delete(function(s,l){const u=s.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],ng(l),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.ur(e,r)))}getEntry(e,t){let r=_t.newInvalidDocument(t);return ka(e).Z({index:gm,range:IDBKeyRange.only(Rd(t))},(i,s)=>{r=this.cr(t,s)}).next(()=>r)}lr(e,t){let r={size:0,document:_t.newInvalidDocument(t)};return ka(e).Z({index:gm,range:IDBKeyRange.only(Rd(t))},(i,s)=>{r={document:this.cr(t,s),size:ig(s)}}).next(()=>r)}getEntries(e,t){let r=ir();return this.hr(e,t,(i,s)=>{const l=this.cr(i,s);r=r.insert(i,l)}).next(()=>r)}Pr(e,t){let r=ir(),i=new pt(_e.comparator);return this.hr(e,t,(s,l)=>{const u=this.cr(s,l);r=r.insert(s,u),i=i.insert(s,ig(l))}).next(()=>({documents:r,Tr:i}))}hr(e,t,r){if(t.isEmpty())return G.resolve();let i=new at(kA);t.forEach(d=>i=i.add(d));const s=IDBKeyRange.bound(Rd(i.first()),Rd(i.last())),l=i.getIterator();let u=l.getNext();return ka(e).Z({index:gm,range:s},(d,h,m)=>{const g=_e.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;u&&kA(u,g)<0;)r(u,null),u=l.getNext();u&&u.isEqual(g)&&(r(u,h),u=l.hasNext()?l.getNext():null),u?m.W(Rd(u)):m.done()}).next(()=>{for(;u;)r(u,null),u=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const l=t.path,u=[l.popLast().toArray(),l.lastSegment(),ng(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],d=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ka(e).G(IDBKeyRange.bound(u,d,!0)).next(h=>{s==null||s.incrementDocumentReadCount(h.length);let m=ir();for(const g of h){const _=this.cr(_e.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);_.isFoundDocument()&&(rf(t,_)||i.has(_.key))&&(m=m.insert(_.key,_))}return m})}getAllFromCollectionGroup(e,t,r,i){let s=ir();const l=CA(t,r),u=CA(t,Rr.max());return ka(e).Z({index:Dk,range:IDBKeyRange.bound(l,u,!0)},(d,h,m)=>{const g=this.cr(_e.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);s=s.insert(g.key,g),s.size===i&&m.done()}).next(()=>s)}newChangeBuffer(e){return new Ij(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return PA(e).get(yw).next(t=>(Re(!!t),t))}ur(e,t){return PA(e).put(yw,t)}cr(e,t){if(t){const r=oj(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Pe.min())))return r}return _t.newInvalidDocument(e)}}function G1(n){return new Ej(n)}class Ij extends K1{constructor(e,t){super(),this.Ir=e,this.trackRemovals=t,this.Er=new js(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new at((s,l)=>Le(s.canonicalString(),l.canonicalString()));return this.changes.forEach((s,l)=>{const u=this.Er.get(s);if(t.push(this.Ir.removeEntry(e,s,u.readTime)),l.isValidDocument()){const d=hA(this.Ir.serializer,l);i=i.add(s.path.popLast());const h=ig(d);r+=h-u.size,t.push(this.Ir.addEntry(e,s,d))}else if(r-=u.size,this.trackRemovals){const d=hA(this.Ir.serializer,l.convertToNoDocument(Pe.min()));t.push(this.Ir.addEntry(e,s,d))}}),i.forEach(s=>{t.push(this.Ir.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Ir.updateMetadata(e,r)),G.waitFor(t)}getFromCache(e,t){return this.Ir.lr(e,t).next(r=>(this.Er.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Ir.Pr(e,t).next(({documents:r,Tr:i})=>(i.forEach((s,l)=>{this.Er.set(s,{size:l,readTime:r.get(s).readTime})}),r))}}function PA(n){return ln(n,Th)}function ka(n){return ln(n,Qm)}function Rd(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function CA(n,e){const t=e.documentKey.path.toArray();return[n,ng(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function kA(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Le(t[s],r[s]),i)return i;return i=Le(t.length,r.length),i||(i=Le(t[t.length-2],r[r.length-2]),i||Le(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&sh(r.mutation,i,rr.empty(),At.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Fe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Fe()){const i=$i();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let l=Kd();return s.forEach((u,d)=>{l=l.insert(u,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=$i();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Fe()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((l,u)=>{t.set(l,u)})})}computeViews(e,t,r,i){let s=ir();const l=ih(),u=function(){return ih()}();return t.forEach((d,h)=>{const m=r.get(h.key);i.has(h.key)&&(m===void 0||m.mutation instanceof Bs)?s=s.insert(h.key,h):m!==void 0?(l.set(h.key,m.mutation.getFieldMask()),sh(m.mutation,h,m.mutation.getFieldMask(),At.now())):l.set(h.key,rr.empty())}),this.recalculateAndSaveOverlays(e,s).next(d=>(d.forEach((h,m)=>l.set(h,m)),t.forEach((h,m)=>{var g;return u.set(h,new Tj(m,(g=l.get(h))!==null&&g!==void 0?g:null))}),u))}recalculateAndSaveOverlays(e,t){const r=ih();let i=new pt((l,u)=>l-u),s=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const u of l)u.keys().forEach(d=>{const h=t.get(d);if(h===null)return;let m=r.get(d)||rr.empty();m=u.applyToLocalView(h,m),r.set(d,m);const g=(i.get(u.batchId)||Fe()).add(d);i=i.insert(u.batchId,g)})}).next(()=>{const l=[],u=i.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),h=d.key,m=d.value,g=d1();m.forEach(_=>{if(!s.has(_)){const T=_1(t.get(_),r.get(_));T!==null&&g.set(_,T),s=s.add(_)}}),l.push(this.documentOverlayCache.saveOverlays(e,h,g))}return G.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(l){return _e.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):KE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const l=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):G.resolve($i());let u=Mu,d=s;return l.next(h=>G.forEach(h,(m,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),s.get(m)?G.resolve():this.remoteDocumentCache.getEntry(e,m).next(_=>{d=d.insert(m,_)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,d,h,Fe())).next(m=>({batchId:u,changes:c1(m)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next(r=>{let i=Kd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let l=Kd();return this.indexManager.getCollectionParents(e,s).next(u=>G.forEach(u,d=>{const h=function(g,_){return new $s(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(t,d.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(m=>{m.forEach((g,_)=>{l=l.insert(g,_)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(l=>(s=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(l=>{s.forEach((d,h)=>{const m=h.getKey();l.get(m)===null&&(l=l.insert(m,_t.newInvalidDocument(m)))});let u=Kd();return l.forEach((d,h)=>{const m=s.get(d);m!==void 0&&sh(m.mutation,h,rr.empty(),At.now()),rf(t,h)&&(u=u.insert(d,h))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return G.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:zt(i.createTime)}}(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(i){return{name:i.name,query:n0(i.bundledQuery),readTime:zt(i.readTime)}}(t)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(){this.overlays=new pt(_e.comparator),this.Rr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const r=$i();return G.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.Et(e,t,s)}),G.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Rr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Rr.delete(r)),G.resolve()}getOverlaysForCollection(e,t,r){const i=$i(),s=t.length+1,l=new _e(t.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const d=u.getNext().value,h=d.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===s&&d.largestBatchId>r&&i.set(d.getKey(),d)}return G.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new pt((h,m)=>h-m);const l=this.overlays.getIterator();for(;l.hasNext();){const h=l.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let m=s.get(h.largestBatchId);m===null&&(m=$i(),s=s.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const u=$i(),d=s.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((h,m)=>u.set(h,m)),!(u.size()>=i)););return G.resolve(u)}Et(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.Rr.get(i.largestBatchId).delete(r.key);this.Rr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new ZE(t,r));let s=this.Rr.get(t);s===void 0&&(s=Fe(),this.Rr.set(t,s)),this.Rr.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(){this.sessionToken=Mt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(){this.Vr=new at(pn.mr),this.gr=new at(pn.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new pn(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new pn(e,t))}br(e,t){e.forEach(r=>this.removeReference(r,t))}Sr(e){const t=new _e(new Be([])),r=new pn(t,e),i=new pn(t,e+1),s=[];return this.gr.forEachInRange([r,i],l=>{this.wr(l),s.push(l.key)}),s}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new _e(new Be([])),r=new pn(t,e),i=new pn(t,e+1);let s=Fe();return this.gr.forEachInRange([r,i],l=>{s=s.add(l.key)}),s}containsKey(e){const t=new pn(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class pn{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return _e.comparator(e.key,t.key)||Le(e.Cr,t.Cr)}static pr(e,t){return Le(e.Cr,t.Cr)||_e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new at(pn.mr)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new JE(s,t,r,i);this.mutationQueue.push(l);for(const u of i)this.Mr=this.Mr.add(new pn(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return G.resolve(l)}lookupMutationBatch(e,t){return G.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Nr(r),s=i<0?0:i;return G.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?ko:this.Fr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new pn(t,0),i=new pn(t,Number.POSITIVE_INFINITY),s=[];return this.Mr.forEachInRange([r,i],l=>{const u=this.Or(l.Cr);s.push(u)}),G.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new at(Le);return t.forEach(i=>{const s=new pn(i,0),l=new pn(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([s,l],u=>{r=r.add(u.Cr)})}),G.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;_e.isDocumentKey(s)||(s=s.child(""));const l=new pn(new _e(s),0);let u=new at(Le);return this.Mr.forEachWhile(d=>{const h=d.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(u=u.add(d.Cr)),!0)},l),G.resolve(this.Br(u))}Br(e){const t=[];return e.forEach(r=>{const i=this.Or(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Re(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return G.forEach(t.mutations,i=>{const s=new pn(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new pn(t,0),i=this.Mr.firstAfterOrEqual(r);return G.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(e){this.kr=e,this.docs=function(){return new pt(_e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,l=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return G.resolve(r?r.document.mutableCopy():_t.newInvalidDocument(t))}getEntries(e,t){let r=ir();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():_t.newInvalidDocument(i))}),G.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=ir();const l=t.path,u=new _e(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:h,value:{document:m}}=d.getNext();if(!l.isPrefixOf(h.path))break;h.path.length>l.length+1||FE(Pk(m),r)<=0||(i.has(m.key)||rf(t,m))&&(s=s.insert(m.key,m.mutableCopy()))}return G.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ee()}qr(e,t){return G.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Cj(this)}getSize(e){return G.resolve(this.size)}}class Cj extends K1{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Ir.addEntry(e,i)):this.Ir.removeEntry(r)}),G.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e){this.persistence=e,this.Qr=new js(t=>Ya(t),tf),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.$r=0,this.Kr=new s0,this.targetCount=0,this.Ur=tl.Kn()}forEachTarget(e,t){return this.Qr.forEach((r,i)=>t(i)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),G.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new tl(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.zn(t),G.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Qr.forEach((l,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.Qr.delete(l),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),G.waitFor(s).next(()=>i)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return G.resolve(r)}addMatchingKeys(e,t,r){return this.Kr.yr(t,r),G.resolve()}removeMatchingKeys(e,t,r){this.Kr.br(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(l=>{s.push(i.markPotentiallyOrphaned(e,l))}),G.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),G.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Kr.vr(t);return G.resolve(r)}containsKey(e,t){return G.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new nr(0),this.zr=!1,this.zr=!0,this.jr=new Aj,this.referenceDelegate=e(this),this.Hr=new kj(this),this.indexManager=new pj,this.remoteDocumentCache=function(i){return new Pj(i)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new M1(t),this.Yr=new Sj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Rj,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new bj(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){ue("MemoryPersistence","Starting transaction:",e);const i=new xj(this.Gr.next());return this.referenceDelegate.Zr(),r(i).next(s=>this.referenceDelegate.Xr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}ei(e,t){return G.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class xj extends kk{constructor(e){super(),this.currentSequenceNumber=e}}class Gg{constructor(e){this.persistence=e,this.ti=new s0,this.ni=null}static ri(e){return new Gg(e)}get ii(){if(this.ni)return this.ni;throw Ee()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),G.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),G.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(i=>this.ii.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.ii.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.ii,r=>{const i=_e.fromPath(r);return this.si(e,i).next(s=>{s||t.removeEntry(i,Pe.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return G.or([()=>G.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class sg{constructor(e,t){this.persistence=e,this.oi=new js(r=>Ln(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=H1(this,t)}static ri(e,t){return new sg(e,t)}Zr(){}Xr(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return G.forEach(this.oi,(r,i)=>this.ar(e,r,i).next(s=>s?G.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.qr(e,l=>this.ar(e,l,t).next(u=>{u||(r++,s.removeEntry(l,Pe.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),G.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),G.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=_m(e.data.value)),t}ar(e,t,r){return G.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.oi.get(t);return G.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e){this.serializer=e}B(e,t,r,i){const s=new Mg("createOrUpgrade",t);r<1&&i>=1&&(function(d){d.createObjectStore(ef)}(e),function(d){d.createObjectStore(Ih,{keyPath:G4}),d.createObjectStore(ui,{keyPath:BR,autoIncrement:!0}).createIndex($a,zR,{unique:!0}),d.createObjectStore(Fu)}(e),xA(e),function(d){d.createObjectStore(Da)}(e));let l=G.resolve();return r<3&&i>=3&&(r!==0&&(function(d){d.deleteObjectStore($u),d.deleteObjectStore(Uu),d.deleteObjectStore(qa)}(e),xA(e)),l=l.next(()=>function(d){const h=d.store(qa),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Pe.min().toTimestamp(),targetCount:0};return h.put(Ym,m)}(s))),r<4&&i>=4&&(r!==0&&(l=l.next(()=>function(d,h){return h.store(ui).G().next(g=>{d.deleteObjectStore(ui),d.createObjectStore(ui,{keyPath:BR,autoIncrement:!0}).createIndex($a,zR,{unique:!0});const _=h.store(ui),T=g.map(I=>_.put(I));return G.waitFor(T)})}(e,s))),l=l.next(()=>{(function(d){d.createObjectStore(ju,{keyPath:r$})})(e)})),r<5&&i>=5&&(l=l.next(()=>this._i(s))),r<6&&i>=6&&(l=l.next(()=>(function(d){d.createObjectStore(Th)}(e),this.ai(s)))),r<7&&i>=7&&(l=l.next(()=>this.ui(s))),r<8&&i>=8&&(l=l.next(()=>this.ci(e,s))),r<9&&i>=9&&(l=l.next(()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(l=l.next(()=>this.li(s))),r<11&&i>=11&&(l=l.next(()=>{(function(d){d.createObjectStore(Fg,{keyPath:i$})})(e),function(d){d.createObjectStore(Ug,{keyPath:s$})}(e)})),r<12&&i>=12&&(l=l.next(()=>{(function(d){const h=d.createObjectStore($g,{keyPath:h$});h.createIndex(vw,f$,{unique:!1}),h.createIndex(Fk,p$,{unique:!1})})(e)})),r<13&&i>=13&&(l=l.next(()=>function(d){const h=d.createObjectStore(Qm,{keyPath:Y4});h.createIndex(gm,J4),h.createIndex(Dk,X4)}(e)).next(()=>this.hi(e,s)).next(()=>e.deleteObjectStore(Da))),r<14&&i>=14&&(l=l.next(()=>this.Pi(e,s))),r<15&&i>=15&&(l=l.next(()=>function(d){d.createObjectStore(jE,{keyPath:o$,autoIncrement:!0}).createIndex(_w,a$,{unique:!1}),d.createObjectStore(Jm,{keyPath:l$}).createIndex(Vk,u$,{unique:!1}),d.createObjectStore(Xm,{keyPath:c$}).createIndex(Mk,d$,{unique:!1})}(e))),r<16&&i>=16&&(l=l.next(()=>{t.objectStore(Jm).clear()}).next(()=>{t.objectStore(Xm).clear()})),r<17&&i>=17&&(l=l.next(()=>{(function(d){d.createObjectStore(BE,{keyPath:m$})})(e)})),l}ai(e){let t=0;return e.store(Da).Z((r,i)=>{t+=ig(i)}).next(()=>{const r={byteSize:t};return e.store(Th).put(yw,r)})}_i(e){const t=e.store(Ih),r=e.store(ui);return t.G().next(i=>G.forEach(i,s=>{const l=IDBKeyRange.bound([s.userId,ko],[s.userId,s.lastAcknowledgedBatchId]);return r.G($a,l).next(u=>G.forEach(u,d=>{Re(d.userId===s.userId);const h=Va(this.serializer,d);return B1(e,s.userId,h).next(()=>{})}))}))}ui(e){const t=e.store($u),r=e.store(Da);return e.store(qa).get(Ym).next(i=>{const s=[];return r.Z((l,u)=>{const d=new Be(l),h=function(g){return[0,Ln(g)]}(d);s.push(t.get(h).next(m=>m?G.resolve():(g=>t.put({targetId:0,path:Ln(g),sequenceNumber:i.highestListenSequenceNumber}))(d)))}).next(()=>G.waitFor(s))})}ci(e,t){e.createObjectStore(Sh,{keyPath:n$});const r=t.store(Sh),i=new i0,s=l=>{if(i.add(l)){const u=l.lastSegment(),d=l.popLast();return r.put({collectionId:u,parent:Ln(d)})}};return t.store(Da).Z({Y:!0},(l,u)=>{const d=new Be(l);return s(d.popLast())}).next(()=>t.store(Fu).Z({Y:!0},([l,u,d],h)=>{const m=Ui(u);return s(m.popLast())}))}li(e){const t=e.store(Uu);return t.Z((r,i)=>{const s=Qd(i),l=F1(this.serializer,s);return t.put(l)})}hi(e,t){const r=t.store(Da),i=[];return r.Z((s,l)=>{const u=t.store(Qm),d=function(g){return g.document?new _e(Be.fromString(g.document.name).popFirst(5)):g.noDocument?_e.fromSegments(g.noDocument.path):g.unknownDocument?_e.fromSegments(g.unknownDocument.path):Ee()}(l).path.toArray(),h={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(u.put(h))}).next(()=>G.waitFor(i))}Pi(e,t){const r=t.store(ui),i=G1(this.serializer),s=new o0(Gg.ri,this.serializer.Tt);return r.G().next(l=>{const u=new Map;return l.forEach(d=>{var h;let m=(h=u.get(d.userId))!==null&&h!==void 0?h:Fe();Va(this.serializer,d).keys().forEach(g=>m=m.add(g)),u.set(d.userId,m)}),G.forEach(u,(d,h)=>{const m=new mn(h),g=Hg.It(this.serializer,m),_=s.getIndexManager(m),T=Kg.It(m,this.serializer,_,s.referenceDelegate);return new Q1(i,T,g,_).recalculateAndSaveOverlaysForDocumentKeys(new ww(t,nr.ae),d).next()})})}}function xA(n){n.createObjectStore($u,{keyPath:e$}).createIndex($E,t$,{unique:!0}),n.createObjectStore(Uu,{keyPath:"targetId"}).createIndex(Lk,Z4,{unique:!0}),n.createObjectStore(qa)}const wo="IndexedDbPersistence",bv=18e5,Pv=5e3,Cv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Y1="main";class a0{constructor(e,t,r,i,s,l,u,d,h,m,g=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ti=s,this.window=l,this.document=u,this.Ii=h,this.Ei=m,this.di=g,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=_=>Promise.resolve(),!a0.D())throw new ae(te.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new wj(this,i),this.gi=t+Y1,this.serializer=new M1(d),this.pi=new qi(this.gi,this.di,new Oj(this.serializer)),this.jr=new lj,this.Hr=new gj(this.referenceDelegate,this.serializer),this.remoteDocumentCache=G1(this.serializer),this.Yr=new aj,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,m===!1&&Bt(wo,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ae(te.FAILED_PRECONDITION,Cv);return this.bi(),this.Si(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Hr.getHighestSequenceNumber(e))}).then(e=>{this.Gr=new nr(e,this.Ii)}).then(()=>{this.zr=!0}).catch(e=>(this.pi&&this.pi.close(),Promise.reject(e)))}Ci(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.pi.k(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ti.enqueueAndForget(async()=>{this.started&&await this.wi()}))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Qp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Fi(e).next(t=>{t||(this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Mi(e)).next(t=>this.isPrimary&&!t?this.xi(e).next(()=>!1):!!t&&this.Oi(e).next(()=>!0))).catch(e=>{if(Xo(e))return ue(wo,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ue(wo,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ti.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Fi(e){return Ad(e).get(iu).next(t=>G.resolve(this.Ni(t)))}Bi(e){return Qp(e).delete(this.clientId)}async Li(){if(this.isPrimary&&!this.ki(this.mi,bv)){this.mi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=ln(t,ju);return r.G().next(i=>{const s=this.qi(i,bv),l=i.filter(u=>s.indexOf(u)===-1);return G.forEach(l,u=>r.delete(u.clientId)).next(()=>l)})}).catch(()=>[]);if(this.yi)for(const t of e)this.yi.removeItem(this.Qi(t.clientId))}}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Li()).then(()=>this.Di()))}Ni(e){return!!e&&e.ownerId===this.clientId}Mi(e){return this.Ei?G.resolve(!0):Ad(e).get(iu).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,Pv)&&!this.$i(t.ownerId)){if(this.Ni(t)&&this.networkEnabled)return!0;if(!this.Ni(t)){if(!t.allowTabSynchronization)throw new ae(te.FAILED_PRECONDITION,Cv);return!1}}return!(!this.networkEnabled||!this.inForeground)||Qp(e).G().next(r=>this.qi(r,Pv).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,l=!this.inForeground&&i.inForeground,u=this.networkEnabled===i.networkEnabled;if(s||l&&u)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&ue(wo,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.zr=!1,this.Ki(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ui(),this.Wi(),await this.pi.runTransaction("shutdown","readwrite",[ef,ju],e=>{const t=new ww(e,nr.ae);return this.xi(t).next(()=>this.Bi(t))}),this.pi.close(),this.Gi()}qi(e,t){return e.filter(r=>this.ki(r.updateTimeMs,t)&&!this.$i(r.clientId))}zi(){return this.runTransaction("getActiveClients","readonly",e=>Qp(e).G().next(t=>this.qi(t,bv).map(r=>r.clientId)))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(e,t){return Kg.It(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new mj(e,this.serializer.Tt.databaseId)}getDocumentOverlayCache(e){return Hg.It(this.serializer,e)}getBundleCache(){return this.Yr}runTransaction(e,t,r){ue(wo,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=function(d){return d===17?_$:d===16?y$:d===15?zE:d===14?jk:d===13?$k:d===12?g$:d===11?Uk:void Ee()}(this.di);let l;return this.pi.runTransaction(e,i,s,u=>(l=new ww(u,this.Gr?this.Gr.next():nr.ae),t==="readwrite-primary"?this.Fi(l).next(d=>!!d||this.Mi(l)).next(d=>{if(!d)throw Bt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)),new ae(te.FAILED_PRECONDITION,Ck);return r(l)}).next(d=>this.Oi(l).next(()=>d)):this.ji(l).next(()=>r(l)))).then(u=>(l.raiseOnCommittedEvent(),u))}ji(e){return Ad(e).get(iu).next(t=>{if(t!==null&&this.ki(t.leaseTimestampMs,Pv)&&!this.$i(t.ownerId)&&!this.Ni(t)&&!(this.Ei||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ae(te.FAILED_PRECONDITION,Cv)})}Oi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ad(e).put(iu,t)}static D(){return qi.D()}xi(e){const t=Ad(e);return t.get(iu).next(r=>this.Ni(r)?(ue(wo,"Releasing primary lease."),t.delete(iu)):G.resolve())}ki(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Bt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}bi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ri=()=>{this.Ti.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.wi()))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground=this.document.visibilityState==="visible")}Ui(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}Si(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ai=()=>{this.Ki();const t=/(?:Version|Mobile)\/1[456]/;pC()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(e){var t;try{const r=((t=this.yi)===null||t===void 0?void 0:t.getItem(this.Qi(e)))!==null;return ue(wo,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Bt(wo,"Failed to get zombied client id.",r),!1}}Ki(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(e){Bt("Failed to set zombie client id.",e)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch{}}Qi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ad(n){return ln(n,ef)}function Qp(n){return ln(n,ju)}function l0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=i}static Yi(e,t){let r=Fe(),i=Fe();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new u0(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return pC()?8:xk(We())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.rs(e,t).next(l=>{s.result=l}).next(()=>{if(!s.result)return this.ss(e,t,i,r).next(l=>{s.result=l})}).next(()=>{if(s.result)return;const l=new Nj;return this._s(e,t,l).next(u=>{if(s.result=u,this.Xi)return this.us(e,t,l,u.size)})}).next(()=>s.result)}us(e,t,r,i){return r.documentReadCount<this.es?(wu()<=Ue.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Eu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),G.resolve()):(wu()<=Ue.DEBUG&&ue("QueryEngine","Query:",Eu(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ts*i?(wu()<=Ue.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Eu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zn(t))):G.resolve())}rs(e,t){if(nA(t))return G.resolve(null);let r=zn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=tg(t,null,"F"),r=zn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const l=Fe(...s);return this.ns.getDocuments(e,l).next(u=>this.indexManager.getMinOffset(e,r).next(d=>{const h=this.cs(t,u);return this.ls(t,h,l,d.readTime)?this.rs(e,tg(t,null,"F")):this.hs(e,h,t,d)}))})))}ss(e,t,r,i){return nA(t)||i.isEqual(Pe.min())?G.resolve(null):this.ns.getDocuments(e,r).next(s=>{const l=this.cs(t,s);return this.ls(t,l,r,i)?G.resolve(null):(wu()<=Ue.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Eu(t)),this.hs(e,l,t,bk(i,Mu)).next(u=>u))})}cs(e,t){let r=new at(l1(e));return t.forEach((i,s)=>{rf(e,s)&&(r=r.add(s))}),r}ls(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}_s(e,t,r){return wu()<=Ue.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Eu(t)),this.ns.getDocumentsMatchingQuery(e,t,Rr.min(),r)}hs(e,t,r,i){return this.ns.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(l=>{s=s.insert(l.key,l)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0="LocalStore",Dj=3e8;class Lj{constructor(e,t,r,i){this.persistence=e,this.Ps=t,this.serializer=i,this.Ts=new pt(Le),this.Is=new js(s=>Ya(s),tf),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Q1(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function X1(n,e,t,r){return new Lj(n,e,t,r)}async function Z1(n,e){const t=ve(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const l=[],u=[];let d=Fe();for(const h of i){l.push(h.batchId);for(const m of h.mutations)d=d.add(m.key)}for(const h of s){u.push(h.batchId);for(const m of h.mutations)d=d.add(m.key)}return t.localDocuments.getDocuments(r,d).next(h=>({Rs:h,removedBatchIds:l,addedBatchIds:u}))})})}function Vj(n,e){const t=ve(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.ds.newChangeBuffer({trackRemovals:!0});return function(u,d,h,m){const g=h.batch,_=g.keys();let T=G.resolve();return _.forEach(I=>{T=T.next(()=>m.getEntry(d,I)).next(R=>{const A=h.docVersions.get(I);Re(A!==null),R.version.compareTo(A)<0&&(g.applyToRemoteDocument(R,h),R.isValidDocument()&&(R.setReadTime(h.commitVersion),m.addEntry(R)))})}),T.next(()=>u.mutationQueue.removeMutationBatch(d,g))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let d=Fe();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(d=d.add(u.batch.mutations[h].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function ex(n){const e=ve(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function Mj(n,e){const t=ve(n),r=e.snapshotVersion;let i=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const l=t.ds.newChangeBuffer({trackRemovals:!0});i=t.Ts;const u=[];e.targetChanges.forEach((m,g)=>{const _=i.get(g);if(!_)return;u.push(t.Hr.removeMatchingKeys(s,m.removedDocuments,g).next(()=>t.Hr.addMatchingKeys(s,m.addedDocuments,g)));let T=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?T=T.withResumeToken(Mt.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):m.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(m.resumeToken,r)),i=i.insert(g,T),function(R,A,V){return R.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=Dj?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(_,T,m)&&u.push(t.Hr.updateTargetData(s,T))});let d=ir(),h=Fe();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(s,m))}),u.push(tx(s,l,e.documentUpdates).next(m=>{d=m.Vs,h=m.fs})),!r.isEqual(Pe.min())){const m=t.Hr.getLastRemoteSnapshotVersion(s).next(g=>t.Hr.setTargetsMetadata(s,s.currentSequenceNumber,r));u.push(m)}return G.waitFor(u).next(()=>l.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,d,h)).next(()=>d)}).then(s=>(t.Ts=i,s))}function tx(n,e,t){let r=Fe(),i=Fe();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let l=ir();return t.forEach((u,d)=>{const h=s.get(u);d.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(u)),d.isNoDocument()&&d.version.isEqual(Pe.min())?(e.removeEntry(u,d.readTime),l=l.insert(u,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),l=l.insert(u,d)):ue(c0,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",d.version)}),{Vs:l,fs:i}})}function Fj(n,e){const t=ve(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ko),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Gu(n,e){const t=ve(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Hr.getTargetData(r,e).next(s=>s?(i=s,G.resolve(i)):t.Hr.allocateTargetId(r).next(l=>(i=new Rs(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function Qu(n,e,t){const r=ve(n),i=r.Ts.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,l=>r.persistence.referenceDelegate.removeTarget(l,i))}catch(l){if(!Xo(l))throw l;ue(c0,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ts=r.Ts.remove(e),r.Is.delete(i.target)}function og(n,e,t){const r=ve(n);let i=Pe.min(),s=Fe();return r.persistence.runTransaction("Execute query","readwrite",l=>function(d,h,m){const g=ve(d),_=g.Is.get(m);return _!==void 0?G.resolve(g.Ts.get(_)):g.Hr.getTargetData(h,m)}(r,l,zn(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(l,u.targetId).next(d=>{s=d})}).next(()=>r.Ps.getDocumentsMatchingQuery(l,e,t?i:Pe.min(),t?s:Fe())).next(u=>(ix(r,a1(e),u),{documents:u,gs:s})))}function nx(n,e){const t=ve(n),r=ve(t.Hr),i=t.Ts.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.lt(s,e).next(l=>l?l.target:null))}function rx(n,e){const t=ve(n),r=t.Es.get(e)||Pe.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.ds.getAllFromCollectionGroup(i,e,bk(r,Mu),Number.MAX_SAFE_INTEGER)).then(i=>(ix(t,e,i),i))}function ix(n,e,t){let r=n.Es.get(e)||Pe.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Es.set(e,r)}async function Uj(n,e,t,r){const i=ve(n);let s=Fe(),l=ir();for(const h of t){const m=e.ps(h.metadata.name);h.document&&(s=s.add(m));const g=e.ys(h);g.setReadTime(e.ws(h.metadata.readTime)),l=l.insert(m,g)}const u=i.ds.newChangeBuffer({trackRemovals:!0}),d=await Gu(i,function(m){return zn(hc(Be.fromString(`__bundle__/docs/${m}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",h=>tx(h,u,l).next(m=>(u.apply(h),m)).next(m=>i.Hr.removeMatchingKeysForTargetId(h,d.targetId).next(()=>i.Hr.addMatchingKeys(h,s,d.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(h,m.Vs,m.fs)).next(()=>m.Vs)))}async function $j(n,e,t=Fe()){const r=await Gu(n,zn(n0(e.bundledQuery))),i=ve(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const l=zt(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Yr.saveNamedQuery(s,e);const u=r.withResumeToken(Mt.EMPTY_BYTE_STRING,l);return i.Ts=i.Ts.insert(u.targetId,u),i.Hr.updateTargetData(s,u).next(()=>i.Hr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Hr.addMatchingKeys(s,t,r.targetId)).next(()=>i.Yr.saveNamedQuery(s,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx="firestore_clients";function OA(n,e){return`${sx}_${n}_${e}`}const ox="firestore_mutations";function NA(n,e,t){let r=`${ox}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const ax="firestore_targets";function kv(n,e){return`${ax}_${n}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi="SharedClientState";class ag{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static bs(e,t,r){const i=JSON.parse(r);let s,l=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return l&&i.error&&(l=typeof i.error.message=="string"&&typeof i.error.code=="string",l&&(s=new ae(i.error.code,i.error.message))),l?new ag(e,t,i.state,s):(Bt(xi,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ss(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class oh{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static bs(e,t){const r=JSON.parse(t);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new ae(r.error.code,r.error.message))),s?new oh(e,r.state,i):(Bt(xi,`Failed to parse target state for ID '${e}': ${t}`),null)}Ss(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class lg{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static bs(e,t){const r=JSON.parse(t);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=GE();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=Ok(r.activeTargetIds[l]),s=s.add(r.activeTargetIds[l]);return i?new lg(e,s):(Bt(xi,`Failed to parse client data for instance '${e}': ${t}`),null)}}class d0{constructor(e,t){this.clientId=e,this.onlineState=t}static bs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new d0(t.clientId,t.onlineState):(Bt(xi,`Failed to parse online state: ${e}`),null)}}class Lw{constructor(){this.activeTargetIds=GE()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xv{constructor(e,t,r,i,s){this.window=e,this.Ti=t,this.persistenceKey=r,this.Cs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Fs=this.Ms.bind(this),this.xs=new pt(Le),this.started=!1,this.Os=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ns=OA(this.persistenceKey,this.Cs),this.Bs=function(d){return`firestore_sequence_number_${d}`}(this.persistenceKey),this.xs=this.xs.insert(this.Cs,new Lw),this.Ls=new RegExp(`^${sx}_${l}_([^_]*)$`),this.ks=new RegExp(`^${ox}_${l}_(\\d+)(?:_(.*))?$`),this.qs=new RegExp(`^${ax}_${l}_(\\d+)$`),this.Qs=function(d){return`firestore_online_state_${d}`}(this.persistenceKey),this.$s=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.Fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.zi();for(const r of e){if(r===this.Cs)continue;const i=this.getItem(OA(this.persistenceKey,r));if(i){const s=lg.bs(r,i);s&&(this.xs=this.xs.insert(s.clientId,s))}}this.Ks();const t=this.storage.getItem(this.Qs);if(t){const r=this.Us(t);r&&this.Ws(r)}for(const r of this.Os)this.Ms(r);this.Os=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Bs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Gs(this.xs)}isActiveQueryTarget(e){let t=!1;return this.xs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.zs(e,"pending")}updateMutationState(e,t,r){this.zs(e,t,r),this.js(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(kv(this.persistenceKey,e));if(i){const s=oh.bs(e,i);s&&(r=s.state)}}return t&&this.Hs.Ds(e),this.Ks(),r}removeLocalQueryTarget(e){this.Hs.vs(e),this.Ks()}isLocalQueryTarget(e){return this.Hs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(kv(this.persistenceKey,e))}updateQueryState(e,t,r){this.Js(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.js(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Ys(e)}notifyBundleLoaded(e){this.Zs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Fs),this.removeItem(this.Ns),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ue(xi,"READ",e,t),t}setItem(e,t){ue(xi,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ue(xi,"REMOVE",e),this.storage.removeItem(e)}Ms(e){const t=e;if(t.storageArea===this.storage){if(ue(xi,"EVENT",t.key,t.newValue),t.key===this.Ns)return void Bt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ti.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Ls.test(t.key)){if(t.newValue==null){const r=this.Xs(t.key);return this.eo(r,null)}{const r=this.no(t.key,t.newValue);if(r)return this.eo(r.clientId,r)}}else if(this.ks.test(t.key)){if(t.newValue!==null){const r=this.ro(t.key,t.newValue);if(r)return this.io(r)}}else if(this.qs.test(t.key)){if(t.newValue!==null){const r=this.so(t.key,t.newValue);if(r)return this.oo(r)}}else if(t.key===this.Qs){if(t.newValue!==null){const r=this.Us(t.newValue);if(r)return this.Ws(r)}}else if(t.key===this.Bs){const r=function(s){let l=nr.ae;if(s!=null)try{const u=JSON.parse(s);Re(typeof u=="number"),l=u}catch(u){Bt(xi,"Failed to read sequence number from WebStorage",u)}return l}(t.newValue);r!==nr.ae&&this.sequenceNumberHandler(r)}else if(t.key===this.$s){const r=this._o(t.newValue);await Promise.all(r.map(i=>this.syncEngine.ao(i)))}}}else this.Os.push(t)})}}get Hs(){return this.xs.get(this.Cs)}Ks(){this.setItem(this.Ns,this.Hs.Ss())}zs(e,t,r){const i=new ag(this.currentUser,e,t,r),s=NA(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Ss())}js(e){const t=NA(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ys(e){const t={clientId:this.Cs,onlineState:e};this.storage.setItem(this.Qs,JSON.stringify(t))}Js(e,t,r){const i=kv(this.persistenceKey,e),s=new oh(e,t,r);this.setItem(i,s.Ss())}Zs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.$s,t)}Xs(e){const t=this.Ls.exec(e);return t?t[1]:null}no(e,t){const r=this.Xs(e);return lg.bs(r,t)}ro(e,t){const r=this.ks.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return ag.bs(new mn(s),i,t)}so(e,t){const r=this.qs.exec(e),i=Number(r[1]);return oh.bs(i,t)}Us(e){return d0.bs(e)}_o(e){return JSON.parse(e)}async io(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.uo(e.batchId,e.state,e.error);ue(xi,`Ignoring mutation for non-active user ${e.user.uid}`)}oo(e){return this.syncEngine.co(e.targetId,e.state,e.error)}eo(e,t){const r=t?this.xs.insert(e,t):this.xs.remove(e),i=this.Gs(this.xs),s=this.Gs(r),l=[],u=[];return s.forEach(d=>{i.has(d)||l.push(d)}),i.forEach(d=>{s.has(d)||u.push(d)}),this.syncEngine.lo(l,u).then(()=>{this.xs=r})}Ws(e){this.xs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Gs(e){let t=GE();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class lx{constructor(){this.ho=new Lw,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Lw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA="ConnectivityMonitor";class LA{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){ue(DA,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){ue(DA,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yp=null;function Vw(){return Yp===null?Yp=function(){return 268435456+Math.round(2147483648*Math.random())}():Yp++,"0x"+Yp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="RestConnection",Bj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zj{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${i}`,this.wo=this.databaseId.database===Ew?`project_id=${r}`:`project_id=${r}&database_id=${i}`}bo(e,t,r,i,s){const l=Vw(),u=this.So(e,t.toUriEncodedString());ue(Ov,`Sending RPC '${e}' ${l}:`,u,r);const d={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(d,i,s),this.vo(e,u,d,r).then(h=>(ue(Ov,`Received RPC '${e}' ${l}: `,h),h),h=>{throw Yi(Ov,`RPC '${e}' ${l} failed with error: `,h,"url: ",u,"request:",r),h})}Co(e,t,r,i,s,l){return this.bo(e,t,r,i,s)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+dc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}So(e,t){const r=Bj[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xn="WebChannelConnection";class qj extends zj{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,i){const s=Vw();return new Promise((l,u)=>{const d=new vk;d.setWithCredentials(!0),d.listenOnce(wk.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case fm.NO_ERROR:const m=d.getResponseJson();ue(xn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(m)),l(m);break;case fm.TIMEOUT:ue(xn,`RPC '${e}' ${s} timed out`),u(new ae(te.DEADLINE_EXCEEDED,"Request time out"));break;case fm.HTTP_ERROR:const g=d.getStatus();if(ue(xn,`RPC '${e}' ${s} failed with status:`,g,"response text:",d.getResponseText()),g>0){let _=d.getResponseJson();Array.isArray(_)&&(_=_[0]);const T=_==null?void 0:_.error;if(T&&T.status&&T.message){const I=function(A){const V=A.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(V)>=0?V:te.UNKNOWN}(T.status);u(new ae(I,T.message))}else u(new ae(te.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new ae(te.UNAVAILABLE,"Connection failed."));break;default:Ee()}}finally{ue(xn,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);ue(xn,`RPC '${e}' ${s} sending request:`,i),d.send(t,"POST",h,r,15)})}Wo(e,t,r){const i=Vw(),s=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Tk(),u=Ik(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Do(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const m=s.join("");ue(xn,`Creating RPC '${e}' stream ${i}: ${m}`,d);const g=l.createWebChannel(m,d);let _=!1,T=!1;const I=new Wj({Fo:A=>{T?ue(xn,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(_||(ue(xn,`Opening RPC '${e}' stream ${i} transport.`),g.open(),_=!0),ue(xn,`RPC '${e}' stream ${i} sending:`,A),g.send(A))},Mo:()=>g.close()}),R=(A,V,M)=>{A.listen(V,L=>{try{M(L)}catch(B){setTimeout(()=>{throw B},0)}})};return R(g,Hd.EventType.OPEN,()=>{T||(ue(xn,`RPC '${e}' stream ${i} transport opened.`),I.Qo())}),R(g,Hd.EventType.CLOSE,()=>{T||(T=!0,ue(xn,`RPC '${e}' stream ${i} transport closed`),I.Ko())}),R(g,Hd.EventType.ERROR,A=>{T||(T=!0,Yi(xn,`RPC '${e}' stream ${i} transport errored:`,A),I.Ko(new ae(te.UNAVAILABLE,"The operation could not be completed")))}),R(g,Hd.EventType.MESSAGE,A=>{var V;if(!T){const M=A.data[0];Re(!!M);const L=M,B=(L==null?void 0:L.error)||((V=L[0])===null||V===void 0?void 0:V.error);if(B){ue(xn,`RPC '${e}' stream ${i} received error:`,B);const $=B.status;let W=function(C){const E=Qt[C];if(E!==void 0)return E1(E)}($),D=B.message;W===void 0&&(W=te.INTERNAL,D="Unknown error status: "+$+" with message "+B.message),T=!0,I.Ko(new ae(W,D)),g.close()}else ue(xn,`RPC '${e}' stream ${i} received:`,M),I.Uo(M)}}),R(u,Ek.STAT_EVENT,A=>{A.stat===mw.PROXY?ue(xn,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===mw.NOPROXY&&ue(xn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.$o()},0),I}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(){return typeof window<"u"?window:null}function Im(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(n){return new Y$(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=i,this.jo=s,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),i=Math.max(0,t-r);i>0&&ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA="PersistentStream";class cx{constructor(e,t,r,i,s,l,u,d){this.Ti=e,this.n_=r,this.r_=i,this.connection=s,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new h0(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(Bt(t.toString()),Bt("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.i_===t&&this.V_(r,i)},r=>{e(()=>{const i=new ae(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(i)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{r(()=>this.m_(i))}),this.stream.onMessage(i=>{r(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return ue(VA,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(ue(VA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Hj extends cx{constructor(e,t,r,i,s,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=s}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=Z$(this.serializer,e),r=function(s){if(!("targetChange"in s))return Pe.min();const l=s.targetChange;return l.targetIds&&l.targetIds.length?Pe.min():l.readTime?zt(l.readTime):Pe.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=kw(this.serializer),t.addTarget=function(s,l){let u;const d=l.target;if(u=Zm(d)?{documents:x1(s,d)}:{query:O1(s,d).ht},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=R1(s,l.resumeToken);const h=Pw(s,l.expectedCount);h!==null&&(u.expectedCount=h)}else if(l.snapshotVersion.compareTo(Pe.min())>0){u.readTime=Ku(s,l.snapshotVersion.toTimestamp());const h=Pw(s,l.expectedCount);h!==null&&(u.expectedCount=h)}return u}(this.serializer,e);const r=tj(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=kw(this.serializer),t.removeTarget=e,this.I_(t)}}class Kj extends cx{constructor(e,t,r,i,s,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=s}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Re(!!e.streamToken),this.lastStreamToken=e.streamToken,Re(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Re(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=ej(e.writeResults,e.commitTime),r=zt(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=kw(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>kh(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{}class Qj extends Gj{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new ae(te.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.bo(e,Cw(t,r),i,s,l)).catch(s=>{throw s.name==="FirebaseError"?(s.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ae(te.UNKNOWN,s.toString())})}Co(e,t,r,i,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.Co(e,Cw(t,r),i,l,u,s)).catch(l=>{throw l.name==="FirebaseError"?(l.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ae(te.UNKNOWN,l.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class Yj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Bt(t),this.N_=!1):ue("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl="RemoteStore";class Jj{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=s,this.z_.To(l=>{r.enqueueAndForget(async()=>{ea(this)&&(ue(nl,"Restarting streams for network reachability change."),await async function(d){const h=ve(d);h.W_.add(4),await mc(h),h.j_.set("Unknown"),h.W_.delete(4),await uf(h)}(this))})}),this.j_=new Yj(r,i)}}async function uf(n){if(ea(n))for(const e of n.G_)await e(!0)}async function mc(n){for(const e of n.G_)await e(!1)}function Qg(n,e){const t=ve(n);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),m0(t)?p0(t):yc(t).c_()&&f0(t,e))}function Yu(n,e){const t=ve(n),r=yc(t);t.U_.delete(e),r.c_()&&dx(t,e),t.U_.size===0&&(r.c_()?r.P_():ea(t)&&t.j_.set("Unknown"))}function f0(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}yc(n).y_(e)}function dx(n,e){n.H_.Ne(e),yc(n).w_(e)}function p0(n){n.H_=new H$({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.U_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),yc(n).start(),n.j_.B_()}function m0(n){return ea(n)&&!yc(n).u_()&&n.U_.size>0}function ea(n){return ve(n).W_.size===0}function hx(n){n.H_=void 0}async function Xj(n){n.j_.set("Online")}async function Zj(n){n.U_.forEach((e,t)=>{f0(n,e)})}async function eB(n,e){hx(n),m0(n)?(n.j_.q_(e),p0(n)):n.j_.set("Unknown")}async function tB(n,e,t){if(n.j_.set("Online"),e instanceof S1&&e.state===2&&e.cause)try{await async function(i,s){const l=s.cause;for(const u of s.targetIds)i.U_.has(u)&&(await i.remoteSyncer.rejectListen(u,l),i.U_.delete(u),i.H_.removeTarget(u))}(n,e)}catch(r){ue(nl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ug(n,r)}else if(e instanceof Em?n.H_.We(e):e instanceof T1?n.H_.Ze(e):n.H_.je(e),!t.isEqual(Pe.min()))try{const r=await ex(n.localStore);t.compareTo(r)>=0&&await function(s,l){const u=s.H_.ot(l);return u.targetChanges.forEach((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const m=s.U_.get(h);m&&s.U_.set(h,m.withResumeToken(d.resumeToken,l))}}),u.targetMismatches.forEach((d,h)=>{const m=s.U_.get(d);if(!m)return;s.U_.set(d,m.withResumeToken(Mt.EMPTY_BYTE_STRING,m.snapshotVersion)),dx(s,d);const g=new Rs(m.target,d,h,m.sequenceNumber);f0(s,g)}),s.remoteSyncer.applyRemoteEvent(u)}(n,t)}catch(r){ue(nl,"Failed to raise snapshot:",r),await ug(n,r)}}async function ug(n,e,t){if(!Xo(e))throw e;n.W_.add(1),await mc(n),n.j_.set("Offline"),t||(t=()=>ex(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ue(nl,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await uf(n)})}function fx(n,e){return e().catch(t=>ug(n,t,e))}async function gc(n){const e=ve(n),t=jo(e);let r=e.K_.length>0?e.K_[e.K_.length-1].batchId:ko;for(;nB(e);)try{const i=await Fj(e.localStore,r);if(i===null){e.K_.length===0&&t.P_();break}r=i.batchId,rB(e,i)}catch(i){await ug(e,i)}px(e)&&mx(e)}function nB(n){return ea(n)&&n.K_.length<10}function rB(n,e){n.K_.push(e);const t=jo(n);t.c_()&&t.b_&&t.S_(e.mutations)}function px(n){return ea(n)&&!jo(n).u_()&&n.K_.length>0}function mx(n){jo(n).start()}async function iB(n){jo(n).C_()}async function sB(n){const e=jo(n);for(const t of n.K_)e.S_(t.mutations)}async function oB(n,e,t){const r=n.K_.shift(),i=XE.from(r,e,t);await fx(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await gc(n)}async function aB(n,e){e&&jo(n).b_&&await async function(r,i){if(function(l){return w1(l)&&l!==te.ABORTED}(i.code)){const s=r.K_.shift();jo(r).h_(),await fx(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await gc(r)}}(n,e),px(n)&&mx(n)}async function MA(n,e){const t=ve(n);t.asyncQueue.verifyOperationInProgress(),ue(nl,"RemoteStore received new credentials");const r=ea(t);t.W_.add(3),await mc(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await uf(t)}async function Mw(n,e){const t=ve(n);e?(t.W_.delete(2),await uf(t)):e||(t.W_.add(2),await mc(t),t.j_.set("Unknown"))}function yc(n){return n.J_||(n.J_=function(t,r,i){const s=ve(t);return s.M_(),new Hj(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{xo:Xj.bind(null,n),No:Zj.bind(null,n),Lo:eB.bind(null,n),p_:tB.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),m0(n)?p0(n):n.j_.set("Unknown")):(await n.J_.stop(),hx(n))})),n.J_}function jo(n){return n.Y_||(n.Y_=function(t,r,i){const s=ve(t);return s.M_(),new Kj(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:iB.bind(null,n),Lo:aB.bind(null,n),D_:sB.bind(null,n),v_:oB.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await gc(n)):(await n.Y_.stop(),n.K_.length>0&&(ue(nl,`Stopping write stream with ${n.K_.length} pending writes`),n.K_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Rn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const l=Date.now()+r,u=new g0(e,t,l,i,s);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _c(n,e){if(Bt("AsyncQueue",`${e}: ${n}`),Xo(n))return new ae(te.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{static emptySet(e){return new bu(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||_e.comparator(t.key,r.key):(t,r)=>_e.comparator(t.key,r.key),this.keyedMap=Kd(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof bu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new bu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(){this.Z_=new pt(_e.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Ee():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ju{constructor(e,t,r,i,s,l,u,d,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,i,s){const l=[];return t.forEach(u=>{l.push({type:0,doc:u})}),new Ju(e,t,bu.emptySet(t),l,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class uB{constructor(){this.queries=UA(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const i=ve(t),s=i.queries;i.queries=UA(),s.forEach((l,u)=>{for(const d of u.ta)d.onError(r)})})(this,new ae(te.ABORTED,"Firestore shutting down"))}}function UA(){return new js(n=>o1(n),nf)}async function y0(n,e){const t=ve(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.na()&&e.ra()&&(r=2):(s=new lB,r=e.ra()?0:1);try{switch(r){case 0:s.ea=await t.onListen(i,!0);break;case 1:s.ea=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(l){const u=_c(l,`Initialization of query '${Eu(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,s),s.ta.push(e),e.sa(t.onlineState),s.ea&&e.oa(s.ea)&&v0(t)}async function _0(n,e){const t=ve(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const l=s.ta.indexOf(e);l>=0&&(s.ta.splice(l,1),s.ta.length===0?i=e.ra()?0:1:!s.na()&&e.ra()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function cB(n,e){const t=ve(n);let r=!1;for(const i of e){const s=i.query,l=t.queries.get(s);if(l){for(const u of l.ta)u.oa(i)&&(r=!0);l.ea=i}}r&&v0(t)}function dB(n,e,t){const r=ve(n),i=r.queries.get(e);if(i)for(const s of i.ta)s.onError(t);r.queries.delete(e)}function v0(n){n.ia.forEach(e=>{e.next()})}var Fw,$A;($A=Fw||(Fw={}))._a="default",$A.Cache="cache";class w0{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ju(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=Ju.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Fw.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(e,t){this.Ia=e,this.byteLength=t}Ea(){return"metadata"in this.Ia}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e){this.serializer=e}ps(e){return Hi(this.serializer,e)}ys(e){return e.metadata.exists?k1(this.serializer,e.document,!1):_t.newNoDocument(this.ps(e.metadata.name),this.ws(e.metadata.readTime))}ws(e){return zt(e)}}class fB{constructor(e,t,r){this.da=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=gx(e)}Aa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Ia.namedQuery)this.queries.push(e.Ia.namedQuery);else if(e.Ia.documentMetadata){this.documents.push({metadata:e.Ia.documentMetadata}),e.Ia.documentMetadata.exists||++t;const r=Be.fromString(e.Ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Ia.document&&(this.documents[this.documents.length-1].document=e.Ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ra(e){const t=new Map,r=new jA(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.ps(i.metadata.name);for(const l of i.metadata.queries){const u=(t.get(l)||Fe()).add(s);t.set(l,u)}}return t}async complete(){const e=await Uj(this.localStore,new jA(this.serializer),this.documents,this.da.id),t=this.Ra(this.documents);for(const r of this.queries)await $j(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Va:this.collectionGroups,ma:e}}}function gx(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e){this.key=e}}class _x{constructor(e){this.key=e}}class vx{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Fe(),this.mutatedKeys=Fe(),this.ya=l1(e),this.wa=new bu(this.ya)}get ba(){return this.fa}Sa(e,t){const r=t?t.Da:new FA,i=t?t.wa:this.wa;let s=t?t.mutatedKeys:this.mutatedKeys,l=i,u=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((m,g)=>{const _=i.get(m),T=rf(this.query,g)?g:null,I=!!_&&this.mutatedKeys.has(_.key),R=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let A=!1;_&&T?_.data.isEqual(T.data)?I!==R&&(r.track({type:3,doc:T}),A=!0):this.va(_,T)||(r.track({type:2,doc:T}),A=!0,(d&&this.ya(T,d)>0||h&&this.ya(T,h)<0)&&(u=!0)):!_&&T?(r.track({type:0,doc:T}),A=!0):_&&!T&&(r.track({type:1,doc:_}),A=!0,(d||h)&&(u=!0)),A&&(T?(l=l.add(T),s=R?s.add(m):s.delete(m)):(l=l.delete(m),s=s.delete(m)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const m=this.query.limitType==="F"?l.last():l.first();l=l.delete(m.key),s=s.delete(m.key),r.track({type:1,doc:m})}return{wa:l,Da:r,ls:u,mutatedKeys:s}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const l=e.Da.X_();l.sort((m,g)=>function(T,I){const R=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee()}};return R(T)-R(I)}(m.type,g.type)||this.ya(m.doc,g.doc)),this.Ca(r),i=i!=null&&i;const u=t&&!i?this.Fa():[],d=this.pa.size===0&&this.current&&!i?1:0,h=d!==this.ga;return this.ga=d,l.length!==0||h?{snapshot:new Ju(this.query,e.wa,s,l,e.mutatedKeys,d===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:u}:{Ma:u}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new FA,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Fe(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new _x(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new yx(r))}),t}Oa(e){this.fa=e.gs,this.pa=Fe();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return Ju.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const ta="SyncEngine";class pB{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class mB{constructor(e){this.key=e,this.Ba=!1}}class gB{constructor(e,t,r,i,s,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=l,this.La={},this.ka=new js(u=>o1(u),nf),this.qa=new Map,this.Qa=new Set,this.$a=new pt(_e.comparator),this.Ka=new Map,this.Ua=new s0,this.Wa={},this.Ga=new Map,this.za=tl.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function yB(n,e,t=!0){const r=Yg(n);let i;const s=r.ka.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Na()):i=await wx(r,e,t,!0),i}async function _B(n,e){const t=Yg(n);await wx(t,e,!0,!1)}async function wx(n,e,t,r){const i=await Gu(n.localStore,zn(e)),s=i.targetId,l=n.sharedClientState.addLocalQueryTarget(s,t);let u;return r&&(u=await E0(n,e,s,l==="current",i.resumeToken)),n.isPrimaryClient&&t&&Qg(n.remoteStore,i),u}async function E0(n,e,t,r,i){n.Ha=(g,_,T)=>async function(R,A,V,M){let L=A.view.Sa(V);L.ls&&(L=await og(R.localStore,A.query,!1).then(({documents:D})=>A.view.Sa(D,L)));const B=M&&M.targetChanges.get(A.targetId),$=M&&M.targetMismatches.get(A.targetId)!=null,W=A.view.applyChanges(L,R.isPrimaryClient,B,$);return Uw(R,A.targetId,W.Ma),W.snapshot}(n,g,_,T);const s=await og(n.localStore,e,!0),l=new vx(e,s.gs),u=l.Sa(s.documents),d=af.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),h=l.applyChanges(u,n.isPrimaryClient,d);Uw(n,t,h.Ma);const m=new pB(e,t,l);return n.ka.set(e,m),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),h.snapshot}async function vB(n,e,t){const r=ve(n),i=r.ka.get(e),s=r.qa.get(i.targetId);if(s.length>1)return r.qa.set(i.targetId,s.filter(l=>!nf(l,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Qu(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Yu(r.remoteStore,i.targetId),Xu(r,i.targetId)}).catch(Jo)):(Xu(r,i.targetId),await Qu(r.localStore,i.targetId,!0))}async function wB(n,e){const t=ve(n),r=t.ka.get(e),i=t.qa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Yu(t.remoteStore,r.targetId))}async function EB(n,e,t){const r=R0(n);try{const i=await function(l,u){const d=ve(l),h=At.now(),m=u.reduce((T,I)=>T.add(I.key),Fe());let g,_;return d.persistence.runTransaction("Locally write mutations","readwrite",T=>{let I=ir(),R=Fe();return d.ds.getEntries(T,m).next(A=>{I=A,I.forEach((V,M)=>{M.isValidDocument()||(R=R.add(V))})}).next(()=>d.localDocuments.getOverlayedDocuments(T,I)).next(A=>{g=A;const V=[];for(const M of u){const L=z$(M,g.get(M.key).overlayedDocument);L!=null&&V.push(new Bs(M.key,L,Jk(L.value.mapValue),Rt.exists(!0)))}return d.mutationQueue.addMutationBatch(T,h,V,u)}).next(A=>{_=A;const V=A.applyToLocalDocumentSet(g,R);return d.documentOverlayCache.saveOverlays(T,A.batchId,V)})}).then(()=>({batchId:_.batchId,changes:c1(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(l,u,d){let h=l.Wa[l.currentUser.toKey()];h||(h=new pt(Le)),h=h.insert(u,d),l.Wa[l.currentUser.toKey()]=h}(r,i.batchId,t),await zs(r,i.changes),await gc(r.remoteStore)}catch(i){const s=_c(i,"Failed to persist write");t.reject(s)}}async function Ex(n,e){const t=ve(n);try{const r=await Mj(t.localStore,e);e.targetChanges.forEach((i,s)=>{const l=t.Ka.get(s);l&&(Re(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.Ba=!0:i.modifiedDocuments.size>0?Re(l.Ba):i.removedDocuments.size>0&&(Re(l.Ba),l.Ba=!1))}),await zs(t,r,e)}catch(r){await Jo(r)}}function BA(n,e,t){const r=ve(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.ka.forEach((s,l)=>{const u=l.view.sa(e);u.snapshot&&i.push(u.snapshot)}),function(l,u){const d=ve(l);d.onlineState=u;let h=!1;d.queries.forEach((m,g)=>{for(const _ of g.ta)_.sa(u)&&(h=!0)}),h&&v0(d)}(r.eventManager,e),i.length&&r.La.p_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function IB(n,e,t){const r=ve(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Ka.get(e),s=i&&i.key;if(s){let l=new pt(_e.comparator);l=l.insert(s,_t.newNoDocument(s,Pe.min()));const u=Fe().add(s),d=new of(Pe.min(),new Map,new pt(Le),l,u);await Ex(r,d),r.$a=r.$a.remove(s),r.Ka.delete(e),S0(r)}else await Qu(r.localStore,e,!1).then(()=>Xu(r,e,t)).catch(Jo)}async function TB(n,e){const t=ve(n),r=e.batch.batchId;try{const i=await Vj(t.localStore,e);T0(t,r,null),I0(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await zs(t,i)}catch(i){await Jo(i)}}async function SB(n,e,t){const r=ve(n);try{const i=await function(l,u){const d=ve(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let m;return d.mutationQueue.lookupMutationBatch(h,u).next(g=>(Re(g!==null),m=g.keys(),d.mutationQueue.removeMutationBatch(h,g))).next(()=>d.mutationQueue.performConsistencyCheck(h)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(h,m,u)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m)).next(()=>d.localDocuments.getDocuments(h,m))})}(r.localStore,e);T0(r,e,t),I0(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await zs(r,i)}catch(i){await Jo(i)}}async function RB(n,e){const t=ve(n);ea(t.remoteStore)||ue(ta,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(l){const u=ve(l);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>u.mutationQueue.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(r===ko)return void e.resolve();const i=t.Ga.get(r)||[];i.push(e),t.Ga.set(r,i)}catch(r){const i=_c(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function I0(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function T0(n,e,t){const r=ve(n);let i=r.Wa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Wa[r.currentUser.toKey()]=i}}function Xu(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ua.Sr(e).forEach(r=>{n.Ua.containsKey(r)||Ix(n,r)})}function Ix(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(Yu(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ka.delete(t),S0(n))}function Uw(n,e,t){for(const r of t)r instanceof yx?(n.Ua.addReference(r.key,e),AB(n,r)):r instanceof _x?(ue(ta,"Document no longer in limbo: "+r.key),n.Ua.removeReference(r.key,e),n.Ua.containsKey(r.key)||Ix(n,r.key)):Ee()}function AB(n,e){const t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(ue(ta,"New document in limbo: "+t),n.Qa.add(r),S0(n))}function S0(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new _e(Be.fromString(e)),r=n.za.next();n.Ka.set(r,new mB(t)),n.$a=n.$a.insert(t,r),Qg(n.remoteStore,new Rs(zn(hc(t.path)),r,"TargetPurposeLimboResolution",nr.ae))}}async function zs(n,e,t){const r=ve(n),i=[],s=[],l=[];r.ka.isEmpty()||(r.ka.forEach((u,d)=>{l.push(r.Ha(d,e,t).then(h=>{var m;if((h||t)&&r.isPrimaryClient){const g=h?!h.fromCache:(m=t==null?void 0:t.targetChanges.get(d.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(d.targetId,g?"current":"not-current")}if(h){i.push(h);const g=u0.Yi(d.targetId,h);s.push(g)}}))}),await Promise.all(l),r.La.p_(i),await async function(d,h){const m=ve(d);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>G.forEach(h,_=>G.forEach(_.Hi,T=>m.persistence.referenceDelegate.addReference(g,_.targetId,T)).next(()=>G.forEach(_.Ji,T=>m.persistence.referenceDelegate.removeReference(g,_.targetId,T)))))}catch(g){if(!Xo(g))throw g;ue(c0,"Failed to update sequence numbers: "+g)}for(const g of h){const _=g.targetId;if(!g.fromCache){const T=m.Ts.get(_),I=T.snapshotVersion,R=T.withLastLimboFreeSnapshotVersion(I);m.Ts=m.Ts.insert(_,R)}}}(r.localStore,s))}async function bB(n,e){const t=ve(n);if(!t.currentUser.isEqual(e)){ue(ta,"User change. New user:",e.toKey());const r=await Z1(t.localStore,e);t.currentUser=e,function(s,l){s.Ga.forEach(u=>{u.forEach(d=>{d.reject(new ae(te.CANCELLED,l))})}),s.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await zs(t,r.Rs)}}function PB(n,e){const t=ve(n),r=t.Ka.get(e);if(r&&r.Ba)return Fe().add(r.key);{let i=Fe();const s=t.qa.get(e);if(!s)return i;for(const l of s){const u=t.ka.get(l);i=i.unionWith(u.view.ba)}return i}}async function CB(n,e){const t=ve(n),r=await og(t.localStore,e.query,!0),i=e.view.Oa(r);return t.isPrimaryClient&&Uw(t,e.targetId,i.Ma),i}async function kB(n,e){const t=ve(n);return rx(t.localStore,e).then(r=>zs(t,r))}async function xB(n,e,t,r){const i=ve(n),s=await function(u,d){const h=ve(u),m=ve(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",g=>m.Ln(g,d).next(_=>_?h.localDocuments.getDocuments(g,_):G.resolve(null)))}(i.localStore,e);s!==null?(t==="pending"?await gc(i.remoteStore):t==="acknowledged"||t==="rejected"?(T0(i,e,r||null),I0(i,e),function(u,d){ve(ve(u).mutationQueue).qn(d)}(i.localStore,e)):Ee(),await zs(i,s)):ue(ta,"Cannot apply mutation batch with id: "+e)}async function OB(n,e){const t=ve(n);if(Yg(t),R0(t),e===!0&&t.ja!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),i=await zA(t,r.toArray());t.ja=!0,await Mw(t.remoteStore,!0);for(const s of i)Qg(t.remoteStore,s)}else if(e===!1&&t.ja!==!1){const r=[];let i=Promise.resolve();t.qa.forEach((s,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(Xu(t,l),Qu(t.localStore,l,!0))),Yu(t.remoteStore,l)}),await i,await zA(t,r),function(l){const u=ve(l);u.Ka.forEach((d,h)=>{Yu(u.remoteStore,h)}),u.Ua.Dr(),u.Ka=new Map,u.$a=new pt(_e.comparator)}(t),t.ja=!1,await Mw(t.remoteStore,!1)}}async function zA(n,e,t){const r=ve(n),i=[],s=[];for(const l of e){let u;const d=r.qa.get(l);if(d&&d.length!==0){u=await Gu(r.localStore,zn(d[0]));for(const h of d){const m=r.ka.get(h),g=await CB(r,m);g.snapshot&&s.push(g.snapshot)}}else{const h=await nx(r.localStore,l);u=await Gu(r.localStore,h),await E0(r,Tx(h),l,!1,u.resumeToken)}i.push(u)}return r.La.p_(s),i}function Tx(n){return s1(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function NB(n){return function(t){return ve(ve(t).persistence).zi()}(ve(n).localStore)}async function DB(n,e,t,r){const i=ve(n);if(i.ja)return void ue(ta,"Ignoring unexpected query state notification.");const s=i.qa.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const l=await rx(i.localStore,a1(s[0])),u=of.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Mt.EMPTY_BYTE_STRING);await zs(i,l,u);break}case"rejected":await Qu(i.localStore,e,!0),Xu(i,e,r);break;default:Ee()}}async function LB(n,e,t){const r=Yg(n);if(r.ja){for(const i of e){if(r.qa.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){ue(ta,"Adding an already active target "+i);continue}const s=await nx(r.localStore,i),l=await Gu(r.localStore,s);await E0(r,Tx(s),l.targetId,!1,l.resumeToken),Qg(r.remoteStore,l)}for(const i of t)r.qa.has(i)&&await Qu(r.localStore,i,!1).then(()=>{Yu(r.remoteStore,i),Xu(r,i)}).catch(Jo)}}function Yg(n){const e=ve(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ex.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=PB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=IB.bind(null,e),e.La.p_=cB.bind(null,e.eventManager),e.La.Ja=dB.bind(null,e.eventManager),e}function R0(n){const e=ve(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=SB.bind(null,e),e}function VB(n,e,t){const r=ve(n);(async function(s,l,u){try{const d=await l.getMetadata();if(await function(T,I){const R=ve(T),A=zt(I.createTime);return R.persistence.runTransaction("hasNewerBundle","readonly",V=>R.Yr.getBundleMetadata(V,I.id)).then(V=>!!V&&V.createTime.compareTo(A)>=0)}(s.localStore,d))return await l.close(),u._completeWith(function(T){return{taskState:"Success",documentsLoaded:T.totalDocuments,bytesLoaded:T.totalBytes,totalDocuments:T.totalDocuments,totalBytes:T.totalBytes}}(d)),Promise.resolve(new Set);u._updateProgress(gx(d));const h=new fB(d,s.localStore,l.serializer);let m=await l.Ya();for(;m;){const _=await h.Aa(m);_&&u._updateProgress(_),m=await l.Ya()}const g=await h.complete();return await zs(s,g.ma,void 0),await function(T,I){const R=ve(T);return R.persistence.runTransaction("Save bundle","readwrite",A=>R.Yr.saveBundleMetadata(A,I))}(s.localStore,d),u._completeWith(g.progress),Promise.resolve(g.Va)}catch(d){return Yi(ta,`Loading bundle failed with ${d}`),u._failWith(d),Promise.resolve(new Set)}})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class xh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=lf(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return X1(this.persistence,new J1,e.initialUser,this.serializer)}Xa(e){return new o0(Gg.ri,this.serializer)}Za(e){return new lx}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xh.provider={build:()=>new xh};class MB extends xh{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Re(this.persistence.referenceDelegate instanceof sg);const r=this.persistence.referenceDelegate.garbageCollector;return new q1(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?Nn.withCacheSize(this.cacheSizeBytes):Nn.DEFAULT;return new o0(r=>sg.ri(r,t),this.serializer)}}class Sx extends xh{constructor(e,t,r){super(),this.ru=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ru.initialize(this,e),await R0(this.ru.syncEngine),await gc(this.ru.remoteStore),await this.persistence.Ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}eu(e){return X1(this.persistence,new J1,e.initialUser,this.serializer)}tu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new q1(r,e.asyncQueue,t)}nu(e,t){const r=new H4(t,this.persistence);return new q4(e.asyncQueue,r)}Xa(e){const t=l0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Nn.withCacheSize(this.cacheSizeBytes):Nn.DEFAULT;return new a0(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,ux(),Im(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(e){return new lx}}class FB extends Sx{constructor(e,t){super(e,t,!1),this.ru=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.ru.syncEngine;this.sharedClientState instanceof xv&&(this.sharedClientState.syncEngine={uo:xB.bind(null,t),co:DB.bind(null,t),lo:LB.bind(null,t),zi:NB.bind(null,t),ao:kB.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ci(async r=>{await OB(this.ru.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Za(e){const t=ux();if(!xv.D(t))throw new ae(te.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=l0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new xv(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Oh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>BA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=bB.bind(null,this.syncEngine),await Mw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new uB}()}createDatastore(e){const t=lf(e.databaseInfo.databaseId),r=function(s){return new qj(s)}(e.databaseInfo);return function(s,l,u,d){return new Qj(s,l,u,d)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,l,u){return new Jj(r,i,s,l,u)}(this.localStore,this.datastore,e.asyncQueue,t=>BA(this.syncEngine,t,0),function(){return LA.D()?new LA:new jj}())}createSyncEngine(e,t){return function(i,s,l,u,d,h,m){const g=new gB(i,s,l,u,d,h);return m&&(g.ja=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=ve(i);ue(nl,"RemoteStore shutting down."),s.W_.add(5),await mc(s),s.z_.shutdown(),s.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Oh.provider={build:()=>new Oh};function WA(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Bt("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UB{constructor(e,t){this.ou=e,this.serializer=t,this.metadata=new Rn,this.buffer=new Uint8Array,this._u=function(){return new TextDecoder("utf-8")}(),this.au().then(r=>{r&&r.Ea()?this.metadata.resolve(r.Ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Ia)}`))},r=>this.metadata.reject(r))}close(){return this.ou.cancel()}async getMetadata(){return this.metadata.promise}async Ya(){return await this.getMetadata(),this.au()}async au(){const e=await this.uu();if(e===null)return null;const t=this._u.decode(e),r=Number(t);isNaN(r)&&this.cu(`length string (${t}) is not valid number`);const i=await this.lu(r);return new hB(JSON.parse(i),e.length+r)}hu(){return this.buffer.findIndex(e=>e===123)}async uu(){for(;this.hu()<0&&!await this.Pu(););if(this.buffer.length===0)return null;const e=this.hu();e<0&&this.cu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async lu(e){for(;this.buffer.length<e;)await this.Pu()&&this.cu("Reached the end of bundle when more is expected.");const t=this._u.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}cu(e){throw this.ou.cancel(),new Error(`Invalid bundle format: ${e}`)}async Pu(){const e=await this.ou.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ae(te.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(i,s){const l=ve(i),u={documents:s.map(g=>Ch(l.serializer,g))},d=await l.Co("BatchGetDocuments",l.serializer.databaseId,Be.emptyPath(),u,s.length),h=new Map;d.forEach(g=>{const _=X$(l.serializer,g);h.set(_.key.toString(),_)});const m=[];return s.forEach(g=>{const _=h.get(g.toString());Re(!!_),m.push(_)}),m}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new pc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{const i=_e.fromPath(r);this.mutations.push(new YE(i,this.precondition(i)))}),await async function(r,i){const s=ve(r),l={writes:i.map(u=>kh(s.serializer,u))};await s.bo("Commit",s.serializer.databaseId,Be.emptyPath(),l)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ee();t=Pe.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ae(te.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Pe.min())?Rt.exists(!1):Rt.updateTime(t):Rt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Pe.min()))throw new ae(te.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Rt.updateTime(t)}return Rt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jB{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Tu=r.maxAttempts,this.a_=new h0(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(async()=>{const e=new $B(this.datastore),t=this.du(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Au(i)}))}).catch(r=>{this.Au(r)})})}du(e){try{const t=this.updateFunction(e);return!Zh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Au(e){this.Tu>0&&this.Ru(e)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(e)}Ru(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!w1(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo="FirestoreClient";class BB{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=mn.UNAUTHENTICATED,this.clientId=Rk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async l=>{ue(Bo,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(ue(Bo,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=_c(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Nv(n,e){n.asyncQueue.verifyOperationInProgress(),ue(Bo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Z1(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function qA(n,e){n.asyncQueue.verifyOperationInProgress();const t=await A0(n);ue(Bo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>MA(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>MA(e.remoteStore,i)),n._onlineComponents=e}async function A0(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ue(Bo,"Using user provided OfflineComponentProvider");try{await Nv(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===te.FAILED_PRECONDITION||i.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Yi("Error using user provided cache. Falling back to memory cache: "+t),await Nv(n,new xh)}}else ue(Bo,"Using default OfflineComponentProvider"),await Nv(n,new MB(void 0));return n._offlineComponents}async function Xg(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ue(Bo,"Using user provided OnlineComponentProvider"),await qA(n,n._uninitializedComponentsProvider._online)):(ue(Bo,"Using default OnlineComponentProvider"),await qA(n,new Oh))),n._onlineComponents}function Rx(n){return A0(n).then(e=>e.persistence)}function b0(n){return A0(n).then(e=>e.localStore)}function Ax(n){return Xg(n).then(e=>e.remoteStore)}function P0(n){return Xg(n).then(e=>e.syncEngine)}function zB(n){return Xg(n).then(e=>e.datastore)}async function Zu(n){const e=await Xg(n),t=e.eventManager;return t.onListen=yB.bind(null,e.syncEngine),t.onUnlisten=vB.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=_B.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=wB.bind(null,e.syncEngine),t}function WB(n){return n.asyncQueue.enqueue(async()=>{const e=await Rx(n),t=await Ax(n);return e.setNetworkEnabled(!0),function(i){const s=ve(i);return s.W_.delete(0),uf(s)}(t)})}function qB(n){return n.asyncQueue.enqueue(async()=>{const e=await Rx(n),t=await Ax(n);return e.setNetworkEnabled(!1),async function(i){const s=ve(i);s.W_.add(0),await mc(s),s.j_.set("Offline")}(t)})}function HB(n,e){const t=new Rn;return n.asyncQueue.enqueueAndForget(async()=>async function(i,s,l){try{const u=await function(h,m){const g=ve(h);return g.persistence.runTransaction("read document","readonly",_=>g.localDocuments.getDocument(_,m))}(i,s);u.isFoundDocument()?l.resolve(u):u.isNoDocument()?l.resolve(null):l.reject(new ae(te.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const d=_c(u,`Failed to get document '${s} from cache`);l.reject(d)}}(await b0(n),e,t)),t.promise}function bx(n,e,t={}){const r=new Rn;return n.asyncQueue.enqueueAndForget(async()=>function(s,l,u,d,h){const m=new Jg({next:_=>{m.su(),l.enqueueAndForget(()=>_0(s,g));const T=_.docs.has(u);!T&&_.fromCache?h.reject(new ae(te.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&_.fromCache&&d&&d.source==="server"?h.reject(new ae(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(_)},error:_=>h.reject(_)}),g=new w0(hc(u.path),m,{includeMetadataChanges:!0,Ta:!0});return y0(s,g)}(await Zu(n),n.asyncQueue,e,t,r)),r.promise}function KB(n,e){const t=new Rn;return n.asyncQueue.enqueueAndForget(async()=>async function(i,s,l){try{const u=await og(i,s,!0),d=new vx(s,u.gs),h=d.Sa(u.documents),m=d.applyChanges(h,!1);l.resolve(m.snapshot)}catch(u){const d=_c(u,`Failed to execute query '${s} against cache`);l.reject(d)}}(await b0(n),e,t)),t.promise}function Px(n,e,t={}){const r=new Rn;return n.asyncQueue.enqueueAndForget(async()=>function(s,l,u,d,h){const m=new Jg({next:_=>{m.su(),l.enqueueAndForget(()=>_0(s,g)),_.fromCache&&d.source==="server"?h.reject(new ae(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(_)},error:_=>h.reject(_)}),g=new w0(u,m,{includeMetadataChanges:!0,Ta:!0});return y0(s,g)}(await Zu(n),n.asyncQueue,e,t,r)),r.promise}function GB(n,e){const t=new Jg(e);return n.asyncQueue.enqueueAndForget(async()=>function(i,s){ve(i).ia.add(s),s.next()}(await Zu(n),t)),()=>{t.su(),n.asyncQueue.enqueueAndForget(async()=>function(i,s){ve(i).ia.delete(s)}(await Zu(n),t))}}function QB(n,e,t,r){const i=function(l,u){let d;return d=typeof l=="string"?I1().encode(l):l,function(m,g){return new UB(m,g)}(function(m,g){if(m instanceof Uint8Array)return WA(m,g);if(m instanceof ArrayBuffer)return WA(new Uint8Array(m),g);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),u)}(t,lf(e));n.asyncQueue.enqueueAndForget(async()=>{VB(await P0(n),i,r)})}function YB(n,e){return n.asyncQueue.enqueue(async()=>function(r,i){const s=ve(r);return s.persistence.runTransaction("Get named query","readonly",l=>s.Yr.getNamedQuery(l,i))}(await b0(n),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(n,e,t){if(!t)throw new ae(te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function kx(n,e,t,r){if(e===!0&&r===!0)throw new ae(te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function KA(n){if(!_e.isDocumentKey(n))throw new ae(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function GA(n){if(_e.isDocumentKey(n))throw new ae(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Zg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ee()}function et(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ae(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Zg(n);throw new ae(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function xx(n,e){if(e<=0)throw new ae(te.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox="firestore.googleapis.com",QA=!0;class YA{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ae(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ox,this.ssl=QA}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:QA;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=j1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<yj)throw new ae(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Cx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ae(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ae(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ae(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cf{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new YA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new YA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new L4;switch(r.type){case"firstParty":return new U4(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ae(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=HA.get(t);r&&(ue("ComponentProvider","Removing Datastore"),HA.delete(t),r.terminate())}(this),Promise.resolve()}}function JB(n,e,t,r={}){var i;const s=(n=et(n,cf))._getSettings(),l=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;s.host!==Ox&&s.host!==u&&Yi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},s),{host:u,ssl:!1,emulatorOptions:r});if(!hi(d,l)&&(n._setSettings(d),r.mockUserToken)){let h,m;if(typeof r.mockUserToken=="string")h=r.mockUserToken,m=mn.MOCK_USER;else{h=zM(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new ae(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new mn(g)}n._authCredentials=new V4(new Sk(h,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wn=class Nx{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Nx(this.firestore,e,this._query)}},Ot=class Dx{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dx(this.firestore,e,this._key)}},xo=class Lx extends Wn{constructor(e,t,r){super(e,t,hc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new _e(e))}withConverter(e){return new Lx(this.firestore,e,this._path)}};function Vx(n,e,...t){if(n=Ce(n),C0("collection","path",e),n instanceof cf){const r=Be.fromString(e,...t);return GA(r),new xo(n,null,r)}{if(!(n instanceof Ot||n instanceof xo))throw new ae(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Be.fromString(e,...t));return GA(r),new xo(n.firestore,null,r)}}function XB(n,e){if(n=et(n,cf),C0("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ae(te.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Wn(n,null,function(r){return new $s(Be.emptyPath(),r)}(e))}function cg(n,e,...t){if(n=Ce(n),arguments.length===1&&(e=Rk.newId()),C0("doc","path",e),n instanceof cf){const r=Be.fromString(e,...t);return KA(r),new Ot(n,null,new _e(r))}{if(!(n instanceof Ot||n instanceof xo))throw new ae(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Be.fromString(e,...t));return KA(r),new Ot(n.firestore,n instanceof xo?n.converter:null,new _e(r))}}function Mx(n,e){return n=Ce(n),e=Ce(e),(n instanceof Ot||n instanceof xo)&&(e instanceof Ot||e instanceof xo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Fx(n,e){return n=Ce(n),e=Ce(e),n instanceof Wn&&e instanceof Wn&&n.firestore===e.firestore&&nf(n._query,e._query)&&n.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA="AsyncQueue";class XA{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new h0(this,"async_queue_retry"),this.bu=()=>{const r=Im();r&&ue(JA,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.Su=e;const t=Im();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Im();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Rn;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Xo(e))throw e;ue(JA,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.Su.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const i=function(l){let u=l.message||"";return l.stack&&(u=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),u}(r);throw Bt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.pu=!1,r))));return this.Su=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const i=g0.createAndSchedule(this,e,t,r,s=>this.Fu(s));return this.fu.push(i),i}Du(){this.gu&&Ee()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function $w(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}class ZB{constructor(){this._progressObserver={},this._taskCompletionResolver=new Rn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e5=-1;let Wt=class extends cf{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new XA,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new XA(e),this._firestoreClient=void 0,await e}}};function Vn(n){if(n._terminated)throw new ae(te.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Ux(n),n._firestoreClient}function Ux(n){var e,t,r;const i=n._freezeSettings(),s=function(u,d,h,m){return new E$(u,d,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,Cx(m.experimentalLongPollingOptions),m.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new BB(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(u){const d=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(d),_online:d}}(n._componentsProvider))}function t5(n,e){Yi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return $x(n,Oh.provider,{build:r=>new Sx(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function n5(n){Yi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();$x(n,Oh.provider,{build:t=>new FB(t,e.cacheSizeBytes)})}function $x(n,e,t){if((n=et(n,Wt))._firestoreClient||n._terminated)throw new ae(te.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new ae(te.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},Ux(n)}function r5(n){if(n._initialized&&!n._terminated)throw new ae(te.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Rn;return n._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!qi.D())return Promise.resolve();const i=r+Y1;await qi.delete(i)}(l0(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function i5(n){return function(t){const r=new Rn;return t.asyncQueue.enqueueAndForget(async()=>RB(await P0(t),r)),r.promise}(Vn(n=et(n,Wt)))}function s5(n){return WB(Vn(n=et(n,Wt)))}function o5(n){return qB(Vn(n=et(n,Wt)))}function a5(n,e){const t=Vn(n=et(n,Wt)),r=new ZB;return QB(t,n._databaseId,e,r),r}function l5(n,e){return YB(Vn(n=et(n,Wt)),e).then(t=>t?new Wn(n,null,t.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xi(Mt.fromBase64String(e))}catch(t){throw new ae(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Xi(Mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zo=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ae(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cl=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ae(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ae(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u5=/^__.*__$/;class c5{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Bs(e,this.data,this.fieldMask,t,this.fieldTransforms):new fc(e,this.data,t,this.fieldTransforms)}}class jx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Bs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Bx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee()}}class ty{constructor(e,t,r,i,s,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Bu(),this.fieldTransforms=s||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new ty(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.$u(e),i}Ku(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.Bu(),i}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return dg(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(Bx(this.Lu)&&u5.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class d5{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||lf(e)}ju(e,t,r,i=!1){return new ty({Lu:e,methodName:t,zu:r,path:St.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function dl(n){const e=n._freezeSettings(),t=lf(n._databaseId);return new d5(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ny(n,e,t,r,i,s={}){const l=n.ju(s.merge||s.mergeFields?2:0,e,t,i);M0("Data must be an object, but it was:",l,r);const u=qx(r,l);let d,h;if(s.merge)d=new rr(l.fieldMask),h=l.fieldTransforms;else if(s.mergeFields){const m=[];for(const g of s.mergeFields){const _=jw(e,g,t);if(!l.contains(_))throw new ae(te.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);Kx(m,_)||m.push(_)}d=new rr(m),h=l.fieldTransforms.filter(g=>d.covers(g.field))}else d=null,h=l.fieldTransforms;return new c5(new Sn(u),d,h)}class df extends cl{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof df}}function zx(n,e,t){return new ty({Lu:3,zu:e.settings.zu,methodName:n._methodName,Qu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class x0 extends cl{_toFieldTransform(e){return new sf(e.path,new qu)}isEqual(e){return e instanceof x0}}class O0 extends cl{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=zx(this,e,!0),r=this.Hu.map(s=>hl(s,t)),i=new Ja(r);return new sf(e.path,i)}isEqual(e){return e instanceof O0&&hi(this.Hu,e.Hu)}}class N0 extends cl{constructor(e,t){super(e),this.Hu=t}_toFieldTransform(e){const t=zx(this,e,!0),r=this.Hu.map(s=>hl(s,t)),i=new Xa(r);return new sf(e.path,i)}isEqual(e){return e instanceof N0&&hi(this.Hu,e.Hu)}}class D0 extends cl{constructor(e,t){super(e),this.Ju=t}_toFieldTransform(e){const t=new Hu(e.serializer,f1(e.serializer,this.Ju));return new sf(e.path,t)}isEqual(e){return e instanceof D0&&this.Ju===e.Ju}}function L0(n,e,t,r){const i=n.ju(1,e,t);M0("Data must be an object, but it was:",i,r);const s=[],l=Sn.empty();Zo(r,(d,h)=>{const m=F0(e,d,t);h=Ce(h);const g=i.Ku(m);if(h instanceof df)s.push(m);else{const _=hl(h,g);_!=null&&(s.push(m),l.set(m,_))}});const u=new rr(s);return new jx(l,u,i.fieldTransforms)}function V0(n,e,t,r,i,s){const l=n.ju(1,e,t),u=[jw(e,r,t)],d=[i];if(s.length%2!=0)throw new ae(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)u.push(jw(e,s[_])),d.push(s[_+1]);const h=[],m=Sn.empty();for(let _=u.length-1;_>=0;--_)if(!Kx(h,u[_])){const T=u[_];let I=d[_];I=Ce(I);const R=l.Ku(T);if(I instanceof df)h.push(T);else{const A=hl(I,R);A!=null&&(h.push(T),m.set(T,A))}}const g=new rr(h);return new jx(m,g,l.fieldTransforms)}function Wx(n,e,t,r=!1){return hl(t,n.ju(r?4:3,e))}function hl(n,e){if(Hx(n=Ce(n)))return M0("Unsupported field value:",e,n),qx(n,e);if(n instanceof cl)return function(r,i){if(!Bx(i.Lu))throw i.Wu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,i){const s=[];let l=0;for(const u of r){let d=hl(u,i.Uu(l));d==null&&(d={nullValue:"NULL_VALUE"}),s.push(d),l++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Ce(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return f1(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=At.fromDate(r);return{timestampValue:Ku(i.serializer,s)}}if(r instanceof At){const s=new At(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ku(i.serializer,s)}}if(r instanceof ey)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Xi)return{bytesValue:R1(i.serializer,r._byteString)};if(r instanceof Ot){const s=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(s))throw i.Wu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:t0(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof k0)return function(l,u){return{mapValue:{fields:{[WE]:{stringValue:qE},[Bu]:{arrayValue:{values:l.toArray().map(h=>{if(typeof h!="number")throw u.Wu("VectorValues must only contain numeric values.");return QE(u.serializer,h)})}}}}}}(r,i);throw i.Wu(`Unsupported field value: ${Zg(r)}`)}(n,e)}function qx(n,e){const t={};return Bk(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zo(n,(r,i)=>{const s=hl(i,e.qu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function Hx(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof At||n instanceof ey||n instanceof Xi||n instanceof Ot||n instanceof cl||n instanceof k0)}function M0(n,e,t){if(!Hx(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=Zg(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function jw(n,e,t){if((e=Ce(e))instanceof zo)return e._internalPath;if(typeof e=="string")return F0(n,e);throw dg("Field path arguments must be of type string or ",n,!1,void 0,t)}const h5=new RegExp("[~\\*/\\[\\]]");function F0(n,e,t){if(e.search(h5)>=0)throw dg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new zo(...e.split("."))._internalPath}catch{throw dg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function dg(n,e,t,r,i){const s=r&&!r.isEmpty(),l=i!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(s||l)&&(d+=" (found",s&&(d+=` in field ${r}`),l&&(d+=` in document ${i}`),d+=")"),new ae(te.INVALID_ARGUMENT,u+n+d)}function Kx(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new f5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ry("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class f5 extends Nh{data(){return super.data()}}function ry(n,e){return typeof e=="string"?F0(n,e):e instanceof zo?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ae(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class U0{}class hf extends U0{}function Eo(n,e,...t){let r=[];e instanceof U0&&r.push(e),r=r.concat(t),function(s){const l=s.filter(d=>d instanceof $0).length,u=s.filter(d=>d instanceof iy).length;if(l>1||l>0&&u>0)throw new ae(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class iy extends hf{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new iy(e,t,r)}_apply(e){const t=this._parse(e);return Yx(e._query,t),new Wn(e.firestore,e.converter,bw(e._query,t))}_parse(e){const t=dl(e.firestore);return function(s,l,u,d,h,m,g){let _;if(h.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new ae(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){eb(g,m);const I=[];for(const R of g)I.push(ZA(d,s,R));_={arrayValue:{values:I}}}else _=ZA(d,s,g)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||eb(g,m),_=Wx(u,l,g,m==="in"||m==="not-in");return ze.create(h,m,_)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function p5(n,e,t){const r=e,i=ry("where",n);return iy._create(i,r,t)}class $0 extends U0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new $0(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ot.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let l=i;const u=s.getFlattenedFilters();for(const d of u)Yx(l,d),l=bw(l,d)}(e._query,t),new Wn(e.firestore,e.converter,bw(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class j0 extends hf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new j0(e,t)}_apply(e){const t=function(i,s,l){if(i.startAt!==null)throw new ae(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ae(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ph(s,l)}(e._query,this._field,this._direction);return new Wn(e.firestore,e.converter,function(i,s){const l=i.explicitOrderBy.concat([s]);return new $s(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function m5(n,e="asc"){const t=e,r=ry("orderBy",n);return j0._create(r,t)}class sy extends hf{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new sy(e,t,r)}_apply(e){return new Wn(e.firestore,e.converter,tg(e._query,this._limit,this._limitType))}}function g5(n){return xx("limit",n),sy._create("limit",n,"F")}function y5(n){return xx("limitToLast",n),sy._create("limitToLast",n,"L")}class oy extends hf{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new oy(e,t,r)}_apply(e){const t=Qx(e,this.type,this._docOrFields,this._inclusive);return new Wn(e.firestore,e.converter,function(i,s){return new $s(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,t))}}function _5(...n){return oy._create("startAt",n,!0)}function v5(...n){return oy._create("startAfter",n,!1)}class ay extends hf{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new ay(e,t,r)}_apply(e){const t=Qx(e,this.type,this._docOrFields,this._inclusive);return new Wn(e.firestore,e.converter,function(i,s){return new $s(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,t))}}function w5(...n){return ay._create("endBefore",n,!1)}function E5(...n){return ay._create("endAt",n,!0)}function Qx(n,e,t,r){if(t[0]=Ce(t[0]),t[0]instanceof Nh)return function(s,l,u,d,h){if(!d)throw new ae(te.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const m=[];for(const g of Au(s))if(g.field.isKeyField())m.push(Qa(l,d.key));else{const _=d.data.field(g.field);if(jg(_))throw new ae(te.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(_===null){const T=g.field.canonicalString();throw new ae(te.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${T}' (used as the orderBy) does not exist.`)}m.push(_)}return new $o(m,h)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=dl(n.firestore);return function(l,u,d,h,m,g){const _=l.explicitOrderBy;if(m.length>_.length)throw new ae(te.INVALID_ARGUMENT,`Too many arguments provided to ${h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const T=[];for(let I=0;I<m.length;I++){const R=m[I];if(_[I].field.isKeyField()){if(typeof R!="string")throw new ae(te.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${h}(), but got a ${typeof R}`);if(!KE(l)&&R.indexOf("/")!==-1)throw new ae(te.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${h}() must be a plain document ID, but '${R}' contains a slash.`);const A=l.path.child(Be.fromString(R));if(!_e.isDocumentKey(A))throw new ae(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${h}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);const V=new _e(A);T.push(Qa(u,V))}else{const A=Wx(d,h,R);T.push(A)}}return new $o(T,g)}(n._query,n.firestore._databaseId,i,e,t,r)}}function ZA(n,e,t){if(typeof(t=Ce(t))=="string"){if(t==="")throw new ae(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!KE(e)&&t.indexOf("/")!==-1)throw new ae(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Be.fromString(t));if(!_e.isDocumentKey(r))throw new ae(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Qa(n,new _e(r))}if(t instanceof Ot)return Qa(n,t._key);throw new ae(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zg(t)}.`)}function eb(n,e){if(!Array.isArray(n)||n.length===0)throw new ae(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Yx(n,e){const t=function(i,s){for(const l of i)for(const u of l.getFlattenedFilters())if(s.indexOf(u.op)>=0)return u.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ae(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class B0{convertValue(e,t="none"){switch(Fo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ls(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Zo(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Bu].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(l=>Tt(l.doubleValue));return new k0(s)}convertGeoPoint(e){return new ey(Tt(e.latitude),Tt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Bg(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Rh(e));default:return null}}convertTimestamp(e){const t=Ds(e);return new At(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Be.fromString(e);Re(V1(r));const i=new Mo(r.get(1),r.get(3)),s=new _e(r.popFirst(5));return i.isEqual(t)||Bt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class I5 extends B0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Vs=class extends Nh{constructor(e,t,r,i,s,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ah(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ry("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},ah=class extends Vs{data(e={}){return super.data(e)}},Wo=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ja(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ah(this._firestore,this._userDataWriter,r.key,r,new ja(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ae(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(u=>{const d=new ah(i._firestore,i._userDataWriter,u.doc.key,u.doc,new ja(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>s||u.type!==3).map(u=>{const d=new ah(i._firestore,i._userDataWriter,u.doc.key,u.doc,new ja(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,m=-1;return u.type!==0&&(h=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),m=l.indexOf(u.doc.key)),{type:T5(u.type),doc:d,oldIndex:h,newIndex:m}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function T5(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee()}}function Jx(n,e){return n instanceof Vs&&e instanceof Vs?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Wo&&e instanceof Wo&&n._firestore===e._firestore&&Fx(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S5(n){n=et(n,Ot);const e=et(n.firestore,Wt);return bx(Vn(e),n._key).then(t=>z0(e,n,t))}class fl extends B0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,t)}}function R5(n){n=et(n,Ot);const e=et(n.firestore,Wt),t=Vn(e),r=new fl(e);return HB(t,n._key).then(i=>new Vs(e,r,n._key,i,new ja(i!==null&&i.hasLocalMutations,!0),n.converter))}function A5(n){n=et(n,Ot);const e=et(n.firestore,Wt);return bx(Vn(e),n._key,{source:"server"}).then(t=>z0(e,n,t))}function b5(n){n=et(n,Wn);const e=et(n.firestore,Wt),t=Vn(e),r=new fl(e);return Gx(n._query),Px(t,n._query).then(i=>new Wo(e,r,n,i))}function P5(n){n=et(n,Wn);const e=et(n.firestore,Wt),t=Vn(e),r=new fl(e);return KB(t,n._query).then(i=>new Wo(e,r,n,i))}function C5(n){n=et(n,Wn);const e=et(n.firestore,Wt),t=Vn(e),r=new fl(e);return Px(t,n._query,{source:"server"}).then(i=>new Wo(e,r,n,i))}function tb(n,e,t){n=et(n,Ot);const r=et(n.firestore,Wt),i=ly(n.converter,e,t);return ff(r,[ny(dl(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Rt.none())])}function nb(n,e,t,...r){n=et(n,Ot);const i=et(n.firestore,Wt),s=dl(i);let l;return l=typeof(e=Ce(e))=="string"||e instanceof zo?V0(s,"updateDoc",n._key,e,t,r):L0(s,"updateDoc",n._key,e),ff(i,[l.toMutation(n._key,Rt.exists(!0))])}function k5(n){return ff(et(n.firestore,Wt),[new pc(n._key,Rt.none())])}function x5(n,e){const t=et(n.firestore,Wt),r=cg(n),i=ly(n.converter,e);return ff(t,[ny(dl(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Rt.exists(!1))]).then(()=>r)}function Xx(n,...e){var t,r,i;n=Ce(n);let s={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||$w(e[l])||(s=e[l],l++);const u={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if($w(e[l])){const g=e[l];e[l]=(t=g.next)===null||t===void 0?void 0:t.bind(g),e[l+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[l+2]=(i=g.complete)===null||i===void 0?void 0:i.bind(g)}let d,h,m;if(n instanceof Ot)h=et(n.firestore,Wt),m=hc(n._key.path),d={next:g=>{e[l]&&e[l](z0(h,n,g))},error:e[l+1],complete:e[l+2]};else{const g=et(n,Wn);h=et(g.firestore,Wt),m=g._query;const _=new fl(h);d={next:T=>{e[l]&&e[l](new Wo(h,_,g,T))},error:e[l+1],complete:e[l+2]},Gx(n._query)}return function(_,T,I,R){const A=new Jg(R),V=new w0(T,A,I);return _.asyncQueue.enqueueAndForget(async()=>y0(await Zu(_),V)),()=>{A.su(),_.asyncQueue.enqueueAndForget(async()=>_0(await Zu(_),V))}}(Vn(h),m,u,d)}function O5(n,e){return GB(Vn(n=et(n,Wt)),$w(e)?e:{next:e})}function ff(n,e){return function(r,i){const s=new Rn;return r.asyncQueue.enqueueAndForget(async()=>EB(await P0(r),i,s)),s.promise}(Vn(n),e)}function z0(n,e,t){const r=t.docs.get(e._key),i=new fl(n);return new Vs(n,i,e._key,r,new ja(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N5={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let D5=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=dl(e)}set(e,t,r){this._verifyNotCommitted();const i=Ao(e,this._firestore),s=ly(i.converter,t,r),l=ny(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(l.toMutation(i._key,Rt.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Ao(e,this._firestore);let l;return l=typeof(t=Ce(t))=="string"||t instanceof zo?V0(this._dataReader,"WriteBatch.update",s._key,t,r,i):L0(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(l.toMutation(s._key,Rt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ao(e,this._firestore);return this._mutations=this._mutations.concat(new pc(t._key,Rt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ae(te.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ao(n,e){if((n=Ce(n)).firestore!==e)throw new ae(te.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=dl(e)}get(e){const t=Ao(e,this._firestore),r=new I5(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||i.length!==1)return Ee();const s=i[0];if(s.isFoundDocument())return new Nh(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new Nh(this._firestore,r,t._key,null,t.converter);throw Ee()})}set(e,t,r){const i=Ao(e,this._firestore),s=ly(i.converter,t,r),l=ny(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const s=Ao(e,this._firestore);let l;return l=typeof(t=Ce(t))=="string"||t instanceof zo?V0(this._dataReader,"Transaction.update",s._key,t,r,i):L0(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,l),this}delete(e){const t=Ao(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let V5=class extends L5{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ao(e,this._firestore),r=new fl(this._firestore);return super.get(e).then(i=>new Vs(this._firestore,r,t._key,i._document,new ja(!1,!1),t.converter))}};function M5(n,e,t){n=et(n,Wt);const r=Object.assign(Object.assign({},N5),t);return function(s){if(s.maxAttempts<1)throw new ae(te.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,l,u){const d=new Rn;return s.asyncQueue.enqueueAndForget(async()=>{const h=await zB(s);new jB(s.asyncQueue,h,u,l,d).Iu()}),d.promise}(Vn(n),i=>e(new V5(n,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F5(){return new df("deleteField")}function U5(){return new x0("serverTimestamp")}function $5(...n){return new O0("arrayUnion",n)}function j5(...n){return new N0("arrayRemove",n)}function B5(n){return new D0("increment",n)}(function(e,t=!0){(function(i){dc=i})(Ar),Qi(new zr("firestore",(r,{instanceIdentifier:i,options:s})=>{const l=r.getProvider("app").getImmediate(),u=new Wt(new M4(r.getProvider("auth-internal")),new $4(l,r.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ae(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mo(h.options.projectId,m)}(l,i),l);return s=Object.assign({useFetchStreams:t},s),u._setSettings(s),u},"PUBLIC").setMultipleInstances(!0)),Er(DR,LR,e),Er(DR,LR,"esm2017")})();const z5="@firebase/firestore-compat",W5="0.3.44";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new ae("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(){if(typeof Uint8Array>"u")throw new ae("unimplemented","Uint8Arrays are not available in this environment.")}function ib(){if(!v$())throw new ae("unimplemented","Blobs are unavailable in Firestore in this environment.")}let Zx=class Bw{constructor(e){this._delegate=e}static fromBase64String(e){return ib(),new Bw(Xi.fromBase64String(e))}static fromUint8Array(e){return rb(),new Bw(Xi.fromUint8Array(e))}toBase64(){return ib(),this._delegate.toBase64()}toUint8Array(){return rb(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(n){return q5(n,["next","error","complete"])}function q5(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{enableIndexedDbPersistence(e,t){return t5(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return n5(e._delegate)}clearIndexedDbPersistence(e){return r5(e._delegate)}}class eO{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Mo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Yi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){JB(this._delegate,e,t,r)}enableNetwork(){return s5(this._delegate)}disableNetwork(){return o5(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,kx("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return i5(this._delegate)}onSnapshotsInSync(e){return O5(this._delegate,e)}get app(){if(!this._appCompat)throw new ae("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ec(this,Vx(this._delegate,e))}catch(t){throw Bn(t,"collection()","Firestore.collection()")}}doc(e){try{return new $r(this,cg(this._delegate,e))}catch(t){throw Bn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new jn(this,XB(this._delegate,e))}catch(t){throw Bn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return M5(this._delegate,t=>e(new tO(this,t)))}batch(){return Vn(this._delegate),new nO(new D5(this._delegate,e=>ff(this._delegate,e)))}loadBundle(e){return a5(this._delegate,e)}namedQuery(e){return l5(this._delegate,e).then(t=>t?new jn(this,t):null)}}class uy extends B0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zx(new Xi(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return $r.forKey(t,this.firestore,null)}}function K5(n){N4(n)}class tO{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new uy(e)}get(e){const t=Ba(e);return this._delegate.get(t).then(r=>new Dh(this._firestore,new Vs(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Ba(e);return r?(W0("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Ba(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Ba(e);return this._delegate.delete(t),this}}class nO{constructor(e){this._delegate=e}set(e,t,r){const i=Ba(e);return r?(W0("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Ba(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Ba(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class rl{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new ah(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Lh(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=rl.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new rl(e,new uy(e),t),i.set(t,s)),s}}rl.INSTANCES=new WeakMap;class $r{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uy(e)}static forPath(e,t,r){if(e.length%2!==0)throw new ae("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new $r(t,new Ot(t._delegate,r,new _e(e)))}static forKey(e,t,r){return new $r(t,new Ot(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ec(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ec(this.firestore,Vx(this._delegate,e))}catch(t){throw Bn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ce(e),e instanceof Ot?Mx(this._delegate,e):!1}set(e,t){t=W0("DocumentReference.set",t);try{return t?tb(this._delegate,e,t):tb(this._delegate,e)}catch(r){throw Bn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?nb(this._delegate,e):nb(this._delegate,e,t,...r)}catch(i){throw Bn(i,"updateDoc()","DocumentReference.update()")}}delete(){return k5(this._delegate)}onSnapshot(...e){const t=rO(e),r=iO(e,i=>new Dh(this.firestore,new Vs(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Xx(this._delegate,t,r)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=R5(this._delegate):(e==null?void 0:e.source)==="server"?t=A5(this._delegate):t=S5(this._delegate),t.then(r=>new Dh(this.firestore,new Vs(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new $r(this.firestore,e?this._delegate.withConverter(rl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Bn(n,e,t){return n.message=n.message.replace(e,t),n}function rO(n){for(const e of n)if(typeof e=="object"&&!zw(e))return e;return{}}function iO(n,e){var t,r;let i;return zw(n[0])?i=n[0]:zw(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class Dh{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new $r(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Jx(this._delegate,e._delegate)}}class Lh extends Dh{data(e){const t=this._delegate.data(e);return this._delegate._converter||D4(t!==void 0),t}}class jn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uy(e)}where(e,t,r){try{return new jn(this.firestore,Eo(this._delegate,p5(e,t,r)))}catch(i){throw Bn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new jn(this.firestore,Eo(this._delegate,m5(e,t)))}catch(r){throw Bn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new jn(this.firestore,Eo(this._delegate,g5(e)))}catch(t){throw Bn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new jn(this.firestore,Eo(this._delegate,y5(e)))}catch(t){throw Bn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new jn(this.firestore,Eo(this._delegate,_5(...e)))}catch(t){throw Bn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new jn(this.firestore,Eo(this._delegate,v5(...e)))}catch(t){throw Bn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new jn(this.firestore,Eo(this._delegate,w5(...e)))}catch(t){throw Bn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new jn(this.firestore,Eo(this._delegate,E5(...e)))}catch(t){throw Bn(t,"endAt()","Query.endAt()")}}isEqual(e){return Fx(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=P5(this._delegate):(e==null?void 0:e.source)==="server"?t=C5(this._delegate):t=b5(this._delegate),t.then(r=>new Ww(this.firestore,new Wo(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=rO(e),r=iO(e,i=>new Ww(this.firestore,new Wo(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Xx(this._delegate,t,r)}withConverter(e){return new jn(this.firestore,e?this._delegate.withConverter(rl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class G5{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Lh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ww{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new jn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Lh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new G5(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Lh(this._firestore,r))})}isEqual(e){return Jx(this._delegate,e._delegate)}}class ec extends jn{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new $r(this.firestore,e):null}doc(e){try{return e===void 0?new $r(this.firestore,cg(this._delegate)):new $r(this.firestore,cg(this._delegate,e))}catch(t){throw Bn(t,"doc()","CollectionReference.doc()")}}add(e){return x5(this._delegate,e).then(t=>new $r(this.firestore,t))}isEqual(e){return Mx(this._delegate,e._delegate)}withConverter(e){return new ec(this.firestore,e?this._delegate.withConverter(rl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ba(n){return et(n,Ot)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(...e){this._delegate=new zo(...e)}static documentId(){return new q0(St.keyField().canonicalString())}isEqual(e){return e=Ce(e),e instanceof zo?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{static serverTimestamp(){const e=U5();return e._methodName="FieldValue.serverTimestamp",new Ua(e)}static delete(){const e=F5();return e._methodName="FieldValue.delete",new Ua(e)}static arrayUnion(...e){const t=$5(...e);return t._methodName="FieldValue.arrayUnion",new Ua(t)}static arrayRemove(...e){const t=j5(...e);return t._methodName="FieldValue.arrayRemove",new Ua(t)}static increment(e){const t=B5(e);return t._methodName="FieldValue.increment",new Ua(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q5={Firestore:eO,GeoPoint:ey,Timestamp:At,Blob:Zx,Transaction:tO,WriteBatch:nO,DocumentReference:$r,DocumentSnapshot:Dh,Query:jn,QueryDocumentSnapshot:Lh,QuerySnapshot:Ww,CollectionReference:ec,FieldPath:q0,FieldValue:Ua,setLogLevel:K5,CACHE_SIZE_UNLIMITED:e5};function Y5(n,e){n.INTERNAL.registerComponent(new zr("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Q5)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J5(n){Y5(n,(e,t)=>new eO(e,t,new H5)),n.registerVersion(z5,W5)}J5(uc);const bd={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},cu={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X5(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function sO(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Z5=X5,e3=sO,oO=new ns("auth","Firebase",sO());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg=new Gh("@firebase/auth");function t3(n,...e){hg.logLevel<=Ue.WARN&&hg.warn(`Auth (${Ar}): ${n}`,...e)}function Tm(n,...e){hg.logLevel<=Ue.ERROR&&hg.error(`Auth (${Ar}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(n,...e){throw K0(n,...e)}function an(n,...e){return K0(n,...e)}function H0(n,e,t){const r=Object.assign(Object.assign({},e3()),{[e]:t});return new ns("auth","Firebase",r).create(e,{appName:n.name})}function yn(n){return H0(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vc(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&An(n,"argument-error"),H0(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function K0(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return oO.create(n,...e)}function de(n,e,...t){if(!n)throw K0(e,...t)}function ji(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Tm(e),new Error(e)}function pi(n,e){n||ji(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vh(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function G0(){return sb()==="http:"||sb()==="https:"}function sb(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(G0()||TE()||"connection"in navigator)?navigator.onLine:!0}function r3(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,t){this.shortDelay=e,this.longDelay=t,pi(t>e,"Short delay should be less than long delay!"),this.isMobile=dC()||kg()}get(){return n3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(n,e){pi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ji("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ji("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ji("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3=new pf(3e4,6e4);function Ft(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ut(n,e,t,r,i={}){return lO(n,i,async()=>{let s={},l={};r&&(e==="GET"?l=r:s={body:JSON.stringify(r)});const u=mi(Object.assign({key:n.config.apiKey},l)).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const h=Object.assign({method:e,headers:d},s);return fC()||(h.referrerPolicy="no-referrer"),aO.fetch()(uO(n,n.config.apiHost,t,u),h)})}async function lO(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},i3),e);try{const i=new a3(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await s.json();if("needConfirmation"in l)throw Yd(n,"account-exists-with-different-credential",l);if(s.ok&&!("errorMessage"in l))return l;{const u=s.ok?l.errorMessage:l.error.message,[d,h]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yd(n,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Yd(n,"email-already-in-use",l);if(d==="USER_DISABLED")throw Yd(n,"user-disabled",l);const m=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw H0(n,m,h);An(n,m)}}catch(i){if(i instanceof gn)throw i;An(n,"network-request-failed",{message:String(i)})}}async function Ws(n,e,t,r,i={}){const s=await Ut(n,e,t,r,i);return"mfaPendingCredential"in s&&An(n,"multi-factor-auth-required",{_serverResponse:s}),s}function uO(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?Q0(n.config,i):`${n.config.apiScheme}://${i}`}function o3(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class a3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(an(this.auth,"network-request-failed")),s3.get())})}}function Yd(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=an(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(n){return n!==void 0&&n.getResponse!==void 0}function ab(n){return n!==void 0&&n.enterprise!==void 0}class cO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return o3(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l3(n){return(await Ut(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function dO(n,e){return Ut(n,"GET","/v2/recaptchaConfig",Ft(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u3(n,e){return Ut(n,"POST","/v1/accounts:delete",e)}async function c3(n,e){return Ut(n,"POST","/v1/accounts:update",e)}async function hO(n,e){return Ut(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lh(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function d3(n,e=!1){const t=Ce(n),r=await t.getIdToken(e),i=cy(r);de(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,l=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:lh(Dv(i.auth_time)),issuedAtTime:lh(Dv(i.iat)),expirationTime:lh(Dv(i.exp)),signInProvider:l||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Dv(n){return Number(n)*1e3}function cy(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Tm("JWT malformed, contained fewer than 3 sections"),null;try{const i=Pg(t);return i?JSON.parse(i):(Tm("Failed to decode base64 JWT payload"),null)}catch(i){return Tm("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function lb(n){const e=cy(n);return de(e,"internal-error"),de(typeof e.exp<"u","internal-error"),de(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ms(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof gn&&h3(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function h3({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=lh(this.lastLoginAt),this.creationTime=lh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mh(n){var e;const t=n.auth,r=await n.getIdToken(),i=await Ms(n,hO(t,{idToken:r}));de(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const l=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?fO(s.providerUserInfo):[],u=m3(n.providerData,l),d=n.isAnonymous,h=!(n.email&&s.passwordHash)&&!(u!=null&&u.length),m=d?h:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:u,metadata:new qw(s.createdAt,s.lastLoginAt),isAnonymous:m};Object.assign(n,g)}async function p3(n){const e=Ce(n);await Mh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function m3(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function fO(n){return n.map(e=>{var{providerId:t}=e,r=cc(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g3(n,e){const t=await lO(n,{},async()=>{const r=mi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,l=uO(n,i,"/v1/token",`key=${s}`),u=await n._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",aO.fetch()(l,{method:"POST",headers:u,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function y3(n,e){return Ut(n,"POST","/v2/accounts:revokeToken",Ft(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){de(e.idToken,"internal-error"),de(typeof e.idToken<"u","internal-error"),de(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):lb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){de(e.length!==0,"internal-error");const t=lb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(de(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await g3(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,l=new Pu;return r&&(de(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(de(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),s&&(de(typeof s=="number","internal-error",{appName:e}),l.expirationTime=s),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Pu,this.toJSON())}_performRefresh(){return ji("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Io(n,e){de(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class As{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=cc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new f3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new qw(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Ms(this,this.stsTokenManager.getToken(this.auth,e));return de(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return d3(this,e)}reload(){return p3(this)}_assign(e){this!==e&&(de(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new As(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Mh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ge(this.auth.app))return Promise.reject(yn(this.auth));const e=await this.getIdToken();return await Ms(this,u3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,l,u,d,h,m;const g=(r=t.displayName)!==null&&r!==void 0?r:void 0,_=(i=t.email)!==null&&i!==void 0?i:void 0,T=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,I=(l=t.photoURL)!==null&&l!==void 0?l:void 0,R=(u=t.tenantId)!==null&&u!==void 0?u:void 0,A=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,V=(h=t.createdAt)!==null&&h!==void 0?h:void 0,M=(m=t.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:L,emailVerified:B,isAnonymous:$,providerData:W,stsTokenManager:D}=t;de(L&&D,e,"internal-error");const b=Pu.fromJSON(this.name,D);de(typeof L=="string",e,"internal-error"),Io(g,e.name),Io(_,e.name),de(typeof B=="boolean",e,"internal-error"),de(typeof $=="boolean",e,"internal-error"),Io(T,e.name),Io(I,e.name),Io(R,e.name),Io(A,e.name),Io(V,e.name),Io(M,e.name);const C=new As({uid:L,auth:e,email:_,emailVerified:B,displayName:g,isAnonymous:$,photoURL:I,phoneNumber:T,tenantId:R,stsTokenManager:b,createdAt:V,lastLoginAt:M});return W&&Array.isArray(W)&&(C.providerData=W.map(E=>Object.assign({},E))),A&&(C._redirectEventId=A),C}static async _fromIdTokenResponse(e,t,r=!1){const i=new Pu;i.updateFromServerResponse(t);const s=new As({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Mh(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];de(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?fO(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),u=new Pu;u.updateFromIdToken(r);const d=new As({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:l}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new qw(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub=new Map;function wr(n){pi(n instanceof Function,"Expected a class definition");let e=ub.get(n);return e?(pi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,ub.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}pO.type="NONE";const tc=pO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(n,e,t){return`firebase:${n}:${e}:${t}`}class Cu{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Ha(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ha("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?As._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Cu(wr(tc),e,r);const i=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||wr(tc);const l=Ha(r,e.config.apiKey,e.name);let u=null;for(const h of t)try{const m=await h._get(l);if(m){const g=As._fromJSON(e,m);h!==s&&(u=g),s=h;break}}catch{}const d=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!d.length?new Cu(s,e,r):(s=d[0],u&&await s._set(l,u.toJSON()),await Promise.all(t.map(async h=>{if(h!==s)try{await h._remove(l)}catch{}})),new Cu(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_O(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mO(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vO(e))return"Blackberry";if(wO(e))return"Webos";if(gO(e))return"Safari";if((e.includes("chrome/")||yO(e))&&!e.includes("edge/"))return"Chrome";if(mf(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function mO(n=We()){return/firefox\//i.test(n)}function gO(n=We()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yO(n=We()){return/crios\//i.test(n)}function _O(n=We()){return/iemobile/i.test(n)}function mf(n=We()){return/android/i.test(n)}function vO(n=We()){return/blackberry/i.test(n)}function wO(n=We()){return/webos/i.test(n)}function gf(n=We()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function _3(n=We()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function v3(n=We()){var e;return gf(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function w3(){return SE()&&document.documentMode===10}function EO(n=We()){return gf(n)||mf(n)||wO(n)||vO(n)||/windows phone/i.test(n)||_O(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IO(n,e=[]){let t;switch(n){case"Browser":t=cb(We());break;case"Worker":t=`${cb(We())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ar}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((l,u)=>{try{const d=e(s);l(d)}catch(d){u(d)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I3(n,e={}){return Ut(n,"GET","/v2/passwordPolicy",Ft(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3=6;class S3{constructor(e){var t,r,i,s;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:T3,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,l,u;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(i=d.containsLowercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(s=d.containsUppercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(u=d.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),d}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new db(this),this.idTokenSubscription=new db(this),this.beforeStateQueue=new E3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oO,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=wr(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Cu.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await hO(this,{idToken:e}),r=await As._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ge(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=i==null?void 0:i._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===u)&&(d!=null&&d.user)&&(i=d.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Mh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=r3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ge(this.app))return Promise.reject(yn(this));const t=e?Ce(e):null;return t&&de(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&de(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ge(this.app)?Promise.reject(yn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ge(this.app)?Promise.reject(yn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(wr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await I3(this),t=new S3(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ns("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await y3(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&wr(e)||this._popupRedirectResolver;de(t,this,"argument-error"),this.redirectPersistenceManager=await Cu.create(this,[wr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(u,this,"internal-error"),u.then(()=>{l||s(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,i);return()=>{l=!0,d()}}else{const d=e.addObserver(t);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=IO(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Ge(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&t3(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Nt(n){return Ce(n)}class db{constructor(e){this.auth=e,this.observer=null,this.addObserver=RE(t=>this.observer=t)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function A3(n){yf=n}function Y0(n){return yf.loadJS(n)}function b3(){return yf.recaptchaV2Script}function P3(){return yf.recaptchaEnterpriseScript}function C3(){return yf.gapiScript}function TO(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k3=500,x3=6e4,Jp=1e12;class O3{constructor(e){this.auth=e,this.counter=Jp,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new L3(e,this.auth.name,t||{})),this.counter++,r}reset(e){var t;const r=e||Jp;(t=this._widgets.get(r))===null||t===void 0||t.delete(),this._widgets.delete(r)}getResponse(e){var t;const r=e||Jp;return((t=this._widgets.get(r))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const r=e||Jp;return(t=this._widgets.get(r))===null||t===void 0||t.execute(),""}}class N3{constructor(){this.enterprise=new D3}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class D3{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class L3{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;de(i,"argument-error",{appName:t}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=V3(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},x3)},k3))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function V3(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const M3="recaptcha-enterprise",uh="NO_RECAPTCHA";class SO{constructor(e){this.type=M3,this.auth=Nt(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(l,u)=>{dO(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const h=new cO(d);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,l(h.siteKey)}}).catch(d=>{u(d)})})}function i(s,l,u){const d=window.grecaptcha;ab(d)?d.enterprise.ready(()=>{d.enterprise.execute(s,{action:e}).then(h=>{l(h)}).catch(()=>{l(uh)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new N3().execute("siteKey",{action:"verify"}):new Promise((s,l)=>{r(this.auth).then(u=>{if(!t&&ab(window.grecaptcha))i(u,s,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=P3();d.length!==0&&(d+=u),Y0(d).then(()=>{i(u,s,l)}).catch(h=>{l(h)})}}).catch(u=>{l(u)})})}}async function Pd(n,e,t,r=!1,i=!1){const s=new SO(n);let l;if(i)l=uh;else try{l=await s.verify(t)}catch{l=await s.verify(t,!0)}const u=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,h=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Oo(n,e,t,r,i){var s,l;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Pd(n,e,t,t==="getOobCode");return r(n,u)}else return r(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await Pd(n,e,t,t==="getOobCode");return r(n,d)}else return Promise.reject(u)});else if(i==="PHONE_PROVIDER")if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("PHONE_PROVIDER")){const u=await Pd(n,e,t);return r(n,u).catch(async d=>{var h;if(((h=n._getRecaptchaConfig())===null||h===void 0?void 0:h.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(d.code==="auth/missing-recaptcha-token"||d.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const m=await Pd(n,e,t,!1,!0);return r(n,m)}return Promise.reject(d)})}else{const u=await Pd(n,e,t,!1,!0);return r(n,u)}else return Promise.reject(i+" provider is not supported.")}async function F3(n){const e=Nt(n),t=await dO(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new cO(t);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new SO(e).verify()}function U3(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(wr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function $3(n,e,t){const r=Nt(n);de(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(t!=null&&t.disableWarnings),s=RO(e),{host:l,port:u}=j3(e),d=u===null?"":`:${u}`,h={url:`${s}//${l}${d}/`},m=Object.freeze({host:l,port:u,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){de(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),de(hi(h,r.config.emulator)&&hi(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,i||B3()}function RO(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function j3(n){const e=RO(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:hb(r.substr(s.length+1))}}else{const[s,l]=r.split(":");return{host:s,port:hb(l)}}}function hb(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function B3(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ji("not implemented")}_getIdTokenResponse(e){return ji("not implemented")}_linkToIdToken(e,t){return ji("not implemented")}_getReauthenticationResolver(e){return ji("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AO(n,e){return Ut(n,"POST","/v1/accounts:resetPassword",Ft(n,e))}async function z3(n,e){return Ut(n,"POST","/v1/accounts:update",e)}async function W3(n,e){return Ut(n,"POST","/v1/accounts:signUp",e)}async function q3(n,e){return Ut(n,"POST","/v1/accounts:update",Ft(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H3(n,e){return Ws(n,"POST","/v1/accounts:signInWithPassword",Ft(n,e))}async function dy(n,e){return Ut(n,"POST","/v1/accounts:sendOobCode",Ft(n,e))}async function K3(n,e){return dy(n,e)}async function G3(n,e){return dy(n,e)}async function Q3(n,e){return dy(n,e)}async function Y3(n,e){return dy(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J3(n,e){return Ws(n,"POST","/v1/accounts:signInWithEmailLink",Ft(n,e))}async function X3(n,e){return Ws(n,"POST","/v1/accounts:signInWithEmailLink",Ft(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh extends wc{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Fh(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Fh(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Oo(e,t,"signInWithPassword",H3,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return J3(e,{email:this._email,oobCode:this._password});default:An(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Oo(e,r,"signUpPassword",W3,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return X3(e,{idToken:t,email:this._email,oobCode:this._password});default:An(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xs(n,e){return Ws(n,"POST","/v1/accounts:signInWithIdp",Ft(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3="http://localhost";class Zi extends wc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Zi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):An("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=cc(t,["providerId","signInMethod"]);if(!r||!i)return null;const l=new Zi(r,i);return l.idToken=s.idToken||void 0,l.accessToken=s.accessToken||void 0,l.secret=s.secret,l.nonce=s.nonce,l.pendingToken=s.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return xs(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,xs(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xs(e,t)}buildRequest(){const e={requestUri:Z3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=mi(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fb(n,e){return Ut(n,"POST","/v1/accounts:sendVerificationCode",Ft(n,e))}async function ez(n,e){return Ws(n,"POST","/v1/accounts:signInWithPhoneNumber",Ft(n,e))}async function tz(n,e){const t=await Ws(n,"POST","/v1/accounts:signInWithPhoneNumber",Ft(n,e));if(t.temporaryProof)throw Yd(n,"account-exists-with-different-credential",t);return t}const nz={USER_NOT_FOUND:"user-not-found"};async function rz(n,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Ws(n,"POST","/v1/accounts:signInWithPhoneNumber",Ft(n,t),nz)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka extends wc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ka({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ka({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return ez(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return tz(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return rz(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!t&&!i&&!s?null:new Ka({verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iz(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function sz(n){const e=di(Fi(n)).link,t=e?di(Fi(e)).deep_link_id:null,r=di(Fi(n)).deep_link_id;return(r?di(Fi(r)).link:null)||r||t||e||n}class hy{constructor(e){var t,r,i,s,l,u;const d=di(Fi(e)),h=(t=d.apiKey)!==null&&t!==void 0?t:null,m=(r=d.oobCode)!==null&&r!==void 0?r:null,g=iz((i=d.mode)!==null&&i!==void 0?i:null);de(h&&m&&g,"argument-error"),this.apiKey=h,this.operation=g,this.code=m,this.continueUrl=(s=d.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(l=d.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(u=d.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const t=sz(e);try{return new hy(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(){this.providerId=na.PROVIDER_ID}static credential(e,t){return Fh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=hy.parseLink(t);return de(r,"argument-error"),Fh._fromEmailAndCode(e,r.code,r.tenantId)}}na.PROVIDER_ID="password";na.EMAIL_PASSWORD_SIGN_IN_METHOD="password";na.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec extends qs{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ku extends Ec{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return de("providerId"in t&&"signInMethod"in t,"argument-error"),Zi._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return de(e.idToken||e.accessToken,"argument-error"),Zi._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return ku.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return ku.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:l,providerId:u}=e;if(!r&&!i&&!t&&!s||!u)return null;try{return new ku(u)._credential({idToken:t,accessToken:r,nonce:l,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di extends Ec{constructor(){super("facebook.com")}static credential(e){return Zi._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Di.credentialFromTaggedObject(e)}static credentialFromError(e){return Di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Di.credential(e.oauthAccessToken)}catch{return null}}}Di.FACEBOOK_SIGN_IN_METHOD="facebook.com";Di.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends Ec{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Zi._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Li.credentialFromTaggedObject(e)}static credentialFromError(e){return Li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Li.credential(t,r)}catch{return null}}}Li.GOOGLE_SIGN_IN_METHOD="google.com";Li.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends Ec{constructor(){super("github.com")}static credential(e){return Zi._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vi.credentialFromTaggedObject(e)}static credentialFromError(e){return Vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vi.credential(e.oauthAccessToken)}catch{return null}}}Vi.GITHUB_SIGN_IN_METHOD="github.com";Vi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oz="http://localhost";class nc extends wc{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return xs(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,xs(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xs(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=t;return!r||!i||!s||r!==i?null:new nc(r,s)}static _create(e,t){return new nc(e,t)}buildRequest(){return{requestUri:oz,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const az="saml.";class fg extends qs{constructor(e){de(e.startsWith(az),"argument-error"),super(e)}static credentialFromResult(e){return fg.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return fg.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=nc.fromJSON(e);return de(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return nc._create(r,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends Ec{constructor(){super("twitter.com")}static credential(e,t){return Zi._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Mi.credentialFromTaggedObject(e)}static credentialFromError(e){return Mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Mi.credential(t,r)}catch{return null}}}Mi.TWITTER_SIGN_IN_METHOD="twitter.com";Mi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bO(n,e){return Ws(n,"POST","/v1/accounts:signUp",Ft(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await As._fromIdTokenResponse(e,r,i),l=pb(r);return new Wr({user:s,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=pb(r);return new Wr({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function pb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lz(n){var e;if(Ge(n.app))return Promise.reject(yn(n));const t=Nt(n);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new Wr({user:t.currentUser,providerId:null,operationType:"signIn"});const r=await bO(t,{returnSecureToken:!0}),i=await Wr._fromIdTokenResponse(t,"signIn",r,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg extends gn{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,pg.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new pg(e,t,r,i)}}function PO(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?pg._fromErrorAndOperation(n,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CO(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uz(n,e){const t=Ce(n);await fy(!0,t,e);const{providerUserInfo:r}=await c3(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),i=CO(r||[]);return t.providerData=t.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function J0(n,e,t=!1){const r=await Ms(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Wr._forOperation(n,"link",r)}async function fy(n,e,t){await Mh(e);const r=CO(e.providerData),i=n===!1?"provider-already-linked":"no-such-provider";de(r.has(t)===n,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kO(n,e,t=!1){const{auth:r}=n;if(Ge(r.app))return Promise.reject(yn(r));const i="reauthenticate";try{const s=await Ms(n,PO(r,i,e,n),t);de(s.idToken,r,"internal-error");const l=cy(s.idToken);de(l,r,"internal-error");const{sub:u}=l;return de(n.uid===u,r,"user-mismatch"),Wr._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&An(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xO(n,e,t=!1){if(Ge(n.app))return Promise.reject(yn(n));const r="signIn",i=await PO(n,r,e),s=await Wr._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function py(n,e){return xO(Nt(n),e)}async function OO(n,e){const t=Ce(n);return await fy(!1,t,e.providerId),J0(t,e)}async function NO(n,e){return kO(Ce(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cz(n,e){return Ws(n,"POST","/v1/accounts:signInWithCustomToken",Ft(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dz(n,e){if(Ge(n.app))return Promise.reject(yn(n));const t=Nt(n),r=await cz(t,{token:e,returnSecureToken:!0}),i=await Wr._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?X0._fromServerResponse(e,t):"totpInfo"in t?Z0._fromServerResponse(e,t):An(e,"internal-error")}}class X0 extends _f{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new X0(t)}}class Z0 extends _f{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Z0(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(n,e,t){var r;de(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),de(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),de(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(de(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(de(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eI(n){const e=Nt(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function hz(n,e,t){const r=Nt(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&my(r,i,t),await Oo(r,i,"getOobCode",G3,"EMAIL_PASSWORD_PROVIDER")}async function fz(n,e,t){await AO(Ce(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&eI(n),r})}async function pz(n,e){await q3(Ce(n),{oobCode:e})}async function DO(n,e){const t=Ce(n),r=await AO(t,{oobCode:e}),i=r.requestType;switch(de(i,t,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":de(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":de(r.mfaInfo,t,"internal-error");default:de(r.email,t,"internal-error")}let s=null;return r.mfaInfo&&(s=_f._fromServerResponse(Nt(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function mz(n,e){const{data:t}=await DO(Ce(n),e);return t.email}async function gz(n,e,t){if(Ge(n.app))return Promise.reject(yn(n));const r=Nt(n),l=await Oo(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",bO,"EMAIL_PASSWORD_PROVIDER").catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&eI(n),d}),u=await Wr._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(u.user),u}function yz(n,e,t){return Ge(n.app)?Promise.reject(yn(n)):py(Ce(n),na.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&eI(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _z(n,e,t){const r=Nt(n),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(l,u){de(u.handleCodeInApp,r,"argument-error"),u&&my(r,l,u)}s(i,t),await Oo(r,i,"getOobCode",Q3,"EMAIL_PASSWORD_PROVIDER")}function vz(n,e){const t=hy.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function wz(n,e,t){if(Ge(n.app))return Promise.reject(yn(n));const r=Ce(n),i=na.credentialWithLink(e,t||Vh());return de(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),py(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ez(n,e){return Ut(n,"POST","/v1/accounts:createAuthUri",Ft(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iz(n,e){const t=G0()?Vh():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:i}=await Ez(Ce(n),r);return i||[]}async function Tz(n,e){const t=Ce(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&my(t.auth,i,e);const{email:s}=await K3(t.auth,i);s!==n.email&&await n.reload()}async function Sz(n,e,t){const r=Ce(n),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&my(r.auth,s,t);const{email:l}=await Y3(r.auth,s);l!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rz(n,e){return Ut(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Az(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Ce(n),s={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},l=await Ms(r,Rz(r.auth,s));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const u=r.providerData.find(({providerId:d})=>d==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}function bz(n,e){const t=Ce(n);return Ge(t.auth.app)?Promise.reject(yn(t.auth)):LO(t,e,null)}function Pz(n,e){return LO(Ce(n),null,e)}async function LO(n,e,t){const{auth:r}=n,s={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(s.email=e),t&&(s.password=t);const l=await Ms(n,z3(r,s));await n._updateTokensIfNecessary(l,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cz(n){var e,t;if(!n)return null;const{providerId:r}=n,i=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},s=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(n!=null&&n.idToken)){const l=(t=(e=cy(n.idToken))===null||e===void 0?void 0:e.firebase)===null||t===void 0?void 0:t.sign_in_provider;if(l){const u=l!=="anonymous"&&l!=="custom"?l:null;return new xu(s,u)}}if(!r)return null;switch(r){case"facebook.com":return new kz(s,i);case"github.com":return new xz(s,i);case"google.com":return new Oz(s,i);case"twitter.com":return new Nz(s,i,n.screenName||null);case"custom":case"anonymous":return new xu(s,null);default:return new xu(s,r,i)}}class xu{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class VO extends xu{constructor(e,t,r,i){super(e,t,r),this.username=i}}class kz extends xu{constructor(e,t){super(e,"facebook.com",t)}}class xz extends VO{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class Oz extends xu{constructor(e,t){super(e,"google.com",t)}}class Nz extends VO{constructor(e,t,r){super(e,"twitter.com",t,r)}}function Dz(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:Cz(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new za("enroll",e,t)}static _fromMfaPendingCredential(e){return new za("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,r;if(e!=null&&e.multiFactorSession){if(!((t=e.multiFactorSession)===null||t===void 0)&&t.pendingCredential)return za._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return za._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=Nt(e),i=t.customData._serverResponse,s=(i.mfaInfo||[]).map(u=>_f._fromServerResponse(r,u));de(i.mfaPendingCredential,r,"internal-error");const l=za._fromMfaPendingCredential(i.mfaPendingCredential);return new tI(l,s,async u=>{const d=await u._process(r,l);delete i.mfaInfo,delete i.mfaPendingCredential;const h=Object.assign(Object.assign({},i),{idToken:d.idToken,refreshToken:d.refreshToken});switch(t.operationType){case"signIn":const m=await Wr._fromIdTokenResponse(r,t.operationType,h);return await r._updateCurrentUser(m.user),m;case"reauthenticate":return de(t.user,r,"internal-error"),Wr._forOperation(t.user,t.operationType,h);default:An(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function Lz(n,e){var t;const r=Ce(n),i=e;return de(e.customData.operationType,r,"argument-error"),de((t=i.customData._serverResponse)===null||t===void 0?void 0:t.mfaPendingCredential,r,"argument-error"),tI._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mb(n,e){return Ut(n,"POST","/v2/accounts/mfaEnrollment:start",Ft(n,e))}function Vz(n,e){return Ut(n,"POST","/v2/accounts/mfaEnrollment:finalize",Ft(n,e))}function Mz(n,e){return Ut(n,"POST","/v2/accounts/mfaEnrollment:withdraw",Ft(n,e))}class nI{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>_f._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new nI(e)}async getSession(){return za._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,i=await this.getSession(),s=await Ms(this.user,r._process(this.user.auth,i,t));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Ms(this.user,Mz(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==t),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const Lv=new WeakMap;function Fz(n){const e=Ce(n);return Lv.has(e)||Lv.set(e,nI._fromUser(e)),Lv.get(e)}const mg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(mg,"1"),this.storage.removeItem(mg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uz=1e3,$z=10;class FO extends MO{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=EO(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,u,d)=>{this.notifyListeners(l,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},s=this.storage.getItem(r);w3()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,$z):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},Uz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}FO.type="LOCAL";const rI=FO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO extends MO{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}UO.type="SESSION";const il=UO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jz(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new gy(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(l).map(async h=>h(t.origin,s)),d=await jz(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gy.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bz{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,l;return new Promise((u,d)=>{const h=vf("",20);i.port1.start();const m=setTimeout(()=>{d(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(g){const _=g;if(_.data.eventId===h)switch(_.data.status){case"ack":clearTimeout(m),s=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(_.data.response);break;default:clearTimeout(m),clearTimeout(s),d(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(){return window}function zz(n){Yt().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(){return typeof Yt().WorkerGlobalScope<"u"&&typeof Yt().importScripts=="function"}async function Wz(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qz(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Hz(){return iI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O="firebaseLocalStorageDb",Kz=1,gg="firebaseLocalStorage",jO="fbase_key";class wf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function yy(n,e){return n.transaction([gg],e?"readwrite":"readonly").objectStore(gg)}function Gz(){const n=indexedDB.deleteDatabase($O);return new wf(n).toPromise()}function Hw(){const n=indexedDB.open($O,Kz);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(gg,{keyPath:jO})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(gg)?e(r):(r.close(),await Gz(),e(await Hw()))})})}async function gb(n,e,t){const r=yy(n,!0).put({[jO]:e,value:t});return new wf(r).toPromise()}async function Qz(n,e){const t=yy(n,!1).get(e),r=await new wf(t).toPromise();return r===void 0?null:r.value}function yb(n,e){const t=yy(n,!0).delete(e);return new wf(t).toPromise()}const Yz=800,Jz=3;class BO{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hw(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Jz)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gy._getInstance(Hz()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Wz(),!this.activeServiceWorker)return;this.sender=new Bz(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qz()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hw();return await gb(e,mg,"1"),await yb(e,mg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>gb(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Qz(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>yb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=yy(i,!1).getAll();return new wf(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Yz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}BO.type="LOCAL";const Uh=BO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(n,e){return Ut(n,"POST","/v2/accounts/mfaSignIn:start",Ft(n,e))}function Xz(n,e){return Ut(n,"POST","/v2/accounts/mfaSignIn:finalize",Ft(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv=TO("rcb"),Zz=new pf(3e4,6e4);class e6{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Yt().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return de(t6(t),e,"argument-error"),this.shouldResolveImmediately(t)&&ob(Yt().grecaptcha)?Promise.resolve(Yt().grecaptcha):new Promise((r,i)=>{const s=Yt().setTimeout(()=>{i(an(e,"network-request-failed"))},Zz.get());Yt()[Vv]=()=>{Yt().clearTimeout(s),delete Yt()[Vv];const u=Yt().grecaptcha;if(!u||!ob(u)){i(an(e,"internal-error"));return}const d=u.render;u.render=(h,m)=>{const g=d(h,m);return this.counter++,g},this.hostLanguage=t,r(u)};const l=`${b3()}?${mi({onload:Vv,render:"explicit",hl:t})}`;Y0(l).catch(()=>{clearTimeout(s),i(an(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=Yt().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function t6(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class n6{async load(e){return new O3(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch="recaptcha",r6={theme:"light",type:"image"};let i6=class{constructor(e,t,r=Object.assign({},r6)){this.parameters=r,this.type=ch,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Nt(e),this.isInvisible=this.parameters.size==="invisible",de(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof t=="string"?document.getElementById(t):t;de(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new n6:new e6,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(i=>{const s=l=>{l&&(this.tokenChangeListeners.delete(s),i(l))};this.tokenChangeListeners.add(s),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){de(!this.parameters.sitekey,this.auth,"argument-error"),de(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),de(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=Yt()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){de(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){de(G0()&&!iI(),this.auth,"internal-error"),await s6(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await l3(this.auth);de(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return de(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function s6(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Ka._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function o6(n,e,t){if(Ge(n.app))return Promise.reject(yn(n));const r=Nt(n),i=await _y(r,e,Ce(t));return new sI(i,s=>py(r,s))}async function a6(n,e,t){const r=Ce(n);await fy(!1,r,"phone");const i=await _y(r.auth,e,Ce(t));return new sI(i,s=>OO(r,s))}async function l6(n,e,t){const r=Ce(n);if(Ge(r.auth.app))return Promise.reject(yn(r.auth));const i=await _y(r.auth,e,Ce(t));return new sI(i,s=>NO(r,s))}async function _y(n,e,t){var r;if(!n._getRecaptchaConfig())try{await F3(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const s=i.session;if("phoneNumber"in i){de(s.type==="enroll",n,"internal-error");const l={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Oo(n,l,"mfaSmsEnrollment",async(m,g)=>{if(g.phoneEnrollmentInfo.captchaResponse===uh){de((t==null?void 0:t.type)===ch,m,"argument-error");const _=await Mv(m,g,t);return mb(m,_)}return mb(m,g)},"PHONE_PROVIDER").catch(m=>Promise.reject(m))).phoneSessionInfo.sessionInfo}else{de(s.type==="signin",n,"internal-error");const l=((r=i.multiFactorHint)===null||r===void 0?void 0:r.uid)||i.multiFactorUid;de(l,n,"missing-multi-factor-info");const u={mfaPendingCredential:s.credential,mfaEnrollmentId:l,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Oo(n,u,"mfaSmsSignIn",async(g,_)=>{if(_.phoneSignInInfo.captchaResponse===uh){de((t==null?void 0:t.type)===ch,g,"argument-error");const T=await Mv(g,_,t);return _b(g,T)}return _b(g,_)},"PHONE_PROVIDER").catch(g=>Promise.reject(g))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Oo(n,s,"sendVerificationCode",async(h,m)=>{if(m.captchaResponse===uh){de((t==null?void 0:t.type)===ch,h,"argument-error");const g=await Mv(h,m,t);return fb(h,g)}return fb(h,m)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).sessionInfo}}finally{t==null||t._reset()}}async function u6(n,e){const t=Ce(n);if(Ge(t.auth.app))return Promise.reject(yn(t.auth));await J0(t,e)}async function Mv(n,e,t){de(t.type===ch,n,"argument-error");const r=await t.verify();de(typeof r=="string",n,"argument-error");const i=Object.assign({},e);if("phoneEnrollmentInfo"in i){const s=i.phoneEnrollmentInfo.phoneNumber,l=i.phoneEnrollmentInfo.captchaResponse,u=i.phoneEnrollmentInfo.clientType,d=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r,captchaResponse:l,clientType:u,recaptchaVersion:d}}),i}else if("phoneSignInInfo"in i){const s=i.phoneSignInInfo.captchaResponse,l=i.phoneSignInInfo.clientType,u=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:s,clientType:l,recaptchaVersion:u}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sl=class Sm{constructor(e){this.providerId=Sm.PROVIDER_ID,this.auth=Nt(e)}verifyPhoneNumber(e,t){return _y(this.auth,e,Ce(t))}static credential(e,t){return Ka._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Sm.credentialFromTaggedObject(t)}static credentialFromError(e){return Sm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?Ka._fromTokenResponse(t,r):null}};sl.PROVIDER_ID="phone";sl.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(n,e){return e?wr(e):(de(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI extends wc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xs(e,this._buildIdpRequest())}_linkToIdToken(e,t){return xs(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return xs(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function c6(n){return xO(n.auth,new oI(n),n.bypassAuthState)}function d6(n){const{auth:e,user:t}=n;return de(t,e,"internal-error"),kO(t,new oI(n),n.bypassAuthState)}async function h6(n){const{auth:e,user:t}=n;return de(t,e,"internal-error"),J0(t,new oI(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:l,type:u}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return c6;case"linkViaPopup":case"linkViaRedirect":return h6;case"reauthViaPopup":case"reauthViaRedirect":return d6;default:An(this.auth,"internal-error")}}resolve(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6=new pf(2e3,1e4);async function p6(n,e,t){if(Ge(n.app))return Promise.reject(an(n,"operation-not-supported-in-this-environment"));const r=Nt(n);vc(n,e,qs);const i=pl(r,t);return new bs(r,"signInViaPopup",e,i).executeNotNull()}async function m6(n,e,t){const r=Ce(n);if(Ge(r.auth.app))return Promise.reject(an(r.auth,"operation-not-supported-in-this-environment"));vc(r.auth,e,qs);const i=pl(r.auth,t);return new bs(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function g6(n,e,t){const r=Ce(n);vc(r.auth,e,qs);const i=pl(r.auth,t);return new bs(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class bs extends zO{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,bs.currentPopupAction&&bs.currentPopupAction.cancel(),bs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return de(e,this.auth,"internal-error"),e}async onExecution(){pi(this.filter.length===1,"Popup operations only handle one event");const e=vf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(an(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(an(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(an(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,f6.get())};e()}}bs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6="pendingRedirect",dh=new Map;class _6 extends zO{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=dh.get(this.auth._key());if(!e){try{const r=await v6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}dh.set(this.auth._key(),e)}return this.bypassAuthState||dh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function v6(n,e){const t=qO(e),r=WO(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}async function aI(n,e){return WO(n)._set(qO(e),"true")}function w6(){dh.clear()}function lI(n,e){dh.set(n._key(),e)}function WO(n){return wr(n._redirectPersistence)}function qO(n){return Ha(y6,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E6(n,e,t){return I6(n,e,t)}async function I6(n,e,t){if(Ge(n.app))return Promise.reject(yn(n));const r=Nt(n);vc(n,e,qs),await r._initializationPromise;const i=pl(r,t);return await aI(i,r),i._openRedirect(r,e,"signInViaRedirect")}function T6(n,e,t){return S6(n,e,t)}async function S6(n,e,t){const r=Ce(n);if(vc(r.auth,e,qs),Ge(r.auth.app))return Promise.reject(yn(r.auth));await r.auth._initializationPromise;const i=pl(r.auth,t);await aI(i,r.auth);const s=await HO(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function R6(n,e,t){return A6(n,e,t)}async function A6(n,e,t){const r=Ce(n);vc(r.auth,e,qs),await r.auth._initializationPromise;const i=pl(r.auth,t);await fy(!1,r,e.providerId),await aI(i,r.auth);const s=await HO(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function b6(n,e){return await Nt(n)._initializationPromise,vy(n,e,!1)}async function vy(n,e,t=!1){if(Ge(n.app))return Promise.reject(yn(n));const r=Nt(n),i=pl(r,e),l=await new _6(r,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}async function HO(n){const e=vf(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P6=10*60*1e3;class KO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!C6(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!GO(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(an(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=P6&&this.cachedEventUids.clear(),this.cachedEventUids.has(vb(e))}saveEventToCache(e){this.cachedEventUids.add(vb(e)),this.lastProcessedEventTime=Date.now()}}function vb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function GO({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function C6(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return GO(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QO(n,e={}){return Ut(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,x6=/^https?/;async function O6(n){if(n.config.emulator)return;const{authorizedDomains:e}=await QO(n);for(const t of e)try{if(N6(t))return}catch{}An(n,"unauthorized-domain")}function N6(n){const e=Vh(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!x6.test(t))return!1;if(k6.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6=new pf(3e4,6e4);function wb(){const n=Yt().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function L6(n){return new Promise((e,t)=>{var r,i,s;function l(){wb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{wb(),t(an(n,"network-request-failed"))},timeout:D6.get()})}if(!((i=(r=Yt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Yt().gapi)===null||s===void 0)&&s.load)l();else{const u=TO("iframefcb");return Yt()[u]=()=>{gapi.load?l():t(an(n,"network-request-failed"))},Y0(`${C3()}?onload=${u}`).catch(d=>t(d))}}).catch(e=>{throw Rm=null,e})}let Rm=null;function V6(n){return Rm=Rm||L6(n),Rm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M6=new pf(5e3,15e3),F6="__/auth/iframe",U6="emulator/auth/iframe",$6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},j6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function B6(n){const e=n.config;de(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Q0(e,U6):`https://${n.config.authDomain}/${F6}`,r={apiKey:e.apiKey,appName:n.name,v:Ar},i=j6.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${mi(r).slice(1)}`}async function z6(n){const e=await V6(n),t=Yt().gapi;return de(t,n,"internal-error"),e.open({where:document.body,url:B6(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$6,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const l=an(n,"network-request-failed"),u=Yt().setTimeout(()=>{s(l)},M6.get());function d(){Yt().clearTimeout(u),i(r)}r.ping(d).then(d,()=>{s(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},q6=500,H6=600,K6="_blank",G6="http://localhost";class Eb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Q6(n,e,t,r=q6,i=H6){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const d=Object.assign(Object.assign({},W6),{width:r.toString(),height:i.toString(),top:s,left:l}),h=We().toLowerCase();t&&(u=yO(h)?K6:t),mO(h)&&(e=e||G6,d.scrollbars="yes");const m=Object.entries(d).reduce((_,[T,I])=>`${_}${T}=${I},`,"");if(v3(h)&&u!=="_self")return Y6(e||"",u),new Eb(null);const g=window.open(e||"",u,m);de(g,n,"popup-blocked");try{g.focus()}catch{}return new Eb(g)}function Y6(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J6="__/auth/handler",X6="emulator/auth/handler",Z6=encodeURIComponent("fac");async function Kw(n,e,t,r,i,s){de(n.config.authDomain,n,"auth-domain-config-required"),de(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ar,eventId:i};if(e instanceof qs){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",mC(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries(s||{}))l[m]=g}if(e instanceof Ec){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(l.scopes=m.join(","))}n.tenantId&&(l.tid=n.tenantId);const u=l;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const d=await n._getAppCheckToken(),h=d?`#${Z6}=${encodeURIComponent(d)}`:"";return`${e9(n)}?${mi(u).slice(1)}${h}`}function e9({config:n}){return n.emulator?Q0(n,X6):`https://${n.authDomain}/${J6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="webStorageSupport";class t9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=il,this._completeRedirectFn=vy,this._overrideRedirectResult=lI}async _openPopup(e,t,r,i){var s;pi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const l=await Kw(e,t,r,Vh(),i);return Q6(e,l,vf())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await Kw(e,t,r,Vh(),i);return zz(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(pi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await z6(e),r=new KO(e);return t.register("authEvent",i=>(de(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Fv,{type:Fv},i=>{var s;const l=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Fv];l!==void 0&&t(!!l),An(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=O6(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return EO()||gO()||gf()}}const n9=t9;class r9{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return ji("unexpected MultiFactorSessionType")}}}class uI extends r9{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new uI(e)}_finalizeEnroll(e,t,r){return Vz(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return Xz(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class YO{constructor(){}static assertion(e){return uI._fromCredential(e)}}YO.FACTOR_ID="phone";var Ib="@firebase/auth",Tb="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s9(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function o9(n){Qi(new zr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=r.options;de(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:l,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:IO(n)},h=new R3(r,i,s,d);return U3(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Qi(new zr("auth-internal",e=>{const t=Nt(e.getProvider("auth").getImmediate());return(r=>new i9(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Er(Ib,Tb,s9(n)),Er(Ib,Tb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a9=5*60;EE("authIdTokenMaxAge");function l9(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}A3({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=an("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",l9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});o9("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u9=2e3;async function c9(n,e,t){var r;const{BuildInfo:i}=ol();pi(e.sessionId,"AuthEvent did not contain a session ID");const s=await m9(e.sessionId),l={};return gf()?l.ibi=i.packageName:mf()?l.apn=i.packageName:An(n,"operation-not-supported-in-this-environment"),i.displayName&&(l.appDisplayName=i.displayName),l.sessionId=s,Kw(n,t,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,l)}async function d9(n){const{BuildInfo:e}=ol(),t={};gf()?t.iosBundleId=e.packageName:mf()?t.androidPackageName=e.packageName:An(n,"operation-not-supported-in-this-environment"),await QO(n,t)}function h9(n){const{cordova:e}=ol();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(n):i=e.InAppBrowser.open(n,_3()?"_blank":"_system","location=yes"),t(i)})})}async function f9(n,e,t){const{cordova:r}=ol();let i=()=>{};try{await new Promise((s,l)=>{let u=null;function d(){var g;s();const _=(g=r.plugins.browsertab)===null||g===void 0?void 0:g.close;typeof _=="function"&&_(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function h(){u||(u=window.setTimeout(()=>{l(an(n,"redirect-cancelled-by-user"))},u9))}function m(){(document==null?void 0:document.visibilityState)==="visible"&&h()}e.addPassiveListener(d),document.addEventListener("resume",h,!1),mf()&&document.addEventListener("visibilitychange",m,!1),i=()=>{e.removePassiveListener(d),document.removeEventListener("resume",h,!1),document.removeEventListener("visibilitychange",m,!1),u&&window.clearTimeout(u)}})}finally{i()}}function p9(n){var e,t,r,i,s,l,u,d,h,m;const g=ol();de(typeof((e=g==null?void 0:g.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),de(typeof((t=g==null?void 0:g.BuildInfo)===null||t===void 0?void 0:t.packageName)<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),de(typeof((s=(i=(r=g==null?void 0:g.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),de(typeof((d=(u=(l=g==null?void 0:g.cordova)===null||l===void 0?void 0:l.plugins)===null||u===void 0?void 0:u.browsertab)===null||d===void 0?void 0:d.isAvailable)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),de(typeof((m=(h=g==null?void 0:g.cordova)===null||h===void 0?void 0:h.InAppBrowser)===null||m===void 0?void 0:m.open)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function m9(n){const e=g9(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(i=>i.toString(16).padStart(2,"0")).join("")}function g9(n){if(pi(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y9=20;class _9 extends KO{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function v9(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:I9(),postBody:null,tenantId:n.tenantId,error:an(n,"no-auth-event")}}function w9(n,e){return Gw()._set(Qw(n),e)}async function Sb(n){const e=await Gw()._get(Qw(n));return e&&await Gw()._remove(Qw(n)),e}function E9(n,e){var t,r;const i=S9(e);if(i.includes("/__/auth/callback")){const s=Am(i),l=s.firebaseError?T9(decodeURIComponent(s.firebaseError)):null,u=(r=(t=l==null?void 0:l.code)===null||t===void 0?void 0:t.split("auth/"))===null||r===void 0?void 0:r[1],d=u?an(u):null;return d?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:d,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:i,postBody:null}}return null}function I9(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<y9;t++){const r=Math.floor(Math.random()*e.length);n.push(e.charAt(r))}return n.join("")}function Gw(){return wr(rI)}function Qw(n){return Ha("authEvent",n.config.apiKey,n.name)}function T9(n){try{return JSON.parse(n)}catch{return null}}function S9(n){const e=Am(n),t=e.link?decodeURIComponent(e.link):void 0,r=Am(t).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Am(i).link||i||r||t||n}function Am(n){if(!(n!=null&&n.includes("?")))return{};const[e,...t]=n.split("?");return di(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R9=500;class A9{constructor(){this._redirectPersistence=il,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=vy,this._overrideRedirectResult=lI}async _initialize(e){const t=e._key();let r=this.eventManagers.get(t);return r||(r=new _9(e),this.eventManagers.set(t,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){An(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,r,i){p9(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),w6(),await this._originValidation(e);const l=v9(e,r,i);await w9(e,l);const u=await c9(e,l,t),d=await h9(u);return f9(e,s,d)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=d9(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=ol(),l=setTimeout(async()=>{await Sb(e),t.onEvent(Rb())},R9),u=async m=>{clearTimeout(l);const g=await Sb(e);let _=null;g&&(m!=null&&m.url)&&(_=E9(g,m.url)),t.onEvent(_||Rb())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,u);const d=i,h=`${s.packageName.toLowerCase()}://`;ol().handleOpenURL=async m=>{if(m.toLowerCase().startsWith(h)&&u({url:m}),typeof d=="function")try{d(m)}catch(g){console.error(g)}}}}const b9=A9;function Rb(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:an("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P9(n,e){Nt(n)._logFramework(e)}var C9="@firebase/auth-compat",k9="0.5.19";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x9=1e3;function hh(){var n;return((n=self==null?void 0:self.location)===null||n===void 0?void 0:n.protocol)||null}function O9(){return hh()==="http:"||hh()==="https:"}function JO(n=We()){return!!((hh()==="file:"||hh()==="ionic:"||hh()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function N9(){return kg()||IE()}function D9(){return SE()&&(document==null?void 0:document.documentMode)===11}function L9(n=We()){return/Edge\/\d+/.test(n)}function V9(n=We()){return D9()||L9(n)}function XO(){try{const n=self.localStorage,e=vf();if(n)return n.setItem(e,"1"),n.removeItem(e),V9()?gh():!0}catch{return cI()&&gh()}return!1}function cI(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Uv(){return(O9()||TE()||JO())&&!N9()&&XO()&&!cI()}function ZO(){return JO()&&typeof document<"u"}async function M9(){return ZO()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},x9);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function F9(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r={LOCAL:"local",NONE:"none",SESSION:"session"},Cd=de,eN="persistence";function U9(n,e){if(Cd(Object.values(_r).includes(e),n,"invalid-persistence-type"),kg()){Cd(e!==_r.SESSION,n,"unsupported-persistence-type");return}if(IE()){Cd(e===_r.NONE,n,"unsupported-persistence-type");return}if(cI()){Cd(e===_r.NONE||e===_r.LOCAL&&gh(),n,"unsupported-persistence-type");return}Cd(e===_r.NONE||XO(),n,"unsupported-persistence-type")}async function Yw(n){await n._initializationPromise;const e=tN(),t=Ha(eN,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistence())}function $9(n,e){const t=tN();if(!t)return[];const r=Ha(eN,n,e);switch(t.getItem(r)){case _r.NONE:return[tc];case _r.LOCAL:return[Uh,il];case _r.SESSION:return[il];default:return[]}}function tN(){var n;try{return((n=F9())===null||n===void 0?void 0:n.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j9=de;class bo{constructor(){this.browserResolver=wr(n9),this.cordovaResolver=wr(b9),this.underlyingResolver=null,this._redirectPersistence=il,this._completeRedirectFn=vy,this._overrideRedirectResult=lI}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,r,i)}async _openRedirect(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,r,i)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return ZO()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return j9(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await M9();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(n){return n.unwrap()}function B9(n){return n.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z9(n){return rN(n)}function W9(n,e){var t;const r=(t=e.customData)===null||t===void 0?void 0:t._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new q9(n,Lz(n,e))}else if(r){const i=rN(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function rN(n){const{_tokenResponse:e}=n instanceof gn?n.customData:n;if(!e)return null;if(!(n instanceof gn)&&"temporaryProof"in e&&"phoneNumber"in e)return sl.credentialFromResult(n);const t=e.providerId;if(!t||t===bd.PASSWORD)return null;let r;switch(t){case bd.GOOGLE:r=Li;break;case bd.FACEBOOK:r=Di;break;case bd.GITHUB:r=Vi;break;case bd.TWITTER:r=Mi;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:l,pendingToken:u,nonce:d}=e;return!s&&!l&&!i&&!u?null:u?t.startsWith("saml.")?nc._create(t,u):Zi._fromParams({providerId:t,signInMethod:t,pendingToken:u,idToken:i,accessToken:s}):new ku(t).credential({idToken:i,accessToken:s,rawNonce:d})}return n instanceof gn?r.credentialFromError(n):r.credentialFromResult(n)}function tr(n,e){return e.catch(t=>{throw t instanceof gn&&W9(n,t),t}).then(t=>{const r=t.operationType,i=t.user;return{operationType:r,credential:z9(t),additionalUserInfo:Dz(t),user:Ps.getOrCreate(i)}})}async function Jw(n,e){const t=await e;return{verificationId:t.verificationId,confirm:r=>tr(n,t.confirm(r))}}class q9{constructor(e,t){this.resolver=t,this.auth=B9(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return tr(nN(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this._delegate=e,this.multiFactor=Fz(e)}static getOrCreate(e){return Ps.USER_MAP.has(e)||Ps.USER_MAP.set(e,new Ps(e)),Ps.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return tr(this.auth,OO(this._delegate,e))}async linkWithPhoneNumber(e,t){return Jw(this.auth,a6(this._delegate,e,t))}async linkWithPopup(e){return tr(this.auth,g6(this._delegate,e,bo))}async linkWithRedirect(e){return await Yw(Nt(this.auth)),R6(this._delegate,e,bo)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return tr(this.auth,NO(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return Jw(this.auth,l6(this._delegate,e,t))}reauthenticateWithPopup(e){return tr(this.auth,m6(this._delegate,e,bo))}async reauthenticateWithRedirect(e){return await Yw(Nt(this.auth)),T6(this._delegate,e,bo)}sendEmailVerification(e){return Tz(this._delegate,e)}async unlink(e){return await uz(this._delegate,e),this}updateEmail(e){return bz(this._delegate,e)}updatePassword(e){return Pz(this._delegate,e)}updatePhoneNumber(e){return u6(this._delegate,e)}updateProfile(e){return Az(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return Sz(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ps.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd=de;let Xw=class{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;kd(r,"invalid-api-key",{appName:e.name}),kd(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?bo:void 0;this._delegate=t.initialize({options:{persistence:H9(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Z5),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ps.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){$3(this._delegate,e,t)}applyActionCode(e){return pz(this._delegate,e)}checkActionCode(e){return DO(this._delegate,e)}confirmPasswordReset(e,t){return fz(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return tr(this._delegate,gz(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return Iz(this._delegate,e)}isSignInWithEmailLink(e){return vz(this._delegate,e)}async getRedirectResult(){kd(Uv(),this._delegate,"operation-not-supported-in-this-environment");const e=await b6(this._delegate,bo);return e?tr(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){P9(this._delegate,e)}onAuthStateChanged(e,t,r){const{next:i,error:s,complete:l}=Ab(e,t,r);return this._delegate.onAuthStateChanged(i,s,l)}onIdTokenChanged(e,t,r){const{next:i,error:s,complete:l}=Ab(e,t,r);return this._delegate.onIdTokenChanged(i,s,l)}sendSignInLinkToEmail(e,t){return _z(this._delegate,e,t)}sendPasswordResetEmail(e,t){return hz(this._delegate,e,t||void 0)}async setPersistence(e){U9(this._delegate,e);let t;switch(e){case _r.SESSION:t=il;break;case _r.LOCAL:t=await wr(Uh)._isAvailable()?Uh:rI;break;case _r.NONE:t=tc;break;default:return An("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return tr(this._delegate,lz(this._delegate))}signInWithCredential(e){return tr(this._delegate,py(this._delegate,e))}signInWithCustomToken(e){return tr(this._delegate,dz(this._delegate,e))}signInWithEmailAndPassword(e,t){return tr(this._delegate,yz(this._delegate,e,t))}signInWithEmailLink(e,t){return tr(this._delegate,wz(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Jw(this._delegate,o6(this._delegate,e,t))}async signInWithPopup(e){return kd(Uv(),this._delegate,"operation-not-supported-in-this-environment"),tr(this._delegate,p6(this._delegate,e,bo))}async signInWithRedirect(e){return kd(Uv(),this._delegate,"operation-not-supported-in-this-environment"),await Yw(this._delegate),E6(this._delegate,e,bo)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return mz(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}};Xw.Persistence=_r;function Ab(n,e,t){let r=n;typeof n!="function"&&({next:r,error:e,complete:t}=n);const i=r;return{next:l=>i(l&&Ps.getOrCreate(l)),error:e,complete:t}}function H9(n,e){const t=$9(n,e);if(typeof self<"u"&&!t.includes(Uh)&&t.push(Uh),typeof window<"u")for(const r of[rI,il])t.includes(r)||t.push(r);return t.includes(tc)||t.push(tc),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{static credential(e,t){return sl.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new sl(nN(uc.auth()))}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}dI.PHONE_SIGN_IN_METHOD=sl.PHONE_SIGN_IN_METHOD;dI.PROVIDER_ID=sl.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K9=de;class G9{constructor(e,t,r=uc.app()){var i;K9((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new i6(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q9="auth-compat";function Y9(n){n.INTERNAL.registerComponent(new zr(Q9,e=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new Xw(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:cu.EMAIL_SIGNIN,PASSWORD_RESET:cu.PASSWORD_RESET,RECOVER_EMAIL:cu.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:cu.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:cu.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:cu.VERIFY_EMAIL}},EmailAuthProvider:na,FacebookAuthProvider:Di,GithubAuthProvider:Vi,GoogleAuthProvider:Li,OAuthProvider:ku,SAMLAuthProvider:fg,PhoneAuthProvider:dI,PhoneMultiFactorGenerator:YO,RecaptchaVerifier:G9,TwitterAuthProvider:Mi,Auth:Xw,AuthCredential:wc,Error:gn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(C9,k9)}Y9(uc);const J9={apiKey:"AIzaSyBfci7Z23vmdgouaJ8rgaIQf-GtNeNbXF4",authDomain:"clone-3dd35.firebaseapp.com",projectId:"clone-3dd35",storageBucket:"clone-3dd35.firebasestorage.app",messagingSenderId:"446527022418",appId:"1:446527022418:web:399ed7658ea306373c468b"},iN=uc.initializeApp(J9),yg=x4(iN),sN=iN.firestore(),X9=()=>{var i;const[{basket:n,user:e},t]=K.useContext(Us);console.log(n.length);const r=n==null?void 0:n.reduce((s,l)=>l.amount+s,0);return j.jsxs("section",{className:Es.fixed,children:[j.jsx("section",{children:j.jsxs("div",{className:Es.header__container,children:[j.jsxs("div",{className:Es.logo__container,children:[j.jsx(ci,{to:"/",children:j.jsx("img",{src:"https://pngimg.com/uploads/amazon/amazon_PNG11.png",alt:"amazon logo"})}),j.jsx("span",{children:j.jsx(bM,{})}),j.jsxs("div",{className:Es.delivery,children:[j.jsx("p",{children:"delievered to"}),j.jsx("span",{children:"United States"})]})]}),j.jsxs("div",{className:Es.search,children:[j.jsx("select",{name:"",id:"",children:j.jsx("option",{value:"",children:"All"})}),j.jsx("input",{type:"text",name:"",id:"",placeholder:"search product"}),j.jsx(PM,{size:38})]}),j.jsxs("div",{className:Es.order__container,children:[j.jsxs(ci,{to:"",className:Es.language,children:[j.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/en/thumb/a/a4/Flag_of_the_United_States.svg/1024px-Flag_of_the_United_States.svg.png",alt:"Flag of the United States"}),j.jsx("select",{children:j.jsx("option",{value:"",children:"EN"})})]}),j.jsx(ci,{to:!e&&"/auth",children:j.jsx("div",{children:e?j.jsxs(j.Fragment,{children:[j.jsxs("p",{children:["Hello ",(i=e==null?void 0:e.email)==null?void 0:i.split("@")[0]]}),j.jsx("span",{onClick:()=>yg.signOut(),children:"Sign Out"})]}):j.jsxs(j.Fragment,{children:[j.jsx("p",{children:" Hello, Sign In"}),j.jsx("span",{children:"Account & Lists"})]})})}),j.jsxs(ci,{to:"/Orders",children:[j.jsx("p",{children:"Returns"}),j.jsx("span",{children:"& Orders"})]}),j.jsxs(ci,{to:"/cart",className:Es.cart,children:[j.jsx(CM,{size:35}),j.jsx("span",{children:r})]})]})]})}),j.jsx(xM,{})]})};function Ic({children:n}){return j.jsxs("div",{children:[j.jsx(X9,{}),n]})}var $v={},xd={},Xp={},Zp={},jv={exports:{}},Bv,bb;function Z9(){if(bb)return Bv;bb=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Bv=n,Bv}var zv,Pb;function eW(){if(Pb)return zv;Pb=1;var n=Z9();function e(){}function t(){}return t.resetWarningCache=e,zv=function(){function r(l,u,d,h,m,g){if(g!==n){var _=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw _.name="Invariant Violation",_}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},zv}var Cb;function oN(){return Cb||(Cb=1,jv.exports=eW()()),jv.exports}var kb;function tW(){return kb||(kb=1,function(n){(function(e,t){t(n,Ko(),oN())})(Zp,function(e,t,r){Object.defineProperty(e,"__esModule",{value:!0}),e.setHasSupportToCaptureOption=I;var i=l(t),s=l(r);function l(M){return M&&M.__esModule?M:{default:M}}var u=Object.assign||function(M){for(var L=1;L<arguments.length;L++){var B=arguments[L];for(var $ in B)Object.prototype.hasOwnProperty.call(B,$)&&(M[$]=B[$])}return M};function d(M,L){var B={};for(var $ in M)L.indexOf($)>=0||Object.prototype.hasOwnProperty.call(M,$)&&(B[$]=M[$]);return B}function h(M,L){if(!(M instanceof L))throw new TypeError("Cannot call a class as a function")}var m=function(){function M(L,B){for(var $=0;$<B.length;$++){var W=B[$];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(L,W.key,W)}}return function(L,B,$){return B&&M(L.prototype,B),$&&M(L,$),L}}();function g(M,L){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return L&&(typeof L=="object"||typeof L=="function")?L:M}function _(M,L){if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof L);M.prototype=Object.create(L&&L.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),L&&(Object.setPrototypeOf?Object.setPrototypeOf(M,L):M.__proto__=L)}var T=!1;function I(M){T=M}try{addEventListener("test",null,Object.defineProperty({},"capture",{get:function(){I(!0)}}))}catch{}function R(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{capture:!0};return T?M:M.capture}function A(M){if("touches"in M){var L=M.touches[0],B=L.pageX,$=L.pageY;return{x:B,y:$}}var W=M.screenX,D=M.screenY;return{x:W,y:D}}var V=function(M){_(L,M);function L(){var B;h(this,L);for(var $=arguments.length,W=Array($),D=0;D<$;D++)W[D]=arguments[D];var b=g(this,(B=L.__proto__||Object.getPrototypeOf(L)).call.apply(B,[this].concat(W)));return b._handleSwipeStart=b._handleSwipeStart.bind(b),b._handleSwipeMove=b._handleSwipeMove.bind(b),b._handleSwipeEnd=b._handleSwipeEnd.bind(b),b._onMouseDown=b._onMouseDown.bind(b),b._onMouseMove=b._onMouseMove.bind(b),b._onMouseUp=b._onMouseUp.bind(b),b._setSwiperRef=b._setSwiperRef.bind(b),b}return m(L,[{key:"componentDidMount",value:function(){this.swiper&&this.swiper.addEventListener("touchmove",this._handleSwipeMove,R({capture:!0,passive:!1}))}},{key:"componentWillUnmount",value:function(){this.swiper&&this.swiper.removeEventListener("touchmove",this._handleSwipeMove,R({capture:!0,passive:!1}))}},{key:"_onMouseDown",value:function($){this.props.allowMouseEvents&&(this.mouseDown=!0,document.addEventListener("mouseup",this._onMouseUp),document.addEventListener("mousemove",this._onMouseMove),this._handleSwipeStart($))}},{key:"_onMouseMove",value:function($){this.mouseDown&&this._handleSwipeMove($)}},{key:"_onMouseUp",value:function($){this.mouseDown=!1,document.removeEventListener("mouseup",this._onMouseUp),document.removeEventListener("mousemove",this._onMouseMove),this._handleSwipeEnd($)}},{key:"_handleSwipeStart",value:function($){var W=A($),D=W.x,b=W.y;this.moveStart={x:D,y:b},this.props.onSwipeStart($)}},{key:"_handleSwipeMove",value:function($){if(this.moveStart){var W=A($),D=W.x,b=W.y,C=D-this.moveStart.x,E=b-this.moveStart.y;this.moving=!0;var x=this.props.onSwipeMove({x:C,y:E},$);x&&$.cancelable&&$.preventDefault(),this.movePosition={deltaX:C,deltaY:E}}}},{key:"_handleSwipeEnd",value:function($){this.props.onSwipeEnd($);var W=this.props.tolerance;this.moving&&this.movePosition&&(this.movePosition.deltaX<-W?this.props.onSwipeLeft(1,$):this.movePosition.deltaX>W&&this.props.onSwipeRight(1,$),this.movePosition.deltaY<-W?this.props.onSwipeUp(1,$):this.movePosition.deltaY>W&&this.props.onSwipeDown(1,$)),this.moveStart=null,this.moving=!1,this.movePosition=null}},{key:"_setSwiperRef",value:function($){this.swiper=$,this.props.innerRef($)}},{key:"render",value:function(){var $=this.props;$.tagName;var W=$.className,D=$.style,b=$.children;$.allowMouseEvents,$.onSwipeUp,$.onSwipeDown,$.onSwipeLeft,$.onSwipeRight,$.onSwipeStart,$.onSwipeMove,$.onSwipeEnd,$.innerRef,$.tolerance;var C=d($,["tagName","className","style","children","allowMouseEvents","onSwipeUp","onSwipeDown","onSwipeLeft","onSwipeRight","onSwipeStart","onSwipeMove","onSwipeEnd","innerRef","tolerance"]);return i.default.createElement(this.props.tagName,u({ref:this._setSwiperRef,onMouseDown:this._onMouseDown,onTouchStart:this._handleSwipeStart,onTouchEnd:this._handleSwipeEnd,className:W,style:D},C),b)}}]),L}(t.Component);V.displayName="ReactSwipe",V.propTypes={tagName:s.default.string,className:s.default.string,style:s.default.object,children:s.default.node,allowMouseEvents:s.default.bool,onSwipeUp:s.default.func,onSwipeDown:s.default.func,onSwipeLeft:s.default.func,onSwipeRight:s.default.func,onSwipeStart:s.default.func,onSwipeMove:s.default.func,onSwipeEnd:s.default.func,innerRef:s.default.func,tolerance:s.default.number.isRequired},V.defaultProps={tagName:"div",allowMouseEvents:!1,onSwipeUp:function(){},onSwipeDown:function(){},onSwipeLeft:function(){},onSwipeRight:function(){},onSwipeStart:function(){},onSwipeMove:function(){},onSwipeEnd:function(){},innerRef:function(){},tolerance:0},e.default=V})}(Zp)),Zp}var xb;function aN(){return xb||(xb=1,function(n){(function(e,t){t(n,tW())})(Xp,function(e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=i(t);function i(s){return s&&s.__esModule?s:{default:s}}e.default=r.default})}(Xp)),Xp}var Od={},Wv={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var Ob;function nW(){return Ob||(Ob=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var s="",l=0;l<arguments.length;l++){var u=arguments[l];u&&(s=i(s,r(u)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var l="";for(var u in s)e.call(s,u)&&s[u]&&(l=i(l,u));return l}function i(s,l){return l?s?s+" "+l:s+l:s}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(Wv)),Wv.exports}var Nb;function lN(){if(Nb)return Od;Nb=1,Object.defineProperty(Od,"__esModule",{value:!0}),Od.default=void 0;var n=e(nW());function e(i){return i&&i.__esModule?i:{default:i}}function t(i,s,l){return s in i?Object.defineProperty(i,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[s]=l,i}var r={ROOT:function(s){return(0,n.default)(t({"carousel-root":!0},s||"",!!s))},CAROUSEL:function(s){return(0,n.default)({carousel:!0,"carousel-slider":s})},WRAPPER:function(s,l){return(0,n.default)({"thumbs-wrapper":!s,"slider-wrapper":s,"axis-horizontal":l==="horizontal","axis-vertical":l!=="horizontal"})},SLIDER:function(s,l){return(0,n.default)({thumbs:!s,slider:s,animated:!l})},ITEM:function(s,l,u){return(0,n.default)({thumb:!s,slide:s,selected:l,previous:u})},ARROW_PREV:function(s){return(0,n.default)({"control-arrow control-prev":!0,"control-disabled":s})},ARROW_NEXT:function(s){return(0,n.default)({"control-arrow control-next":!0,"control-disabled":s})},DOT:function(s){return(0,n.default)({dot:!0,selected:s})}};return Od.default=r,Od}var Nd={},Dd={},Db;function rW(){if(Db)return Dd;Db=1,Object.defineProperty(Dd,"__esModule",{value:!0}),Dd.outerWidth=void 0;var n=function(t){var r=t.offsetWidth,i=getComputedStyle(t);return r+=parseInt(i.marginLeft)+parseInt(i.marginRight),r};return Dd.outerWidth=n,Dd}var Ld={},Lb;function hI(){if(Lb)return Ld;Lb=1,Object.defineProperty(Ld,"__esModule",{value:!0}),Ld.default=void 0;var n=function(t,r,i){var s=t===0?t:t+r,l=i==="horizontal"?[s,0,0]:[0,s,0],u="translate3d",d="("+l.join(",")+")";return u+d};return Ld.default=n,Ld}var Vd={},Vb;function uN(){if(Vb)return Vd;Vb=1,Object.defineProperty(Vd,"__esModule",{value:!0}),Vd.default=void 0;var n=function(){return window};return Vd.default=n,Vd}var Mb;function cN(){if(Mb)return Nd;Mb=1,Object.defineProperty(Nd,"__esModule",{value:!0}),Nd.default=void 0;var n=d(Ko()),e=l(lN()),t=rW(),r=l(hI()),i=l(aN()),s=l(uN());function l(b){return b&&b.__esModule?b:{default:b}}function u(){if(typeof WeakMap!="function")return null;var b=new WeakMap;return u=function(){return b},b}function d(b){if(b&&b.__esModule)return b;if(b===null||h(b)!=="object"&&typeof b!="function")return{default:b};var C=u();if(C&&C.has(b))return C.get(b);var E={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var k in b)if(Object.prototype.hasOwnProperty.call(b,k)){var O=x?Object.getOwnPropertyDescriptor(b,k):null;O&&(O.get||O.set)?Object.defineProperty(E,k,O):E[k]=b[k]}return E.default=b,C&&C.set(b,E),E}function h(b){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?h=function(E){return typeof E}:h=function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},h(b)}function m(){return m=Object.assign||function(b){for(var C=1;C<arguments.length;C++){var E=arguments[C];for(var x in E)Object.prototype.hasOwnProperty.call(E,x)&&(b[x]=E[x])}return b},m.apply(this,arguments)}function g(b,C){if(!(b instanceof C))throw new TypeError("Cannot call a class as a function")}function _(b,C){for(var E=0;E<C.length;E++){var x=C[E];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(b,x.key,x)}}function T(b,C,E){return C&&_(b.prototype,C),b}function I(b,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(C&&C.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),C&&R(b,C)}function R(b,C){return R=Object.setPrototypeOf||function(x,k){return x.__proto__=k,x},R(b,C)}function A(b){var C=L();return function(){var x=B(b),k;if(C){var O=B(this).constructor;k=Reflect.construct(x,arguments,O)}else k=x.apply(this,arguments);return V(this,k)}}function V(b,C){return C&&(h(C)==="object"||typeof C=="function")?C:M(b)}function M(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function L(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function B(b){return B=Object.setPrototypeOf?Object.getPrototypeOf:function(E){return E.__proto__||Object.getPrototypeOf(E)},B(b)}function $(b,C,E){return C in b?Object.defineProperty(b,C,{value:E,enumerable:!0,configurable:!0,writable:!0}):b[C]=E,b}var W=function(C){return C.hasOwnProperty("key")},D=function(b){I(E,b);var C=A(E);function E(x){var k;return g(this,E),k=C.call(this,x),$(M(k),"itemsWrapperRef",void 0),$(M(k),"itemsListRef",void 0),$(M(k),"thumbsRef",void 0),$(M(k),"setItemsWrapperRef",function(O){k.itemsWrapperRef=O}),$(M(k),"setItemsListRef",function(O){k.itemsListRef=O}),$(M(k),"setThumbsRef",function(O,X){k.thumbsRef||(k.thumbsRef=[]),k.thumbsRef[X]=O}),$(M(k),"updateSizes",function(){if(!(!k.props.children||!k.itemsWrapperRef||!k.thumbsRef)){var O=n.Children.count(k.props.children),X=k.itemsWrapperRef.clientWidth,F=k.props.thumbWidth?k.props.thumbWidth:(0,t.outerWidth)(k.thumbsRef[0]),me=Math.floor(X/F),oe=me<O,Z=oe?O-me:0;k.setState(function(pe,he){return{itemSize:F,visibleItems:me,firstItem:oe?k.getFirstItem(he.selectedItem):0,lastPosition:Z,showArrows:oe}})}}),$(M(k),"handleClickItem",function(O,X,F){if(!W(F)||F.key==="Enter"){var me=k.props.onSelectItem;typeof me=="function"&&me(O,X)}}),$(M(k),"onSwipeStart",function(){k.setState({swiping:!0})}),$(M(k),"onSwipeEnd",function(){k.setState({swiping:!1})}),$(M(k),"onSwipeMove",function(O){var X=O.x;if(!k.state.itemSize||!k.itemsWrapperRef||!k.state.visibleItems)return!1;var F=0,me=n.Children.count(k.props.children),oe=-(k.state.firstItem*100)/k.state.visibleItems,Z=Math.max(me-k.state.visibleItems,0),pe=-Z*100/k.state.visibleItems;oe===F&&X>0&&(X=0),oe===pe&&X<0&&(X=0);var he=k.itemsWrapperRef.clientWidth,q=oe+100/(he/X);return k.itemsListRef&&["WebkitTransform","MozTransform","MsTransform","OTransform","transform","msTransform"].forEach(function(ie){k.itemsListRef.style[ie]=(0,r.default)(q,"%",k.props.axis)}),!0}),$(M(k),"slideRight",function(O){k.moveTo(k.state.firstItem-(typeof O=="number"?O:1))}),$(M(k),"slideLeft",function(O){k.moveTo(k.state.firstItem+(typeof O=="number"?O:1))}),$(M(k),"moveTo",function(O){O=O<0?0:O,O=O>=k.state.lastPosition?k.state.lastPosition:O,k.setState({firstItem:O})}),k.state={selectedItem:x.selectedItem,swiping:!1,showArrows:!1,firstItem:0,visibleItems:0,lastPosition:0},k}return T(E,[{key:"componentDidMount",value:function(){this.setupThumbs()}},{key:"componentDidUpdate",value:function(k){this.props.selectedItem!==this.state.selectedItem&&this.setState({selectedItem:this.props.selectedItem,firstItem:this.getFirstItem(this.props.selectedItem)}),this.props.children!==k.children&&this.updateSizes()}},{key:"componentWillUnmount",value:function(){this.destroyThumbs()}},{key:"setupThumbs",value:function(){(0,s.default)().addEventListener("resize",this.updateSizes),(0,s.default)().addEventListener("DOMContentLoaded",this.updateSizes),this.updateSizes()}},{key:"destroyThumbs",value:function(){(0,s.default)().removeEventListener("resize",this.updateSizes),(0,s.default)().removeEventListener("DOMContentLoaded",this.updateSizes)}},{key:"getFirstItem",value:function(k){var O=k;return k>=this.state.lastPosition&&(O=this.state.lastPosition),k<this.state.firstItem+this.state.visibleItems&&(O=this.state.firstItem),k<this.state.firstItem&&(O=k),O}},{key:"renderItems",value:function(){var k=this;return this.props.children.map(function(O,X){var F=e.default.ITEM(!1,X===k.state.selectedItem),me={key:X,ref:function(Z){return k.setThumbsRef(Z,X)},className:F,onClick:k.handleClickItem.bind(k,X,k.props.children[X]),onKeyDown:k.handleClickItem.bind(k,X,k.props.children[X]),"aria-label":"".concat(k.props.labels.item," ").concat(X+1),style:{width:k.props.thumbWidth}};return n.default.createElement("li",m({},me,{role:"button",tabIndex:0}),O)})}},{key:"render",value:function(){var k=this;if(!this.props.children)return null;var O=n.Children.count(this.props.children)>1,X=this.state.showArrows&&this.state.firstItem>0,F=this.state.showArrows&&this.state.firstItem<this.state.lastPosition,me={},oe=-this.state.firstItem*(this.state.itemSize||0),Z=(0,r.default)(oe,"px",this.props.axis),pe=this.props.transitionTime+"ms";return me={WebkitTransform:Z,MozTransform:Z,MsTransform:Z,OTransform:Z,transform:Z,msTransform:Z,WebkitTransitionDuration:pe,MozTransitionDuration:pe,MsTransitionDuration:pe,OTransitionDuration:pe,transitionDuration:pe,msTransitionDuration:pe},n.default.createElement("div",{className:e.default.CAROUSEL(!1)},n.default.createElement("div",{className:e.default.WRAPPER(!1),ref:this.setItemsWrapperRef},n.default.createElement("button",{type:"button",className:e.default.ARROW_PREV(!X),onClick:function(){return k.slideRight()},"aria-label":this.props.labels.leftArrow}),O?n.default.createElement(i.default,{tagName:"ul",className:e.default.SLIDER(!1,this.state.swiping),onSwipeLeft:this.slideLeft,onSwipeRight:this.slideRight,onSwipeMove:this.onSwipeMove,onSwipeStart:this.onSwipeStart,onSwipeEnd:this.onSwipeEnd,style:me,innerRef:this.setItemsListRef,allowMouseEvents:this.props.emulateTouch},this.renderItems()):n.default.createElement("ul",{className:e.default.SLIDER(!1,this.state.swiping),ref:function(q){return k.setItemsListRef(q)},style:me},this.renderItems()),n.default.createElement("button",{type:"button",className:e.default.ARROW_NEXT(!F),onClick:function(){return k.slideLeft()},"aria-label":this.props.labels.rightArrow})))}}]),E}(n.Component);return Nd.default=D,$(D,"displayName","Thumbs"),$(D,"defaultProps",{axis:"horizontal",labels:{leftArrow:"previous slide / item",rightArrow:"next slide / item",item:"slide item"},selectedItem:0,thumbWidth:80,transitionTime:350}),Nd}var Md={},Fb;function iW(){if(Fb)return Md;Fb=1,Object.defineProperty(Md,"__esModule",{value:!0}),Md.default=void 0;var n=function(){return document};return Md.default=n,Md}var mr={},Ub;function dN(){if(Ub)return mr;Ub=1,Object.defineProperty(mr,"__esModule",{value:!0}),mr.setPosition=mr.getPosition=mr.isKeyboardEvent=mr.defaultStatusFormatter=mr.noop=void 0;var n=Ko(),e=t(hI());function t(d){return d&&d.__esModule?d:{default:d}}var r=function(){};mr.noop=r;var i=function(h,m){return"".concat(h," of ").concat(m)};mr.defaultStatusFormatter=i;var s=function(h){return h?h.hasOwnProperty("key"):!1};mr.isKeyboardEvent=s;var l=function(h,m){if(m.infiniteLoop&&++h,h===0)return 0;var g=n.Children.count(m.children);if(m.centerMode&&m.axis==="horizontal"){var _=-h*m.centerSlidePercentage,T=g-1;return h&&(h!==T||m.infiniteLoop)?_+=(100-m.centerSlidePercentage)/2:h===T&&(_+=100-m.centerSlidePercentage),_}return-h*100};mr.getPosition=l;var u=function(h,m){var g={};return["WebkitTransform","MozTransform","MsTransform","OTransform","transform","msTransform"].forEach(function(_){g[_]=(0,e.default)(h,"%",m)}),g};return mr.setPosition=u,mr}var li={},$b;function sW(){if($b)return li;$b=1,Object.defineProperty(li,"__esModule",{value:!0}),li.fadeAnimationHandler=li.slideStopSwipingHandler=li.slideSwipeAnimationHandler=li.slideAnimationHandler=void 0;var n=Ko(),e=r(hI()),t=dN();function r(g){return g&&g.__esModule?g:{default:g}}function i(g,_){var T=Object.keys(g);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(g);_&&(I=I.filter(function(R){return Object.getOwnPropertyDescriptor(g,R).enumerable})),T.push.apply(T,I)}return T}function s(g){for(var _=1;_<arguments.length;_++){var T=arguments[_]!=null?arguments[_]:{};_%2?i(Object(T),!0).forEach(function(I){l(g,I,T[I])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(T)):i(Object(T)).forEach(function(I){Object.defineProperty(g,I,Object.getOwnPropertyDescriptor(T,I))})}return g}function l(g,_,T){return _ in g?Object.defineProperty(g,_,{value:T,enumerable:!0,configurable:!0,writable:!0}):g[_]=T,g}var u=function(_,T){var I={},R=T.selectedItem,A=R,V=n.Children.count(_.children)-1,M=_.infiniteLoop&&(R<0||R>V);if(M)return A<0?_.centerMode&&_.centerSlidePercentage&&_.axis==="horizontal"?I.itemListStyle=(0,t.setPosition)(-(V+2)*_.centerSlidePercentage-(100-_.centerSlidePercentage)/2,_.axis):I.itemListStyle=(0,t.setPosition)(-(V+2)*100,_.axis):A>V&&(I.itemListStyle=(0,t.setPosition)(0,_.axis)),I;var L=(0,t.getPosition)(R,_),B=(0,e.default)(L,"%",_.axis),$=_.transitionTime+"ms";return I.itemListStyle={WebkitTransform:B,msTransform:B,OTransform:B,transform:B},T.swiping||(I.itemListStyle=s(s({},I.itemListStyle),{},{WebkitTransitionDuration:$,MozTransitionDuration:$,OTransitionDuration:$,transitionDuration:$,msTransitionDuration:$})),I};li.slideAnimationHandler=u;var d=function(_,T,I,R){var A={},V=T.axis==="horizontal",M=n.Children.count(T.children),L=0,B=(0,t.getPosition)(I.selectedItem,T),$=T.infiniteLoop?(0,t.getPosition)(M-1,T)-100:(0,t.getPosition)(M-1,T),W=V?_.x:_.y,D=W;B===L&&W>0&&(D=0),B===$&&W<0&&(D=0);var b=B+100/(I.itemSize/D),C=Math.abs(W)>T.swipeScrollTolerance;return T.infiniteLoop&&C&&(I.selectedItem===0&&b>-100?b-=M*100:I.selectedItem===M-1&&b<-M*100&&(b+=M*100)),(!T.preventMovementUntilSwipeScrollTolerance||C||I.swipeMovementStarted)&&(I.swipeMovementStarted||R({swipeMovementStarted:!0}),A.itemListStyle=(0,t.setPosition)(b,T.axis)),C&&!I.cancelClick&&R({cancelClick:!0}),A};li.slideSwipeAnimationHandler=d;var h=function(_,T){var I=(0,t.getPosition)(T.selectedItem,_),R=(0,t.setPosition)(I,_.axis);return{itemListStyle:R}};li.slideStopSwipingHandler=h;var m=function(_,T){var I=_.transitionTime+"ms",R="ease-in-out",A={position:"absolute",display:"block",zIndex:-2,minHeight:"100%",opacity:0,top:0,right:0,left:0,bottom:0,transitionTimingFunction:R,msTransitionTimingFunction:R,MozTransitionTimingFunction:R,WebkitTransitionTimingFunction:R,OTransitionTimingFunction:R};return T.swiping||(A=s(s({},A),{},{WebkitTransitionDuration:I,MozTransitionDuration:I,OTransitionDuration:I,transitionDuration:I,msTransitionDuration:I})),{slideStyle:A,selectedStyle:s(s({},A),{},{opacity:1,position:"relative"}),prevStyle:s({},A)}};return li.fadeAnimationHandler=m,li}var jb;function oW(){if(jb)return xd;jb=1,Object.defineProperty(xd,"__esModule",{value:!0}),xd.default=void 0;var n=m(Ko()),e=d(aN()),t=d(lN()),r=d(cN()),i=d(iW()),s=d(uN()),l=dN(),u=sW();function d(x){return x&&x.__esModule?x:{default:x}}function h(){if(typeof WeakMap!="function")return null;var x=new WeakMap;return h=function(){return x},x}function m(x){if(x&&x.__esModule)return x;if(x===null||g(x)!=="object"&&typeof x!="function")return{default:x};var k=h();if(k&&k.has(x))return k.get(x);var O={},X=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var F in x)if(Object.prototype.hasOwnProperty.call(x,F)){var me=X?Object.getOwnPropertyDescriptor(x,F):null;me&&(me.get||me.set)?Object.defineProperty(O,F,me):O[F]=x[F]}return O.default=x,k&&k.set(x,O),O}function g(x){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?g=function(O){return typeof O}:g=function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},g(x)}function _(){return _=Object.assign||function(x){for(var k=1;k<arguments.length;k++){var O=arguments[k];for(var X in O)Object.prototype.hasOwnProperty.call(O,X)&&(x[X]=O[X])}return x},_.apply(this,arguments)}function T(x,k){var O=Object.keys(x);if(Object.getOwnPropertySymbols){var X=Object.getOwnPropertySymbols(x);k&&(X=X.filter(function(F){return Object.getOwnPropertyDescriptor(x,F).enumerable})),O.push.apply(O,X)}return O}function I(x){for(var k=1;k<arguments.length;k++){var O=arguments[k]!=null?arguments[k]:{};k%2?T(Object(O),!0).forEach(function(X){C(x,X,O[X])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(O)):T(Object(O)).forEach(function(X){Object.defineProperty(x,X,Object.getOwnPropertyDescriptor(O,X))})}return x}function R(x,k){if(!(x instanceof k))throw new TypeError("Cannot call a class as a function")}function A(x,k){for(var O=0;O<k.length;O++){var X=k[O];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(x,X.key,X)}}function V(x,k,O){return k&&A(x.prototype,k),x}function M(x,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(k&&k.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),k&&L(x,k)}function L(x,k){return L=Object.setPrototypeOf||function(X,F){return X.__proto__=F,X},L(x,k)}function B(x){var k=D();return function(){var X=b(x),F;if(k){var me=b(this).constructor;F=Reflect.construct(X,arguments,me)}else F=X.apply(this,arguments);return $(this,F)}}function $(x,k){return k&&(g(k)==="object"||typeof k=="function")?k:W(x)}function W(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function D(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function b(x){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)},b(x)}function C(x,k,O){return k in x?Object.defineProperty(x,k,{value:O,enumerable:!0,configurable:!0,writable:!0}):x[k]=O,x}var E=function(x){M(O,x);var k=B(O);function O(X){var F;R(this,O),F=k.call(this,X),C(W(F),"thumbsRef",void 0),C(W(F),"carouselWrapperRef",void 0),C(W(F),"listRef",void 0),C(W(F),"itemsRef",void 0),C(W(F),"timer",void 0),C(W(F),"animationHandler",void 0),C(W(F),"setThumbsRef",function(oe){F.thumbsRef=oe}),C(W(F),"setCarouselWrapperRef",function(oe){F.carouselWrapperRef=oe}),C(W(F),"setListRef",function(oe){F.listRef=oe}),C(W(F),"setItemsRef",function(oe,Z){F.itemsRef||(F.itemsRef=[]),F.itemsRef[Z]=oe}),C(W(F),"autoPlay",function(){n.Children.count(F.props.children)<=1||(F.clearAutoPlay(),F.props.autoPlay&&(F.timer=setTimeout(function(){F.increment()},F.props.interval)))}),C(W(F),"clearAutoPlay",function(){F.timer&&clearTimeout(F.timer)}),C(W(F),"resetAutoPlay",function(){F.clearAutoPlay(),F.autoPlay()}),C(W(F),"stopOnHover",function(){F.setState({isMouseEntered:!0},F.clearAutoPlay)}),C(W(F),"startOnLeave",function(){F.setState({isMouseEntered:!1},F.autoPlay)}),C(W(F),"isFocusWithinTheCarousel",function(){return F.carouselWrapperRef?!!((0,i.default)().activeElement===F.carouselWrapperRef||F.carouselWrapperRef.contains((0,i.default)().activeElement)):!1}),C(W(F),"navigateWithKeyboard",function(oe){if(F.isFocusWithinTheCarousel()){var Z=F.props.axis,pe=Z==="horizontal",he={ArrowUp:38,ArrowRight:39,ArrowDown:40,ArrowLeft:37},q=pe?he.ArrowRight:he.ArrowDown,ie=pe?he.ArrowLeft:he.ArrowUp;q===oe.keyCode?F.increment():ie===oe.keyCode&&F.decrement()}}),C(W(F),"updateSizes",function(){if(!(!F.state.initialized||!F.itemsRef||F.itemsRef.length===0)){var oe=F.props.axis==="horizontal",Z=F.itemsRef[0];if(Z){var pe=oe?Z.clientWidth:Z.clientHeight;F.setState({itemSize:pe}),F.thumbsRef&&F.thumbsRef.updateSizes()}}}),C(W(F),"setMountState",function(){F.setState({hasMount:!0}),F.updateSizes()}),C(W(F),"handleClickItem",function(oe,Z){if(n.Children.count(F.props.children)!==0){if(F.state.cancelClick){F.setState({cancelClick:!1});return}F.props.onClickItem(oe,Z),oe!==F.state.selectedItem&&F.setState({selectedItem:oe})}}),C(W(F),"handleOnChange",function(oe,Z){n.Children.count(F.props.children)<=1||F.props.onChange(oe,Z)}),C(W(F),"handleClickThumb",function(oe,Z){F.props.onClickThumb(oe,Z),F.moveTo(oe)}),C(W(F),"onSwipeStart",function(oe){F.setState({swiping:!0}),F.props.onSwipeStart(oe)}),C(W(F),"onSwipeEnd",function(oe){F.setState({swiping:!1,cancelClick:!1,swipeMovementStarted:!1}),F.props.onSwipeEnd(oe),F.clearAutoPlay(),F.state.autoPlay&&F.autoPlay()}),C(W(F),"onSwipeMove",function(oe,Z){F.props.onSwipeMove(Z);var pe=F.props.swipeAnimationHandler(oe,F.props,F.state,F.setState.bind(W(F)));return F.setState(I({},pe)),!!Object.keys(pe).length}),C(W(F),"decrement",function(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;F.moveTo(F.state.selectedItem-(typeof oe=="number"?oe:1))}),C(W(F),"increment",function(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;F.moveTo(F.state.selectedItem+(typeof oe=="number"?oe:1))}),C(W(F),"moveTo",function(oe){if(typeof oe=="number"){var Z=n.Children.count(F.props.children)-1;oe<0&&(oe=F.props.infiniteLoop?Z:0),oe>Z&&(oe=F.props.infiniteLoop?0:Z),F.selectItem({selectedItem:oe}),F.state.autoPlay&&F.state.isMouseEntered===!1&&F.resetAutoPlay()}}),C(W(F),"onClickNext",function(){F.increment(1)}),C(W(F),"onClickPrev",function(){F.decrement(1)}),C(W(F),"onSwipeForward",function(){F.increment(1),F.props.emulateTouch&&F.setState({cancelClick:!0})}),C(W(F),"onSwipeBackwards",function(){F.decrement(1),F.props.emulateTouch&&F.setState({cancelClick:!0})}),C(W(F),"changeItem",function(oe){return function(Z){(!(0,l.isKeyboardEvent)(Z)||Z.key==="Enter")&&F.moveTo(oe)}}),C(W(F),"selectItem",function(oe){F.setState(I({previousItem:F.state.selectedItem},oe),function(){F.setState(F.animationHandler(F.props,F.state))}),F.handleOnChange(oe.selectedItem,n.Children.toArray(F.props.children)[oe.selectedItem])}),C(W(F),"getInitialImage",function(){var oe=F.props.selectedItem,Z=F.itemsRef&&F.itemsRef[oe],pe=Z&&Z.getElementsByTagName("img")||[];return pe[0]}),C(W(F),"getVariableItemHeight",function(oe){var Z=F.itemsRef&&F.itemsRef[oe];if(F.state.hasMount&&Z&&Z.children.length){var pe=Z.children[0].getElementsByTagName("img")||[];if(pe.length>0){var he=pe[0];if(!he.complete){var q=function ke(){F.forceUpdate(),he.removeEventListener("load",ke)};he.addEventListener("load",q)}}var ie=pe[0]||Z.children[0],Te=ie.clientHeight;return Te>0?Te:null}return null});var me={initialized:!1,previousItem:X.selectedItem,selectedItem:X.selectedItem,hasMount:!1,isMouseEntered:!1,autoPlay:X.autoPlay,swiping:!1,swipeMovementStarted:!1,cancelClick:!1,itemSize:1,itemListStyle:{},slideStyle:{},selectedStyle:{},prevStyle:{}};return F.animationHandler=typeof X.animationHandler=="function"&&X.animationHandler||X.animationHandler==="fade"&&u.fadeAnimationHandler||u.slideAnimationHandler,F.state=I(I({},me),F.animationHandler(X,me)),F}return V(O,[{key:"componentDidMount",value:function(){this.props.children&&this.setupCarousel()}},{key:"componentDidUpdate",value:function(F,me){!F.children&&this.props.children&&!this.state.initialized&&this.setupCarousel(),!F.autoFocus&&this.props.autoFocus&&this.forceFocus(),me.swiping&&!this.state.swiping&&this.setState(I({},this.props.stopSwipingHandler(this.props,this.state))),(F.selectedItem!==this.props.selectedItem||F.centerMode!==this.props.centerMode)&&(this.updateSizes(),this.moveTo(this.props.selectedItem)),F.autoPlay!==this.props.autoPlay&&(this.props.autoPlay?this.setupAutoPlay():this.destroyAutoPlay(),this.setState({autoPlay:this.props.autoPlay}))}},{key:"componentWillUnmount",value:function(){this.destroyCarousel()}},{key:"setupCarousel",value:function(){var F=this;this.bindEvents(),this.state.autoPlay&&n.Children.count(this.props.children)>1&&this.setupAutoPlay(),this.props.autoFocus&&this.forceFocus(),this.setState({initialized:!0},function(){var me=F.getInitialImage();me&&!me.complete?me.addEventListener("load",F.setMountState):F.setMountState()})}},{key:"destroyCarousel",value:function(){this.state.initialized&&(this.unbindEvents(),this.destroyAutoPlay())}},{key:"setupAutoPlay",value:function(){this.autoPlay();var F=this.carouselWrapperRef;this.props.stopOnHover&&F&&(F.addEventListener("mouseenter",this.stopOnHover),F.addEventListener("mouseleave",this.startOnLeave))}},{key:"destroyAutoPlay",value:function(){this.clearAutoPlay();var F=this.carouselWrapperRef;this.props.stopOnHover&&F&&(F.removeEventListener("mouseenter",this.stopOnHover),F.removeEventListener("mouseleave",this.startOnLeave))}},{key:"bindEvents",value:function(){(0,s.default)().addEventListener("resize",this.updateSizes),(0,s.default)().addEventListener("DOMContentLoaded",this.updateSizes),this.props.useKeyboardArrows&&(0,i.default)().addEventListener("keydown",this.navigateWithKeyboard)}},{key:"unbindEvents",value:function(){(0,s.default)().removeEventListener("resize",this.updateSizes),(0,s.default)().removeEventListener("DOMContentLoaded",this.updateSizes);var F=this.getInitialImage();F&&F.removeEventListener("load",this.setMountState),this.props.useKeyboardArrows&&(0,i.default)().removeEventListener("keydown",this.navigateWithKeyboard)}},{key:"forceFocus",value:function(){var F;(F=this.carouselWrapperRef)===null||F===void 0||F.focus()}},{key:"renderItems",value:function(F){var me=this;return this.props.children?n.Children.map(this.props.children,function(oe,Z){var pe=Z===me.state.selectedItem,he=Z===me.state.previousItem,q=pe&&me.state.selectedStyle||he&&me.state.prevStyle||me.state.slideStyle||{};me.props.centerMode&&me.props.axis==="horizontal"&&(q=I(I({},q),{},{minWidth:me.props.centerSlidePercentage+"%"})),me.state.swiping&&me.state.swipeMovementStarted&&(q=I(I({},q),{},{pointerEvents:"none"}));var ie={ref:function(ke){return me.setItemsRef(ke,Z)},key:"itemKey"+Z+(F?"clone":""),className:t.default.ITEM(!0,Z===me.state.selectedItem,Z===me.state.previousItem),onClick:me.handleClickItem.bind(me,Z,oe),style:q};return n.default.createElement("li",ie,me.props.renderItem(oe,{isSelected:Z===me.state.selectedItem,isPrevious:Z===me.state.previousItem}))}):[]}},{key:"renderControls",value:function(){var F=this,me=this.props,oe=me.showIndicators,Z=me.labels,pe=me.renderIndicator,he=me.children;return oe?n.default.createElement("ul",{className:"control-dots"},n.Children.map(he,function(q,ie){return pe&&pe(F.changeItem(ie),ie===F.state.selectedItem,ie,Z.item)})):null}},{key:"renderStatus",value:function(){return this.props.showStatus?n.default.createElement("p",{className:"carousel-status"},this.props.statusFormatter(this.state.selectedItem+1,n.Children.count(this.props.children))):null}},{key:"renderThumbs",value:function(){return!this.props.showThumbs||!this.props.children||n.Children.count(this.props.children)===0?null:n.default.createElement(r.default,{ref:this.setThumbsRef,onSelectItem:this.handleClickThumb,selectedItem:this.state.selectedItem,transitionTime:this.props.transitionTime,thumbWidth:this.props.thumbWidth,labels:this.props.labels,emulateTouch:this.props.emulateTouch},this.props.renderThumbs(this.props.children))}},{key:"render",value:function(){var F=this;if(!this.props.children||n.Children.count(this.props.children)===0)return null;var me=this.props.swipeable&&n.Children.count(this.props.children)>1,oe=this.props.axis==="horizontal",Z=this.props.showArrows&&n.Children.count(this.props.children)>1,pe=Z&&(this.state.selectedItem>0||this.props.infiniteLoop)||!1,he=Z&&(this.state.selectedItem<n.Children.count(this.props.children)-1||this.props.infiniteLoop)||!1,q=this.renderItems(!0),ie=q.shift(),Te=q.pop(),ke={className:t.default.SLIDER(!0,this.state.swiping),onSwipeMove:this.onSwipeMove,onSwipeStart:this.onSwipeStart,onSwipeEnd:this.onSwipeEnd,style:this.state.itemListStyle,tolerance:this.props.swipeScrollTolerance},Ve={};if(oe){if(ke.onSwipeLeft=this.onSwipeForward,ke.onSwipeRight=this.onSwipeBackwards,this.props.dynamicHeight){var $e=this.getVariableItemHeight(this.state.selectedItem);Ve.height=$e||"auto"}}else ke.onSwipeUp=this.props.verticalSwipe==="natural"?this.onSwipeBackwards:this.onSwipeForward,ke.onSwipeDown=this.props.verticalSwipe==="natural"?this.onSwipeForward:this.onSwipeBackwards,ke.style=I(I({},ke.style),{},{height:this.state.itemSize}),Ve.height=this.state.itemSize;return n.default.createElement("div",{"aria-label":this.props.ariaLabel,className:t.default.ROOT(this.props.className),ref:this.setCarouselWrapperRef,tabIndex:this.props.useKeyboardArrows?0:void 0},n.default.createElement("div",{className:t.default.CAROUSEL(!0),style:{width:this.props.width}},this.renderControls(),this.props.renderArrowPrev(this.onClickPrev,pe,this.props.labels.leftArrow),n.default.createElement("div",{className:t.default.WRAPPER(!0,this.props.axis),style:Ve},me?n.default.createElement(e.default,_({tagName:"ul",innerRef:this.setListRef},ke,{allowMouseEvents:this.props.emulateTouch}),this.props.infiniteLoop&&Te,this.renderItems(),this.props.infiniteLoop&&ie):n.default.createElement("ul",{className:t.default.SLIDER(!0,this.state.swiping),ref:function(qe){return F.setListRef(qe)},style:this.state.itemListStyle||{}},this.props.infiniteLoop&&Te,this.renderItems(),this.props.infiniteLoop&&ie)),this.props.renderArrowNext(this.onClickNext,he,this.props.labels.rightArrow),this.renderStatus()),this.renderThumbs())}}]),O}(n.default.Component);return xd.default=E,C(E,"displayName","Carousel"),C(E,"defaultProps",{ariaLabel:void 0,axis:"horizontal",centerSlidePercentage:80,interval:3e3,labels:{leftArrow:"previous slide / item",rightArrow:"next slide / item",item:"slide item"},onClickItem:l.noop,onClickThumb:l.noop,onChange:l.noop,onSwipeStart:function(){},onSwipeEnd:function(){},onSwipeMove:function(){return!1},preventMovementUntilSwipeScrollTolerance:!1,renderArrowPrev:function(k,O,X){return n.default.createElement("button",{type:"button","aria-label":X,className:t.default.ARROW_PREV(!O),onClick:k})},renderArrowNext:function(k,O,X){return n.default.createElement("button",{type:"button","aria-label":X,className:t.default.ARROW_NEXT(!O),onClick:k})},renderIndicator:function(k,O,X,F){return n.default.createElement("li",{className:t.default.DOT(O),onClick:k,onKeyDown:k,value:X,key:X,role:"button",tabIndex:0,"aria-label":"".concat(F," ").concat(X+1)})},renderItem:function(k){return k},renderThumbs:function(k){var O=n.Children.map(k,function(X){var F=X;if(X.type!=="img"&&(F=n.Children.toArray(X.props.children).find(function(me){return me.type==="img"})),!!F)return F});return O.filter(function(X){return X}).length===0?(console.warn("No images found! Can't build the thumb list without images. If you don't need thumbs, set showThumbs={false} in the Carousel. Note that it's not possible to get images rendered inside custom components. More info at https://github.com/leandrowd/react-responsive-carousel/blob/master/TROUBLESHOOTING.md"),[]):O},statusFormatter:l.defaultStatusFormatter,selectedItem:0,showArrows:!0,showIndicators:!0,showStatus:!0,showThumbs:!0,stopOnHover:!0,swipeScrollTolerance:5,swipeable:!0,transitionTime:350,verticalSwipe:"standard",width:"100%",animationHandler:"slide",swipeAnimationHandler:u.slideSwipeAnimationHandler,stopSwipingHandler:u.slideStopSwipingHandler}),xd}var Bb={},zb;function aW(){return zb||(zb=1),Bb}var Wb;function lW(){return Wb||(Wb=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"Carousel",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(n,"CarouselProps",{enumerable:!0,get:function(){return t.CarouselProps}}),Object.defineProperty(n,"Thumbs",{enumerable:!0,get:function(){return r.default}});var e=i(oW()),t=aW(),r=i(cN());function i(s){return s&&s.__esModule?s:{default:s}}}($v)),$v}var uW=lW();const cW="/Amazon-Clone/assets/image1-0z9TqRqU.jpg",dW="/Amazon-Clone/assets/image2-BCNQuWUp.jpg",hW="/Amazon-Clone/assets/image3-yhNuh496.jpg",fW="/Amazon-Clone/assets/image4-DFE1QJr1.jpg",pW="/Amazon-Clone/assets/image5-u-4nCpVr.jpg",mW=[cW,dW,hW,fW,pW];function gW(){return j.jsxs("div",{children:[j.jsx(uW.Carousel,{autoPlay:!0,infiniteLoop:!0,showIndicators:!1,showThumbs:!1,showStatus:!1,children:mW.map((n,e)=>j.jsx("img",{src:n,alt:""},e))}),j.jsx("div",{className:"carousel__effect::before"})]})}const yW=[{title:"Electronics",name:"electronics",imgLink:"https://m.media-amazon.com/images/I/51LHmhoU-cL._AC_SL1500_.jpg"},{title:"Discover Fashion Trends",name:"women's clothing",imgLink:"https://m.media-amazon.com/images/G/01/AMAZON_FASHION/2024/SITE_FLIPS/WIN24/BROWSE/CAROUSEL/Fashion_Winter25_Bubbler_Womens_1000x1000.jpg,"},{title:"Men's Clothing",name:"men's clothing",imgLink:"https://m.media-amazon.com/images/I/71tel5q6EeL._AC_SX679_.jpg"},{title:"Jewelery",name:"jewelery",imgLink:"https://m.media-amazon.com/images/I/813jDZTeVOL._AC_UL480_FMwebp_QL65_.jpg"}],_W="_category__container_9oxcn_1",vW="_category_9oxcn_1",hN={category__container:_W,category:vW};function wW({data:n}){return j.jsx("div",{className:hN.category,children:j.jsxs(ci,{to:`/category/${n.name}`,children:[j.jsx("span",{children:j.jsx("h2",{children:n==null?void 0:n.title})}),j.jsx("img",{src:n==null?void 0:n.imgLink,alt:""}),j.jsx("p",{children:"shop now"})]})})}function EW(){return j.jsx("section",{className:hN.category__container,children:yW.map((n,e)=>j.jsx(wW,{data:n},e))})}function fN(n,e){return function(){return n.apply(e,arguments)}}const{toString:IW}=Object.prototype,{getPrototypeOf:fI}=Object,wy=(n=>e=>{const t=IW.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),gi=n=>(n=n.toLowerCase(),e=>wy(e)===n),Ey=n=>e=>typeof e===n,{isArray:Tc}=Array,$h=Ey("undefined");function TW(n){return n!==null&&!$h(n)&&n.constructor!==null&&!$h(n.constructor)&&Ir(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const pN=gi("ArrayBuffer");function SW(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&pN(n.buffer),e}const RW=Ey("string"),Ir=Ey("function"),mN=Ey("number"),Iy=n=>n!==null&&typeof n=="object",AW=n=>n===!0||n===!1,bm=n=>{if(wy(n)!=="object")return!1;const e=fI(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},bW=gi("Date"),PW=gi("File"),CW=gi("Blob"),kW=gi("FileList"),xW=n=>Iy(n)&&Ir(n.pipe),OW=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||Ir(n.append)&&((e=wy(n))==="formdata"||e==="object"&&Ir(n.toString)&&n.toString()==="[object FormData]"))},NW=gi("URLSearchParams"),[DW,LW,VW,MW]=["ReadableStream","Request","Response","Headers"].map(gi),FW=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ef(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,i;if(typeof n!="object"&&(n=[n]),Tc(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{const s=t?Object.getOwnPropertyNames(n):Object.keys(n),l=s.length;let u;for(r=0;r<l;r++)u=s[r],e.call(null,n[u],u,n)}}function gN(n,e){e=e.toLowerCase();const t=Object.keys(n);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const Wa=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,yN=n=>!$h(n)&&n!==Wa;function Zw(){const{caseless:n}=yN(this)&&this||{},e={},t=(r,i)=>{const s=n&&gN(e,i)||i;bm(e[s])&&bm(r)?e[s]=Zw(e[s],r):bm(r)?e[s]=Zw({},r):Tc(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Ef(arguments[r],t);return e}const UW=(n,e,t,{allOwnKeys:r}={})=>(Ef(e,(i,s)=>{t&&Ir(i)?n[s]=fN(i,t):n[s]=i},{allOwnKeys:r}),n),$W=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),jW=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},BW=(n,e,t,r)=>{let i,s,l;const u={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),s=i.length;s-- >0;)l=i[s],(!r||r(l,n,e))&&!u[l]&&(e[l]=n[l],u[l]=!0);n=t!==!1&&fI(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},zW=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},WW=n=>{if(!n)return null;if(Tc(n))return n;let e=n.length;if(!mN(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},qW=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&fI(Uint8Array)),HW=(n,e)=>{const r=(n&&n[Symbol.iterator]).call(n);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(n,s[0],s[1])}},KW=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},GW=gi("HTMLFormElement"),QW=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),qb=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),YW=gi("RegExp"),_N=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};Ef(t,(i,s)=>{let l;(l=e(i,s,n))!==!1&&(r[s]=l||i)}),Object.defineProperties(n,r)},JW=n=>{_N(n,(e,t)=>{if(Ir(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(Ir(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},XW=(n,e)=>{const t={},r=i=>{i.forEach(s=>{t[s]=!0})};return Tc(n)?r(n):r(String(n).split(e)),t},ZW=()=>{},eq=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function tq(n){return!!(n&&Ir(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const nq=n=>{const e=new Array(10),t=(r,i)=>{if(Iy(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=Tc(r)?[]:{};return Ef(r,(l,u)=>{const d=t(l,i+1);!$h(d)&&(s[u]=d)}),e[i]=void 0,s}}return r};return t(n,0)},rq=gi("AsyncFunction"),iq=n=>n&&(Iy(n)||Ir(n))&&Ir(n.then)&&Ir(n.catch),vN=((n,e)=>n?setImmediate:e?((t,r)=>(Wa.addEventListener("message",({source:i,data:s})=>{i===Wa&&s===t&&r.length&&r.shift()()},!1),i=>{r.push(i),Wa.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Ir(Wa.postMessage)),sq=typeof queueMicrotask<"u"?queueMicrotask.bind(Wa):typeof process<"u"&&process.nextTick||vN,re={isArray:Tc,isArrayBuffer:pN,isBuffer:TW,isFormData:OW,isArrayBufferView:SW,isString:RW,isNumber:mN,isBoolean:AW,isObject:Iy,isPlainObject:bm,isReadableStream:DW,isRequest:LW,isResponse:VW,isHeaders:MW,isUndefined:$h,isDate:bW,isFile:PW,isBlob:CW,isRegExp:YW,isFunction:Ir,isStream:xW,isURLSearchParams:NW,isTypedArray:qW,isFileList:kW,forEach:Ef,merge:Zw,extend:UW,trim:FW,stripBOM:$W,inherits:jW,toFlatObject:BW,kindOf:wy,kindOfTest:gi,endsWith:zW,toArray:WW,forEachEntry:HW,matchAll:KW,isHTMLForm:GW,hasOwnProperty:qb,hasOwnProp:qb,reduceDescriptors:_N,freezeMethods:JW,toObjectSet:XW,toCamelCase:QW,noop:ZW,toFiniteNumber:eq,findKey:gN,global:Wa,isContextDefined:yN,isSpecCompliantForm:tq,toJSONObject:nq,isAsyncFn:rq,isThenable:iq,setImmediate:vN,asap:sq};function Me(n,e,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}re.inherits(Me,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:re.toJSONObject(this.config),code:this.code,status:this.status}}});const wN=Me.prototype,EN={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{EN[n]={value:n}});Object.defineProperties(Me,EN);Object.defineProperty(wN,"isAxiosError",{value:!0});Me.from=(n,e,t,r,i,s)=>{const l=Object.create(wN);return re.toFlatObject(n,l,function(d){return d!==Error.prototype},u=>u!=="isAxiosError"),Me.call(l,n.message,e,t,r,i),l.cause=n,l.name=n.name,s&&Object.assign(l,s),l};const oq=null;function eE(n){return re.isPlainObject(n)||re.isArray(n)}function IN(n){return re.endsWith(n,"[]")?n.slice(0,-2):n}function Hb(n,e,t){return n?n.concat(e).map(function(i,s){return i=IN(i),!t&&s?"["+i+"]":i}).join(t?".":""):e}function aq(n){return re.isArray(n)&&!n.some(eE)}const lq=re.toFlatObject(re,{},null,function(e){return/^is[A-Z]/.test(e)});function Ty(n,e,t){if(!re.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=re.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(R,A){return!re.isUndefined(A[R])});const r=t.metaTokens,i=t.visitor||m,s=t.dots,l=t.indexes,d=(t.Blob||typeof Blob<"u"&&Blob)&&re.isSpecCompliantForm(e);if(!re.isFunction(i))throw new TypeError("visitor must be a function");function h(I){if(I===null)return"";if(re.isDate(I))return I.toISOString();if(!d&&re.isBlob(I))throw new Me("Blob is not supported. Use a Buffer instead.");return re.isArrayBuffer(I)||re.isTypedArray(I)?d&&typeof Blob=="function"?new Blob([I]):Buffer.from(I):I}function m(I,R,A){let V=I;if(I&&!A&&typeof I=="object"){if(re.endsWith(R,"{}"))R=r?R:R.slice(0,-2),I=JSON.stringify(I);else if(re.isArray(I)&&aq(I)||(re.isFileList(I)||re.endsWith(R,"[]"))&&(V=re.toArray(I)))return R=IN(R),V.forEach(function(L,B){!(re.isUndefined(L)||L===null)&&e.append(l===!0?Hb([R],B,s):l===null?R:R+"[]",h(L))}),!1}return eE(I)?!0:(e.append(Hb(A,R,s),h(I)),!1)}const g=[],_=Object.assign(lq,{defaultVisitor:m,convertValue:h,isVisitable:eE});function T(I,R){if(!re.isUndefined(I)){if(g.indexOf(I)!==-1)throw Error("Circular reference detected in "+R.join("."));g.push(I),re.forEach(I,function(V,M){(!(re.isUndefined(V)||V===null)&&i.call(e,V,re.isString(M)?M.trim():M,R,_))===!0&&T(V,R?R.concat(M):[M])}),g.pop()}}if(!re.isObject(n))throw new TypeError("data must be an object");return T(n),e}function Kb(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function pI(n,e){this._pairs=[],n&&Ty(n,this,e)}const TN=pI.prototype;TN.append=function(e,t){this._pairs.push([e,t])};TN.toString=function(e){const t=e?function(r){return e.call(this,r,Kb)}:Kb;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function uq(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function SN(n,e,t){if(!e)return n;const r=t&&t.encode||uq;re.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let s;if(i?s=i(e,t):s=re.isURLSearchParams(e)?e.toString():new pI(e,t).toString(r),s){const l=n.indexOf("#");l!==-1&&(n=n.slice(0,l)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class Gb{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){re.forEach(this.handlers,function(r){r!==null&&e(r)})}}const RN={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},cq=typeof URLSearchParams<"u"?URLSearchParams:pI,dq=typeof FormData<"u"?FormData:null,hq=typeof Blob<"u"?Blob:null,fq={isBrowser:!0,classes:{URLSearchParams:cq,FormData:dq,Blob:hq},protocols:["http","https","file","blob","url","data"]},mI=typeof window<"u"&&typeof document<"u",tE=typeof navigator=="object"&&navigator||void 0,pq=mI&&(!tE||["ReactNative","NativeScript","NS"].indexOf(tE.product)<0),mq=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",gq=mI&&window.location.href||"http://localhost",yq=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:mI,hasStandardBrowserEnv:pq,hasStandardBrowserWebWorkerEnv:mq,navigator:tE,origin:gq},Symbol.toStringTag,{value:"Module"})),Dn={...yq,...fq};function _q(n,e){return Ty(n,new Dn.classes.URLSearchParams,Object.assign({visitor:function(t,r,i,s){return Dn.isNode&&re.isBuffer(t)?(this.append(r,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function vq(n){return re.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function wq(n){const e={},t=Object.keys(n);let r;const i=t.length;let s;for(r=0;r<i;r++)s=t[r],e[s]=n[s];return e}function AN(n){function e(t,r,i,s){let l=t[s++];if(l==="__proto__")return!0;const u=Number.isFinite(+l),d=s>=t.length;return l=!l&&re.isArray(i)?i.length:l,d?(re.hasOwnProp(i,l)?i[l]=[i[l],r]:i[l]=r,!u):((!i[l]||!re.isObject(i[l]))&&(i[l]=[]),e(t,r,i[l],s)&&re.isArray(i[l])&&(i[l]=wq(i[l])),!u)}if(re.isFormData(n)&&re.isFunction(n.entries)){const t={};return re.forEachEntry(n,(r,i)=>{e(vq(r),i,t,0)}),t}return null}function Eq(n,e,t){if(re.isString(n))try{return(e||JSON.parse)(n),re.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const If={transitional:RN,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,s=re.isObject(e);if(s&&re.isHTMLForm(e)&&(e=new FormData(e)),re.isFormData(e))return i?JSON.stringify(AN(e)):e;if(re.isArrayBuffer(e)||re.isBuffer(e)||re.isStream(e)||re.isFile(e)||re.isBlob(e)||re.isReadableStream(e))return e;if(re.isArrayBufferView(e))return e.buffer;if(re.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return _q(e,this.formSerializer).toString();if((u=re.isFileList(e))||r.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return Ty(u?{"files[]":e}:e,d&&new d,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),Eq(e)):e}],transformResponse:[function(e){const t=this.transitional||If.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(re.isResponse(e)||re.isReadableStream(e))return e;if(e&&re.isString(e)&&(r&&!this.responseType||i)){const l=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(u){if(l)throw u.name==="SyntaxError"?Me.from(u,Me.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Dn.classes.FormData,Blob:Dn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};re.forEach(["delete","get","head","post","put","patch"],n=>{If.headers[n]={}});const Iq=re.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Tq=n=>{const e={};let t,r,i;return n&&n.split(`
`).forEach(function(l){i=l.indexOf(":"),t=l.substring(0,i).trim().toLowerCase(),r=l.substring(i+1).trim(),!(!t||e[t]&&Iq[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},Qb=Symbol("internals");function Fd(n){return n&&String(n).trim().toLowerCase()}function Pm(n){return n===!1||n==null?n:re.isArray(n)?n.map(Pm):String(n)}function Sq(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const Rq=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function qv(n,e,t,r,i){if(re.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!re.isString(e)){if(re.isString(r))return e.indexOf(r)!==-1;if(re.isRegExp(r))return r.test(e)}}function Aq(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function bq(n,e){const t=re.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,s,l){return this[r].call(this,e,i,s,l)},configurable:!0})})}let sr=class{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function s(u,d,h){const m=Fd(d);if(!m)throw new Error("header name must be a non-empty string");const g=re.findKey(i,m);(!g||i[g]===void 0||h===!0||h===void 0&&i[g]!==!1)&&(i[g||d]=Pm(u))}const l=(u,d)=>re.forEach(u,(h,m)=>s(h,m,d));if(re.isPlainObject(e)||e instanceof this.constructor)l(e,t);else if(re.isString(e)&&(e=e.trim())&&!Rq(e))l(Tq(e),t);else if(re.isHeaders(e))for(const[u,d]of e.entries())s(d,u,r);else e!=null&&s(t,e,r);return this}get(e,t){if(e=Fd(e),e){const r=re.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return Sq(i);if(re.isFunction(t))return t.call(this,i,r);if(re.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Fd(e),e){const r=re.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||qv(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function s(l){if(l=Fd(l),l){const u=re.findKey(r,l);u&&(!t||qv(r,r[u],u,t))&&(delete r[u],i=!0)}}return re.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const s=t[r];(!e||qv(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const t=this,r={};return re.forEach(this,(i,s)=>{const l=re.findKey(r,s);if(l){t[l]=Pm(i),delete t[s];return}const u=e?Aq(s):String(s).trim();u!==s&&delete t[s],t[u]=Pm(i),r[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return re.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&re.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[Qb]=this[Qb]={accessors:{}}).accessors,i=this.prototype;function s(l){const u=Fd(l);r[u]||(bq(i,l),r[u]=!0)}return re.isArray(e)?e.forEach(s):s(e),this}};sr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);re.reduceDescriptors(sr.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});re.freezeMethods(sr);function Hv(n,e){const t=this||If,r=e||t,i=sr.from(r.headers);let s=r.data;return re.forEach(n,function(u){s=u.call(t,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function bN(n){return!!(n&&n.__CANCEL__)}function Sc(n,e,t){Me.call(this,n??"canceled",Me.ERR_CANCELED,e,t),this.name="CanceledError"}re.inherits(Sc,Me,{__CANCEL__:!0});function PN(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new Me("Request failed with status code "+t.status,[Me.ERR_BAD_REQUEST,Me.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function Pq(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function Cq(n,e){n=n||10;const t=new Array(n),r=new Array(n);let i=0,s=0,l;return e=e!==void 0?e:1e3,function(d){const h=Date.now(),m=r[s];l||(l=h),t[i]=d,r[i]=h;let g=s,_=0;for(;g!==i;)_+=t[g++],g=g%n;if(i=(i+1)%n,i===s&&(s=(s+1)%n),h-l<e)return;const T=m&&h-m;return T?Math.round(_*1e3/T):void 0}}function kq(n,e){let t=0,r=1e3/e,i,s;const l=(h,m=Date.now())=>{t=m,i=null,s&&(clearTimeout(s),s=null),n.apply(null,h)};return[(...h)=>{const m=Date.now(),g=m-t;g>=r?l(h,m):(i=h,s||(s=setTimeout(()=>{s=null,l(i)},r-g)))},()=>i&&l(i)]}const _g=(n,e,t=3)=>{let r=0;const i=Cq(50,250);return kq(s=>{const l=s.loaded,u=s.lengthComputable?s.total:void 0,d=l-r,h=i(d),m=l<=u;r=l;const g={loaded:l,total:u,progress:u?l/u:void 0,bytes:d,rate:h||void 0,estimated:h&&u&&m?(u-l)/h:void 0,event:s,lengthComputable:u!=null,[e?"download":"upload"]:!0};n(g)},t)},Yb=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},Jb=n=>(...e)=>re.asap(()=>n(...e)),xq=Dn.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,Dn.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(Dn.origin),Dn.navigator&&/(msie|trident)/i.test(Dn.navigator.userAgent)):()=>!0,Oq=Dn.hasStandardBrowserEnv?{write(n,e,t,r,i,s){const l=[n+"="+encodeURIComponent(e)];re.isNumber(t)&&l.push("expires="+new Date(t).toGMTString()),re.isString(r)&&l.push("path="+r),re.isString(i)&&l.push("domain="+i),s===!0&&l.push("secure"),document.cookie=l.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Nq(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Dq(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function CN(n,e,t){let r=!Nq(e);return n&&r||t==!1?Dq(n,e):e}const Xb=n=>n instanceof sr?{...n}:n;function al(n,e){e=e||{};const t={};function r(h,m,g,_){return re.isPlainObject(h)&&re.isPlainObject(m)?re.merge.call({caseless:_},h,m):re.isPlainObject(m)?re.merge({},m):re.isArray(m)?m.slice():m}function i(h,m,g,_){if(re.isUndefined(m)){if(!re.isUndefined(h))return r(void 0,h,g,_)}else return r(h,m,g,_)}function s(h,m){if(!re.isUndefined(m))return r(void 0,m)}function l(h,m){if(re.isUndefined(m)){if(!re.isUndefined(h))return r(void 0,h)}else return r(void 0,m)}function u(h,m,g){if(g in e)return r(h,m);if(g in n)return r(void 0,h)}const d={url:s,method:s,data:s,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:u,headers:(h,m,g)=>i(Xb(h),Xb(m),g,!0)};return re.forEach(Object.keys(Object.assign({},n,e)),function(m){const g=d[m]||i,_=g(n[m],e[m],m);re.isUndefined(_)&&g!==u||(t[m]=_)}),t}const kN=n=>{const e=al({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:l,auth:u}=e;e.headers=l=sr.from(l),e.url=SN(CN(e.baseURL,e.url),n.params,n.paramsSerializer),u&&l.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let d;if(re.isFormData(t)){if(Dn.hasStandardBrowserEnv||Dn.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((d=l.getContentType())!==!1){const[h,...m]=d?d.split(";").map(g=>g.trim()).filter(Boolean):[];l.setContentType([h||"multipart/form-data",...m].join("; "))}}if(Dn.hasStandardBrowserEnv&&(r&&re.isFunction(r)&&(r=r(e)),r||r!==!1&&xq(e.url))){const h=i&&s&&Oq.read(s);h&&l.set(i,h)}return e},Lq=typeof XMLHttpRequest<"u",Vq=Lq&&function(n){return new Promise(function(t,r){const i=kN(n);let s=i.data;const l=sr.from(i.headers).normalize();let{responseType:u,onUploadProgress:d,onDownloadProgress:h}=i,m,g,_,T,I;function R(){T&&T(),I&&I(),i.cancelToken&&i.cancelToken.unsubscribe(m),i.signal&&i.signal.removeEventListener("abort",m)}let A=new XMLHttpRequest;A.open(i.method.toUpperCase(),i.url,!0),A.timeout=i.timeout;function V(){if(!A)return;const L=sr.from("getAllResponseHeaders"in A&&A.getAllResponseHeaders()),$={data:!u||u==="text"||u==="json"?A.responseText:A.response,status:A.status,statusText:A.statusText,headers:L,config:n,request:A};PN(function(D){t(D),R()},function(D){r(D),R()},$),A=null}"onloadend"in A?A.onloadend=V:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout(V)},A.onabort=function(){A&&(r(new Me("Request aborted",Me.ECONNABORTED,n,A)),A=null)},A.onerror=function(){r(new Me("Network Error",Me.ERR_NETWORK,n,A)),A=null},A.ontimeout=function(){let B=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const $=i.transitional||RN;i.timeoutErrorMessage&&(B=i.timeoutErrorMessage),r(new Me(B,$.clarifyTimeoutError?Me.ETIMEDOUT:Me.ECONNABORTED,n,A)),A=null},s===void 0&&l.setContentType(null),"setRequestHeader"in A&&re.forEach(l.toJSON(),function(B,$){A.setRequestHeader($,B)}),re.isUndefined(i.withCredentials)||(A.withCredentials=!!i.withCredentials),u&&u!=="json"&&(A.responseType=i.responseType),h&&([_,I]=_g(h,!0),A.addEventListener("progress",_)),d&&A.upload&&([g,T]=_g(d),A.upload.addEventListener("progress",g),A.upload.addEventListener("loadend",T)),(i.cancelToken||i.signal)&&(m=L=>{A&&(r(!L||L.type?new Sc(null,n,A):L),A.abort(),A=null)},i.cancelToken&&i.cancelToken.subscribe(m),i.signal&&(i.signal.aborted?m():i.signal.addEventListener("abort",m)));const M=Pq(i.url);if(M&&Dn.protocols.indexOf(M)===-1){r(new Me("Unsupported protocol "+M+":",Me.ERR_BAD_REQUEST,n));return}A.send(s||null)})},Mq=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,i;const s=function(h){if(!i){i=!0,u();const m=h instanceof Error?h:this.reason;r.abort(m instanceof Me?m:new Sc(m instanceof Error?m.message:m))}};let l=e&&setTimeout(()=>{l=null,s(new Me(`timeout ${e} of ms exceeded`,Me.ETIMEDOUT))},e);const u=()=>{n&&(l&&clearTimeout(l),l=null,n.forEach(h=>{h.unsubscribe?h.unsubscribe(s):h.removeEventListener("abort",s)}),n=null)};n.forEach(h=>h.addEventListener("abort",s));const{signal:d}=r;return d.unsubscribe=()=>re.asap(u),d}},Fq=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,i;for(;r<t;)i=r+e,yield n.slice(r,i),r=i},Uq=async function*(n,e){for await(const t of $q(n))yield*Fq(t,e)},$q=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},Zb=(n,e,t,r)=>{const i=Uq(n,e);let s=0,l,u=d=>{l||(l=!0,r&&r(d))};return new ReadableStream({async pull(d){try{const{done:h,value:m}=await i.next();if(h){u(),d.close();return}let g=m.byteLength;if(t){let _=s+=g;t(_)}d.enqueue(new Uint8Array(m))}catch(h){throw u(h),h}},cancel(d){return u(d),i.return()}},{highWaterMark:2})},Sy=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",xN=Sy&&typeof ReadableStream=="function",jq=Sy&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),ON=(n,...e)=>{try{return!!n(...e)}catch{return!1}},Bq=xN&&ON(()=>{let n=!1;const e=new Request(Dn.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),eP=64*1024,nE=xN&&ON(()=>re.isReadableStream(new Response("").body)),vg={stream:nE&&(n=>n.body)};Sy&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!vg[e]&&(vg[e]=re.isFunction(n[e])?t=>t[e]():(t,r)=>{throw new Me(`Response type '${e}' is not supported`,Me.ERR_NOT_SUPPORT,r)})})})(new Response);const zq=async n=>{if(n==null)return 0;if(re.isBlob(n))return n.size;if(re.isSpecCompliantForm(n))return(await new Request(Dn.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(re.isArrayBufferView(n)||re.isArrayBuffer(n))return n.byteLength;if(re.isURLSearchParams(n)&&(n=n+""),re.isString(n))return(await jq(n)).byteLength},Wq=async(n,e)=>{const t=re.toFiniteNumber(n.getContentLength());return t??zq(e)},qq=Sy&&(async n=>{let{url:e,method:t,data:r,signal:i,cancelToken:s,timeout:l,onDownloadProgress:u,onUploadProgress:d,responseType:h,headers:m,withCredentials:g="same-origin",fetchOptions:_}=kN(n);h=h?(h+"").toLowerCase():"text";let T=Mq([i,s&&s.toAbortSignal()],l),I;const R=T&&T.unsubscribe&&(()=>{T.unsubscribe()});let A;try{if(d&&Bq&&t!=="get"&&t!=="head"&&(A=await Wq(m,r))!==0){let $=new Request(e,{method:"POST",body:r,duplex:"half"}),W;if(re.isFormData(r)&&(W=$.headers.get("content-type"))&&m.setContentType(W),$.body){const[D,b]=Yb(A,_g(Jb(d)));r=Zb($.body,eP,D,b)}}re.isString(g)||(g=g?"include":"omit");const V="credentials"in Request.prototype;I=new Request(e,{..._,signal:T,method:t.toUpperCase(),headers:m.normalize().toJSON(),body:r,duplex:"half",credentials:V?g:void 0});let M=await fetch(I);const L=nE&&(h==="stream"||h==="response");if(nE&&(u||L&&R)){const $={};["status","statusText","headers"].forEach(C=>{$[C]=M[C]});const W=re.toFiniteNumber(M.headers.get("content-length")),[D,b]=u&&Yb(W,_g(Jb(u),!0))||[];M=new Response(Zb(M.body,eP,D,()=>{b&&b(),R&&R()}),$)}h=h||"text";let B=await vg[re.findKey(vg,h)||"text"](M,n);return!L&&R&&R(),await new Promise(($,W)=>{PN($,W,{data:B,headers:sr.from(M.headers),status:M.status,statusText:M.statusText,config:n,request:I})})}catch(V){throw R&&R(),V&&V.name==="TypeError"&&/fetch/i.test(V.message)?Object.assign(new Me("Network Error",Me.ERR_NETWORK,n,I),{cause:V.cause||V}):Me.from(V,V&&V.code,n,I)}}),rE={http:oq,xhr:Vq,fetch:qq};re.forEach(rE,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const tP=n=>`- ${n}`,Hq=n=>re.isFunction(n)||n===null||n===!1,NN={getAdapter:n=>{n=re.isArray(n)?n:[n];const{length:e}=n;let t,r;const i={};for(let s=0;s<e;s++){t=n[s];let l;if(r=t,!Hq(t)&&(r=rE[(l=String(t)).toLowerCase()],r===void 0))throw new Me(`Unknown adapter '${l}'`);if(r)break;i[l||"#"+s]=r}if(!r){const s=Object.entries(i).map(([u,d])=>`adapter ${u} `+(d===!1?"is not supported by the environment":"is not available in the build"));let l=e?s.length>1?`since :
`+s.map(tP).join(`
`):" "+tP(s[0]):"as no adapter specified";throw new Me("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return r},adapters:rE};function Kv(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Sc(null,n)}function nP(n){return Kv(n),n.headers=sr.from(n.headers),n.data=Hv.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),NN.getAdapter(n.adapter||If.adapter)(n).then(function(r){return Kv(n),r.data=Hv.call(n,n.transformResponse,r),r.headers=sr.from(r.headers),r},function(r){return bN(r)||(Kv(n),r&&r.response&&(r.response.data=Hv.call(n,n.transformResponse,r.response),r.response.headers=sr.from(r.response.headers))),Promise.reject(r)})}const DN="1.8.2",Ry={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Ry[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const rP={};Ry.transitional=function(e,t,r){function i(s,l){return"[Axios v"+DN+"] Transitional option '"+s+"'"+l+(r?". "+r:"")}return(s,l,u)=>{if(e===!1)throw new Me(i(l," has been removed"+(t?" in "+t:"")),Me.ERR_DEPRECATED);return t&&!rP[l]&&(rP[l]=!0,console.warn(i(l," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,l,u):!0}};Ry.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function Kq(n,e,t){if(typeof n!="object")throw new Me("options must be an object",Me.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let i=r.length;for(;i-- >0;){const s=r[i],l=e[s];if(l){const u=n[s],d=u===void 0||l(u,s,n);if(d!==!0)throw new Me("option "+s+" must be "+d,Me.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Me("Unknown option "+s,Me.ERR_BAD_OPTION)}}const Cm={assertOptions:Kq,validators:Ry},Pi=Cm.validators;let Ga=class{constructor(e){this.defaults=e,this.interceptors={request:new Gb,response:new Gb}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=al(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:s}=t;r!==void 0&&Cm.assertOptions(r,{silentJSONParsing:Pi.transitional(Pi.boolean),forcedJSONParsing:Pi.transitional(Pi.boolean),clarifyTimeoutError:Pi.transitional(Pi.boolean)},!1),i!=null&&(re.isFunction(i)?t.paramsSerializer={serialize:i}:Cm.assertOptions(i,{encode:Pi.function,serialize:Pi.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Cm.assertOptions(t,{baseUrl:Pi.spelling("baseURL"),withXsrfToken:Pi.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let l=s&&re.merge(s.common,s[t.method]);s&&re.forEach(["delete","get","head","post","put","patch","common"],I=>{delete s[I]}),t.headers=sr.concat(l,s);const u=[];let d=!0;this.interceptors.request.forEach(function(R){typeof R.runWhen=="function"&&R.runWhen(t)===!1||(d=d&&R.synchronous,u.unshift(R.fulfilled,R.rejected))});const h=[];this.interceptors.response.forEach(function(R){h.push(R.fulfilled,R.rejected)});let m,g=0,_;if(!d){const I=[nP.bind(this),void 0];for(I.unshift.apply(I,u),I.push.apply(I,h),_=I.length,m=Promise.resolve(t);g<_;)m=m.then(I[g++],I[g++]);return m}_=u.length;let T=t;for(g=0;g<_;){const I=u[g++],R=u[g++];try{T=I(T)}catch(A){R.call(this,A);break}}try{m=nP.call(this,T)}catch(I){return Promise.reject(I)}for(g=0,_=h.length;g<_;)m=m.then(h[g++],h[g++]);return m}getUri(e){e=al(this.defaults,e);const t=CN(e.baseURL,e.url,e.allowAbsoluteUrls);return SN(t,e.params,e.paramsSerializer)}};re.forEach(["delete","get","head","options"],function(e){Ga.prototype[e]=function(t,r){return this.request(al(r||{},{method:e,url:t,data:(r||{}).data}))}});re.forEach(["post","put","patch"],function(e){function t(r){return function(s,l,u){return this.request(al(u||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:l}))}}Ga.prototype[e]=t(),Ga.prototype[e+"Form"]=t(!0)});let Gq=class LN{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const l=new Promise(u=>{r.subscribe(u),s=u}).then(i);return l.cancel=function(){r.unsubscribe(s)},l},e(function(s,l,u){r.reason||(r.reason=new Sc(s,l,u),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new LN(function(i){e=i}),cancel:e}}};function Qq(n){return function(t){return n.apply(null,t)}}function Yq(n){return re.isObject(n)&&n.isAxiosError===!0}const iE={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(iE).forEach(([n,e])=>{iE[e]=n});function VN(n){const e=new Ga(n),t=fN(Ga.prototype.request,e);return re.extend(t,Ga.prototype,e,{allOwnKeys:!0}),re.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return VN(al(n,i))},t}const bt=VN(If);bt.Axios=Ga;bt.CanceledError=Sc;bt.CancelToken=Gq;bt.isCancel=bN;bt.VERSION=DN;bt.toFormData=Ty;bt.AxiosError=Me;bt.Cancel=bt.CanceledError;bt.all=function(e){return Promise.all(e)};bt.spread=Qq;bt.isAxiosError=Yq;bt.mergeConfig=al;bt.AxiosHeaders=sr;bt.formToJSON=n=>AN(re.isHTMLForm(n)?new FormData(n):n);bt.getAdapter=NN.getAdapter;bt.HttpStatusCode=iE;bt.default=bt;const{Axios:qQ,AxiosError:HQ,CanceledError:KQ,isCancel:GQ,CancelToken:QQ,VERSION:YQ,all:JQ,Cancel:XQ,isAxiosError:ZQ,spread:eY,toFormData:tY,AxiosHeaders:nY,HttpStatusCode:rY,formToJSON:iY,getAdapter:sY,mergeConfig:oY}=bt;var Jq=oN();const kt=mE(Jq);function MN(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=MN(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function fh(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=MN(n))&&(r&&(r+=" "),r+=e);return r}function FN(n,e=Number.MIN_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(n,t))}const Xq={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function UN(n,e,t=void 0){const r={};for(const i in n){const s=n[i];let l="",u=!0;for(let d=0;d<s.length;d+=1){const h=s[d];h&&(l+=(u===!0?"":" ")+e(h),u=!1,t&&t[h]&&(l+=" "+t[h]))}r[i]=l}return r}const Zq=K.createContext(),eH=()=>K.useContext(Zq)??!1;function iP(n){try{return n.matches(":focus-visible")}catch{}return!1}var Gv={exports:{}},lt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sP;function tH(){if(sP)return lt;sP=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),_=Symbol.for("react.offscreen"),T=Symbol.for("react.client.reference");function I(R){if(typeof R=="object"&&R!==null){var A=R.$$typeof;switch(A){case n:switch(R=R.type,R){case t:case i:case r:case d:case h:return R;default:switch(R=R&&R.$$typeof,R){case l:case u:case g:case m:return R;case s:return R;default:return A}}case e:return A}}}return lt.ContextConsumer=s,lt.ContextProvider=l,lt.Element=n,lt.ForwardRef=u,lt.Fragment=t,lt.Lazy=g,lt.Memo=m,lt.Portal=e,lt.Profiler=i,lt.StrictMode=r,lt.Suspense=d,lt.SuspenseList=h,lt.isContextConsumer=function(R){return I(R)===s},lt.isContextProvider=function(R){return I(R)===l},lt.isElement=function(R){return typeof R=="object"&&R!==null&&R.$$typeof===n},lt.isForwardRef=function(R){return I(R)===u},lt.isFragment=function(R){return I(R)===t},lt.isLazy=function(R){return I(R)===g},lt.isMemo=function(R){return I(R)===m},lt.isPortal=function(R){return I(R)===e},lt.isProfiler=function(R){return I(R)===i},lt.isStrictMode=function(R){return I(R)===r},lt.isSuspense=function(R){return I(R)===d},lt.isSuspenseList=function(R){return I(R)===h},lt.isValidElementType=function(R){return typeof R=="string"||typeof R=="function"||R===t||R===i||R===r||R===d||R===h||R===_||typeof R=="object"&&R!==null&&(R.$$typeof===g||R.$$typeof===m||R.$$typeof===l||R.$$typeof===s||R.$$typeof===u||R.$$typeof===T||R.getModuleId!==void 0)},lt.typeOf=I,lt}var oP;function nH(){return oP||(oP=1,Gv.exports=tH()),Gv.exports}var $N=nH();function Is(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function jN(n){if(K.isValidElement(n)||$N.isValidElementType(n)||!Is(n))return n;const e={};return Object.keys(n).forEach(t=>{e[t]=jN(n[t])}),e}function Tr(n,e,t={clone:!0}){const r=t.clone?{...n}:n;return Is(n)&&Is(e)&&Object.keys(e).forEach(i=>{K.isValidElement(e[i])||$N.isValidElementType(e[i])?r[i]=e[i]:Is(e[i])&&Object.prototype.hasOwnProperty.call(n,i)&&Is(n[i])?r[i]=Tr(n[i],e[i],t):t.clone?r[i]=Is(e[i])?jN(e[i]):e[i]:r[i]=e[i]}),r}function ll(n,...e){const t=new URL(`https://mui.com/production-error/?code=${n}`);return e.forEach(r=>t.searchParams.append("args[]",r)),`Minified MUI error #${n}; visit ${t} for the full message.`}function qo(n){if(typeof n!="string")throw new Error(ll(7));return n.charAt(0).toUpperCase()+n.slice(1)}function rH(n,e){typeof n=="function"?n(e):n&&(n.current=e)}let aP=0;function iH(n){const[e,t]=K.useState(n),r=n||e;return K.useEffect(()=>{e==null&&(aP+=1,t(`mui-${aP}`))},[e]),r}const sH={...ew},lP=sH.useId;function BN(n){if(lP!==void 0){const e=lP();return n??e}return iH(n)}function oH({controlled:n,default:e,name:t,state:r="value"}){const{current:i}=K.useRef(n!==void 0),[s,l]=K.useState(e),u=i?n:s,d=K.useCallback(h=>{i||l(h)},[]);return[u,d]}function aH(...n){return K.useMemo(()=>n.every(e=>e==null)?null:e=>{n.forEach(t=>{rH(t,e)})},n)}function sE(n,e){const t={...e};for(const r in n)if(Object.prototype.hasOwnProperty.call(n,r)){const i=r;if(i==="components"||i==="slots")t[i]={...n[i],...t[i]};else if(i==="componentsProps"||i==="slotProps"){const s=n[i],l=e[i];if(!l)t[i]=s||{};else if(!s)t[i]=l;else{t[i]={...l};for(const u in s)if(Object.prototype.hasOwnProperty.call(s,u)){const d=u;t[i][d]=sE(s[d],l[d])}}}else t[i]===void 0&&(t[i]=n[i])}return t}const uP=n=>n,lH=()=>{let n=uP;return{configure(e){n=e},generate(e){return n(e)},reset(){n=uP}}},uH=lH(),cH={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function gI(n,e,t="Mui"){const r=cH[e];return r?`${t}-${r}`:`${uH.generate(n)}-${e}`}function zN(n,e,t="Mui"){const r={};return e.forEach(i=>{r[i]=gI(n,i,t)}),r}function ph(n,e){return e?Tr(n,e,{clone:!1}):n}function dH(n,e){if(!n.containerQueries)return e;const t=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,i)=>{var l,u;const s=/min-width:\s*([0-9.]+)/;return+(((l=r.match(s))==null?void 0:l[1])||0)-+(((u=i.match(s))==null?void 0:u[1])||0)});return t.length?t.reduce((r,i)=>{const s=e[i];return delete r[i],r[i]=s,r},{...e}):e}function hH(n,e){return e==="@"||e.startsWith("@")&&(n.some(t=>e.startsWith(`@${t}`))||!!e.match(/^@\d/))}function fH(n,e){const t=e.match(/^@([^/]+)?\/?(.+)?$/);if(!t)return null;const[,r,i]=t,s=Number.isNaN(+r)?r||0:+r;return n.containerQueries(i).up(s)}function pH(n){const e=(s,l)=>s.replace("@media",l?`@container ${l}`:"@container");function t(s,l){s.up=(...u)=>e(n.breakpoints.up(...u),l),s.down=(...u)=>e(n.breakpoints.down(...u),l),s.between=(...u)=>e(n.breakpoints.between(...u),l),s.only=(...u)=>e(n.breakpoints.only(...u),l),s.not=(...u)=>{const d=e(n.breakpoints.not(...u),l);return d.includes("not all and")?d.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):d}}const r={},i=s=>(t(r,s),r);return t(i),{...n,containerQueries:i}}const Ay={xs:0,sm:600,md:900,lg:1200,xl:1536},cP={keys:["xs","sm","md","lg","xl"],up:n=>`@media (min-width:${Ay[n]}px)`},mH={containerQueries:n=>({up:e=>{let t=typeof e=="number"?e:Ay[e]||e;return typeof t=="number"&&(t=`${t}px`),n?`@container ${n} (min-width:${t})`:`@container (min-width:${t})`}})};function Fs(n,e,t){const r=n.theme||{};if(Array.isArray(e)){const s=r.breakpoints||cP;return e.reduce((l,u,d)=>(l[s.up(s.keys[d])]=t(e[d]),l),{})}if(typeof e=="object"){const s=r.breakpoints||cP;return Object.keys(e).reduce((l,u)=>{if(hH(s.keys,u)){const d=fH(r.containerQueries?r:mH,u);d&&(l[d]=t(e[u],u))}else if(Object.keys(s.values||Ay).includes(u)){const d=s.up(u);l[d]=t(e[u],u)}else{const d=u;l[d]=e[d]}return l},{})}return t(e)}function gH(n={}){var t;return((t=n.keys)==null?void 0:t.reduce((r,i)=>{const s=n.up(i);return r[s]={},r},{}))||{}}function yH(n,e){return n.reduce((t,r)=>{const i=t[r];return(!i||Object.keys(i).length===0)&&delete t[r],t},e)}function by(n,e,t=!0){if(!e||typeof e!="string")return null;if(n&&n.vars&&t){const r=`vars.${e}`.split(".").reduce((i,s)=>i&&i[s]?i[s]:null,n);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,n)}function wg(n,e,t,r=t){let i;return typeof n=="function"?i=n(t):Array.isArray(n)?i=n[t]||r:i=by(n,t)||r,e&&(i=e(i,r,n)),i}function qt(n){const{prop:e,cssProperty:t=n.prop,themeKey:r,transform:i}=n,s=l=>{if(l[e]==null)return null;const u=l[e],d=l.theme,h=by(d,r)||{};return Fs(l,u,g=>{let _=wg(h,i,g);return g===_&&typeof g=="string"&&(_=wg(h,i,`${e}${g==="default"?"":qo(g)}`,g)),t===!1?_:{[t]:_}})};return s.propTypes={},s.filterProps=[e],s}function _H(n){const e={};return t=>(e[t]===void 0&&(e[t]=n(t)),e[t])}const vH={m:"margin",p:"padding"},wH={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},dP={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},EH=_H(n=>{if(n.length>2)if(dP[n])n=dP[n];else return[n];const[e,t]=n.split(""),r=vH[e],i=wH[t]||"";return Array.isArray(i)?i.map(s=>r+s):[r+i]}),yI=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],_I=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...yI,..._I];function Tf(n,e,t,r){const i=by(n,e,!0)??t;return typeof i=="number"||typeof i=="string"?s=>typeof s=="string"?s:typeof i=="string"?`calc(${s} * ${i})`:i*s:Array.isArray(i)?s=>{if(typeof s=="string")return s;const l=Math.abs(s),u=i[l];return s>=0?u:typeof u=="number"?-u:`-${u}`}:typeof i=="function"?i:()=>{}}function vI(n){return Tf(n,"spacing",8)}function Sf(n,e){return typeof e=="string"||e==null?e:n(e)}function IH(n,e){return t=>n.reduce((r,i)=>(r[i]=Sf(e,t),r),{})}function TH(n,e,t,r){if(!e.includes(t))return null;const i=EH(t),s=IH(i,r),l=n[t];return Fs(n,l,s)}function WN(n,e){const t=vI(n.theme);return Object.keys(n).map(r=>TH(n,e,r,t)).reduce(ph,{})}function Lt(n){return WN(n,yI)}Lt.propTypes={};Lt.filterProps=yI;function Vt(n){return WN(n,_I)}Vt.propTypes={};Vt.filterProps=_I;function Py(...n){const e=n.reduce((r,i)=>(i.filterProps.forEach(s=>{r[s]=i}),r),{}),t=r=>Object.keys(r).reduce((i,s)=>e[s]?ph(i,e[s](r)):i,{});return t.propTypes={},t.filterProps=n.reduce((r,i)=>r.concat(i.filterProps),[]),t}function Ur(n){return typeof n!="number"?n:`${n}px solid`}function qr(n,e){return qt({prop:n,themeKey:"borders",transform:e})}const SH=qr("border",Ur),RH=qr("borderTop",Ur),AH=qr("borderRight",Ur),bH=qr("borderBottom",Ur),PH=qr("borderLeft",Ur),CH=qr("borderColor"),kH=qr("borderTopColor"),xH=qr("borderRightColor"),OH=qr("borderBottomColor"),NH=qr("borderLeftColor"),DH=qr("outline",Ur),LH=qr("outlineColor"),Cy=n=>{if(n.borderRadius!==void 0&&n.borderRadius!==null){const e=Tf(n.theme,"shape.borderRadius",4),t=r=>({borderRadius:Sf(e,r)});return Fs(n,n.borderRadius,t)}return null};Cy.propTypes={};Cy.filterProps=["borderRadius"];Py(SH,RH,AH,bH,PH,CH,kH,xH,OH,NH,Cy,DH,LH);const ky=n=>{if(n.gap!==void 0&&n.gap!==null){const e=Tf(n.theme,"spacing",8),t=r=>({gap:Sf(e,r)});return Fs(n,n.gap,t)}return null};ky.propTypes={};ky.filterProps=["gap"];const xy=n=>{if(n.columnGap!==void 0&&n.columnGap!==null){const e=Tf(n.theme,"spacing",8),t=r=>({columnGap:Sf(e,r)});return Fs(n,n.columnGap,t)}return null};xy.propTypes={};xy.filterProps=["columnGap"];const Oy=n=>{if(n.rowGap!==void 0&&n.rowGap!==null){const e=Tf(n.theme,"spacing",8),t=r=>({rowGap:Sf(e,r)});return Fs(n,n.rowGap,t)}return null};Oy.propTypes={};Oy.filterProps=["rowGap"];const VH=qt({prop:"gridColumn"}),MH=qt({prop:"gridRow"}),FH=qt({prop:"gridAutoFlow"}),UH=qt({prop:"gridAutoColumns"}),$H=qt({prop:"gridAutoRows"}),jH=qt({prop:"gridTemplateColumns"}),BH=qt({prop:"gridTemplateRows"}),zH=qt({prop:"gridTemplateAreas"}),WH=qt({prop:"gridArea"});Py(ky,xy,Oy,VH,MH,FH,UH,$H,jH,BH,zH,WH);function Ou(n,e){return e==="grey"?e:n}const qH=qt({prop:"color",themeKey:"palette",transform:Ou}),HH=qt({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Ou}),KH=qt({prop:"backgroundColor",themeKey:"palette",transform:Ou});Py(qH,HH,KH);function vr(n){return n<=1&&n!==0?`${n*100}%`:n}const GH=qt({prop:"width",transform:vr}),wI=n=>{if(n.maxWidth!==void 0&&n.maxWidth!==null){const e=t=>{var i,s,l,u,d;const r=((l=(s=(i=n.theme)==null?void 0:i.breakpoints)==null?void 0:s.values)==null?void 0:l[t])||Ay[t];return r?((d=(u=n.theme)==null?void 0:u.breakpoints)==null?void 0:d.unit)!=="px"?{maxWidth:`${r}${n.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:vr(t)}};return Fs(n,n.maxWidth,e)}return null};wI.filterProps=["maxWidth"];const QH=qt({prop:"minWidth",transform:vr}),YH=qt({prop:"height",transform:vr}),JH=qt({prop:"maxHeight",transform:vr}),XH=qt({prop:"minHeight",transform:vr});qt({prop:"size",cssProperty:"width",transform:vr});qt({prop:"size",cssProperty:"height",transform:vr});const ZH=qt({prop:"boxSizing"});Py(GH,wI,QH,YH,JH,XH,ZH);const Ny={border:{themeKey:"borders",transform:Ur},borderTop:{themeKey:"borders",transform:Ur},borderRight:{themeKey:"borders",transform:Ur},borderBottom:{themeKey:"borders",transform:Ur},borderLeft:{themeKey:"borders",transform:Ur},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Ur},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Cy},color:{themeKey:"palette",transform:Ou},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Ou},backgroundColor:{themeKey:"palette",transform:Ou},p:{style:Vt},pt:{style:Vt},pr:{style:Vt},pb:{style:Vt},pl:{style:Vt},px:{style:Vt},py:{style:Vt},padding:{style:Vt},paddingTop:{style:Vt},paddingRight:{style:Vt},paddingBottom:{style:Vt},paddingLeft:{style:Vt},paddingX:{style:Vt},paddingY:{style:Vt},paddingInline:{style:Vt},paddingInlineStart:{style:Vt},paddingInlineEnd:{style:Vt},paddingBlock:{style:Vt},paddingBlockStart:{style:Vt},paddingBlockEnd:{style:Vt},m:{style:Lt},mt:{style:Lt},mr:{style:Lt},mb:{style:Lt},ml:{style:Lt},mx:{style:Lt},my:{style:Lt},margin:{style:Lt},marginTop:{style:Lt},marginRight:{style:Lt},marginBottom:{style:Lt},marginLeft:{style:Lt},marginX:{style:Lt},marginY:{style:Lt},marginInline:{style:Lt},marginInlineStart:{style:Lt},marginInlineEnd:{style:Lt},marginBlock:{style:Lt},marginBlockStart:{style:Lt},marginBlockEnd:{style:Lt},displayPrint:{cssProperty:!1,transform:n=>({"@media print":{display:n}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:ky},rowGap:{style:Oy},columnGap:{style:xy},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:vr},maxWidth:{style:wI},minWidth:{transform:vr},height:{transform:vr},maxHeight:{transform:vr},minHeight:{transform:vr},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function e8(...n){const e=n.reduce((r,i)=>r.concat(Object.keys(i)),[]),t=new Set(e);return n.every(r=>t.size===Object.keys(r).length)}function t8(n,e){return typeof n=="function"?n(e):n}function n8(){function n(t,r,i,s){const l={[t]:r,theme:i},u=s[t];if(!u)return{[t]:r};const{cssProperty:d=t,themeKey:h,transform:m,style:g}=u;if(r==null)return null;if(h==="typography"&&r==="inherit")return{[t]:r};const _=by(i,h)||{};return g?g(l):Fs(l,r,I=>{let R=wg(_,m,I);return I===R&&typeof I=="string"&&(R=wg(_,m,`${t}${I==="default"?"":qo(I)}`,I)),d===!1?R:{[d]:R}})}function e(t){const{sx:r,theme:i={}}=t||{};if(!r)return null;const s=i.unstable_sxConfig??Ny;function l(u){let d=u;if(typeof u=="function")d=u(i);else if(typeof u!="object")return u;if(!d)return null;const h=gH(i.breakpoints),m=Object.keys(h);let g=h;return Object.keys(d).forEach(_=>{const T=t8(d[_],i);if(T!=null)if(typeof T=="object")if(s[_])g=ph(g,n(_,T,i,s));else{const I=Fs({theme:i},T,R=>({[_]:R}));e8(I,T)?g[_]=e({sx:T,theme:i}):g=ph(g,I)}else g=ph(g,n(_,T,i,s))}),dH(i,yH(m,g))}return Array.isArray(r)?r.map(l):l(r)}return e}const rc=n8();rc.filterProps=["sx"];function oE(){return oE=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},oE.apply(null,arguments)}function r8(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function i8(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var s8=function(){function n(t){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(i8(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=r8(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},n}(),On="-ms-",Eg="-moz-",tt="-webkit-",qN="comm",EI="rule",II="decl",o8="@import",HN="@keyframes",a8="@layer",l8=Math.abs,Dy=String.fromCharCode,u8=Object.assign;function c8(n,e){return Tn(n,0)^45?(((e<<2^Tn(n,0))<<2^Tn(n,1))<<2^Tn(n,2))<<2^Tn(n,3):0}function KN(n){return n.trim()}function d8(n,e){return(n=e.exec(n))?n[0]:n}function nt(n,e,t){return n.replace(e,t)}function aE(n,e){return n.indexOf(e)}function Tn(n,e){return n.charCodeAt(e)|0}function jh(n,e,t){return n.slice(e,t)}function Oi(n){return n.length}function TI(n){return n.length}function em(n,e){return e.push(n),n}function h8(n,e){return n.map(e).join("")}var Ly=1,ic=1,GN=0,or=0,Jt=0,Rc="";function Vy(n,e,t,r,i,s,l){return{value:n,root:e,parent:t,type:r,props:i,children:s,line:Ly,column:ic,length:l,return:""}}function Ud(n,e){return u8(Vy("",null,null,"",null,null,0),n,{length:-n.length},e)}function f8(){return Jt}function p8(){return Jt=or>0?Tn(Rc,--or):0,ic--,Jt===10&&(ic=1,Ly--),Jt}function Sr(){return Jt=or<GN?Tn(Rc,or++):0,ic++,Jt===10&&(ic=1,Ly++),Jt}function Ki(){return Tn(Rc,or)}function km(){return or}function Rf(n,e){return jh(Rc,n,e)}function Bh(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function QN(n){return Ly=ic=1,GN=Oi(Rc=n),or=0,[]}function YN(n){return Rc="",n}function xm(n){return KN(Rf(or-1,lE(n===91?n+2:n===40?n+1:n)))}function m8(n){for(;(Jt=Ki())&&Jt<33;)Sr();return Bh(n)>2||Bh(Jt)>3?"":" "}function g8(n,e){for(;--e&&Sr()&&!(Jt<48||Jt>102||Jt>57&&Jt<65||Jt>70&&Jt<97););return Rf(n,km()+(e<6&&Ki()==32&&Sr()==32))}function lE(n){for(;Sr();)switch(Jt){case n:return or;case 34:case 39:n!==34&&n!==39&&lE(Jt);break;case 40:n===41&&lE(n);break;case 92:Sr();break}return or}function y8(n,e){for(;Sr()&&n+Jt!==57;)if(n+Jt===84&&Ki()===47)break;return"/*"+Rf(e,or-1)+"*"+Dy(n===47?n:Sr())}function _8(n){for(;!Bh(Ki());)Sr();return Rf(n,or)}function v8(n){return YN(Om("",null,null,null,[""],n=QN(n),0,[0],n))}function Om(n,e,t,r,i,s,l,u,d){for(var h=0,m=0,g=l,_=0,T=0,I=0,R=1,A=1,V=1,M=0,L="",B=i,$=s,W=r,D=L;A;)switch(I=M,M=Sr()){case 40:if(I!=108&&Tn(D,g-1)==58){aE(D+=nt(xm(M),"&","&\f"),"&\f")!=-1&&(V=-1);break}case 34:case 39:case 91:D+=xm(M);break;case 9:case 10:case 13:case 32:D+=m8(I);break;case 92:D+=g8(km()-1,7);continue;case 47:switch(Ki()){case 42:case 47:em(w8(y8(Sr(),km()),e,t),d);break;default:D+="/"}break;case 123*R:u[h++]=Oi(D)*V;case 125*R:case 59:case 0:switch(M){case 0:case 125:A=0;case 59+m:V==-1&&(D=nt(D,/\f/g,"")),T>0&&Oi(D)-g&&em(T>32?fP(D+";",r,t,g-1):fP(nt(D," ","")+";",r,t,g-2),d);break;case 59:D+=";";default:if(em(W=hP(D,e,t,h,m,i,u,L,B=[],$=[],g),s),M===123)if(m===0)Om(D,e,W,W,B,s,g,u,$);else switch(_===99&&Tn(D,3)===110?100:_){case 100:case 108:case 109:case 115:Om(n,W,W,r&&em(hP(n,W,W,0,0,i,u,L,i,B=[],g),$),i,$,g,u,r?B:$);break;default:Om(D,W,W,W,[""],$,0,u,$)}}h=m=T=0,R=V=1,L=D="",g=l;break;case 58:g=1+Oi(D),T=I;default:if(R<1){if(M==123)--R;else if(M==125&&R++==0&&p8()==125)continue}switch(D+=Dy(M),M*R){case 38:V=m>0?1:(D+="\f",-1);break;case 44:u[h++]=(Oi(D)-1)*V,V=1;break;case 64:Ki()===45&&(D+=xm(Sr())),_=Ki(),m=g=Oi(L=D+=_8(km())),M++;break;case 45:I===45&&Oi(D)==2&&(R=0)}}return s}function hP(n,e,t,r,i,s,l,u,d,h,m){for(var g=i-1,_=i===0?s:[""],T=TI(_),I=0,R=0,A=0;I<r;++I)for(var V=0,M=jh(n,g+1,g=l8(R=l[I])),L=n;V<T;++V)(L=KN(R>0?_[V]+" "+M:nt(M,/&\f/g,_[V])))&&(d[A++]=L);return Vy(n,e,t,i===0?EI:u,d,h,m)}function w8(n,e,t){return Vy(n,e,t,qN,Dy(f8()),jh(n,2,-2),0)}function fP(n,e,t,r){return Vy(n,e,t,II,jh(n,0,r),jh(n,r+1,-1),r)}function Nu(n,e){for(var t="",r=TI(n),i=0;i<r;i++)t+=e(n[i],i,n,e)||"";return t}function E8(n,e,t,r){switch(n.type){case a8:if(n.children.length)break;case o8:case II:return n.return=n.return||n.value;case qN:return"";case HN:return n.return=n.value+"{"+Nu(n.children,r)+"}";case EI:n.value=n.props.join(",")}return Oi(t=Nu(n.children,r))?n.return=n.value+"{"+t+"}":""}function I8(n){var e=TI(n);return function(t,r,i,s){for(var l="",u=0;u<e;u++)l+=n[u](t,r,i,s)||"";return l}}function T8(n){return function(e){e.root||(e=e.return)&&n(e)}}function JN(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var S8=function(e,t,r){for(var i=0,s=0;i=s,s=Ki(),i===38&&s===12&&(t[r]=1),!Bh(s);)Sr();return Rf(e,or)},R8=function(e,t){var r=-1,i=44;do switch(Bh(i)){case 0:i===38&&Ki()===12&&(t[r]=1),e[r]+=S8(or-1,t,r);break;case 2:e[r]+=xm(i);break;case 4:if(i===44){e[++r]=Ki()===58?"&\f":"",t[r]=e[r].length;break}default:e[r]+=Dy(i)}while(i=Sr());return e},A8=function(e,t){return YN(R8(QN(e),t))},pP=new WeakMap,b8=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!pP.get(r))&&!i){pP.set(e,!0);for(var s=[],l=A8(t,s),u=r.props,d=0,h=0;d<l.length;d++)for(var m=0;m<u.length;m++,h++)e.props[h]=s[d]?l[d].replace(/&\f/g,u[m]):u[m]+" "+l[d]}}},P8=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function XN(n,e){switch(c8(n,e)){case 5103:return tt+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return tt+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return tt+n+Eg+n+On+n+n;case 6828:case 4268:return tt+n+On+n+n;case 6165:return tt+n+On+"flex-"+n+n;case 5187:return tt+n+nt(n,/(\w+).+(:[^]+)/,tt+"box-$1$2"+On+"flex-$1$2")+n;case 5443:return tt+n+On+"flex-item-"+nt(n,/flex-|-self/,"")+n;case 4675:return tt+n+On+"flex-line-pack"+nt(n,/align-content|flex-|-self/,"")+n;case 5548:return tt+n+On+nt(n,"shrink","negative")+n;case 5292:return tt+n+On+nt(n,"basis","preferred-size")+n;case 6060:return tt+"box-"+nt(n,"-grow","")+tt+n+On+nt(n,"grow","positive")+n;case 4554:return tt+nt(n,/([^-])(transform)/g,"$1"+tt+"$2")+n;case 6187:return nt(nt(nt(n,/(zoom-|grab)/,tt+"$1"),/(image-set)/,tt+"$1"),n,"")+n;case 5495:case 3959:return nt(n,/(image-set\([^]*)/,tt+"$1$`$1");case 4968:return nt(nt(n,/(.+:)(flex-)?(.*)/,tt+"box-pack:$3"+On+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+tt+n+n;case 4095:case 3583:case 4068:case 2532:return nt(n,/(.+)-inline(.+)/,tt+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Oi(n)-1-e>6)switch(Tn(n,e+1)){case 109:if(Tn(n,e+4)!==45)break;case 102:return nt(n,/(.+:)(.+)-([^]+)/,"$1"+tt+"$2-$3$1"+Eg+(Tn(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~aE(n,"stretch")?XN(nt(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(Tn(n,e+1)!==115)break;case 6444:switch(Tn(n,Oi(n)-3-(~aE(n,"!important")&&10))){case 107:return nt(n,":",":"+tt)+n;case 101:return nt(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+tt+(Tn(n,14)===45?"inline-":"")+"box$3$1"+tt+"$2$3$1"+On+"$2box$3")+n}break;case 5936:switch(Tn(n,e+11)){case 114:return tt+n+On+nt(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return tt+n+On+nt(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return tt+n+On+nt(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return tt+n+On+n+n}return n}var C8=function(e,t,r,i){if(e.length>-1&&!e.return)switch(e.type){case II:e.return=XN(e.value,e.length);break;case HN:return Nu([Ud(e,{value:nt(e.value,"@","@"+tt)})],i);case EI:if(e.length)return h8(e.props,function(s){switch(d8(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Nu([Ud(e,{props:[nt(s,/:(read-\w+)/,":"+Eg+"$1")]})],i);case"::placeholder":return Nu([Ud(e,{props:[nt(s,/:(plac\w+)/,":"+tt+"input-$1")]}),Ud(e,{props:[nt(s,/:(plac\w+)/,":"+Eg+"$1")]}),Ud(e,{props:[nt(s,/:(plac\w+)/,On+"input-$1")]})],i)}return""})}},k8=[C8],x8=function(e){var t=e.key;if(t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(R){var A=R.getAttribute("data-emotion");A.indexOf(" ")!==-1&&(document.head.appendChild(R),R.setAttribute("data-s",""))})}var i=e.stylisPlugins||k8,s={},l,u=[];l=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(R){for(var A=R.getAttribute("data-emotion").split(" "),V=1;V<A.length;V++)s[A[V]]=!0;u.push(R)});var d,h=[b8,P8];{var m,g=[E8,T8(function(R){m.insert(R)})],_=I8(h.concat(i,g)),T=function(A){return Nu(v8(A),_)};d=function(A,V,M,L){m=M,T(A?A+"{"+V.styles+"}":V.styles),L&&(I.inserted[V.name]=!0)}}var I={key:t,sheet:new s8({key:t,container:l,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:d};return I.sheet.hydrate(u),I},O8=!0;function N8(n,e,t){var r="";return t.split(" ").forEach(function(i){n[i]!==void 0?e.push(n[i]+";"):i&&(r+=i+" ")}),r}var ZN=function(e,t,r){var i=e.key+"-"+t.name;(r===!1||O8===!1)&&e.registered[i]===void 0&&(e.registered[i]=t.styles)},D8=function(e,t,r){ZN(e,t,r);var i=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var s=t;do e.insert(t===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function L8(n){for(var e=0,t,r=0,i=n.length;i>=4;++r,i-=4)t=n.charCodeAt(r)&255|(n.charCodeAt(++r)&255)<<8|(n.charCodeAt(++r)&255)<<16|(n.charCodeAt(++r)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(n.charCodeAt(r+2)&255)<<16;case 2:e^=(n.charCodeAt(r+1)&255)<<8;case 1:e^=n.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var V8={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},M8=/[A-Z]|^ms/g,F8=/_EMO_([^_]+?)_([^]*?)_EMO_/g,eD=function(e){return e.charCodeAt(1)===45},mP=function(e){return e!=null&&typeof e!="boolean"},Qv=JN(function(n){return eD(n)?n:n.replace(M8,"-$&").toLowerCase()}),gP=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(F8,function(r,i,s){return Ni={name:i,styles:s,next:Ni},i})}return V8[e]!==1&&!eD(e)&&typeof t=="number"&&t!==0?t+"px":t};function zh(n,e,t){if(t==null)return"";var r=t;if(r.__emotion_styles!==void 0)return r;switch(typeof t){case"boolean":return"";case"object":{var i=t;if(i.anim===1)return Ni={name:i.name,styles:i.styles,next:Ni},i.name;var s=t;if(s.styles!==void 0){var l=s.next;if(l!==void 0)for(;l!==void 0;)Ni={name:l.name,styles:l.styles,next:Ni},l=l.next;var u=s.styles+";";return u}return U8(n,e,t)}case"function":{if(n!==void 0){var d=Ni,h=t(n);return Ni=d,zh(n,e,h)}break}}var m=t;if(e==null)return m;var g=e[m];return g!==void 0?g:m}function U8(n,e,t){var r="";if(Array.isArray(t))for(var i=0;i<t.length;i++)r+=zh(n,e,t[i])+";";else for(var s in t){var l=t[s];if(typeof l!="object"){var u=l;e!=null&&e[u]!==void 0?r+=s+"{"+e[u]+"}":mP(u)&&(r+=Qv(s)+":"+gP(s,u)+";")}else if(Array.isArray(l)&&typeof l[0]=="string"&&(e==null||e[l[0]]===void 0))for(var d=0;d<l.length;d++)mP(l[d])&&(r+=Qv(s)+":"+gP(s,l[d])+";");else{var h=zh(n,e,l);switch(s){case"animation":case"animationName":{r+=Qv(s)+":"+h+";";break}default:r+=s+"{"+h+"}"}}}return r}var yP=/label:\s*([^\s;{]+)\s*(;|$)/g,Ni;function tD(n,e,t){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var r=!0,i="";Ni=void 0;var s=n[0];if(s==null||s.raw===void 0)r=!1,i+=zh(t,e,s);else{var l=s;i+=l[0]}for(var u=1;u<n.length;u++)if(i+=zh(t,e,n[u]),r){var d=s;i+=d[u]}yP.lastIndex=0;for(var h="",m;(m=yP.exec(i))!==null;)h+="-"+m[1];var g=L8(i)+h;return{name:g,styles:i,next:Ni}}var $8=function(e){return e()},j8=ew.useInsertionEffect?ew.useInsertionEffect:!1,B8=j8||$8,nD=K.createContext(typeof HTMLElement<"u"?x8({key:"css"}):null);nD.Provider;var z8=function(e){return K.forwardRef(function(t,r){var i=K.useContext(nD);return e(t,i,r)})},W8=K.createContext({}),q8=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,H8=JN(function(n){return q8.test(n)||n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)<91}),K8=H8,G8=function(e){return e!=="theme"},_P=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?K8:G8},vP=function(e,t,r){var i;if(t){var s=t.shouldForwardProp;i=e.__emotion_forwardProp&&s?function(l){return e.__emotion_forwardProp(l)&&s(l)}:s}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},Q8=function(e){var t=e.cache,r=e.serialized,i=e.isStringTag;return ZN(t,r,i),B8(function(){return D8(t,r,i)}),null},Y8=function n(e,t){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,s,l;t!==void 0&&(s=t.label,l=t.target);var u=vP(e,t,r),d=u||_P(i),h=!d("as");return function(){var m=arguments,g=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&g.push("label:"+s+";"),m[0]==null||m[0].raw===void 0)g.push.apply(g,m);else{var _=m[0];g.push(_[0]);for(var T=m.length,I=1;I<T;I++)g.push(m[I],_[I])}var R=z8(function(A,V,M){var L=h&&A.as||i,B="",$=[],W=A;if(A.theme==null){W={};for(var D in A)W[D]=A[D];W.theme=K.useContext(W8)}typeof A.className=="string"?B=N8(V.registered,$,A.className):A.className!=null&&(B=A.className+" ");var b=tD(g.concat($),V.registered,W);B+=V.key+"-"+b.name,l!==void 0&&(B+=" "+l);var C=h&&u===void 0?_P(L):d,E={};for(var x in A)h&&x==="as"||C(x)&&(E[x]=A[x]);return E.className=B,M&&(E.ref=M),K.createElement(K.Fragment,null,K.createElement(Q8,{cache:V,serialized:b,isStringTag:typeof L=="string"}),K.createElement(L,E))});return R.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",R.defaultProps=e.defaultProps,R.__emotion_real=R,R.__emotion_base=i,R.__emotion_styles=g,R.__emotion_forwardProp=u,Object.defineProperty(R,"toString",{value:function(){return"."+l}}),R.withComponent=function(A,V){var M=n(A,oE({},t,V,{shouldForwardProp:vP(R,V,!0)}));return M.apply(void 0,g)},R}},J8=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],uE=Y8.bind(null);J8.forEach(function(n){uE[n]=uE(n)});/**
 * @mui/styled-engine v6.4.3
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function X8(n,e){return uE(n,e)}function Z8(n,e){Array.isArray(n.__emotion_styles)&&(n.__emotion_styles=e(n.__emotion_styles))}const wP=[];function EP(n){return wP[0]=n,tD(wP)}const eK=n=>{const e=Object.keys(n).map(t=>({key:t,val:n[t]}))||[];return e.sort((t,r)=>t.val-r.val),e.reduce((t,r)=>({...t,[r.key]:r.val}),{})};function tK(n){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:t="px",step:r=5,...i}=n,s=eK(e),l=Object.keys(s);function u(_){return`@media (min-width:${typeof e[_]=="number"?e[_]:_}${t})`}function d(_){return`@media (max-width:${(typeof e[_]=="number"?e[_]:_)-r/100}${t})`}function h(_,T){const I=l.indexOf(T);return`@media (min-width:${typeof e[_]=="number"?e[_]:_}${t}) and (max-width:${(I!==-1&&typeof e[l[I]]=="number"?e[l[I]]:T)-r/100}${t})`}function m(_){return l.indexOf(_)+1<l.length?h(_,l[l.indexOf(_)+1]):u(_)}function g(_){const T=l.indexOf(_);return T===0?u(l[1]):T===l.length-1?d(l[T]):h(_,l[l.indexOf(_)+1]).replace("@media","@media not all and")}return{keys:l,values:s,up:u,down:d,between:h,only:m,not:g,unit:t,...i}}const nK={borderRadius:4};function rD(n=8,e=vI({spacing:n})){if(n.mui)return n;const t=(...r)=>(r.length===0?[1]:r).map(s=>{const l=e(s);return typeof l=="number"?`${l}px`:l}).join(" ");return t.mui=!0,t}function rK(n,e){var r;const t=this;if(t.vars){if(!((r=t.colorSchemes)!=null&&r[n])||typeof t.getColorSchemeSelector!="function")return{};let i=t.getColorSchemeSelector(n);return i==="&"?e:((i.includes("data-")||i.includes("."))&&(i=`*:where(${i.replace(/\s*&$/,"")}) &`),{[i]:e})}return t.palette.mode===n?e:{}}function iD(n={},...e){const{breakpoints:t={},palette:r={},spacing:i,shape:s={},...l}=n,u=tK(t),d=rD(i);let h=Tr({breakpoints:u,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:d,shape:{...nK,...s}},l);return h=pH(h),h.applyStyles=rK,h=e.reduce((m,g)=>Tr(m,g),h),h.unstable_sxConfig={...Ny,...l==null?void 0:l.unstable_sxConfig},h.unstable_sx=function(g){return rc({sx:g,theme:this})},h}function sD(n){const{variants:e,...t}=n,r={variants:e,style:EP(t),isProcessed:!0};return r.style===t||e&&e.forEach(i=>{typeof i.style!="function"&&(i.style=EP(i.style))}),r}const iK=iD();function Yv(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}function sK(n){return n?(e,t)=>t[n]:null}function oK(n,e,t){n.theme=uK(n.theme)?t:n.theme[e]||n.theme}function Nm(n,e){const t=typeof e=="function"?e(n):e;if(Array.isArray(t))return t.flatMap(r=>Nm(n,r));if(Array.isArray(t==null?void 0:t.variants)){let r;if(t.isProcessed)r=t.style;else{const{variants:i,...s}=t;r=s}return oD(n,t.variants,[r])}return t!=null&&t.isProcessed?t.style:t}function oD(n,e,t=[]){var i;let r;e:for(let s=0;s<e.length;s+=1){const l=e[s];if(typeof l.props=="function"){if(r??(r={...n,...n.ownerState,ownerState:n.ownerState}),!l.props(r))continue}else for(const u in l.props)if(n[u]!==l.props[u]&&((i=n.ownerState)==null?void 0:i[u])!==l.props[u])continue e;typeof l.style=="function"?(r??(r={...n,...n.ownerState,ownerState:n.ownerState}),t.push(l.style(r))):t.push(l.style)}return t}function aK(n={}){const{themeId:e,defaultTheme:t=iK,rootShouldForwardProp:r=Yv,slotShouldForwardProp:i=Yv}=n;function s(u){oK(u,e,t)}return(u,d={})=>{Z8(u,$=>$.filter(W=>W!==rc));const{name:h,slot:m,skipVariantsResolver:g,skipSx:_,overridesResolver:T=sK(dK(m)),...I}=d,R=g!==void 0?g:m&&m!=="Root"&&m!=="root"||!1,A=_||!1;let V=Yv;m==="Root"||m==="root"?V=r:m?V=i:cK(u)&&(V=void 0);const M=X8(u,{shouldForwardProp:V,label:lK(),...I}),L=$=>{if(typeof $=="function"&&$.__emotion_real!==$)return function(D){return Nm(D,$)};if(Is($)){const W=sD($);return W.variants?function(b){return Nm(b,W)}:W.style}return $},B=(...$)=>{const W=[],D=$.map(L),b=[];if(W.push(s),h&&T&&b.push(function(k){var me,oe;const X=(oe=(me=k.theme.components)==null?void 0:me[h])==null?void 0:oe.styleOverrides;if(!X)return null;const F={};for(const Z in X)F[Z]=Nm(k,X[Z]);return T(k,F)}),h&&!R&&b.push(function(k){var F,me;const O=k.theme,X=(me=(F=O==null?void 0:O.components)==null?void 0:F[h])==null?void 0:me.variants;return X?oD(k,X):null}),A||b.push(rc),Array.isArray(D[0])){const x=D.shift(),k=new Array(W.length).fill(""),O=new Array(b.length).fill("");let X;X=[...k,...x,...O],X.raw=[...k,...x.raw,...O],W.unshift(X)}const C=[...W,...D,...b],E=M(...C);return u.muiName&&(E.muiName=u.muiName),E};return M.withConfig&&(B.withConfig=M.withConfig),B}}function lK(n,e){return void 0}function uK(n){for(const e in n)return!1;return!0}function cK(n){return typeof n=="string"&&n.charCodeAt(0)>96}function dK(n){return n&&n.charAt(0).toLowerCase()+n.slice(1)}function SI(n,e=0,t=1){return FN(n,e,t)}function hK(n){n=n.slice(1);const e=new RegExp(`.{1,${n.length>=6?2:1}}`,"g");let t=n.match(e);return t&&t[0].length===1&&(t=t.map(r=>r+r)),t?`rgb${t.length===4?"a":""}(${t.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function Ho(n){if(n.type)return n;if(n.charAt(0)==="#")return Ho(hK(n));const e=n.indexOf("("),t=n.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(t))throw new Error(ll(9,n));let r=n.substring(e+1,n.length-1),i;if(t==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(ll(10,i))}else r=r.split(",");return r=r.map(s=>parseFloat(s)),{type:t,values:r,colorSpace:i}}const fK=n=>{const e=Ho(n);return e.values.slice(0,3).map((t,r)=>e.type.includes("hsl")&&r!==0?`${t}%`:t).join(" ")},Jd=(n,e)=>{try{return fK(n)}catch{return n}};function My(n){const{type:e,colorSpace:t}=n;let{values:r}=n;return e.includes("rgb")?r=r.map((i,s)=>s<3?parseInt(i,10):i):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${t} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function aD(n){n=Ho(n);const{values:e}=n,t=e[0],r=e[1]/100,i=e[2]/100,s=r*Math.min(i,1-i),l=(h,m=(h+t/30)%12)=>i-s*Math.max(Math.min(m-3,9-m,1),-1);let u="rgb";const d=[Math.round(l(0)*255),Math.round(l(8)*255),Math.round(l(4)*255)];return n.type==="hsla"&&(u+="a",d.push(e[3])),My({type:u,values:d})}function cE(n){n=Ho(n);let e=n.type==="hsl"||n.type==="hsla"?Ho(aD(n)).values:n.values;return e=e.map(t=>(n.type!=="color"&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function pK(n,e){const t=cE(n),r=cE(e);return(Math.max(t,r)+.05)/(Math.min(t,r)+.05)}function mK(n,e){return n=Ho(n),e=SI(e),(n.type==="rgb"||n.type==="hsl")&&(n.type+="a"),n.type==="color"?n.values[3]=`/${e}`:n.values[3]=e,My(n)}function tm(n,e,t){try{return mK(n,e)}catch{return n}}function RI(n,e){if(n=Ho(n),e=SI(e),n.type.includes("hsl"))n.values[2]*=1-e;else if(n.type.includes("rgb")||n.type.includes("color"))for(let t=0;t<3;t+=1)n.values[t]*=1-e;return My(n)}function ct(n,e,t){try{return RI(n,e)}catch{return n}}function AI(n,e){if(n=Ho(n),e=SI(e),n.type.includes("hsl"))n.values[2]+=(100-n.values[2])*e;else if(n.type.includes("rgb"))for(let t=0;t<3;t+=1)n.values[t]+=(255-n.values[t])*e;else if(n.type.includes("color"))for(let t=0;t<3;t+=1)n.values[t]+=(1-n.values[t])*e;return My(n)}function dt(n,e,t){try{return AI(n,e)}catch{return n}}function gK(n,e=.15){return cE(n)>.5?RI(n,e):AI(n,e)}function nm(n,e,t){try{return gK(n,e)}catch{return n}}const yK=K.createContext(void 0);function _K(n){const{theme:e,name:t,props:r}=n;if(!e||!e.components||!e.components[t])return r;const i=e.components[t];return i.defaultProps?sE(i.defaultProps,r):!i.styleOverrides&&!i.variants?sE(i,r):r}function vK({props:n,name:e}){const t=K.useContext(yK);return _K({props:n,name:e,theme:{components:t}})}const IP={theme:void 0};function wK(n){let e,t;return function(i){let s=e;return(s===void 0||i.theme!==t)&&(IP.theme=i.theme,s=sD(n(IP)),e=s,t=i.theme),s}}function EK(n=""){function e(...r){if(!r.length)return"";const i=r[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${n?`${n}-`:""}${i}${e(...r.slice(1))})`:`, ${i}`}return(r,...i)=>`var(--${n?`${n}-`:""}${r}${e(...i)})`}const TP=(n,e,t,r=[])=>{let i=n;e.forEach((s,l)=>{l===e.length-1?Array.isArray(i)?i[Number(s)]=t:i&&typeof i=="object"&&(i[s]=t):i&&typeof i=="object"&&(i[s]||(i[s]=r.includes(s)?[]:{}),i=i[s])})},IK=(n,e,t)=>{function r(i,s=[],l=[]){Object.entries(i).forEach(([u,d])=>{(!t||t&&!t([...s,u]))&&d!=null&&(typeof d=="object"&&Object.keys(d).length>0?r(d,[...s,u],Array.isArray(d)?[...l,u]:l):e([...s,u],d,l))})}r(n)},TK=(n,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>n.includes(r))||n[n.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function Jv(n,e){const{prefix:t,shouldSkipGeneratingVar:r}=e||{},i={},s={},l={};return IK(n,(u,d,h)=>{if((typeof d=="string"||typeof d=="number")&&(!r||!r(u,d))){const m=`--${t?`${t}-`:""}${u.join("-")}`,g=TK(u,d);Object.assign(i,{[m]:g}),TP(s,u,`var(${m})`,h),TP(l,u,`var(${m}, ${g})`,h)}},u=>u[0]==="vars"),{css:i,vars:s,varsWithDefaults:l}}function SK(n,e={}){const{getSelector:t=A,disableCssColorScheme:r,colorSchemeSelector:i}=e,{colorSchemes:s={},components:l,defaultColorScheme:u="light",...d}=n,{vars:h,css:m,varsWithDefaults:g}=Jv(d,e);let _=g;const T={},{[u]:I,...R}=s;if(Object.entries(R||{}).forEach(([L,B])=>{const{vars:$,css:W,varsWithDefaults:D}=Jv(B,e);_=Tr(_,D),T[L]={css:W,vars:$}}),I){const{css:L,vars:B,varsWithDefaults:$}=Jv(I,e);_=Tr(_,$),T[u]={css:L,vars:B}}function A(L,B){var W,D;let $=i;if(i==="class"&&($=".%s"),i==="data"&&($="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&($=`[${i}="%s"]`),L){if($==="media")return n.defaultColorScheme===L?":root":{[`@media (prefers-color-scheme: ${((D=(W=s[L])==null?void 0:W.palette)==null?void 0:D.mode)||L})`]:{":root":B}};if($)return n.defaultColorScheme===L?`:root, ${$.replace("%s",String(L))}`:$.replace("%s",String(L))}return":root"}return{vars:_,generateThemeVars:()=>{let L={...h};return Object.entries(T).forEach(([,{vars:B}])=>{L=Tr(L,B)}),L},generateStyleSheets:()=>{var b,C;const L=[],B=n.defaultColorScheme||"light";function $(E,x){Object.keys(x).length&&L.push(typeof E=="string"?{[E]:{...x}}:E)}$(t(void 0,{...m}),m);const{[B]:W,...D}=T;if(W){const{css:E}=W,x=(C=(b=s[B])==null?void 0:b.palette)==null?void 0:C.mode,k=!r&&x?{colorScheme:x,...E}:{...E};$(t(B,{...k}),k)}return Object.entries(D).forEach(([E,{css:x}])=>{var X,F;const k=(F=(X=s[E])==null?void 0:X.palette)==null?void 0:F.mode,O=!r&&k?{colorScheme:k,...x}:{...x};$(t(E,{...O}),O)}),L}}}function RK(n){return function(t){return n==="media"?`@media (prefers-color-scheme: ${t})`:n?n.startsWith("data-")&&!n.includes("%s")?`[${n}="${t}"] &`:n==="class"?`.${t} &`:n==="data"?`[data-${t}] &`:`${n.replace("%s",t)} &`:"&"}}const Wh={black:"#000",white:"#fff"},AK={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},du={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},hu={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},$d={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},fu={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},pu={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},mu={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function lD(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Wh.white,default:Wh.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const bK=lD();function uD(){return{text:{primary:Wh.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Wh.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const SP=uD();function RP(n,e,t,r){const i=r.light||r,s=r.dark||r*1.5;n[e]||(n.hasOwnProperty(t)?n[e]=n[t]:e==="light"?n.light=AI(n.main,i):e==="dark"&&(n.dark=RI(n.main,s)))}function PK(n="light"){return n==="dark"?{main:fu[200],light:fu[50],dark:fu[400]}:{main:fu[700],light:fu[400],dark:fu[800]}}function CK(n="light"){return n==="dark"?{main:du[200],light:du[50],dark:du[400]}:{main:du[500],light:du[300],dark:du[700]}}function kK(n="light"){return n==="dark"?{main:hu[500],light:hu[300],dark:hu[700]}:{main:hu[700],light:hu[400],dark:hu[800]}}function xK(n="light"){return n==="dark"?{main:pu[400],light:pu[300],dark:pu[700]}:{main:pu[700],light:pu[500],dark:pu[900]}}function OK(n="light"){return n==="dark"?{main:mu[400],light:mu[300],dark:mu[700]}:{main:mu[800],light:mu[500],dark:mu[900]}}function NK(n="light"){return n==="dark"?{main:$d[400],light:$d[300],dark:$d[700]}:{main:"#ed6c02",light:$d[500],dark:$d[900]}}function bI(n){const{mode:e="light",contrastThreshold:t=3,tonalOffset:r=.2,...i}=n,s=n.primary||PK(e),l=n.secondary||CK(e),u=n.error||kK(e),d=n.info||xK(e),h=n.success||OK(e),m=n.warning||NK(e);function g(R){return pK(R,SP.text.primary)>=t?SP.text.primary:bK.text.primary}const _=({color:R,name:A,mainShade:V=500,lightShade:M=300,darkShade:L=700})=>{if(R={...R},!R.main&&R[V]&&(R.main=R[V]),!R.hasOwnProperty("main"))throw new Error(ll(11,A?` (${A})`:"",V));if(typeof R.main!="string")throw new Error(ll(12,A?` (${A})`:"",JSON.stringify(R.main)));return RP(R,"light",M,r),RP(R,"dark",L,r),R.contrastText||(R.contrastText=g(R.main)),R};let T;return e==="light"?T=lD():e==="dark"&&(T=uD()),Tr({common:{...Wh},mode:e,primary:_({color:s,name:"primary"}),secondary:_({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:_({color:u,name:"error"}),warning:_({color:m,name:"warning"}),info:_({color:d,name:"info"}),success:_({color:h,name:"success"}),grey:AK,contrastThreshold:t,getContrastText:g,augmentColor:_,tonalOffset:r,...T},i)}function DK(n){const e={};return Object.entries(n).forEach(r=>{const[i,s]=r;typeof s=="object"&&(e[i]=`${s.fontStyle?`${s.fontStyle} `:""}${s.fontVariant?`${s.fontVariant} `:""}${s.fontWeight?`${s.fontWeight} `:""}${s.fontStretch?`${s.fontStretch} `:""}${s.fontSize||""}${s.lineHeight?`/${s.lineHeight} `:""}${s.fontFamily||""}`)}),e}function LK(n,e){return{toolbar:{minHeight:56,[n.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[n.up("sm")]:{minHeight:64}},...e}}function VK(n){return Math.round(n*1e5)/1e5}const AP={textTransform:"uppercase"},bP='"Roboto", "Helvetica", "Arial", sans-serif';function MK(n,e){const{fontFamily:t=bP,fontSize:r=14,fontWeightLight:i=300,fontWeightRegular:s=400,fontWeightMedium:l=500,fontWeightBold:u=700,htmlFontSize:d=16,allVariants:h,pxToRem:m,...g}=typeof e=="function"?e(n):e,_=r/14,T=m||(A=>`${A/d*_}rem`),I=(A,V,M,L,B)=>({fontFamily:t,fontWeight:A,fontSize:T(V),lineHeight:M,...t===bP?{letterSpacing:`${VK(L/V)}em`}:{},...B,...h}),R={h1:I(i,96,1.167,-1.5),h2:I(i,60,1.2,-.5),h3:I(s,48,1.167,0),h4:I(s,34,1.235,.25),h5:I(s,24,1.334,0),h6:I(l,20,1.6,.15),subtitle1:I(s,16,1.75,.15),subtitle2:I(l,14,1.57,.1),body1:I(s,16,1.5,.15),body2:I(s,14,1.43,.15),button:I(l,14,1.75,.4,AP),caption:I(s,12,1.66,.4),overline:I(s,12,2.66,1,AP),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Tr({htmlFontSize:d,pxToRem:T,fontFamily:t,fontSize:r,fontWeightLight:i,fontWeightRegular:s,fontWeightMedium:l,fontWeightBold:u,...R},g,{clone:!1})}const FK=.2,UK=.14,$K=.12;function It(...n){return[`${n[0]}px ${n[1]}px ${n[2]}px ${n[3]}px rgba(0,0,0,${FK})`,`${n[4]}px ${n[5]}px ${n[6]}px ${n[7]}px rgba(0,0,0,${UK})`,`${n[8]}px ${n[9]}px ${n[10]}px ${n[11]}px rgba(0,0,0,${$K})`].join(",")}const jK=["none",It(0,2,1,-1,0,1,1,0,0,1,3,0),It(0,3,1,-2,0,2,2,0,0,1,5,0),It(0,3,3,-2,0,3,4,0,0,1,8,0),It(0,2,4,-1,0,4,5,0,0,1,10,0),It(0,3,5,-1,0,5,8,0,0,1,14,0),It(0,3,5,-1,0,6,10,0,0,1,18,0),It(0,4,5,-2,0,7,10,1,0,2,16,1),It(0,5,5,-3,0,8,10,1,0,3,14,2),It(0,5,6,-3,0,9,12,1,0,3,16,2),It(0,6,6,-3,0,10,14,1,0,4,18,3),It(0,6,7,-4,0,11,15,1,0,4,20,3),It(0,7,8,-4,0,12,17,2,0,5,22,4),It(0,7,8,-4,0,13,19,2,0,5,24,4),It(0,7,9,-4,0,14,21,2,0,5,26,4),It(0,8,9,-5,0,15,22,2,0,6,28,5),It(0,8,10,-5,0,16,24,2,0,6,30,5),It(0,8,11,-5,0,17,26,2,0,6,32,5),It(0,9,11,-5,0,18,28,2,0,7,34,6),It(0,9,12,-6,0,19,29,2,0,7,36,6),It(0,10,13,-6,0,20,31,3,0,8,38,7),It(0,10,13,-6,0,21,33,3,0,8,40,7),It(0,10,14,-6,0,22,35,3,0,8,42,7),It(0,11,14,-7,0,23,36,3,0,9,44,8),It(0,11,15,-7,0,24,38,3,0,9,46,8)],BK={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},zK={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function PP(n){return`${Math.round(n)}ms`}function WK(n){if(!n)return 0;const e=n/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function qK(n){const e={...BK,...n.easing},t={...zK,...n.duration};return{getAutoHeightDuration:WK,create:(i=["all"],s={})=>{const{duration:l=t.standard,easing:u=e.easeInOut,delay:d=0,...h}=s;return(Array.isArray(i)?i:[i]).map(m=>`${m} ${typeof l=="string"?l:PP(l)} ${u} ${typeof d=="string"?d:PP(d)}`).join(",")},...n,easing:e,duration:t}}const HK={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function KK(n){return Is(n)||typeof n>"u"||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||Array.isArray(n)}function cD(n={}){const e={...n};function t(r){const i=Object.entries(r);for(let s=0;s<i.length;s++){const[l,u]=i[s];!KK(u)||l.startsWith("unstable_")?delete r[l]:Is(u)&&(r[l]={...u},t(r[l]))}}return t(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function dE(n={},...e){const{breakpoints:t,mixins:r={},spacing:i,palette:s={},transitions:l={},typography:u={},shape:d,...h}=n;if(n.vars)throw new Error(ll(20));const m=bI(s),g=iD(n);let _=Tr(g,{mixins:LK(g.breakpoints,r),palette:m,shadows:jK.slice(),typography:MK(m,u),transitions:qK(l),zIndex:{...HK}});return _=Tr(_,h),_=e.reduce((T,I)=>Tr(T,I),_),_.unstable_sxConfig={...Ny,...h==null?void 0:h.unstable_sxConfig},_.unstable_sx=function(I){return rc({sx:I,theme:this})},_.toRuntimeSource=cD,_}function GK(n){let e;return n<1?e=5.11916*n**2:e=4.5*Math.log(n+1)+2,Math.round(e*10)/1e3}const QK=[...Array(25)].map((n,e)=>{if(e===0)return"none";const t=GK(e);return`linear-gradient(rgba(255 255 255 / ${t}), rgba(255 255 255 / ${t}))`});function dD(n){return{inputPlaceholder:n==="dark"?.5:.42,inputUnderline:n==="dark"?.7:.42,switchTrackDisabled:n==="dark"?.2:.12,switchTrack:n==="dark"?.3:.38}}function hD(n){return n==="dark"?QK:[]}function YK(n){const{palette:e={mode:"light"},opacity:t,overlays:r,...i}=n,s=bI(e);return{palette:s,opacity:{...dD(s.mode),...t},overlays:r||hD(s.mode),...i}}function JK(n){var e;return!!n[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!n[0].match(/sxConfig$/)||n[0]==="palette"&&!!((e=n[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const XK=n=>[...[...Array(25)].map((e,t)=>`--${n?`${n}-`:""}overlays-${t}`),`--${n?`${n}-`:""}palette-AppBar-darkBg`,`--${n?`${n}-`:""}palette-AppBar-darkColor`],ZK=n=>(e,t)=>{const r=n.rootSelector||":root",i=n.colorSchemeSelector;let s=i;if(i==="class"&&(s=".%s"),i==="data"&&(s="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(s=`[${i}="%s"]`),n.defaultColorScheme===e){if(e==="dark"){const l={};return XK(n.cssVarPrefix).forEach(u=>{l[u]=t[u],delete t[u]}),s==="media"?{[r]:t,"@media (prefers-color-scheme: dark)":{[r]:l}}:s?{[s.replace("%s",e)]:l,[`${r}, ${s.replace("%s",e)}`]:t}:{[r]:{...t,...l}}}if(s&&s!=="media")return`${r}, ${s.replace("%s",String(e))}`}else if(e){if(s==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[r]:t}};if(s)return s.replace("%s",String(e))}return r};function eG(n,e){e.forEach(t=>{n[t]||(n[t]={})})}function se(n,e,t){!n[e]&&t&&(n[e]=t)}function Xd(n){return typeof n!="string"||!n.startsWith("hsl")?n:aD(n)}function vs(n,e){`${e}Channel`in n||(n[`${e}Channel`]=Jd(Xd(n[e])))}function tG(n){return typeof n=="number"?`${n}px`:typeof n=="string"||typeof n=="function"||Array.isArray(n)?n:"8px"}const Ci=n=>{try{return n()}catch{}},nG=(n="mui")=>EK(n);function Xv(n,e,t,r){if(!e)return;e=e===!0?{}:e;const i=r==="dark"?"dark":"light";if(!t){n[r]=YK({...e,palette:{mode:i,...e==null?void 0:e.palette}});return}const{palette:s,...l}=dE({...t,palette:{mode:i,...e==null?void 0:e.palette}});return n[r]={...e,palette:s,opacity:{...dD(i),...e==null?void 0:e.opacity},overlays:(e==null?void 0:e.overlays)||hD(i)},l}function rG(n={},...e){const{colorSchemes:t={light:!0},defaultColorScheme:r,disableCssColorScheme:i=!1,cssVarPrefix:s="mui",shouldSkipGeneratingVar:l=JK,colorSchemeSelector:u=t.light&&t.dark?"media":void 0,rootSelector:d=":root",...h}=n,m=Object.keys(t)[0],g=r||(t.light&&m!=="light"?"light":m),_=nG(s),{[g]:T,light:I,dark:R,...A}=t,V={...A};let M=T;if((g==="dark"&&!("dark"in t)||g==="light"&&!("light"in t))&&(M=!0),!M)throw new Error(ll(21,g));const L=Xv(V,M,h,g);I&&!V.light&&Xv(V,I,void 0,"light"),R&&!V.dark&&Xv(V,R,void 0,"dark");let B={defaultColorScheme:g,...L,cssVarPrefix:s,colorSchemeSelector:u,rootSelector:d,getCssVar:_,colorSchemes:V,font:{...DK(L.typography),...L.font},spacing:tG(h.spacing)};Object.keys(B.colorSchemes).forEach(C=>{const E=B.colorSchemes[C].palette,x=k=>{const O=k.split("-"),X=O[1],F=O[2];return _(k,E[X][F])};if(E.mode==="light"&&(se(E.common,"background","#fff"),se(E.common,"onBackground","#000")),E.mode==="dark"&&(se(E.common,"background","#000"),se(E.common,"onBackground","#fff")),eG(E,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),E.mode==="light"){se(E.Alert,"errorColor",ct(E.error.light,.6)),se(E.Alert,"infoColor",ct(E.info.light,.6)),se(E.Alert,"successColor",ct(E.success.light,.6)),se(E.Alert,"warningColor",ct(E.warning.light,.6)),se(E.Alert,"errorFilledBg",x("palette-error-main")),se(E.Alert,"infoFilledBg",x("palette-info-main")),se(E.Alert,"successFilledBg",x("palette-success-main")),se(E.Alert,"warningFilledBg",x("palette-warning-main")),se(E.Alert,"errorFilledColor",Ci(()=>E.getContrastText(E.error.main))),se(E.Alert,"infoFilledColor",Ci(()=>E.getContrastText(E.info.main))),se(E.Alert,"successFilledColor",Ci(()=>E.getContrastText(E.success.main))),se(E.Alert,"warningFilledColor",Ci(()=>E.getContrastText(E.warning.main))),se(E.Alert,"errorStandardBg",dt(E.error.light,.9)),se(E.Alert,"infoStandardBg",dt(E.info.light,.9)),se(E.Alert,"successStandardBg",dt(E.success.light,.9)),se(E.Alert,"warningStandardBg",dt(E.warning.light,.9)),se(E.Alert,"errorIconColor",x("palette-error-main")),se(E.Alert,"infoIconColor",x("palette-info-main")),se(E.Alert,"successIconColor",x("palette-success-main")),se(E.Alert,"warningIconColor",x("palette-warning-main")),se(E.AppBar,"defaultBg",x("palette-grey-100")),se(E.Avatar,"defaultBg",x("palette-grey-400")),se(E.Button,"inheritContainedBg",x("palette-grey-300")),se(E.Button,"inheritContainedHoverBg",x("palette-grey-A100")),se(E.Chip,"defaultBorder",x("palette-grey-400")),se(E.Chip,"defaultAvatarColor",x("palette-grey-700")),se(E.Chip,"defaultIconColor",x("palette-grey-700")),se(E.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),se(E.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),se(E.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),se(E.LinearProgress,"primaryBg",dt(E.primary.main,.62)),se(E.LinearProgress,"secondaryBg",dt(E.secondary.main,.62)),se(E.LinearProgress,"errorBg",dt(E.error.main,.62)),se(E.LinearProgress,"infoBg",dt(E.info.main,.62)),se(E.LinearProgress,"successBg",dt(E.success.main,.62)),se(E.LinearProgress,"warningBg",dt(E.warning.main,.62)),se(E.Skeleton,"bg",`rgba(${x("palette-text-primaryChannel")} / 0.11)`),se(E.Slider,"primaryTrack",dt(E.primary.main,.62)),se(E.Slider,"secondaryTrack",dt(E.secondary.main,.62)),se(E.Slider,"errorTrack",dt(E.error.main,.62)),se(E.Slider,"infoTrack",dt(E.info.main,.62)),se(E.Slider,"successTrack",dt(E.success.main,.62)),se(E.Slider,"warningTrack",dt(E.warning.main,.62));const k=nm(E.background.default,.8);se(E.SnackbarContent,"bg",k),se(E.SnackbarContent,"color",Ci(()=>E.getContrastText(k))),se(E.SpeedDialAction,"fabHoverBg",nm(E.background.paper,.15)),se(E.StepConnector,"border",x("palette-grey-400")),se(E.StepContent,"border",x("palette-grey-400")),se(E.Switch,"defaultColor",x("palette-common-white")),se(E.Switch,"defaultDisabledColor",x("palette-grey-100")),se(E.Switch,"primaryDisabledColor",dt(E.primary.main,.62)),se(E.Switch,"secondaryDisabledColor",dt(E.secondary.main,.62)),se(E.Switch,"errorDisabledColor",dt(E.error.main,.62)),se(E.Switch,"infoDisabledColor",dt(E.info.main,.62)),se(E.Switch,"successDisabledColor",dt(E.success.main,.62)),se(E.Switch,"warningDisabledColor",dt(E.warning.main,.62)),se(E.TableCell,"border",dt(tm(E.divider,1),.88)),se(E.Tooltip,"bg",tm(E.grey[700],.92))}if(E.mode==="dark"){se(E.Alert,"errorColor",dt(E.error.light,.6)),se(E.Alert,"infoColor",dt(E.info.light,.6)),se(E.Alert,"successColor",dt(E.success.light,.6)),se(E.Alert,"warningColor",dt(E.warning.light,.6)),se(E.Alert,"errorFilledBg",x("palette-error-dark")),se(E.Alert,"infoFilledBg",x("palette-info-dark")),se(E.Alert,"successFilledBg",x("palette-success-dark")),se(E.Alert,"warningFilledBg",x("palette-warning-dark")),se(E.Alert,"errorFilledColor",Ci(()=>E.getContrastText(E.error.dark))),se(E.Alert,"infoFilledColor",Ci(()=>E.getContrastText(E.info.dark))),se(E.Alert,"successFilledColor",Ci(()=>E.getContrastText(E.success.dark))),se(E.Alert,"warningFilledColor",Ci(()=>E.getContrastText(E.warning.dark))),se(E.Alert,"errorStandardBg",ct(E.error.light,.9)),se(E.Alert,"infoStandardBg",ct(E.info.light,.9)),se(E.Alert,"successStandardBg",ct(E.success.light,.9)),se(E.Alert,"warningStandardBg",ct(E.warning.light,.9)),se(E.Alert,"errorIconColor",x("palette-error-main")),se(E.Alert,"infoIconColor",x("palette-info-main")),se(E.Alert,"successIconColor",x("palette-success-main")),se(E.Alert,"warningIconColor",x("palette-warning-main")),se(E.AppBar,"defaultBg",x("palette-grey-900")),se(E.AppBar,"darkBg",x("palette-background-paper")),se(E.AppBar,"darkColor",x("palette-text-primary")),se(E.Avatar,"defaultBg",x("palette-grey-600")),se(E.Button,"inheritContainedBg",x("palette-grey-800")),se(E.Button,"inheritContainedHoverBg",x("palette-grey-700")),se(E.Chip,"defaultBorder",x("palette-grey-700")),se(E.Chip,"defaultAvatarColor",x("palette-grey-300")),se(E.Chip,"defaultIconColor",x("palette-grey-300")),se(E.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),se(E.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),se(E.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),se(E.LinearProgress,"primaryBg",ct(E.primary.main,.5)),se(E.LinearProgress,"secondaryBg",ct(E.secondary.main,.5)),se(E.LinearProgress,"errorBg",ct(E.error.main,.5)),se(E.LinearProgress,"infoBg",ct(E.info.main,.5)),se(E.LinearProgress,"successBg",ct(E.success.main,.5)),se(E.LinearProgress,"warningBg",ct(E.warning.main,.5)),se(E.Skeleton,"bg",`rgba(${x("palette-text-primaryChannel")} / 0.13)`),se(E.Slider,"primaryTrack",ct(E.primary.main,.5)),se(E.Slider,"secondaryTrack",ct(E.secondary.main,.5)),se(E.Slider,"errorTrack",ct(E.error.main,.5)),se(E.Slider,"infoTrack",ct(E.info.main,.5)),se(E.Slider,"successTrack",ct(E.success.main,.5)),se(E.Slider,"warningTrack",ct(E.warning.main,.5));const k=nm(E.background.default,.98);se(E.SnackbarContent,"bg",k),se(E.SnackbarContent,"color",Ci(()=>E.getContrastText(k))),se(E.SpeedDialAction,"fabHoverBg",nm(E.background.paper,.15)),se(E.StepConnector,"border",x("palette-grey-600")),se(E.StepContent,"border",x("palette-grey-600")),se(E.Switch,"defaultColor",x("palette-grey-300")),se(E.Switch,"defaultDisabledColor",x("palette-grey-600")),se(E.Switch,"primaryDisabledColor",ct(E.primary.main,.55)),se(E.Switch,"secondaryDisabledColor",ct(E.secondary.main,.55)),se(E.Switch,"errorDisabledColor",ct(E.error.main,.55)),se(E.Switch,"infoDisabledColor",ct(E.info.main,.55)),se(E.Switch,"successDisabledColor",ct(E.success.main,.55)),se(E.Switch,"warningDisabledColor",ct(E.warning.main,.55)),se(E.TableCell,"border",ct(tm(E.divider,1),.68)),se(E.Tooltip,"bg",tm(E.grey[700],.92))}vs(E.background,"default"),vs(E.background,"paper"),vs(E.common,"background"),vs(E.common,"onBackground"),vs(E,"divider"),Object.keys(E).forEach(k=>{const O=E[k];k!=="tonalOffset"&&O&&typeof O=="object"&&(O.main&&se(E[k],"mainChannel",Jd(Xd(O.main))),O.light&&se(E[k],"lightChannel",Jd(Xd(O.light))),O.dark&&se(E[k],"darkChannel",Jd(Xd(O.dark))),O.contrastText&&se(E[k],"contrastTextChannel",Jd(Xd(O.contrastText))),k==="text"&&(vs(E[k],"primary"),vs(E[k],"secondary")),k==="action"&&(O.active&&vs(E[k],"active"),O.selected&&vs(E[k],"selected")))})}),B=e.reduce((C,E)=>Tr(C,E),B);const $={prefix:s,disableCssColorScheme:i,shouldSkipGeneratingVar:l,getSelector:ZK(B)},{vars:W,generateThemeVars:D,generateStyleSheets:b}=SK(B,$);return B.vars=W,Object.entries(B.colorSchemes[B.defaultColorScheme]).forEach(([C,E])=>{B[C]=E}),B.generateThemeVars=D,B.generateStyleSheets=b,B.generateSpacing=function(){return rD(h.spacing,vI(this))},B.getColorSchemeSelector=RK(u),B.spacing=B.generateSpacing(),B.shouldSkipGeneratingVar=l,B.unstable_sxConfig={...Ny,...h==null?void 0:h.unstable_sxConfig},B.unstable_sx=function(E){return rc({sx:E,theme:this})},B.toRuntimeSource=cD,B}function CP(n,e,t){n.colorSchemes&&t&&(n.colorSchemes[e]={...t!==!0&&t,palette:bI({...t===!0?{}:t.palette,mode:e})})}function iG(n={},...e){const{palette:t,cssVariables:r=!1,colorSchemes:i=t?void 0:{light:!0},defaultColorScheme:s=t==null?void 0:t.mode,...l}=n,u=s||"light",d=i==null?void 0:i[u],h={...i,...t?{[u]:{...typeof d!="boolean"&&d,palette:t}}:void 0};if(r===!1){if(!("colorSchemes"in n))return dE(n,...e);let m=t;"palette"in n||h[u]&&(h[u]!==!0?m=h[u].palette:u==="dark"&&(m={mode:"dark"}));const g=dE({...n,palette:m},...e);return g.defaultColorScheme=u,g.colorSchemes=h,g.palette.mode==="light"&&(g.colorSchemes.light={...h.light!==!0&&h.light,palette:g.palette},CP(g,"dark",h.dark)),g.palette.mode==="dark"&&(g.colorSchemes.dark={...h.dark!==!0&&h.dark,palette:g.palette},CP(g,"light",h.light)),g}return!t&&!("light"in h)&&u==="light"&&(h.light=!0),rG({...l,colorSchemes:h,defaultColorScheme:u,...typeof r!="boolean"&&r},...e)}const sG=iG(),oG="$$material";function fD(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}const aG=n=>fD(n)&&n!=="classes",Af=aK({themeId:oG,defaultTheme:sG,rootShouldForwardProp:aG}),PI=wK;function pD(n){return vK(n)}function lG(n){return gI("MuiSvgIcon",n)}zN("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const uG=n=>{const{color:e,fontSize:t,classes:r}=n,i={root:["root",e!=="inherit"&&`color${qo(e)}`,`fontSize${qo(t)}`]};return UN(i,lG,r)},cG=Af("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.color!=="inherit"&&e[`color${qo(t.color)}`],e[`fontSize${qo(t.fontSize)}`]]}})(PI(({theme:n})=>{var e,t,r,i,s,l,u,d,h,m,g,_,T,I;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(i=(e=n.transitions)==null?void 0:e.create)==null?void 0:i.call(e,"fill",{duration:(r=(t=(n.vars??n).transitions)==null?void 0:t.duration)==null?void 0:r.shorter}),variants:[{props:R=>!R.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((l=(s=n.typography)==null?void 0:s.pxToRem)==null?void 0:l.call(s,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((d=(u=n.typography)==null?void 0:u.pxToRem)==null?void 0:d.call(u,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((m=(h=n.typography)==null?void 0:h.pxToRem)==null?void 0:m.call(h,35))||"2.1875rem"}},...Object.entries((n.vars??n).palette).filter(([,R])=>R&&R.main).map(([R])=>{var A,V;return{props:{color:R},style:{color:(V=(A=(n.vars??n).palette)==null?void 0:A[R])==null?void 0:V.main}}}),{props:{color:"action"},style:{color:(_=(g=(n.vars??n).palette)==null?void 0:g.action)==null?void 0:_.active}},{props:{color:"disabled"},style:{color:(I=(T=(n.vars??n).palette)==null?void 0:T.action)==null?void 0:I.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),hE=K.forwardRef(function(e,t){const r=pD({props:e,name:"MuiSvgIcon"}),{children:i,className:s,color:l="inherit",component:u="svg",fontSize:d="medium",htmlColor:h,inheritViewBox:m=!1,titleAccess:g,viewBox:_="0 0 24 24",...T}=r,I=K.isValidElement(i)&&i.type==="svg",R={...r,color:l,component:u,fontSize:d,instanceFontSize:e.fontSize,inheritViewBox:m,viewBox:_,hasSvgAsChild:I},A={};m||(A.viewBox=_);const V=uG(R);return j.jsxs(cG,{as:u,className:fh(V.root,s),focusable:"false",color:h,"aria-hidden":g?void 0:!0,role:g?"img":void 0,ref:t,...A,...T,...I&&i.props,ownerState:R,children:[I?i.props.children:i,g?j.jsx("title",{children:g}):null]})});hE.muiName="SvgIcon";function mD(n,e){function t(r,i){return j.jsx(hE,{"data-testid":`${e}Icon`,ref:i,...r,children:n})}return t.muiName=hE.muiName,K.memo(K.forwardRef(t))}const dG=mD(j.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star"),hG=mD(j.jsx("path",{d:"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"}),"StarBorder");function fG(n){return gI("MuiRating",n)}const jd=zN("MuiRating",["root","sizeSmall","sizeMedium","sizeLarge","readOnly","disabled","focusVisible","visuallyHidden","pristine","label","labelEmptyValueActive","icon","iconEmpty","iconFilled","iconHover","iconFocus","iconActive","decimal"]);function pG(n){const e=n.toString().split(".")[1];return e?e.length:0}function Zv(n,e){if(n==null)return n;const t=Math.round(n/e)*e;return Number(t.toFixed(pG(e)))}const mG=n=>{const{classes:e,size:t,readOnly:r,disabled:i,emptyValueFocused:s,focusVisible:l}=n,u={root:["root",`size${qo(t)}`,i&&"disabled",l&&"focusVisible",r&&"readOnly"],label:["label","pristine"],labelEmptyValue:[s&&"labelEmptyValueActive"],icon:["icon"],iconEmpty:["iconEmpty"],iconFilled:["iconFilled"],iconHover:["iconHover"],iconFocus:["iconFocus"],iconActive:["iconActive"],decimal:["decimal"],visuallyHidden:["visuallyHidden"]};return UN(u,fG,e)},gG=Af("span",{name:"MuiRating",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${jd.visuallyHidden}`]:e.visuallyHidden},e.root,e[`size${qo(t.size)}`],t.readOnly&&e.readOnly]}})(PI(({theme:n})=>({display:"inline-flex",position:"relative",fontSize:n.typography.pxToRem(24),color:"#faaf00",cursor:"pointer",textAlign:"left",width:"min-content",WebkitTapHighlightColor:"transparent",[`&.${jd.disabled}`]:{opacity:(n.vars||n).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${jd.focusVisible} .${jd.iconActive}`]:{outline:"1px solid #999"},[`& .${jd.visuallyHidden}`]:Xq,variants:[{props:{size:"small"},style:{fontSize:n.typography.pxToRem(18)}},{props:{size:"large"},style:{fontSize:n.typography.pxToRem(30)}},{props:({ownerState:e})=>e.readOnly,style:{pointerEvents:"none"}}]}))),gD=Af("label",{name:"MuiRating",slot:"Label",overridesResolver:({ownerState:n},e)=>[e.label,n.emptyValueFocused&&e.labelEmptyValueActive]})({cursor:"inherit",variants:[{props:({ownerState:n})=>n.emptyValueFocused,style:{top:0,bottom:0,position:"absolute",outline:"1px solid #999",width:"100%"}}]}),yG=Af("span",{name:"MuiRating",slot:"Icon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.icon,t.iconEmpty&&e.iconEmpty,t.iconFilled&&e.iconFilled,t.iconHover&&e.iconHover,t.iconFocus&&e.iconFocus,t.iconActive&&e.iconActive]}})(PI(({theme:n})=>({display:"flex",transition:n.transitions.create("transform",{duration:n.transitions.duration.shortest}),pointerEvents:"none",variants:[{props:({ownerState:e})=>e.iconActive,style:{transform:"scale(1.2)"}},{props:({ownerState:e})=>e.iconEmpty,style:{color:(n.vars||n).palette.action.disabled}}]}))),_G=Af("span",{name:"MuiRating",slot:"Decimal",shouldForwardProp:n=>fD(n)&&n!=="iconActive",overridesResolver:(n,e)=>{const{iconActive:t}=n;return[e.decimal,t&&e.iconActive]}})({position:"relative",variants:[{props:({iconActive:n})=>n,style:{transform:"scale(1.2)"}}]});function vG(n){const{value:e,...t}=n;return j.jsx("span",{...t})}function kP(n){const{classes:e,disabled:t,emptyIcon:r,focus:i,getLabelText:s,highlightSelectedOnly:l,hover:u,icon:d,IconContainerComponent:h,isActive:m,itemValue:g,labelProps:_,name:T,onBlur:I,onChange:R,onClick:A,onFocus:V,readOnly:M,ownerState:L,ratingValue:B,ratingValueRounded:$}=n,W=l?g===B:g<=B,D=g<=u,b=g<=i,C=g===$,E=`${T}-${BN()}`,x=j.jsx(yG,{as:h,value:g,className:fh(e.icon,W?e.iconFilled:e.iconEmpty,D&&e.iconHover,b&&e.iconFocus,m&&e.iconActive),ownerState:{...L,iconEmpty:!W,iconFilled:W,iconHover:D,iconFocus:b,iconActive:m},children:r&&!W?r:d});return M?j.jsx("span",{..._,children:x}):j.jsxs(K.Fragment,{children:[j.jsxs(gD,{ownerState:{...L,emptyValueFocused:void 0},htmlFor:E,..._,children:[x,j.jsx("span",{className:e.visuallyHidden,children:s(g)})]}),j.jsx("input",{className:e.visuallyHidden,onFocus:V,onBlur:I,onChange:R,onClick:A,disabled:t,value:g,id:E,type:"radio",name:T,checked:C})]})}const wG=j.jsx(dG,{fontSize:"inherit"}),EG=j.jsx(hG,{fontSize:"inherit"});function IG(n){return`${n||"0"} Star${n!==1?"s":""}`}const TG=K.forwardRef(function(e,t){const r=pD({name:"MuiRating",props:e}),{component:i="span",className:s,defaultValue:l=null,disabled:u=!1,emptyIcon:d=EG,emptyLabelText:h="Empty",getLabelText:m=IG,highlightSelectedOnly:g=!1,icon:_=wG,IconContainerComponent:T=vG,max:I=5,name:R,onChange:A,onChangeActive:V,onMouseLeave:M,onMouseMove:L,precision:B=1,readOnly:$=!1,size:W="medium",value:D,...b}=r,C=BN(R),[E,x]=oH({controlled:D,default:l,name:"Rating"}),k=Zv(E,B),O=eH(),[{hover:X,focus:F},me]=K.useState({hover:-1,focus:-1});let oe=k;X!==-1&&(oe=X),F!==-1&&(oe=F);const[Z,pe]=K.useState(!1),he=K.useRef(),q=aH(he,t),ie=it=>{L&&L(it);const mt=he.current,{right:en,left:Hr,width:br}=mt.getBoundingClientRect();let Pr;O?Pr=(en-it.clientX)/br:Pr=(it.clientX-Hr)/br;let qn=Zv(I*Pr+B/2,B);qn=FN(qn,B,I),me(Hn=>Hn.hover===qn&&Hn.focus===qn?Hn:{hover:qn,focus:qn}),pe(!1),V&&X!==qn&&V(it,qn)},Te=it=>{M&&M(it);const mt=-1;me({hover:mt,focus:mt}),V&&X!==mt&&V(it,mt)},ke=it=>{let mt=it.target.value===""?null:parseFloat(it.target.value);X!==-1&&(mt=X),x(mt),A&&A(it,mt)},Ve=it=>{it.clientX===0&&it.clientY===0||(me({hover:-1,focus:-1}),x(null),A&&parseFloat(it.target.value)===k&&A(it,null))},$e=it=>{iP(it.target)&&pe(!0);const mt=parseFloat(it.target.value);me(en=>({hover:en.hover,focus:mt}))},Qe=it=>{if(X!==-1)return;iP(it.target)||pe(!1);const mt=-1;me(en=>({hover:en.hover,focus:mt}))},[qe,rt]=K.useState(!1),vt={...r,component:i,defaultValue:l,disabled:u,emptyIcon:d,emptyLabelText:h,emptyValueFocused:qe,focusVisible:Z,getLabelText:m,icon:_,IconContainerComponent:T,max:I,precision:B,readOnly:$,size:W},un=mG(vt);return j.jsxs(gG,{as:i,ref:q,onMouseMove:ie,onMouseLeave:Te,className:fh(un.root,s,$&&"MuiRating-readOnly"),ownerState:vt,role:$?"img":null,"aria-label":$?m(oe):null,...b,children:[Array.from(new Array(I)).map((it,mt)=>{const en=mt+1,Hr={classes:un,disabled:u,emptyIcon:d,focus:F,getLabelText:m,highlightSelectedOnly:g,hover:X,icon:_,IconContainerComponent:T,name:C,onBlur:Qe,onChange:ke,onClick:Ve,onFocus:$e,ratingValue:oe,ratingValueRounded:k,readOnly:$,ownerState:vt},br=en===Math.ceil(oe)&&(X!==-1||F!==-1);if(B<1){const Pr=Array.from(new Array(1/B));return j.jsx(_G,{className:fh(un.decimal,br&&un.iconActive),ownerState:vt,iconActive:br,children:Pr.map((qn,Hn)=>{const ar=Zv(en-1+(Hn+1)*B,B);return j.jsx(kP,{...Hr,isActive:!1,itemValue:ar,labelProps:{style:Pr.length-1===Hn?{}:{width:ar===oe?`${(Hn+1)*B*100}%`:"0%",overflow:"hidden",position:"absolute"}}},ar)})},en)}return j.jsx(kP,{...Hr,isActive:br,itemValue:en},en)}),!$&&!u&&j.jsxs(gD,{className:fh(un.label,un.labelEmptyValue),ownerState:vt,children:[j.jsx("input",{className:un.visuallyHidden,value:"",id:`${C}-empty`,type:"radio",name:C,checked:k==null,onFocus:()=>rt(!0),onBlur:()=>rt(!1),onChange:ke}),j.jsx("span",{className:un.visuallyHidden,children:h})]})]})});var Dm={exports:{}};/*! @preserve
 * numeral.js
 * version : 2.0.6
 * author : Adam Draper
 * license : MIT
 * http://adamwdraper.github.com/Numeral-js/
 */var SG=Dm.exports,xP;function RG(){return xP||(xP=1,function(n){(function(e,t){n.exports?n.exports=t():e.numeral=t()})(SG,function(){var e,t,r="2.0.6",i={},s={},l={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},u={currentLocale:l.currentLocale,zeroFormat:l.zeroFormat,nullFormat:l.nullFormat,defaultFormat:l.defaultFormat,scalePercentBy100:l.scalePercentBy100};function d(h,m){this._input=h,this._value=m}return e=function(h){var m,g,_,T;if(e.isNumeral(h))m=h.value();else if(h===0||typeof h>"u")m=0;else if(h===null||t.isNaN(h))m=null;else if(typeof h=="string")if(u.zeroFormat&&h===u.zeroFormat)m=0;else if(u.nullFormat&&h===u.nullFormat||!h.replace(/[^0-9]+/g,"").length)m=null;else{for(g in i)if(T=typeof i[g].regexps.unformat=="function"?i[g].regexps.unformat():i[g].regexps.unformat,T&&h.match(T)){_=i[g].unformat;break}_=_||e._.stringToNumber,m=_(h)}else m=Number(h)||null;return new d(h,m)},e.version=r,e.isNumeral=function(h){return h instanceof d},e._=t={numberToFormat:function(h,m,g){var _=s[e.options.currentLocale],T=!1,I=!1,R=0,A="",V=1e12,M=1e9,L=1e6,B=1e3,$="",W=!1,D,b,C,E,x,k,O;if(h=h||0,b=Math.abs(h),e._.includes(m,"(")?(T=!0,m=m.replace(/[\(|\)]/g,"")):(e._.includes(m,"+")||e._.includes(m,"-"))&&(x=e._.includes(m,"+")?m.indexOf("+"):h<0?m.indexOf("-"):-1,m=m.replace(/[\+|\-]/g,"")),e._.includes(m,"a")&&(D=m.match(/a(k|m|b|t)?/),D=D?D[1]:!1,e._.includes(m," a")&&(A=" "),m=m.replace(new RegExp(A+"a[kmbt]?"),""),b>=V&&!D||D==="t"?(A+=_.abbreviations.trillion,h=h/V):b<V&&b>=M&&!D||D==="b"?(A+=_.abbreviations.billion,h=h/M):b<M&&b>=L&&!D||D==="m"?(A+=_.abbreviations.million,h=h/L):(b<L&&b>=B&&!D||D==="k")&&(A+=_.abbreviations.thousand,h=h/B)),e._.includes(m,"[.]")&&(I=!0,m=m.replace("[.]",".")),C=h.toString().split(".")[0],E=m.split(".")[1],k=m.indexOf(","),R=(m.split(".")[0].split(",")[0].match(/0/g)||[]).length,E?(e._.includes(E,"[")?(E=E.replace("]",""),E=E.split("["),$=e._.toFixed(h,E[0].length+E[1].length,g,E[1].length)):$=e._.toFixed(h,E.length,g),C=$.split(".")[0],e._.includes($,".")?$=_.delimiters.decimal+$.split(".")[1]:$="",I&&Number($.slice(1))===0&&($="")):C=e._.toFixed(h,0,g),A&&!D&&Number(C)>=1e3&&A!==_.abbreviations.trillion)switch(C=String(Number(C)/1e3),A){case _.abbreviations.thousand:A=_.abbreviations.million;break;case _.abbreviations.million:A=_.abbreviations.billion;break;case _.abbreviations.billion:A=_.abbreviations.trillion;break}if(e._.includes(C,"-")&&(C=C.slice(1),W=!0),C.length<R)for(var X=R-C.length;X>0;X--)C="0"+C;return k>-1&&(C=C.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+_.delimiters.thousands)),m.indexOf(".")===0&&(C=""),O=C+$+(A||""),T?O=(T&&W?"(":"")+O+(T&&W?")":""):x>=0?O=x===0?(W?"-":"+")+O:O+(W?"-":"+"):W&&(O="-"+O),O},stringToNumber:function(h){var m=s[u.currentLocale],g=h,_={thousand:3,million:6,billion:9,trillion:12},T,I,R;if(u.zeroFormat&&h===u.zeroFormat)I=0;else if(u.nullFormat&&h===u.nullFormat||!h.replace(/[^0-9]+/g,"").length)I=null;else{I=1,m.delimiters.decimal!=="."&&(h=h.replace(/\./g,"").replace(m.delimiters.decimal,"."));for(T in _)if(R=new RegExp("[^a-zA-Z]"+m.abbreviations[T]+"(?:\\)|(\\"+m.currency.symbol+")?(?:\\))?)?$"),g.match(R)){I*=Math.pow(10,_[T]);break}I*=(h.split("-").length+Math.min(h.split("(").length-1,h.split(")").length-1))%2?1:-1,h=h.replace(/[^0-9\.]+/g,""),I*=Number(h)}return I},isNaN:function(h){return typeof h=="number"&&isNaN(h)},includes:function(h,m){return h.indexOf(m)!==-1},insert:function(h,m,g){return h.slice(0,g)+m+h.slice(g)},reduce:function(h,m){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof m!="function")throw new TypeError(m+" is not a function");var g=Object(h),_=g.length>>>0,T=0,I;if(arguments.length===3)I=arguments[2];else{for(;T<_&&!(T in g);)T++;if(T>=_)throw new TypeError("Reduce of empty array with no initial value");I=g[T++]}for(;T<_;T++)T in g&&(I=m(I,g[T],T,g));return I},multiplier:function(h){var m=h.toString().split(".");return m.length<2?1:Math.pow(10,m[1].length)},correctionFactor:function(){var h=Array.prototype.slice.call(arguments);return h.reduce(function(m,g){var _=t.multiplier(g);return m>_?m:_},1)},toFixed:function(h,m,g,_){var T=h.toString().split("."),I=m-(_||0),R,A,V,M;return T.length===2?R=Math.min(Math.max(T[1].length,I),m):R=I,V=Math.pow(10,R),M=(g(h+"e+"+R)/V).toFixed(R),_>m-R&&(A=new RegExp("\\.?0{1,"+(_-(m-R))+"}$"),M=M.replace(A,"")),M}},e.options=u,e.formats=i,e.locales=s,e.locale=function(h){return h&&(u.currentLocale=h.toLowerCase()),u.currentLocale},e.localeData=function(h){if(!h)return s[u.currentLocale];if(h=h.toLowerCase(),!s[h])throw new Error("Unknown locale : "+h);return s[h]},e.reset=function(){for(var h in l)u[h]=l[h]},e.zeroFormat=function(h){u.zeroFormat=typeof h=="string"?h:null},e.nullFormat=function(h){u.nullFormat=typeof h=="string"?h:null},e.defaultFormat=function(h){u.defaultFormat=typeof h=="string"?h:"0.0"},e.register=function(h,m,g){if(m=m.toLowerCase(),this[h+"s"][m])throw new TypeError(m+" "+h+" already registered.");return this[h+"s"][m]=g,g},e.validate=function(h,m){var g,_,T,I,R,A,V,M;if(typeof h!="string"&&(h+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",h)),h=h.trim(),h.match(/^\d+$/))return!0;if(h==="")return!1;try{V=e.localeData(m)}catch{V=e.localeData(e.locale())}return T=V.currency.symbol,R=V.abbreviations,g=V.delimiters.decimal,V.delimiters.thousands==="."?_="\\.":_=V.delimiters.thousands,M=h.match(/^[^\d]+/),M!==null&&(h=h.substr(1),M[0]!==T)||(M=h.match(/[^\d]+$/),M!==null&&(h=h.slice(0,-1),M[0]!==R.thousand&&M[0]!==R.million&&M[0]!==R.billion&&M[0]!==R.trillion))?!1:(A=new RegExp(_+"{2}"),h.match(/[^\d.,]/g)?!1:(I=h.split(g),I.length>2?!1:I.length<2?!!I[0].match(/^\d+.*\d$/)&&!I[0].match(A):I[0].length===1?!!I[0].match(/^\d+$/)&&!I[0].match(A)&&!!I[1].match(/^\d+$/):!!I[0].match(/^\d+.*\d$/)&&!I[0].match(A)&&!!I[1].match(/^\d+$/)))},e.fn=d.prototype={clone:function(){return e(this)},format:function(h,m){var g=this._value,_=h||u.defaultFormat,T,I,R;if(m=m||Math.round,g===0&&u.zeroFormat!==null)I=u.zeroFormat;else if(g===null&&u.nullFormat!==null)I=u.nullFormat;else{for(T in i)if(_.match(i[T].regexps.format)){R=i[T].format;break}R=R||e._.numberToFormat,I=R(g,_,m)}return I},value:function(){return this._value},input:function(){return this._input},set:function(h){return this._value=Number(h),this},add:function(h){var m=t.correctionFactor.call(null,this._value,h);function g(_,T,I,R){return _+Math.round(m*T)}return this._value=t.reduce([this._value,h],g,0)/m,this},subtract:function(h){var m=t.correctionFactor.call(null,this._value,h);function g(_,T,I,R){return _-Math.round(m*T)}return this._value=t.reduce([h],g,Math.round(this._value*m))/m,this},multiply:function(h){function m(g,_,T,I){var R=t.correctionFactor(g,_);return Math.round(g*R)*Math.round(_*R)/Math.round(R*R)}return this._value=t.reduce([this._value,h],m,1),this},divide:function(h){function m(g,_,T,I){var R=t.correctionFactor(g,_);return Math.round(g*R)/Math.round(_*R)}return this._value=t.reduce([this._value,h],m),this},difference:function(h){return Math.abs(e(this._value).subtract(h).value())}},e.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(h){var m=h%10;return~~(h%100/10)===1?"th":m===1?"st":m===2?"nd":m===3?"rd":"th"},currency:{symbol:"$"}}),function(){e.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(h,m,g){var _=e._.includes(m," BPS")?" ":"",T;return h=h*1e4,m=m.replace(/\s?BPS/,""),T=e._.numberToFormat(h,m,g),e._.includes(T,")")?(T=T.split(""),T.splice(-1,0,_+"BPS"),T=T.join("")):T=T+_+"BPS",T},unformat:function(h){return+(e._.stringToNumber(h)*1e-4).toFixed(15)}})}(),function(){var h={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},m={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},g=h.suffixes.concat(m.suffixes.filter(function(T){return h.suffixes.indexOf(T)<0})),_=g.join("|");_="("+_.replace("B","B(?!PS)")+")",e.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(_)},format:function(T,I,R){var A,V=e._.includes(I,"ib")?m:h,M=e._.includes(I," b")||e._.includes(I," ib")?" ":"",L,B,$;for(I=I.replace(/\s?i?b/,""),L=0;L<=V.suffixes.length;L++)if(B=Math.pow(V.base,L),$=Math.pow(V.base,L+1),T===null||T===0||T>=B&&T<$){M+=V.suffixes[L],B>0&&(T=T/B);break}return A=e._.numberToFormat(T,I,R),A+M},unformat:function(T){var I=e._.stringToNumber(T),R,A;if(I){for(R=h.suffixes.length-1;R>=0;R--){if(e._.includes(T,h.suffixes[R])){A=Math.pow(h.base,R);break}if(e._.includes(T,m.suffixes[R])){A=Math.pow(m.base,R);break}}I*=A||1}return I}})}(),function(){e.register("format","currency",{regexps:{format:/(\$)/},format:function(h,m,g){var _=e.locales[e.options.currentLocale],T={before:m.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:m.match(/([\+|\-|\)|\s|\$]*)$/)[0]},I,R,A;for(m=m.replace(/\s?\$\s?/,""),I=e._.numberToFormat(h,m,g),h>=0?(T.before=T.before.replace(/[\-\(]/,""),T.after=T.after.replace(/[\-\)]/,"")):h<0&&!e._.includes(T.before,"-")&&!e._.includes(T.before,"(")&&(T.before="-"+T.before),A=0;A<T.before.length;A++)switch(R=T.before[A],R){case"$":I=e._.insert(I,_.currency.symbol,A);break;case" ":I=e._.insert(I," ",A+_.currency.symbol.length-1);break}for(A=T.after.length-1;A>=0;A--)switch(R=T.after[A],R){case"$":I=A===T.after.length-1?I+_.currency.symbol:e._.insert(I,_.currency.symbol,-(T.after.length-(1+A)));break;case" ":I=A===T.after.length-1?I+" ":e._.insert(I," ",-(T.after.length-(1+A)+_.currency.symbol.length-1));break}return I}})}(),function(){e.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(h,m,g){var _,T=typeof h=="number"&&!e._.isNaN(h)?h.toExponential():"0e+0",I=T.split("e");return m=m.replace(/e[\+|\-]{1}0/,""),_=e._.numberToFormat(Number(I[0]),m,g),_+"e"+I[1]},unformat:function(h){var m=e._.includes(h,"e+")?h.split("e+"):h.split("e-"),g=Number(m[0]),_=Number(m[1]);_=e._.includes(h,"e-")?_*=-1:_;function T(I,R,A,V){var M=e._.correctionFactor(I,R),L=I*M*(R*M)/(M*M);return L}return e._.reduce([g,Math.pow(10,_)],T,1)}})}(),function(){e.register("format","ordinal",{regexps:{format:/(o)/},format:function(h,m,g){var _=e.locales[e.options.currentLocale],T,I=e._.includes(m," o")?" ":"";return m=m.replace(/\s?o/,""),I+=_.ordinal(h),T=e._.numberToFormat(h,m,g),T+I}})}(),function(){e.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(h,m,g){var _=e._.includes(m," %")?" ":"",T;return e.options.scalePercentBy100&&(h=h*100),m=m.replace(/\s?\%/,""),T=e._.numberToFormat(h,m,g),e._.includes(T,")")?(T=T.split(""),T.splice(-1,0,_+"%"),T=T.join("")):T=T+_+"%",T},unformat:function(h){var m=e._.stringToNumber(h);return e.options.scalePercentBy100?m*.01:m}})}(),function(){e.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(h,m,g){var _=Math.floor(h/60/60),T=Math.floor((h-_*60*60)/60),I=Math.round(h-_*60*60-T*60);return _+":"+(T<10?"0"+T:T)+":"+(I<10?"0"+I:I)},unformat:function(h){var m=h.split(":"),g=0;return m.length===3?(g=g+Number(m[0])*60*60,g=g+Number(m[1])*60,g=g+Number(m[2])):m.length===2&&(g=g+Number(m[0])*60,g=g+Number(m[1])),Number(g)}})}(),e})}(Dm)),Dm.exports}var AG=RG();const bG=mE(AG),CI=({amount:n})=>{const e=bG(n).format("$0, 0.00");return j.jsx("div",{children:e})},PG="_card_container_1fhl7_1",CG="_button_1fhl7_19",kG="_rating_1fhl7_75",xG="_products_container_1fhl7_85",OG="_product_flexed_1fhl7_209",Zd={card_container:PG,button:CG,rating:kG,products_container:xG,product_flexed:OG},jr={ADD_TO_BASKET:"ADD_TO_BASKET",REMOVE_FROM_BASKET:"REMOVE_FROM_BASKET",SET_USER:"SET_USER",EMPTY_BASKET:"EMPTY_BASKET"};function Ac({product:n,flex:e,renderDesc:t,renderAdd:r}){const{image:i,title:s,id:l,rating:u,price:d,description:h}=n,[m,g]=K.useContext(Us);console.log(m);const _=()=>{g({type:jr.ADD_TO_BASKET,item:{image:i,title:s,id:l,rating:u,price:d,description:h}})};return j.jsxs("div",{className:`${Zd.card_container} ${e?Zd.product_flexed:""}`,children:[j.jsx(ci,{to:`/product/${l}`,children:j.jsx("img",{src:i,alt:s})}),j.jsxs("div",{children:[j.jsx("h3",{children:s}),t&&j.jsx("div",{style:{maxWidth:"750px"},children:h}),j.jsxs("div",{className:Zd.rating,children:[j.jsx(TG,{value:u==null?void 0:u.rate,precision:.1}),j.jsx("small",{children:u==null?void 0:u.count})]}),j.jsx("div",{children:j.jsx(CI,{amount:d})}),r&&j.jsx("button",{className:Zd.button,onClick:_,children:"add to cart"})]})]})}var NG={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function yD(n){if(typeof n=="number")return{value:n,unit:"px"};var e,t=(n.match(/^[0-9.]*/)||"").toString();t.includes(".")?e=parseFloat(t):e=parseInt(t,10);var r=(n.match(/[^0-9]*$/)||"").toString();return NG[r]?{value:e,unit:r}:(console.warn("React Spinners: ".concat(n," is not a valid css value. Defaulting to ").concat(e,"px.")),{value:e,unit:"px"})}function Bi(n){var e=yD(n);return"".concat(e.value).concat(e.unit)}var Ig=function(n,e,t){var r="react-spinners-".concat(n,"-").concat(t);if(typeof window>"u"||!window.document)return r;var i=document.createElement("style");document.head.appendChild(i);var s=i.sheet,l=`
    @keyframes `.concat(r,` {
      `).concat(e,`
    }
  `);return s&&s.insertRule(l,0),r},Tg=function(){return Tg=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Tg.apply(this,arguments)},DG=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},LG=Ig("ClipLoader","0% {transform: rotate(0deg) scale(1)} 50% {transform: rotate(180deg) scale(0.8)} 100% {transform: rotate(360deg) scale(1)}","clip");function VG(n){var e=n.loading,t=e===void 0?!0:e,r=n.color,i=r===void 0?"#000000":r,s=n.speedMultiplier,l=s===void 0?1:s,u=n.cssOverride,d=u===void 0?{}:u,h=n.size,m=h===void 0?35:h,g=DG(n,["loading","color","speedMultiplier","cssOverride","size"]),_=Tg({background:"transparent !important",width:Bi(m),height:Bi(m),borderRadius:"100%",border:"2px solid",borderTopColor:i,borderBottomColor:"transparent",borderLeftColor:i,borderRightColor:i,display:"inline-block",animation:"".concat(LG," ").concat(.75/l,"s 0s infinite linear"),animationFillMode:"both"},d);return t?K.createElement("span",Tg({style:_},g)):null}var Gt=function(){return Gt=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Gt.apply(this,arguments)},MG=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},FG=Ig("FadeLoader","50% {opacity: 0.3} 100% {opacity: 1}","fade");function UG(n){var e=n.loading,t=e===void 0?!0:e,r=n.color,i=r===void 0?"#000000":r,s=n.speedMultiplier,l=s===void 0?1:s,u=n.cssOverride,d=u===void 0?{}:u,h=n.height,m=h===void 0?15:h,g=n.width,_=g===void 0?5:g,T=n.radius,I=T===void 0?2:T,R=n.margin,A=R===void 0?2:R,V=MG(n,["loading","color","speedMultiplier","cssOverride","height","width","radius","margin"]),M=yD(A).value,L=M+18,B=L/2+L/5.5,$=Gt({display:"inherit",position:"relative",fontSize:"0",top:L,left:L,width:"".concat(L*3,"px"),height:"".concat(L*3,"px")},d),W=function(F){return{position:"absolute",width:Bi(_),height:Bi(m),margin:Bi(A),backgroundColor:i,borderRadius:Bi(I),transition:"2s",animationFillMode:"both",animation:"".concat(FG," ").concat(1.2/l,"s ").concat(F*.12,"s infinite ease-in-out")}},D=Gt(Gt({},W(1)),{top:"".concat(L,"px"),left:"0"}),b=Gt(Gt({},W(2)),{top:"".concat(B,"px"),left:"".concat(B,"px"),transform:"rotate(-45deg)"}),C=Gt(Gt({},W(3)),{top:"0",left:"".concat(L,"px"),transform:"rotate(90deg)"}),E=Gt(Gt({},W(4)),{top:"".concat(-1*B,"px"),left:"".concat(B,"px"),transform:"rotate(45deg)"}),x=Gt(Gt({},W(5)),{top:"".concat(-1*L,"px"),left:"0"}),k=Gt(Gt({},W(6)),{top:"".concat(-1*B,"px"),left:"".concat(-1*B,"px"),transform:"rotate(-45deg)"}),O=Gt(Gt({},W(7)),{top:"0",left:"".concat(-1*L,"px"),transform:"rotate(90deg)"}),X=Gt(Gt({},W(8)),{top:"".concat(B,"px"),left:"".concat(-1*B,"px"),transform:"rotate(45deg)"});return t?K.createElement("span",Gt({style:$},V),K.createElement("span",{style:D}),K.createElement("span",{style:b}),K.createElement("span",{style:C}),K.createElement("span",{style:E}),K.createElement("span",{style:x}),K.createElement("span",{style:k}),K.createElement("span",{style:O}),K.createElement("span",{style:X})):null}var Sg=function(){return Sg=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Sg.apply(this,arguments)},$G=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},OP=[Ig("PuffLoader","0% {transform: scale(0)} 100% {transform: scale(1.0)}","puff-1"),Ig("PuffLoader","0% {opacity: 1} 100% {opacity: 0}","puff-2")];function NP(n){var e=n.loading,t=e===void 0?!0:e,r=n.color,i=r===void 0?"#000000":r,s=n.speedMultiplier,l=s===void 0?1:s,u=n.cssOverride,d=u===void 0?{}:u,h=n.size,m=h===void 0?60:h,g=$G(n,["loading","color","speedMultiplier","cssOverride","size"]),_=Sg({display:"inherit",position:"relative",width:Bi(m),height:Bi(m)},d),T=function(I){return{position:"absolute",height:Bi(m),width:Bi(m),border:"thick solid ".concat(i),borderRadius:"50%",opacity:"1",top:"0",left:"0",animationFillMode:"both",animation:"".concat(OP[0],", ").concat(OP[1]),animationDuration:"".concat(2/l,"s"),animationIterationCount:"infinite",animationTimingFunction:"cubic-bezier(0.165, 0.84, 0.44, 1), cubic-bezier(0.3, 0.61, 0.355, 1)",animationDelay:I===1?"-1s":"0s"}};return t?K.createElement("span",Sg({style:_},g),K.createElement("span",{style:T(1)}),K.createElement("span",{style:T(2)})):null}function kI(){return j.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"50vh"},children:j.jsx(UG,{color:"#36d7b7"})})}function jG(){const[n,e]=K.useState([]),[t,r]=K.useState(!1);return K.useEffect(()=>{bt.get("https://fakestoreapi.com/products").then(i=>{e(i.data),r(!1)}).catch(i=>{console.log(i),r(!1)})},[]),j.jsx(j.Fragment,{children:t?j.jsx(kI,{}):j.jsx("section",{className:Zd.products_container,children:n==null?void 0:n.map(i=>j.jsx(Ac,{renderAdd:!0,product:i},i.id))})})}function BG(){return j.jsxs(Ic,{children:[j.jsx(gW,{}),j.jsx(EW,{}),j.jsx(jG,{})]})}const zG="_login_umvcc_1",WG="_login__container_umvcc_23",qG="_login__signInButton_umvcc_93",HG="_login__registerButton_umvcc_125",rm={login:zG,login__container:WG,login__signInButton:qG,login__registerButton:HG};function KG(){var T,I;const[n,e]=K.useState(""),[t,r]=K.useState(""),[i,s]=K.useState(""),[l,u]=K.useState({signIn:!1,signUp:!1}),[{user:d},h]=K.useContext(Us),m=Ag(),g=Go();console.log(g);const _=async R=>{R.preventDefault(),R.target.name=="signin"?(u({...l,signIn:!0}),yU(yg,n,t).then(A=>{var V;console.log(A),h({type:jr.SET_USER,user:A.user}),u({...l,signIn:!1}),m(((V=g==null?void 0:g.state)==null?void 0:V.redirect)||"/")}).catch(A=>{s(A.message)})):(u({...l,signUp:!0}),gU(yg,n,t).then(A=>{var V;h({type:jr.SET_USER,user:A.user}),u({...l,signUp:!1}),m(((V=g==null?void 0:g.state)==null?void 0:V.redirect)||"/")}).catch(A=>{s(A.message),u({...l,signUp:!1})}))};return j.jsxs("section",{className:rm.login,children:[j.jsx(ci,{to:"/",children:j.jsx("img",{src:"https://pngimg.com/uploads/amazon/amazon_PNG12.png",alt:"Amazon Logo"})}),j.jsxs("div",{className:rm.login__container,children:[j.jsx("h1",{children:"Sign In"}),((T=g==null?void 0:g.state)==null?void 0:T.msg)&&j.jsx("small",{style:{padding:"5px",textAlign:"center",color:"red",fontWeight:"bold"},children:(I=g==null?void 0:g.state)==null?void 0:I.msg}),j.jsxs("form",{action:"",children:[j.jsxs("div",{children:[j.jsx("label",{htmlFor:"email",children:"Email"}),j.jsx("input",{value:n,onChange:R=>e(R.target.value),type:"email",id:"email"}),j.jsx("input",{value:t,onChange:R=>r(R.target.value),type:"password",id:"password"})]}),j.jsx("button",{type:"submit",onClick:_,name:"signin",className:rm.login__signInButton,children:l.signIn?j.jsx(NP,{color:"#000",size:15}):"Sign In"})]}),j.jsx("p",{children:"By signing-in you agree to the AMAZONE FAKE CLONE Conditions of Use & sale. Please see out privacy notice, out cookies notice and out interest-based ads notice"}),j.jsx("button",{type:"submit",name:"signup",onClick:_,className:rm.login__registerButton,children:l.signUp?j.jsx(NP,{color:"#000",size:15}):" Create yout Amazon Account"}),i&&j.jsx("small",{style:{paddingTop:"5px",color:"red"},children:i})]})]})}const GG="_payment__header_1bab4_1",QG="_payment_1bab4_1",YG="_flex_1bab4_21",JG="_payment__card__container_1bab4_53",XG="_payment__price_1bab4_67",ZG="_payment__details_1bab4_61",e7="_loading_1bab4_97",ws={payment__header:GG,payment:QG,flex:YG,payment__card__container:JG,payment__price:XG,payment__details:ZG,loading:e7};function DP(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function LP(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?DP(Object(t),!0).forEach(function(r){_D(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):DP(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Lm(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Lm=function(e){return typeof e}:Lm=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lm(n)}function _D(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function vD(n,e){return t7(n)||n7(n,e)||r7(n,e)||i7()}function t7(n){if(Array.isArray(n))return n}function n7(n,e){var t=n&&(typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"]);if(t!=null){var r=[],i=!0,s=!1,l,u;try{for(t=t.call(n);!(i=(l=t.next()).done)&&(r.push(l.value),!(e&&r.length===e));i=!0);}catch(d){s=!0,u=d}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw u}}return r}}function r7(n,e){if(n){if(typeof n=="string")return VP(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return VP(n,e)}}function VP(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function i7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var gr=function(e,t,r){var i=!!r,s=Ke.useRef(r);Ke.useEffect(function(){s.current=r},[r]),Ke.useEffect(function(){if(!i||!e)return function(){};var l=function(){s.current&&s.current.apply(s,arguments)};return e.on(t,l),function(){e.off(t,l)}},[i,t,e,s])},fE=function(e){var t=Ke.useRef(e);return Ke.useEffect(function(){t.current=e},[e]),t.current},sc=function(e){return e!==null&&Lm(e)==="object"},s7=function(e){return sc(e)&&typeof e.then=="function"},o7=function(e){return sc(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},MP="[object Object]",a7=function n(e,t){if(!sc(e)||!sc(t))return e===t;var r=Array.isArray(e),i=Array.isArray(t);if(r!==i)return!1;var s=Object.prototype.toString.call(e)===MP,l=Object.prototype.toString.call(t)===MP;if(s!==l)return!1;if(!s&&!r)return e===t;var u=Object.keys(e),d=Object.keys(t);if(u.length!==d.length)return!1;for(var h={},m=0;m<u.length;m+=1)h[u[m]]=!0;for(var g=0;g<d.length;g+=1)h[d[g]]=!0;var _=Object.keys(h);if(_.length!==u.length)return!1;var T=e,I=t,R=function(V){return n(T[V],I[V])};return _.every(R)},wD=function(e,t,r){return sc(e)?Object.keys(e).reduce(function(i,s){var l=!sc(t)||!a7(e[s],t[s]);return r.includes(s)?(l&&console.warn("Unsupported prop change: options.".concat(s," is not a mutable property.")),i):l?LP(LP({},i||{}),{},_D({},s,e[s])):i},null):null},ED="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",FP=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ED;if(e===null||o7(e))return e;throw new Error(t)},l7=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ED;if(s7(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(i){return FP(i,t)})};var r=FP(e,t);return r===null?{tag:"empty"}:{tag:"sync",stripe:r}},u7=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"3.3.0"}),e.registerAppInfo({name:"react-stripe-js",version:"3.3.0",url:"https://stripe.com/docs/stripe-js/react"}))},Fy=Ke.createContext(null);Fy.displayName="ElementsContext";var ID=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},TD=function(e){var t=e.stripe,r=e.options,i=e.children,s=Ke.useMemo(function(){return l7(t)},[t]),l=Ke.useState(function(){return{stripe:s.tag==="sync"?s.stripe:null,elements:s.tag==="sync"?s.stripe.elements(r):null}}),u=vD(l,2),d=u[0],h=u[1];Ke.useEffect(function(){var _=!0,T=function(R){h(function(A){return A.stripe?A:{stripe:R,elements:R.elements(r)}})};return s.tag==="async"&&!d.stripe?s.stripePromise.then(function(I){I&&_&&T(I)}):s.tag==="sync"&&!d.stripe&&T(s.stripe),function(){_=!1}},[s,d,r]);var m=fE(t);Ke.useEffect(function(){m!==null&&m!==t&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[m,t]);var g=fE(r);return Ke.useEffect(function(){if(d.elements){var _=wD(r,g,["clientSecret","fonts"]);_&&d.elements.update(_)}},[r,g,d.elements]),Ke.useEffect(function(){u7(d.stripe)},[d.stripe]),Ke.createElement(Fy.Provider,{value:d},i)};TD.propTypes={stripe:kt.any,options:kt.object};var c7=function(e){var t=Ke.useContext(Fy);return ID(t,e)},d7=function(){var e=c7("calls useElements()"),t=e.elements;return t};kt.func.isRequired;var SD=Ke.createContext(null);SD.displayName="CheckoutSdkContext";var h7=function(e,t){if(!e)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CheckoutProvider> provider."));return e},f7=Ke.createContext(null);f7.displayName="CheckoutContext";kt.any,kt.shape({clientSecret:kt.string.isRequired,elementsOptions:kt.object}).isRequired;var pE=function(e){var t=Ke.useContext(SD),r=Ke.useContext(Fy);if(t&&r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return t?h7(t,e):ID(r,e)},p7=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Xt=function(e,t){var r="".concat(p7(e),"Element"),i=function(d){var h=d.id,m=d.className,g=d.options,_=g===void 0?{}:g,T=d.onBlur,I=d.onFocus,R=d.onReady,A=d.onChange,V=d.onEscape,M=d.onClick,L=d.onLoadError,B=d.onLoaderStart,$=d.onNetworksChange,W=d.onConfirm,D=d.onCancel,b=d.onShippingAddressChange,C=d.onShippingRateChange,E=pE("mounts <".concat(r,">")),x="elements"in E?E.elements:null,k="checkoutSdk"in E?E.checkoutSdk:null,O=Ke.useState(null),X=vD(O,2),F=X[0],me=X[1],oe=Ke.useRef(null),Z=Ke.useRef(null);gr(F,"blur",T),gr(F,"focus",I),gr(F,"escape",V),gr(F,"click",M),gr(F,"loaderror",L),gr(F,"loaderstart",B),gr(F,"networkschange",$),gr(F,"confirm",W),gr(F,"cancel",D),gr(F,"shippingaddresschange",b),gr(F,"shippingratechange",C),gr(F,"change",A);var pe;R&&(e==="expressCheckout"?pe=R:pe=function(){R(F)}),gr(F,"ready",pe),Ke.useLayoutEffect(function(){if(oe.current===null&&Z.current!==null&&(x||k)){var q=null;k?q=k.createElement(e,_):x&&(q=x.create(e,_)),oe.current=q,me(q),q&&q.mount(Z.current)}},[x,k,_]);var he=fE(_);return Ke.useEffect(function(){if(oe.current){var q=wD(_,he,["paymentRequest"]);q&&"update"in oe.current&&oe.current.update(q)}},[_,he]),Ke.useLayoutEffect(function(){return function(){if(oe.current&&typeof oe.current.destroy=="function")try{oe.current.destroy(),oe.current=null}catch{}}},[]),Ke.createElement("div",{id:h,className:m,ref:Z})},s=function(d){pE("mounts <".concat(r,">"));var h=d.id,m=d.className;return Ke.createElement("div",{id:h,className:m})},l=t?s:i;return l.propTypes={id:kt.string,className:kt.string,onChange:kt.func,onBlur:kt.func,onFocus:kt.func,onReady:kt.func,onEscape:kt.func,onClick:kt.func,onLoadError:kt.func,onLoaderStart:kt.func,onNetworksChange:kt.func,onConfirm:kt.func,onCancel:kt.func,onShippingAddressChange:kt.func,onShippingRateChange:kt.func,options:kt.object},l.displayName=r,l.__elementType=e,l},Zt=typeof window>"u",m7=Ke.createContext(null);m7.displayName="EmbeddedCheckoutProviderContext";var g7=function(){var e=pE("calls useStripe()"),t=e.stripe;return t};Xt("auBankAccount",Zt);var UP=Xt("card",Zt);Xt("cardNumber",Zt);Xt("cardExpiry",Zt);Xt("cardCvc",Zt);Xt("fpxBank",Zt);Xt("iban",Zt);Xt("idealBank",Zt);Xt("p24Bank",Zt);Xt("epsBank",Zt);Xt("payment",Zt);Xt("expressCheckout",Zt);Xt("currencySelector",Zt);Xt("paymentRequestButton",Zt);Xt("linkAuthentication",Zt);Xt("address",Zt);Xt("shippingAddress",Zt);Xt("paymentMethodMessaging",Zt);Xt("affirmMessage",Zt);Xt("afterpayClearpayMessage",Zt);const y7=bt.create({baseURL:"https://amazon-api-deploy-5y37.onrender.com"});function _7(){const[{user:n,basket:e},t]=K.useContext(Us),r=e==null?void 0:e.reduce((I,R)=>R.amount+I,0),i=e.reduce((I,R)=>R.price*R.amount+I,0),[s,l]=K.useState(null),[u,d]=K.useState(!1),h=g7(),m=d7(),g=Ag(),_=I=>{var R,A;(R=I==null?void 0:I.error)!=null&&R.message?l((A=I==null?void 0:I.error)==null?void 0:A.message):l("")},T=async I=>{var R;I.preventDefault();try{d(!0),d(!0);const A=await y7({method:"POST",url:`/payment/create?total=${i*100}`});console.log(A.data);const V=(R=A.data)==null?void 0:R.clientSecret,M=await h.confirmCardPayment(V,{payment_method:{card:m.getElement(UP)}}),{paymentIntent:L}=M;console.log(L),await sN.collection("users").doc(n.uid).collection("orders").doc(L.id).set({basket:e,amount:L.amount,created:L.created}),t({type:jr.EMPTY_BASKET}),d(!1),g("/orders",{state:{msg:"you have placed new Order"}})}catch(A){console.log(A),d(!1)}};return j.jsxs(Ic,{children:[j.jsxs("div",{className:ws.payment__header,children:["Checkout (",r,") items"]}),j.jsxs("section",{className:ws.payment,children:[j.jsxs("div",{className:ws.flex,children:[j.jsx("h3",{children:"Delivery Address"}),j.jsxs("div",{children:[j.jsx("div",{children:n==null?void 0:n.email}),j.jsx("div",{children:"240 Ivor Dr"}),j.jsx("div",{children:"Smyrna, TN 37167"})]})]}),j.jsx("hr",{}),j.jsxs("div",{className:ws.flex,children:[j.jsx("h3",{children:"Review items and delivery"}),j.jsx("div",{children:e==null?void 0:e.map(I=>j.jsx(Ac,{product:I,flex:!0},I.id))})]}),j.jsx("hr",{}),j.jsxs("div",{className:ws.flex,children:[j.jsx("h3",{children:"Payment Method"}),j.jsx("div",{className:ws.payment__card__container,children:j.jsx("div",{className:ws.payment__details,children:j.jsxs("form",{onSubmit:T,children:[s&&j.jsx("small",{style:{color:"red"},children:s}),j.jsx(UP,{onChange:_}),j.jsxs("div",{className:ws.payment__price,children:[j.jsx("div",{children:j.jsxs("span",{style:{display:"flex",gap:"10px"},children:[j.jsx("p",{children:"Total Order"}),"| ",j.jsx(CI,{amount:i})]})}),j.jsx("button",{type:"submit",children:u?j.jsxs("div",{className:ws.loading,children:[j.jsx(VG,{color:"gray",size:12}),j.jsx("p",{children:"Please wait ..."})]}):"Pay Now"})]})]})})})]})]})]})}const v7="_container_qezs6_1",w7="_orders__container_qezs6_9",$P={container:v7,orders__container:w7};function E7(){const[{user:n},e]=K.useContext(Us),[t,r]=K.useState([]);return K.useEffect(()=>{n?sN.collection("users").doc(n.uid).collection("orders").orderBy("created","desc").onSnapshot(i=>{var s;console.log(i),r((s=i==null?void 0:i.docs)==null?void 0:s.map(l=>({id:l.id,data:l.data()})))}):r([])},[]),j.jsx(Ic,{children:j.jsx("section",{className:$P.container,children:j.jsxs("div",{className:$P.orders__container,children:[j.jsx("h2",{children:"Your Orders"}),(t==null?void 0:t.length)==0&&j.jsx("div",{style:{padding:"20px"},children:"you don't have orders yet."}),j.jsx("div",{children:t==null?void 0:t.map((i,s)=>{var l,u;return j.jsxs("div",{children:[j.jsx("hr",{}),j.jsxs("p",{children:["Order ID: ",i==null?void 0:i.id]}),(u=(l=i==null?void 0:i.data)==null?void 0:l.basket)==null?void 0:u.map(d=>j.jsx(Ac,{flex:!0,product:d},d.id))]},s)})})]})})})}const I7="_container_1lu6d_1",T7="_subtotal_1lu6d_23",S7="_cart__container_1lu6d_31",R7="_cart__product_1lu6d_43",A7="_btn_container_1lu6d_53",b7="_btn_1lu6d_53",xa={container:I7,subtotal:T7,cart__container:S7,cart__product:R7,btn_container:A7,btn:b7};function P7(n){return lc({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z"},child:[]}]})(n)}function C7(n){return lc({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 217.9L383 345c9.4 9.4 24.6 9.4 33.9 0 9.4-9.4 9.3-24.6 0-34L273 167c-9.1-9.1-23.7-9.3-33.1-.7L95 310.9c-4.7 4.7-7 10.9-7 17s2.3 12.3 7 17c9.4 9.4 24.6 9.4 33.9 0l127.1-127z"},child:[]}]})(n)}function k7(){const[{basket:n},e]=K.useContext(Us),t=n.reduce((s,l)=>l.price*l.amount+s,0),r=s=>{e({type:jr.ADD_TO_BASKET,item:s})},i=s=>{e({type:jr.REMOVE_FROM_BASKET,id:s})};return j.jsx(Ic,{children:j.jsxs("section",{className:xa.container,children:[j.jsxs("div",{className:xa.cart__container,children:[j.jsx("h2",{children:"Hello"}),j.jsx("h3",{children:"Your Shopping Basket"}),j.jsx("hr",{}),(n==null?void 0:n.length)===0?j.jsx("p",{children:"No items in your cart"}):n==null?void 0:n.map((s,l)=>j.jsxs("section",{className:xa.cart__product,children:[j.jsx(Ac,{product:s,renderDesc:!0,renderAdd:!1,flex:!0},s.id),j.jsxs("div",{className:xa.btn_container,children:[j.jsx("button",{className:xa.btn,onClick:()=>r(s),children:j.jsx(C7,{size:20})}),j.jsx("span",{children:s.amount}),j.jsx("button",{className:xa.btn,onClick:()=>i(s.id),children:j.jsx(P7,{size:20})})]})]}))]}),(n==null?void 0:n.length)!==0&&j.jsxs("div",{className:xa.subtotal,children:[j.jsxs("div",{children:[j.jsxs("p",{children:["Subtotal (",n==null?void 0:n.length," items)"]}),j.jsx(CI,{amount:t})]}),j.jsxs("span",{children:[j.jsx("input",{type:"checkbox"}),j.jsx("small",{children:"This order contains a gift"})]}),j.jsx(ci,{to:"/payments",children:"Continue to Check out"})]})]})})}const RD="https://fakestoreapi.com",x7="_products__container_1dzsa_1",O7={products__container:x7};function N7(){const[n,e]=K.useState([]),[t,r]=K.useState(!1),{categoryName:i}=XP();return K.useEffect(()=>{r(!0),bt.get(`${RD}/products/category/${i}`).then(s=>{e(s.data),r(!1)}).catch(s=>{console.log(s),r(!1)})},[]),j.jsx(Ic,{children:j.jsxs("section",{children:[j.jsx("h1",{style:{padding:"30px"},children:"Results"}),j.jsxs("p",{style:{padding:"30px"},children:[" Category / ",i," "]}),j.jsx("hr",{}),t?j.jsx(kI,{}):j.jsx("div",{className:O7.products__container,children:n==null?void 0:n.map(s=>j.jsx(Ac,{product:s,renderDesc:!1,renderAdd:!0},s.id))})]})})}function D7(){const{productId:n}=XP(),[e,t]=K.useState(!1),[r,i]=K.useState([]);return K.useEffect(()=>{t(!0),bt.get(`${RD}/products/${n}`).then(s=>{i(s.data),t(!1)}).catch(s=>{console.log(s),t(!1)})},[]),j.jsx(Ic,{children:e?j.jsx(kI,{}):j.jsx(Ac,{product:r,flex:!0,renderDesc:!0,renderAdd:!0})})}var L7="v3",V7=function(e){return e===3?"v3":e},AD="https://js.stripe.com",M7="".concat(AD,"/v3"),F7=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,U7=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var $7=function(e){return F7.test(e)||U7.test(e)},j7=function(){for(var e=document.querySelectorAll('script[src^="'.concat(AD,'"]')),t=0;t<e.length;t++){var r=e[t];if($7(r.src))return r}return null},jP=function(e){var t="",r=document.createElement("script");r.src="".concat(M7).concat(t);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(r),r},B7=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"5.10.0",startTime:t})},Bd=null,im=null,sm=null,z7=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}},W7=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},q7=function(e){return Bd!==null?Bd:(Bd=new Promise(function(t,r){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var i=j7();if(!(i&&e)){if(!i)i=jP(e);else if(i&&sm!==null&&im!==null){var s;i.removeEventListener("load",sm),i.removeEventListener("error",im),(s=i.parentNode)===null||s===void 0||s.removeChild(i),i=jP(e)}}sm=W7(t,r),im=z7(r),i.addEventListener("load",sm),i.addEventListener("error",im)}catch(l){r(l);return}}),Bd.catch(function(t){return Bd=null,Promise.reject(t)}))},H7=function(e,t,r){if(e===null)return null;var i=t[0],s=i.match(/^pk_test/),l=V7(e.version),u=L7;s&&l!==u&&console.warn("Stripe.js@".concat(l," was loaded on the page, but @stripe/stripe-js@").concat("5.10.0"," expected Stripe.js@").concat(u,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var d=e.apply(void 0,t);return B7(d,r),d},zd,bD=!1,PD=function(){return zd||(zd=q7(null).catch(function(e){return zd=null,Promise.reject(e)}),zd)};Promise.resolve().then(function(){return PD()}).catch(function(n){bD||console.warn(n)});var K7=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];bD=!0;var i=Date.now();return PD().then(function(s){return H7(s,t,i)})};const BP=({children:n,msg:e,redirect:t})=>{const r=Ag(),[{user:i},s]=K.useContext(Us);return K.useEffect(()=>{i||r("/auth",{state:{msg:e,redirect:t}})},[i]),n},G7=K7("pk_test_51R06q5C6PrUPVtY1QAd7WvzxH0ckTFE06xFusEqUS9WFuNWgIwBbtOsTiL6gYSFKcFafxxyKjWWnvJZXlTgcs3iK00cSrYGFFN");function Q7(){return j.jsx(tM,{basename:"/Amazon-Clone",children:j.jsxs(xV,{children:[j.jsx(To,{path:"/",element:j.jsx(BG,{})}),j.jsx(To,{path:"/auth",element:j.jsx(KG,{})}),j.jsx(To,{path:"/payments",element:j.jsx(BP,{msg:"you must log in to pay",redirect:"/payments",children:j.jsx(TD,{stripe:G7,children:j.jsx(_7,{})})})}),j.jsx(To,{path:"/orders",element:j.jsx(BP,{msg:"you must log in to access your orders",redirect:"/orders",children:j.jsx(E7,{})})}),j.jsx(To,{path:"/category/:categoryName",element:j.jsx(N7,{})}),j.jsx(To,{path:"/product/:productId",element:j.jsx(D7,{})}),j.jsx(To,{path:"/cart",element:j.jsx(k7,{})})]})})}function Y7(){const[{user:n},e]=K.useContext(Us);return K.useEffect(()=>{yg.onAuthStateChanged(t=>{t?(console.log(t),e({type:jr.SET_USER,user:t})):e({type:jr.SET_USER,user:null})})},[]),j.jsx(j.Fragment,{children:j.jsx(Q7,{})})}const J7={basket:[],user:null},X7=(n,e)=>{switch(e.type){case jr.ADD_TO_BASKET:if(n.basket.find(r=>r.id===e.item.id)){const r=n.basket.map(i=>i.id===e.item.id?{...i,amount:i.amount+1}:i);return{...n,basket:r}}else return{...n,basket:[...n.basket,{...e.item,amount:1}]};case jr.REMOVE_FROM_BASKET:return{...n,basket:n.basket.map(r=>r.id===e.id?{...r,amount:r.amount-1}:r).filter(r=>r.amount>0)};case jr.EMPTY_BASKET:return{...n,basket:[]};case jr.SET_USER:return{...n,user:e.user};default:return n}},Z7=jL.createRoot(document.getElementById("root"));Z7.render(j.jsx(K.StrictMode,{children:j.jsx(OM,{reducer:X7,initialState:J7,children:j.jsx(Y7,{})})}));
